<html>
<head>
<title>A working environment for Geospatial analysis with Docker, Python and PostgreSQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Docker、Python 和 PostgreSQL 进行地理空间分析的工作环境</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-working-environment-for-geospatial-analysis-with-docker-python-and-postgresql-670c2be58e0a?source=collection_archive---------5-----------------------#2018-01-07">https://towardsdatascience.com/a-working-environment-for-geospatial-analysis-with-docker-python-and-postgresql-670c2be58e0a?source=collection_archive---------5-----------------------#2018-01-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/c182ad5ce82de06aa60e5292850a8125.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i47ZNP39jNnmMha9adCf0g.jpeg"/></div></div></figure><div class=""/><p id="4dc8" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是我寻找一个存储、处理和可视化地理空间数据的工作环境的简短版本。它涉及到一个在本地运行的<a class="ae kw" href="https://www.postgresql.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka jc"> PostgreSQL </strong> </a>服务器，一个带有<a class="ae kw" href="http://www.gdal.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka jc"> GDAL </strong> </a>和带有<a class="ae kw" href="https://www.google.it/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwi-3f22yaLYAhWJzaQKHdK-DQUQFggnMAA&amp;url=https%3A%2F%2Fwww.python.org%2F&amp;usg=AOvVaw0QREvGsjwHKp2GtoYvs1JH" rel="noopener ugc nofollow" target="_blank"> <strong class="ka jc"> Python3 </strong> </a>用作解释器的<a class="ae kw" href="https://www.qgis.org/en/site/" rel="noopener ugc nofollow" target="_blank"><strong class="ka jc">py charm Professional</strong></a>，一个本地安装的<a class="ae kw" href="https://www.qgis.org/en/site/" rel="noopener ugc nofollow" target="_blank"><strong class="ka jc">QGIS</strong></a><strong class="ka jc"/>(非必需)。</p><h1 id="f8d0" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">目标</strong></h1><p id="4ac4" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">本文的重点是创建一个 Docker <em class="ma">映像</em>，它可以用作工作环境。它可以被认为是一种扩展的 Python 虚拟环境，我们在其中安装 Python、它的包以及作为操作系统一部分的其他库。</p><figure class="mc md me mf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mb"><img src="../Images/796d3dc21422f34b028d04d8d44a2515.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3j4BiQGon9ht3rT3Itv73Q.png"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk">My work environment on a Mac OSX. On the local host, I installed PostgreSQL and QGIS with Homebrew. For GDAL, Python3 and all its packages, I use a Docker container. PyCharm links all these pieces together under one single umbrella.</figcaption></figure><p id="c62a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这种特殊情况下，我的目标是:</p><ul class=""><li id="03f0" class="mk ml jb ka b kb kc kf kg kj mm kn mn kr mo kv mp mq mr ms bi translated">存储 PostgreSQL 数据库中的地理空间数据，并能够使用 Python 和 QGIS 进行查询；</li><li id="5a61" class="mk ml jb ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">使用 ogr2ogr 和其他 GDAL 功能，能够读取、转换和写入各种地理空间格式；</li><li id="d533" class="mk ml jb ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">能够编写 Python 代码，并在 Python shell 中进行现场测试；</li><li id="24bb" class="mk ml jb ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">用<code class="fe my mz na nb b">graph-tool</code>进行图形分析。</li></ul><h1 id="3eb0" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">参考文献</strong></h1><p id="0bc9" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">在下面由<a class="nc nd ep" href="https://medium.com/u/2f23c8eb1e49?source=post_page-----670c2be58e0a--------------------------------" rel="noopener" target="_blank"> Hamel Husain </a>撰写的精彩文章中，可以找到关于 Docker 的良好指南，以及为什么在数据科学项目中使用 Docker 是一种良好的做法。</p><div class="ip iq gp gr ir ne"><a rel="noopener follow" target="_blank" href="/how-docker-can-help-you-become-a-more-effective-data-scientist-7fc048ef91d5"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jc gy z fp nj fr fs nk fu fw ja bi translated">Docker 如何帮助您成为更高效的数据科学家</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">在过去的 5 年里，我听到了很多关于码头集装箱的传言。似乎我所有的软件工程…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">towardsdatascience.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns ix ne"/></div></div></a></div><p id="f0a0" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我的部分解决方案基于他的教程，我建议你在继续之前先阅读它，尤其是如果你不熟悉 Docker 的话。</p><p id="09e8" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以 Python 包的形式出现，但更像是 C 库的 Python 包装器。在虚拟环境中安装是一件非常令人头疼的事情，而且几乎是不可能的。</p><p id="6e13" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">编辑:<code class="fe my mz na nb b">graph-tool</code>现在在<code class="fe my mz na nb b">homebrew</code>上，这让生活变得更容易。如果想在虚拟环境中使用，一个办法是安装在系统的 Pyhton (2.7 或 3.5+)中，用<code class="fe my mz na nb b">virtualenv --systam-site-packages</code>复制系统包，创建一个虚拟环境。</p><p id="9f26" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">GDAL(地理空间数据抽象库)是一个栅格和矢量地理空间数据格式的翻译库。这是精通地理分析的工具箱中必不可少的元素。众所周知，设置起来很痛苦。</p><p id="9d4b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe my mz na nb b">homebrew</code>是 MacOS 的软件包管理器</p><p id="6f21" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">鉴于这些前提，我想我会分享我的经验，把一切放在一起。你可以在我的<a class="ae kw" href="https://github.com/duccioa/geospatial_enviroment_with_docker" rel="noopener ugc nofollow" target="_blank"> Github repo </a>里找到文件。</p><h1 id="714c" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">要求</strong></h1><p id="3730" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我假设你在安装了<code class="fe my mz na nb b"><a class="ae kw" href="https://brew.sh/" rel="noopener ugc nofollow" target="_blank">homebrew</a></code>和<code class="fe my mz na nb b"><a class="ae kw" href="https://docs.docker.com/engine/installation/" rel="noopener ugc nofollow" target="_blank">docker 17.09</a></code>的 Mac OSX 上。</p><p id="6671" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你还应该了解 Docker(你可能不会在这里，否则……)，能够使用终端，并知道 Ubuntu 外壳和<code class="fe my mz na nb b">apt-get</code>的螺母和螺栓。</p><p id="f6ba" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一个不幸的注意:只有专业版的 PyCharm 可以远程虚拟环境，因此<strong class="ka jc"> PyCharm 社区版(免费版)将无法与 Docker </strong>一起工作。</p><h1 id="4a7e" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">我们要做什么</strong></h1><p id="fe09" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">以下是本教程中的步骤:</p><ul class=""><li id="f230" class="mk ml jb ka b kb kc kf kg kj mm kn mn kr mo kv mp mq mr ms bi translated"><code class="fe my mz na nb b">brew</code>安装 PostgreSQL 和 QGIS(实际上，QGIS 并不是严格必要的，它只是一个额外的好处)</li><li id="9e46" class="mk ml jb ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">创建一个 Ubuntu 17.10 Docker <em class="ma">镜像</em>(我将用斜体书写 Docker 领域特有的术语)，用 Python3 安装一些有用的包和 GDAL 库(这一步可以定制为包含任何相关的 Python 包)。</li><li id="23c1" class="mk ml jb ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">根据上面的<em class="ma">图片</em>打开一个交互式 Docker <em class="ma">容器</em>并手动安装<code class="fe my mz na nb b">graph-tool</code>来更进一步。</li><li id="6225" class="mk ml jb ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">将结果提交给 Docker <em class="ma">映像</em>。</li><li id="9ba4" class="mk ml jb ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">设置 PyCharm Professional 使用 Docker <em class="ma">映像</em>作为解释器，并创建一个共享文件夹，以便能够从<em class="ma">映像</em>来回读取/写入数据。</li><li id="f66b" class="mk ml jb ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">用 Postgresql 连接 Python。</li></ul><p id="b166" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在<a class="ae kw" href="https://github.com/duccioa/geospatial_enviroment_with_docker" rel="noopener ugc nofollow" target="_blank">这个</a> Github 仓库中找到本教程需要的一些文件。</p><p id="f15e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有很多东西。让我们开始吧。</p><h1 id="851c" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak"> PostgreSQL 安装</strong></h1><p id="aa60" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">有了<code class="fe my mz na nb b">homebrew</code>，PostgreSQL 的安装相当容易。从系统终端:</p><pre class="mc md me mf gt nt nb nu nv aw nw bi"><span id="6eb4" class="nx ky jb nb b gy ny nz l oa ob">$ brew install postgresql</span></pre><p id="4a6c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装后，使用以下命令启动服务器:</p><pre class="mc md me mf gt nt nb nu nv aw nw bi"><span id="9724" class="nx ky jb nb b gy ny nz l oa ob">$ brew services start postgresql</span></pre><p id="4ad4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">检查状态:</p><pre class="mc md me mf gt nt nb nu nv aw nw bi"><span id="df41" class="nx ky jb nb b gy ny nz l oa ob">$ brew services list</span></pre><p id="7d41" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">停止服务器:</p><pre class="mc md me mf gt nt nb nu nv aw nw bi"><span id="1483" class="nx ky jb nb b gy ny nz l oa ob">$ brew services stop postgresql</span></pre><h1 id="b831" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">在 Docker 中创建一个 Python 环境</strong></h1><p id="36a0" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">第一步是创建一个 Docker <em class="ma">图像</em>。从 Mac OSX 终端创建一个新目录:</p><pre class="mc md me mf gt nt nb nu nv aw nw bi"><span id="fb11" class="nx ky jb nb b gy ny nz l oa ob">$ mkdir MyDockerImages</span></pre><p id="1c1a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">输入目录:</p><pre class="mc md me mf gt nt nb nu nv aw nw bi"><span id="f0df" class="nx ky jb nb b gy ny nz l oa ob">$ cd myDockerImages</span></pre><p id="6164" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建一个名为 Dockerfile 的文件:</p><pre class="mc md me mf gt nt nb nu nv aw nw bi"><span id="44f2" class="nx ky jb nb b gy ny nz l oa ob">$ touch Dockerfile</span></pre><p id="053c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将以下内容复制粘贴到<code class="fe my mz na nb b">Dockerfile</code>(解释见评论):</p><figure class="mc md me mf gt is"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="6ce6" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意目录<code class="fe my mz na nb b">/ds</code>的创建:稍后将使用它在 Docker <em class="ma">映像</em>和<em class="ma">主机</em>(您的本地计算机)之间共享数据。</p><p id="67a0" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有了这个 Docker 文件，我们现在可以构建一个 Docker <em class="ma">映像</em>:</p><pre class="mc md me mf gt nt nb nu nv aw nw bi"><span id="3fef" class="nx ky jb nb b gy ny nz l oa ob">$ docker build -t my_env -f ./Dockerfile ./</span></pre><p id="07df" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">安装</strong>T3】</p><p id="d5c2" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装<code class="fe my mz na nb b">graph-tool</code>的详细说明可以在这里找到<a class="ae kw" href="https://git.skewed.de/count0/graph-tool/wikis/Installation-instructions#debian-ubuntu" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="a0f0" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要安装的行<code class="fe my mz na nb b">graph-tool</code>可能已经包含在 Dockerfile 文件中。但是由于在安装过程中可能会要求您从 bash shell 中输入一些信息，所以我没有找到比从通过交互运行 Docker <em class="ma">映像</em>创建的 bash 中手动安装它更好的方法。</p><p id="211d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">关键步骤是:</p><ul class=""><li id="c2c0" class="mk ml jb ka b kb kc kf kg kj mm kn mn kr mo kv mp mq mr ms bi translated">添加一个. list 文件，链接到托管<code class="fe my mz na nb b">graph-tool</code>的服务器，这样<code class="fe my mz na nb b">apt-get</code>就知道在哪里寻找。</li><li id="c7b1" class="mk ml jb ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">根据安装说明中提供的公钥验证软件包。</li><li id="0f1d" class="mk ml jb ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">运行<code class="fe my mz na nb b">apt-get update</code>并安装软件包。</li></ul><p id="5d95" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用选项<code class="fe my mz na nb b">-it</code>交互运行容器:</p><pre class="mc md me mf gt nt nb nu nv aw nw bi"><span id="d975" class="nx ky jb nb b gy ny nz l oa ob">$ docker run -it my_env</span></pre><p id="2b57" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从容器内部看，Ubuntu bash 应该类似于:</p><pre class="mc md me mf gt nt nb nu nv aw nw bi"><span id="7d0c" class="nx ky jb nb b gy ny nz l oa ob">root@539265d4463b</span></pre><p id="d3b6" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意<code class="fe my mz na nb b">@</code>后面的数字，因为那是<em class="ma">容器</em>的 ID，我们将在几行中将其用作 CONTAINERID。在<em class="ma">容器</em>的 bash 中，键入:</p><figure class="mc md me mf gt is"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk">Bash script for a Ubuntu Docker container to install graph-tool.</figcaption></figure><p id="9644" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe my mz na nb b">graph-tool</code>现在已经安装好了，我们只需要提交对<em class="ma">映像</em>的更改，这样当我们关闭<em class="ma">容器</em>时它们就不会丢失:</p><pre class="mc md me mf gt nt nb nu nv aw nw bi"><span id="c7f6" class="nx ky jb nb b gy ny nz l oa ob">$ docker commit -m "My note" -a "theAuthor" CONTAINERID my_env</span></pre><h1 id="42ee" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">用 PyCharm 连接一切</strong></h1><p id="7e0a" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我的工作流程是大量的试验和错误，我经常测试短代码行，检查数据或一些 Python 元素的类型。为此，我需要一个混合的代码编辑器和交互式外壳。PyCharm 除了提供一种构建项目和文件夹的方法，还提供了一种在两者之间来回跳转的简单方法。</p><p id="2438" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将使用我们命名为“my_env”的 Docker 映像作为 PyCharm 2017 Professional 中的一个项目的解释器，以便我们可以使用我们刚刚安装的所有包和功能。<a class="ae kw" href="https://www.jetbrains.com/help/pycharm/docker.html" rel="noopener ugc nofollow" target="_blank">在这里</a>你可以找到这个话题的官方文档。</p><p id="1028" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">打开 PyCharm 并创建一个新项目。请注意，由于当前 PyCharm 的限制，此时您不能直接添加 Docker 图像作为解释器，如这里的<a class="ae kw" href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000636990-PyCharm-This-interpreter-type-does-not-support-remote-project-creation" rel="noopener ugc nofollow" target="_blank">所解释的</a>。我们需要首先使用一个系统解释器，然后改变它。我们先用系统解释器打开项目，然后进入 py charm/Preferences/Project/Project Interpreter，选择“添加远程”。</p><figure class="mc md me mf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oe"><img src="../Images/829bc8f814fb133938a45d7cf7944a33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_epLy1s7Eb4cXy1KWVgrXw.png"/></div></div></figure><p id="d345" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">选择“Docker ”,并在下图中输入缺少的信息。</p><figure class="mc md me mf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi of"><img src="../Images/6a3f34df11b42da82b081156957121f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E_a426rhOUqW2imE4y6SeQ.png"/></div></div></figure><p id="721e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后一步是创建一个链接，在<em class="ma">主机</em>(您的计算机)和 Docker <em class="ma">映像</em>之间共享数据。这将允许我们读取/保存文件，如 csv、图像、图表等。从菜单“PyCharm/Preferences/Build，Execution，Deployment/”转到 Docker 并添加一个“路径映射”。</p><figure class="mc md me mf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi og"><img src="../Images/978b5cf755304381240097bdb73c1384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GHXRt8jUW_MszuHPcipT3w.png"/></div></div></figure><p id="2e67" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建“路径映射”时，会要求您给出一个“虚拟机路径”，在我们的例子中是<code class="fe my mz na nb b">/ds</code>(参见 Docker 文件，当我们创建 Docker <em class="ma">映像</em>时)，以及一个本地路径，这是您希望用来存储数据的项目数据文件夹。</p><h1 id="d124" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">将 Python 连接到 PostgreSQL </strong></h1><p id="bdb5" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">为了从 Docker 镜像连接到<em class="ma">主机</em>上的服务器，我们将使用 Mac 特定的 DNS 名称<code class="fe my mz na nb b">docker.for.mac.localhost</code>，如这里的<a class="ae kw" href="https://stackoverflow.com/a/41562052/5276212" rel="noopener ugc nofollow" target="_blank">所解释的</a>。其实在 Python 中把连接字符串中的' localhost '替换成' docker.for.mac.localhost '就够了。下面是一个使用<code class="fe my mz na nb b">psycopg2</code>创建连接、运行简单查询并获取结果的例子:</p><figure class="mc md me mf gt is"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk">PostgreSQL connection test in Python3.6.</figcaption></figure><h1 id="1482" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">奖励课程:QGIS 安装</h1><p id="e9f9" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">对于 QGIS，我们首先需要将一些必需的包安装到系统 Python 中。从系统终端:</p><pre class="mc md me mf gt nt nb nu nv aw nw bi"><span id="e072" class="nx ky jb nb b gy ny nz l oa ob">$ pip install psycopg2 requests future jinja2 pygments</span></pre><p id="f67b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果要安装特定的支持，请检查软件包选项:</p><pre class="mc md me mf gt nt nb nu nv aw nw bi"><span id="34c6" class="nx ky jb nb b gy ny nz l oa ob">$ brew info qgis2</span></pre><p id="0a11" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装 QGIS 2.18(即将推出 3 版):</p><pre class="mc md me mf gt nt nb nu nv aw nw bi"><span id="6ddf" class="nx ky jb nb b gy ny nz l oa ob">$ brew install qgis2</span></pre><p id="ecf2" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建应用程序的符号链接，以便图标会出现在应用程序文件夹中:</p><pre class="mc md me mf gt nt nb nu nv aw nw bi"><span id="826f" class="nx ky jb nb b gy ny nz l oa ob">$ ln -s /usr/local/Cellar/qgis2/2.18.14/QGIS.app /Applications</span></pre><h1 id="928b" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">公开</h1><p id="edd4" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我与 JetBrains 的 PyCharm 团队没有工作或任何联系，我实际上是一个付费用户。</p><h1 id="23a7" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">请保持联系！</h1><p id="96db" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我很想听到你的评论，请联系:<a class="ae kw" href="https://twitter.com/Luposky" rel="noopener ugc nofollow" target="_blank"> Twitter </a>，<a class="ae kw" href="https://gist.github.com/duccioa" rel="noopener ugc nofollow" target="_blank"> Github </a>，<a class="ae kw" href="http://www.linkedin.com/in/duccio-aiazzi" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>。</p></div></div>    
</body>
</html>