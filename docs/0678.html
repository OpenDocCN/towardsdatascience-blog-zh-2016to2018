<html>
<head>
<title>Welcoming Core ML</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">欢迎核心ML</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/welcoming-core-ml-8ba325227a28?source=collection_archive---------3-----------------------#2017-06-07">https://towardsdatascience.com/welcoming-core-ml-8ba325227a28?source=collection_archive---------3-----------------------#2017-06-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/3132df341d43f8cfb3865714fd8bcee9.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*CVN6qAJuZsSKh6w2c0TQZg.png"/></div></figure><p id="5c91" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在WWDC17主题演讲之后，我的朋友Aleph和我对新的核心ML框架感到非常兴奋。然后我们开始四处玩耍，并决定分享一些我们在这里做的事情。</p><p id="6b2b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">借助<strong class="jw ir"> Core ML </strong>，您可以为您的应用提供机器学习功能，该功能可在本地运行并针对设备性能进行优化，从而最大限度地减少内存占用和功耗。</p><p id="b051" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">核心ML支持许多机器学习模型(神经网络、树集成、支持向量机和广义线性模型)。模型应该是核心ML模型格式(具有. ML model文件扩展名的模型)<em class="kt"> 1 </em>。</p><p id="e073" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在我们的例子中，我们将使用一个著名的模型<a class="ae ks" href="https://arxiv.org/abs/1409.1556" rel="noopener ugc nofollow" target="_blank"> VGG16 </a>，它用于对图像进行分类，幸运的是，它是<a class="ae ks" href="https://developer.apple.com/machine-learning/" rel="noopener ugc nofollow" target="_blank"> Core ML </a>中可用的预训练模型之一。</p><p id="e466" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">⚠️ <strong class="jw ir">重要</strong>:如果你真的想实现一个计算机视觉应用，也许你应该检查一下新的<a class="ae ks" href="https://developer.apple.com/documentation/vision" rel="noopener ugc nofollow" target="_blank">视觉框架</a>。在这篇文章中，我们想展示的是，你可以如何轻松地使用预训练模型，通过机器学习使你的应用程序更加强大。</p><h1 id="ff03" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">下载模型</h1><p id="ec1c" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">在我们的示例中，我们将使用。<em class="kt"> mlmodel </em>格式。然而，如果你在一个不同的框架中训练你的模型，比如Keras，你可以使用<a class="ae ks" href="https://pypi.python.org/pypi/coremltools" rel="noopener ugc nofollow" target="_blank"> Core ML Tools </a>将其转换成合适的格式。关于我们的教程，你可以在这里下载VGG模型<a class="ae ks" href="https://docs-assets.developer.apple.com/coreml/models/VGG16.mlmodel" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="099d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">下载完“VGG16.mlmodel”文件后，只需将它放在文件旁边，就可以将其添加到项目中。</p><h1 id="63ea" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">应用程序设置</h1><p id="e223" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">我们将在示例中创建的应用程序非常简单，因此每个人都可以跟着做。如果你想看一些不那么简单的东西，看看<a class="ae ks" href="https://github.com/alaphao" rel="noopener ugc nofollow" target="_blank"> Aleph </a>的<a class="ae ks" href="https://github.com/alaphao/CoreMLExample" rel="noopener ugc nofollow" target="_blank">这个回购</a>。</p><p id="fc8b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们的应用程序将有一个图像视图，显示要分类的图像，一个用户可以点击以选择另一张图片的栏按钮，以及一个显示模型给出的分类的标签。</p><p id="c716" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当用户点击“+”按钮时，我们呈现一个带有“库”和“相机”选项的动作表。选择其中之一后，图像拾取控制器出现。</p><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="24bd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">图像拾取器委托方法非常简单。在“didCancel”中，我们简单地称之为“dissolve()”。在“didFinishWithMediaType”中，我们从“info”字典中获取图像，并将其传递给我们的“classify(image: UIImage)”方法。</p><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><h1 id="b21d" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">预处理</h1><p id="6b20" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">首先，我们需要缩放图像，因为我们的模型接收的输入必须是224x224。调整大小后，我们需要从图像数据中创建一个“CVPixelBuffer”。“CVPixelBuffer”是我们的模型期望作为参数的类型。</p><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><h1 id="0382" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">“核心ML”部分</h1><p id="090d" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">一旦我们在“CVPixelBuffer”中有了图像数据，我们就可以将它传递给我们的模型，代码再简单不过了。</p><p id="a1af" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为了做到这一点，我们将在“viewDidLoad()”中创建我们的“VGG16”模型，并且在我们的“classify()”方法中，我们需要做的就是在我们的模型上调用“prediction()”。该方法将返回一个“VGG16Output ”,从中可以获取一个字符串形式的“classLabel”属性。</p><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><h1 id="2d9f" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">最后</h1><p id="b111" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">嗯，正如你所看到的，核心ML框架是一个非常强大和易于使用的工具，使我们的应用程序更加智能。你可以想到所有疯狂的想法，自然语言处理，计算机视觉和其他惊人的领域可以让你的应用程序做到这一点。</p><p id="4038" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果你有任何建议，请告诉我们。</p><p id="802d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">另外，如果你想分享你是如何计划在你的应用中使用Core ML的，我们很高兴听到你的想法！</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><p id="5fe8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">1参见<a class="ae ks" href="https://developer.apple.com/documentation/coreml/integrating_a_core_ml_model_into_your_app" rel="noopener ugc nofollow" target="_blank">将核心ML模型集成到您的应用中</a></p><p id="a76d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">很快会有一个关于这个的帖子！WWDC现在很疯狂，所以当我们有时间一起玩keras和Core ML时，我们肯定会在这里分享结果。</p></div></div>    
</body>
</html>