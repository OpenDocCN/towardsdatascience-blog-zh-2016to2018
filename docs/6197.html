<html>
<head>
<title>Python and Slack: A Natural Match</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 和 Slack:天生一对</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-and-slack-a-natural-match-60b136883d4d?source=collection_archive---------3-----------------------#2018-12-01">https://towardsdatascience.com/python-and-slack-a-natural-match-60b136883d4d?source=collection_archive---------3-----------------------#2018-12-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/20400eb18edab36ea0a72b6753aed574.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uLuuOyH3ni5eUjntOwsmbA.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">(<a class="ae jd" href="https://www.pexels.com/photo/light-landscape-nature-red-33041/" rel="noopener ugc nofollow" target="_blank">Source</a>)</figcaption></figure><div class=""/><div class=""><h2 id="c42f" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">如何使用 Python 以编程方式发送 Slack 消息、发布绘图和监控机器学习模型</h2></div><p id="0a81" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当你知道你能用 Python 做多少事情时，生活就会变得更加美好。当我阅读<a class="ae jd" href="https://automatetheboringstuff.com/" rel="noopener ugc nofollow" target="_blank"> <em class="lr">用 Python </em> </a> <em class="lr"> </em>自动化枯燥的东西，并看到有一些例行任务——比如任何与电子表格有关的事情——我不再需要浪费时间时，我的日常工作流程发生了第一次转变。相反，我可以花几分钟<a class="ae jd" rel="noopener" target="_blank" href="/python-is-the-perfect-tool-for-any-problem-f2ba42889a85">写一个 Python 程序</a>(好吧，一开始可能要花几个小时)，运行脚本，然后坐下来看乏味的工作自行完成。</p><p id="4d4f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">第二个转变发生在我意识到几乎任何带有 API 的服务— <a class="ae jd" href="https://medium.freecodecamp.org/what-is-an-api-in-english-please-b880a3214a82" rel="noopener ugc nofollow" target="_blank">应用编程接口</a> —都可以用 Python 操作的时候。你可以在 Spotify ( <a class="ae jd" href="https://spotipy.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Spotipy 库</a>)、Twitter(<a class="ae jd" href="https://python-twitter.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">python-Twitter</a>)、Wikipedia(<a class="ae jd" href="https://pypi.org/project/wikipedia/" rel="noopener ugc nofollow" target="_blank">Wikipedia API</a>)和 Slack(<a class="ae jd" href="https://github.com/os/slacker" rel="noopener ugc nofollow" target="_blank">Slacker</a>for Python)等应用中做的任何事情，都可以通过 Python 代码来完成。</p><blockquote class="ls lt lu"><p id="0a88" class="kv kw lr kx b ky kz kh la lb lc kk ld lv lf lg lh lw lj lk ll lx ln lo lp lq ij bi translated">这意味着您不必局限于在应用程序中与这些服务进行交互，而是可以编写代码来自动化复杂的工作流或构建新工具。</p></blockquote><p id="b41a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本文中，我们将看到如何使用<a class="ae jd" href="https://github.com/os/slacker" rel="noopener ugc nofollow" target="_blank"> Slacker Python 库</a>以编程方式与 Slack 交互。我们将能够从工作区检索任何数据，更改频道和用户的设置，发布消息，上传文件，创建应用程序，甚至实时监控机器学习结果。完整的代码可以在 GitHub 的<a class="ae jd" href="https://github.com/WillKoehrsen/Data-Analysis/blob/master/slack_interaction/Interacting%20with%20Slack.ipynb" rel="noopener ugc nofollow" target="_blank"> Jupyter 笔记本上获得。</a></p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ly"><img src="../Images/bffaead11365cdce26423545a17bdc04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DSAlqR-xpqBOz0hAt6Bbng.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Real-time monitoring of machine learning in Slack.</figcaption></figure></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="3f77" class="mk ml jg bd mm mn mo mp mq mr ms mt mu km mv kn mw kp mx kq my ks mz kt na nb bi translated">懒鬼入门</h1><p id="ea33" class="pw-post-body-paragraph kv kw jg kx b ky nc kh la lb nd kk ld le ne lg lh li nf lk ll lm ng lo lp lq ij bi translated"><a class="ae jd" href="https://github.com/os/slacker" rel="noopener ugc nofollow" target="_blank"> Slacker </a>是 Slack API 的 Python 接口。它包装了<a class="ae jd" href="https://api.slack.com/" rel="noopener ugc nofollow" target="_blank"> Slack API </a>服务(完全由 Slack 支持)，并允许我们编写 Python 代码，而不是自己格式化对 API 的请求。这意味着构建查询的时间要少得多，与 Slack 的交互也更容易。在使用 Slacker 库时,<a class="ae jd" href="https://api.slack.com/methods" rel="noopener ugc nofollow" target="_blank">Slacker API 方法文档</a>非常有用(它的文档相对较少)。无论你想在闲暇时做什么，只要你愿意做一点搜索，你都可以通过这个库来做！</p><h2 id="b3d2" class="nh ml jg bd mm ni nj dn mq nk nl dp mu le nm nn mw li no np my lm nq nr na ns bi translated">入门指南</h2><p id="4c64" class="pw-post-body-paragraph kv kw jg kx b ky nc kh la lb nd kk ld le ne lg lh li nf lk ll lm ng lo lp lq ij bi translated">首先，您需要创建一个<a class="ae jd" href="https://slack.com" rel="noopener ugc nofollow" target="_blank">松弛工作空间</a>。我假设如果你有信心编写 Python 代码，你可以自己处理这一步。我建议创建一个新的工作空间，在这里你是测试交互的管理员。下一步是获取遗留 API 令牌。如果您已登录工作区，请前往<a class="ae jd" href="https://api.slack.com/custom-integrations/legacy-tokens" rel="noopener ugc nofollow" target="_blank">此链接</a>。确保将您的令牌放在安全的地方！</p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/2cb07bcb3dbbad66417e0629a24cdb76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*9RSFkWPmCORUVKQkFk0P2Q.png"/></div></figure><p id="9b23" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用您的 API 令牌向 Slacker 进行身份验证，如下所示:</p><pre class="lz ma mb mc gt nu nv nw nx aw ny bi"><span id="5d72" class="nh ml jg nv b gy nz oa l ob oc">from slacker import Slacker</span><span id="41af" class="nh ml jg nv b gy od oa l ob oc"># Authenticate with slacker<br/>slack = Slacker(slack_api_token)</span></pre><p id="9f0a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通过打印出工作区的名称来检查您是否已连接:</p><pre class="lz ma mb mc gt nu nv nw nx aw ny bi"><span id="e943" class="nh ml jg nv b gy nz oa l ob oc"># Check for success<br/>if slack.api.test().successful:<br/>    print(<br/>        f"Connected to {slack.team.info().body['team']['name']}.")<br/>else:<br/>    print('Try Again!')</span><span id="de2f" class="nh ml jg nv b gy od oa l ob oc"><strong class="nv jh"><br/>Connected to Data Analysis.</strong></span></pre><h1 id="1311" class="mk ml jg bd mm mn oe mp mq mr of mt mu km og kn mw kp oh kq my ks oi kt na nb bi translated">与时差互动</h1><p id="4359" class="pw-post-body-paragraph kv kw jg kx b ky nc kh la lb nd kk ld le ne lg lh li nf lk ll lm ng lo lp lq ij bi translated">在 slack 中你可以做的任何事情(好的，几乎任何事情)都可以通过 Python 与 API 的接口来完成。(点击查看<a class="ae jd" href="https://api.slack.com/methods" rel="noopener ugc nofollow" target="_blank">完整的方法列表)。例如，下面是我们可以对渠道做的一切:</a></p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/a008f5b547607f4c0ac95bb99b3adc0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*DG3QU8tkTIusVVjidC6fyg.png"/></div></figure><h2 id="0fdd" class="nh ml jg bd mm ni nj dn mq nk nl dp mu le nm nn mw li no np my lm nq nr na ns bi translated">信息检索</h2><p id="6960" class="pw-post-body-paragraph kv kw jg kx b ky nc kh la lb nd kk ld le ne lg lh li nf lk ll lm ng lo lp lq ij bi translated">让我们从一些简单的数据检索开始。每次我们在<code class="fe ok ol om nv b">Slacker</code>中使用不同的函数时，我们都会得到一个<em class="lr">响应</em>对象，其中<code class="fe ok ol om nv b">body</code>保存结果(如果请求成功)。我们可以检索很多不同的信息。例如，以下是渠道和目的:</p><pre class="lz ma mb mc gt nu nv nw nx aw ny bi"><span id="f5d4" class="nh ml jg nv b gy nz oa l ob oc"># Make a request to get the channels<br/>r = slack.channels.list()<br/>channels = r.body</span><span id="bee3" class="nh ml jg nv b gy od oa l ob oc"><em class="lr"># Iterate through channels</em><br/>for c in channels['channels']:<br/>    print(f'Channel {c["name"]} Purpose: {c["purpose"]["value"]}')</span><span id="f38b" class="nh ml jg nv b gy od oa l ob oc"><strong class="nv jh"><br/>Channel general Purpose: This channel is for workspace-wide communication and announcements. All members are in this channel.</strong><br/><br/><strong class="nv jh">Channel python_content Purpose: Data Science and Python</strong><br/><br/><strong class="nv jh">Channel random Purpose: Deep philosophical discussions</strong></span><span id="5b50" class="nh ml jg nv b gy od oa l ob oc"><strong class="nv jh">Channel testing_exp Purpose: Experimental testing of interactions.</strong></span></pre><p id="1162" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们想检查用户(成员)，下面是代码和结果:</p><pre class="lz ma mb mc gt nu nv nw nx aw ny bi"><span id="a88a" class="nh ml jg nv b gy nz oa l ob oc">from IPython.display import Image</span><span id="7959" class="nh ml jg nv b gy od oa l ob oc"># Find all users<br/>users = slack.users.list().body</span><span id="da8b" class="nh ml jg nv b gy od oa l ob oc">for u in users['members']:<br/>    <em class="lr"># Print some information</em><br/>    print(f'User: {u["name"]}, Real Name: {u["real_name"]},                  <br/>            Time Zone: {u["tz_label"]}.')<br/>    print(f'Current Status: {u["profile"]["status_text"]}')<br/>    <br/>    <em class="lr"># Get image data and show</em><br/>    Image(user['profile']['image_192'])</span></pre><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi on"><img src="../Images/c3f9903bed26ef4a53f3ada6726084b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*6809Llp3KswjL-OeCN_AWA.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Users in our workspace</figcaption></figure><p id="423f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这个工作区挺寂寞的！我们可以在频道中搜索文件或消息，查看频道的历史记录，甚至查看“请勿打扰”设置:</p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oo"><img src="../Images/fd4f76ec01e9fb2e9f48ac9ab0771daf.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*3S5K6_deiHcCS-S0R4YBaw.png"/></div></div></figure><p id="a504" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">(在这种情况下，用户是指 id。我们可以找到带有<code class="fe ok ol om nv b">slack.users.get_user_id(username)</code>的用户名的用户 id。</p><h2 id="e330" class="nh ml jg bd mm ni nj dn mq nk nl dp mu le nm nn mw li no np my lm nq nr na ns bi translated">更改设置和属性</h2><p id="2fc2" class="pw-post-body-paragraph kv kw jg kx b ky nc kh la lb nd kk ld le ne lg lh li nf lk ll lm ng lo lp lq ij bi translated">我们不仅可以找到我们想要的任何信息，还可以改变属性。也许我想告诉我的团队让我一个人呆着:</p><pre class="lz ma mb mc gt nu nv nw nx aw ny bi"><span id="fa64" class="nh ml jg nv b gy nz oa l ob oc"># Set do not disturb for 2 hours<br/>slack.dnd.set_snooze(num_minutes=120)</span></pre><p id="8cb0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我还可以更改我的个人资料设置:</p><pre class="lz ma mb mc gt nu nv nw nx aw ny bi"><span id="bada" class="nh ml jg nv b gy nz oa l ob oc">slack.users.profile.set(user = 'wjk68', name = 'status_text', <br/>                        value = 'Writing some code')<br/>slack.users.profile.set(user = 'wjk68', name = 'status_emoji',<br/>                        value = ':male-technologist')</span></pre><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi op"><img src="../Images/4e0d946dd9993f6aef1e433635eeb79d.png" data-original-src="https://miro.medium.com/v2/resize:fit:378/format:webp/1*fYvzhuuTLBFk_rP4HUeSBw.png"/></div></figure><p id="29ad" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">关于表情符号的话题，你可以使用<a class="ae jd" href="https://www.webpagefx.com/tools/emoji-cheat-sheet/" rel="noopener ugc nofollow" target="_blank">表情符号代码</a>来指定你想要的图标。最简单的方法就是去 Slack，搜索你想要的表情符号，然后复制出现的代码:</p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/bf13b971285e59db4dbc7ac8988b1bc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*TPorqQS_E5tEfKUMekaxzQ.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Searching for an emoji code.</figcaption></figure><p id="d719" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">想创建一个新的频道并设定目的？两行 python 代码:</p><pre class="lz ma mb mc gt nu nv nw nx aw ny bi"><span id="bc39" class="nh ml jg nv b gy nz oa l ob oc"># Create a new channel and set purpose<br/>slack.channels.create('python_content_new')<br/>slack.channels.set_purpose('python_content_new', 'Data Science and Python')</span></pre><h1 id="d9e0" class="mk ml jg bd mm mn oe mp mq mr of mt mu km og kn mw kp oh kq my ks oi kt na nb bi translated">发布消息</h1><p id="b31d" class="pw-post-body-paragraph kv kw jg kx b ky nc kh la lb nd kk ld le ne lg lh li nf lk ll lm ng lo lp lq ij bi translated">当然，我们不只是想成为信息的被动消费者。我们要和世界对话！幸运的是，<code class="fe ok ol om nv b">Slacker</code>让我们可以轻松发布到任何频道:</p><pre class="lz ma mb mc gt nu nv nw nx aw ny bi"><span id="4d2d" class="nh ml jg nv b gy nz oa l ob oc"># Post a message<br/>slack.chat.post_message(channel='python_content',<br/>                            text='Have a great day!',<br/>                            username='Python Test',<br/>                            icon_url='http://devarea.com/wp-content/uploads/2017/11/python-300x300.png')</span></pre><figure class="lz ma mb mc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi or"><img src="../Images/2e3204846e6874e1d58f8a2d1119cf4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:432/format:webp/1*zCkiw0CqzE6Ul-kQXM3Orw.png"/></div></div></figure><p id="b3a9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们设置了<code class="fe ok ol om nv b">username</code>,那么消息将作为机器人发布。我们可以通过指定 url 或表情符号来选择图标。我们也可以用<code class="fe ok ol om nv b">&lt;@user_id&gt;</code>提到具体用户或者犯下终极之罪通知大家:</p><pre class="lz ma mb mc gt nu nv nw nx aw ny bi"><span id="7cc8" class="nh ml jg nv b gy nz oa l ob oc">slack.chat.post_message(channel='python_content',<br/>                            text='&lt;!everyone&gt; *This is not atest!*',<br/>                            username='Alert',<br/>                            icon_emoji=':female-firefighter:')</span></pre><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi os"><img src="../Images/c25bc98b1fbe554a04544700abbe4b62.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/format:webp/1*YQ_-EMp2eWF65DD1PkpW4g.png"/></div></figure><p id="be37" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">消息可以像我们想要的那样复杂。使用附件，我们可以格式化消息，甚至创建游戏！有关所有选项，请参考<a class="ae jd" href="https://api.slack.com/docs/message-attachments" rel="noopener ugc nofollow" target="_blank"> Slack API 关于格式化消息的文档</a>。</p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/8cc85c6c1fd48d7290f74e375d0a4a17.png" data-original-src="https://miro.medium.com/v2/resize:fit:856/format:webp/1*4FojC-8oXI1YVCrmqd50Rg.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Message formatting</figcaption></figure><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/d28f8c3ea9310246f6e5365b2ec25699.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*Q35rkrLGfn9ljXt6ipDC2w.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">App created via a message</figcaption></figure><p id="237c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您可以使用交互消息构建<a class="ae jd" href="https://api.slack.com/interactive-messages#building_workflows" rel="noopener ugc nofollow" target="_blank">复杂的应用程序工作流。</a></p><h2 id="9a59" class="nh ml jg bd mm ni nj dn mq nk nl dp mu le nm nn mw li no np my lm nq nr na ns bi translated">上传文件</h2><p id="49fe" class="pw-post-body-paragraph kv kw jg kx b ky nc kh la lb nd kk ld le ne lg lh li nf lk ll lm ng lo lp lq ij bi translated">上传本地文件是另一个单行程序:</p><pre class="lz ma mb mc gt nu nv nw nx aw ny bi"><span id="2d92" class="nh ml jg nv b gy nz oa l ob oc">slack.files.upload(file_='images/volcano_crater.jpg',<br/>                   channels=['random'], title='Volcano Crater',<br/>                   initial_comment='This would make a great          <br/>                                    display background')</span></pre><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/cef30e657f9daec1178e2467165e9f30.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*18Oq_PdEEW56xM27W6QobA.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Uploaded files.</figcaption></figure><p id="1dc0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们已经做了一些很酷的分析，并想与团队分享这些图，我们保存这些数字并上传:</p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/0c5a153053a2210b8b51e041e0603482.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*xn4SbHFQljvPoWNWlLWqjw.png"/></div></figure><p id="d9a2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们还可以使用 API 删除文件或消息、添加评论、创建私人聊天、邀请用户、设置提醒等等。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="8db6" class="mk ml jg bd mm mn mo mp mq mr ms mt mu km mv kn mw kp mx kq my ks mz kt na nb bi translated">监控机器学习训练</h1><p id="4495" class="pw-post-body-paragraph kv kw jg kx b ky nc kh la lb nd kk ld le ne lg lh li nf lk ll lm ng lo lp lq ij bi translated">好了，是时候认真对待一些真正的工作了。在这里，我们将发送消息来监控卷积神经网络(CNN)的训练进度。我正在使用 Keras 的<a class="ae jd" href="https://github.com/keras-team/keras/blob/master/examples/mnist_cnn.py" rel="noopener ugc nofollow" target="_blank">脚本来训练 CNN 识别 MNIST 数字。有了 Keras </a>中的自定义<a class="ae jd" href="https://keras.io/callbacks/" rel="noopener ugc nofollow" target="_blank">回调，我们可以在每个时期结束时用当前统计数据向 Slack 发送一条消息。S </a><a class="ae jd" href="http://nbviewer.jupyter.org/github/WillKoehrsen/Data-Analysis/blob/master/slack_interaction/Interacting%20with%20Slack.ipynb" rel="noopener ugc nofollow" target="_blank"> ee 笔记本完整代码</a>，但基本轮廓在下面(这是伪代码，不会太跑):</p><figure class="lz ma mb mc gt is"><div class="bz fp l di"><div class="ox oy l"/></div></figure><p id="d4ae" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，我们可以在 Slack 中获得实时深度学习更新！</p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/f5641cfb0e0edb5edbd324246b2ce353.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*Id90bRTF3N6BFsDWGbNX6w.png"/></div></figure><p id="c026" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在训练结束时，我们可以创建一些训练曲线并发布出来:</p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/4cccd44e88a8f46f4707a37cc7485bef.png" data-original-src="https://miro.medium.com/v2/resize:fit:842/format:webp/1*YT-LMCX6EatyW7QeEALyWg.png"/></div></figure><h2 id="98e3" class="nh ml jg bd mm ni nj dn mq nk nl dp mu le nm nn mw li no np my lm nq nr na ns bi translated">发布预测</h2><p id="aac9" class="pw-post-body-paragraph kv kw jg kx b ky nc kh la lb nd kk ld le ne lg lh li nf lk ll lm ng lo lp lq ij bi translated">最后，一旦我们的模型训练完毕，我们就可以发布来自测试集的预测:</p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/7f0d4ca746f8cd55ae96b5df2740ec1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:818/format:webp/1*pgX794Sy3Jk9WhIT9xQsNw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Predictions from convolutional neural network on test set.</figcaption></figure><p id="8afd" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这款做的相当不错！对于这个简单的例子，监控可能是不必要的，但是有很多用例跟踪一个模型或者发布<a class="ae jd" href="https://www.fullstackpython.com/continuous-integration.html" rel="noopener ugc nofollow" target="_blank">持续集成结果</a>。我整夜运行模型，当我不想去命令窗口查看进度时，只查看 Slack 是有用的。</p><blockquote class="ls lt lu"><p id="876a" class="kv kw lr kx b ky kz kh la lb lc kk ld lv lf lg lh lw lj lk ll lx ln lo lp lq ij bi translated">当有事情需要你注意时，自动发布到 Slack 或通知你的写作工具可以让你把注意力转移到更重要的事情上。最终，程序化的工作流减少了花费在繁琐任务上的时间和精力。</p></blockquote><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/c9800b476967e6df45bd0771f171272b.png" data-original-src="https://miro.medium.com/v2/resize:fit:454/format:webp/1*0AK_Q6UZXa5VJ-IXvcSqkw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Reduce the amount of tedium in your life with Python! <a class="ae jd" href="https://automatetheboringstuff.com/" rel="noopener ugc nofollow" target="_blank">(Book available for free)</a>.</figcaption></figure></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="12ec" class="mk ml jg bd mm mn mo mp mq mr ms mt mu km mv kn mw kp mx kq my ks mz kt na nb bi translated">结论</h1><p id="a4cb" class="pw-post-body-paragraph kv kw jg kx b ky nc kh la lb nd kk ld le ne lg lh li nf lk ll lm ng lo lp lq ij bi translated">虽然 Slack 等应用程序可以用来娱乐，但如果使用得当，它们也可以提高生产率。此外，如果我们意识到这些应用程序可以通过 Python 访问它们的 API，我们就可以通过编程来控制它们，从而提高效率。</p><p id="2cac" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本文中，我们看到了如何通过 Python 中的<code class="fe ok ol om nv b">Slacker</code>库与 Slack 交互。这个库让我们可以访问 Slack API，这意味着我们几乎可以控制工作空间的每个方面。除了其他事情，我们可以</p><ul class=""><li id="62d5" class="pd pe jg kx b ky kz lb lc le pf li pg lm ph lq pi pj pk pl bi translated">检索频道、消息和用户信息</li><li id="3c14" class="pd pe jg kx b ky pm lb pn le po li pp lm pq lq pi pj pk pl bi translated">更改和管理用户、渠道和团队设置</li><li id="ed90" class="pd pe jg kx b ky pm lb pn le po li pp lm pq lq pi pj pk pl bi translated">发布包括应用程序在内的消息</li><li id="33cc" class="pd pe jg kx b ky pm lb pn le po li pp lm pq lq pi pj pk pl bi translated">跟踪机器学习的进度并绘制结果</li></ul><p id="e9ec" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果 Slack 不是你最喜欢的应用程序(尽管它应该取代你的电子邮件)，看看 Python API 接口的<a class="ae jd" href="https://github.com/realpython/list-of-python-api-wrappers" rel="noopener ugc nofollow" target="_blank">列表。即使这个特殊的用例对你来说没有吸引力，但是我们可以使用 Python 来完成日常任务的想法是很有说服力的，因为它使我们更有效率。</a></p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><p id="9a49" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一如既往，我欢迎反馈和建设性的批评。可以通过 Twitter <a class="ae jd" href="http://twitter.com/@koehrsen_will" rel="noopener ugc nofollow" target="_blank"> @koehrsen_will </a>或者通过我的个人网站<a class="ae jd" href="https://willk.online" rel="noopener ugc nofollow" target="_blank"> willk.online </a>找到我。</p></div></div>    
</body>
</html>