<html>
<head>
<title>Data Visualization: Kickstarter projects from the most innovative US cities</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据可视化:来自最具创新力的美国城市的Kickstarter项目</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-visualization-kickstarter-projects-from-the-most-innovative-us-cities-5da870dcd9b5?source=collection_archive---------0-----------------------#2016-12-18">https://towardsdatascience.com/data-visualization-kickstarter-projects-from-the-most-innovative-us-cities-5da870dcd9b5?source=collection_archive---------0-----------------------#2016-12-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/16a6b2e4de74979e00bb0457f1bc87b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TjzN2P5jLNOuNOP98iw5gA.png"/></div></div></figure><p id="4cfa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一种结合自然语言处理、t-SNE和主成分分析的方法</p><blockquote class="kw kx ky"><p id="6bc4" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated">背景</p></blockquote><p id="aa7b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">据福布斯报道，2015年最具创新力的美国城市是:</p><p id="e0ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">加利福尼亚州圣何塞<br/>第1位；科罗拉多州博尔德<br/>第2位；加利福尼亚州旧金山<br/>第3位；科瓦利斯<br/>第4位；华盛顿州西雅图<br/>第5位；科罗拉多州科林斯堡<br/>第7位；犹他州普罗沃<br/>第8位；德克萨斯州奥斯汀<br/>第9位；佛蒙特州伯灵顿<br/>第10位；马萨诸塞州波士顿</p><p id="832b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">受到一个精心组织的关于<a class="ae ld" href="http://polygraph.cool/kickstarter/" rel="noopener ugc nofollow" target="_blank">测谎仪</a>的可视化项目的启发，我们很想知道来自上述最具创新性的美国城市的成功Kickstarter项目之间是否有任何差异。<a class="ae ld" href="https://webrobots.io/kickstarter-datasets/" rel="noopener ugc nofollow" target="_blank">数据集</a>是2016年11月在Kickstarter上报废所有可用项目得到的。</p><p id="d754" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们先来看看上述城市与美国其他城市相比表现如何。</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi le"><img src="../Images/43954229051d06a1555ad2d602bed843.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EwJ4YljQlgEkgt2DVhU6eg.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Screenshot of goal amount vs. pledged amount between innovative cities and other cities</figcaption></figure><p id="8fd8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">事实上，我们可以观察到，来自创新型城市的项目似乎比他们最初的目标承诺了更多的金额，因为可以在灰色线(斜率=1)以上找到更多的项目。</p><blockquote class="kw kx ky"><p id="d73d" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated">目标</p></blockquote><p id="3d00" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于<a class="ae ld" href="http://polygraph.cool/kickstarter/" rel="noopener ugc nofollow" target="_blank">测谎仪</a>的帮助，我们已经知道每个城市的哪些类别更受欢迎，我们很想知道创新城市的成功项目名称是否有任何差异。</p><blockquote class="kw kx ky"><p id="11cb" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated">方法</p></blockquote><p id="6038" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将使用Google开发的一种流行的自然语言处理(NLP)算法<em class="kz"> word2vec </em>来执行文本挖掘任务。由于之前我们已经简单的谈过<a class="ae ld" href="https://medium.com/@jameschen_78678/social-behavior-analytics-201-523199badba0#.i2s8pqee7" rel="noopener">方法论</a>，所以这次我们将重点讨论word2vec的实现。但是，建议在继续下一步之前先回顾一下这些概念。</p><p id="8d9a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">1…将文本语料库作为输入</p><p id="8ec8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2…构建一个词汇表</p><p id="f942" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3…学习单词的矢量表示法</p><p id="948c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4…生成单词向量作为输出</p><p id="ac76" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">5…将单词向量应用于项目标题</p><p id="d19a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">6…创建平均项目标题向量</p><p id="0aec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">7…使用t-SNE将项目标题矢量转换为2D矢量表示</p><p id="050b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">8…可视化美国顶级创新城市的结果</p><blockquote class="kw kx ky"><p id="36b3" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated">数据准备</p></blockquote><p id="879b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">1…修复放错位置的数据<br/>由于数据来自于网络剪报，有些行可能放错了位置，需要做一些调整。</p><p id="07f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2…仅包括创新的美国城市<br/>我们只想从想要的城市中选择项目，因此我们将删除其他城市。</p><p id="46a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3…清理项目名称<br/>由于项目名称将是我们将要处理的主要变量，我们需要先做一些清理工作，比如去掉标点符号。</p><blockquote class="kw kx ky"><p id="4296" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated">模特培训</p></blockquote><p id="79b4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将使用R中的<em class="kz"> rword2vec </em>包来演示模型。</p><p id="cc64" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">1…产生单词向量</p><p id="f42e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然大多数分析会删除<a class="ae ld" href="https://en.wikipedia.org/wiki/Stop_words" rel="noopener ugc nofollow" target="_blank">停用词</a>，因为它们的高频率会在分析中产生噪声，但出于比较目的，我们将保留它们。</p><pre class="lf lg lh li gt ln lo lp lq aw lr bi"><span id="0ce8" class="ls lt iq lo b gy lu lv l lw lx">library(rword2vec)</span><span id="2f09" class="ls lt iq lo b gy ly lv l lw lx">#Prepare the dataset<br/>train=text$name<br/>train=gsub("[[:punct:]]", "", train)<br/>write(train,"text_data.txt")</span><span id="43b5" class="ls lt iq lo b gy ly lv l lw lx">#Convert phrases to words<br/>word2phrase(train_file = "text_data.txt",output_file = "vec.txt")</span><span id="26b1" class="ls lt iq lo b gy ly lv l lw lx">#Input words to model<br/>model=word2vec(train_file = "vec.txt",output_file = "vec.bin",binary=1)</span><span id="94a7" class="ls lt iq lo b gy ly lv l lw lx">#Convert binary to text format<br/>bin_to_txt("vec.bin","model1text.txt")</span><span id="254c" class="ls lt iq lo b gy ly lv l lw lx">#Convert .txt to .cvs<br/>model1 &lt;- read.table("model1text.txt",fill=TRUE)<br/>write.csv(model1,"model1.csv")<br/>m1 &lt;- read.csv("model1.csv")</span></pre><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/3ea8308774e29c5c774ea8e162ac2983.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O2Ezg2uFa1usNm285D8Omg.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Screenshot of the word vectors produced</figcaption></figure><p id="4350" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还可以找到与搜索单词最接近的单词。</p><pre class="lf lg lh li gt ln lo lp lq aw lr bi"><span id="ae3c" class="ls lt iq lo b gy lu lv l lw lx">distance("vec.bin","new",num=15)<br/>distance("vec.bin","album",num=15)</span></pre><figure class="lf lg lh li gt jr gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/3454b10acdb0d3f4fec1a4ae55653068.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/format:webp/1*jRnSlaxiOxcnTMBDMnmkLg.png"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Screenshot of the top 15 closest words to “new”</figcaption></figure><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mb"><img src="../Images/ec2af37cfdd0fb7852c066ac7a699705.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*zDkpOxLbDpWQhJcPUSXO1w.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Screenshot of the top 15 closest words to “album”</figcaption></figure><p id="7bf7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2…将单词向量应用于项目标题(所有单词向量的平均值)</p><pre class="lf lg lh li gt ln lo lp lq aw lr bi"><span id="4d54" class="ls lt iq lo b gy lu lv l lw lx">s &lt;- strsplit(data$name, split = " ")<br/>new &lt;- data.frame(V1 = rep(data$id, sapply(s, length)), V2 = unlist(s))</span><span id="04cf" class="ls lt iq lo b gy ly lv l lw lx">colnames(new) &lt;- c("id","word")<br/>colnames(m1)[1] &lt;- "word"<br/>new &lt;- merge(new,m1,by="word")</span><span id="be78" class="ls lt iq lo b gy ly lv l lw lx">new2 &lt;- aggregate(V2 ~ id, new, mean)<br/>for (i in 4:102){<br/>new3 &lt;- aggregate(new[,i] ~ id, new, mean)<br/>new2 &lt;- merge (new2,new3,by="id")<br/>}</span><span id="174b" class="ls lt iq lo b gy ly lv l lw lx">colnames(new2)[1] &lt;- "id"<br/>colnames(new2)[2:101] &lt;- paste("V", 1:100, sep="")<br/>new2$id &lt;- as.factor(new2$id)<br/>write.csv(new,"data.csv")</span></pre><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mc"><img src="../Images/59c85c32b0a2902c46645aa62bcf5a66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5EqAbMzBmpRu-8M4lYUvoQ.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Screenshot of the project title vectors created</figcaption></figure><p id="8fb9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3…使用t-SNE将项目标题向量转换为2D(该过程耗时1小时)</p><pre class="lf lg lh li gt ln lo lp lq aw lr bi"><span id="764c" class="ls lt iq lo b gy lu lv l lw lx">library(Rtsne)</span><span id="2650" class="ls lt iq lo b gy ly lv l lw lx">set.seed(1)<br/>tsne &lt;- Rtsne(new2, dims = 2, perplexity=100, verbose=TRUE, max_iter = 500)</span><span id="4013" class="ls lt iq lo b gy ly lv l lw lx">t = as.data.frame(tsne$Y)<br/>id &lt;- subset(new2,select="id")<br/>t &lt;- merge(id,t,by=0)</span><span id="9ee7" class="ls lt iq lo b gy ly lv l lw lx">city &lt;- submydata1[,c(3,28)]</span><span id="5eee" class="ls lt iq lo b gy ly lv l lw lx">final &lt;- merge(city,t,by="id")</span><span id="8906" class="ls lt iq lo b gy ly lv l lw lx">final$Row.names &lt;- NULL</span></pre><p id="6023" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4…根据城市的t-SNE向量绘制2D项目标题</p><pre class="lf lg lh li gt ln lo lp lq aw lr bi"><span id="ba2d" class="ls lt iq lo b gy lu lv l lw lx">library(ggplot2)</span><span id="5ea9" class="ls lt iq lo b gy ly lv l lw lx">p &lt;- ggplot(final,<br/>aes(V1, V2, color = final$location1))+<br/>geom_point(alpha=0.7,size=2)<br/>p</span></pre><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi le"><img src="../Images/ca75fbc3dc7b09b150a3f54d7b2079b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rVq85pDabjgr0eufKR-9Rg.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Screenshot of the project title vectors with t-SNE</figcaption></figure><p id="fee1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">5…使用PCA将项目标题向量转换为2D</p><pre class="lf lg lh li gt ln lo lp lq aw lr bi"><span id="584e" class="ls lt iq lo b gy lu lv l lw lx">pcadata &lt;- new2<br/>pcadata$id &lt;- NULL</span><span id="b9ce" class="ls lt iq lo b gy ly lv l lw lx">pr.out=prcomp(pcadata, scale=TRUE)<br/>pr.out$sdev<br/>pr.var=pr.out$sdev ^2<br/>pve=pr.var/sum(pr.var)<br/>pve<br/>plot(pve, xlab="Principal Component", ylab="Proportion of Variance Explained ", ylim=c(0,1),type="b")<br/>plot(cumsum(pve), xlab="Principal Component ", ylab=" Cumulative Proportion of Variance Explained ", ylim=c(0,1), type="b")<br/>pcadata2 &lt;- scale(pcadata, pr.out$center, pr.out$scale) %*% pr.out$rotation</span><span id="3abe" class="ls lt iq lo b gy ly lv l lw lx">id &lt;- subset(new2,select="id")<br/>p &lt;- merge(id,pcadata2,by=0)</span><span id="6e82" class="ls lt iq lo b gy ly lv l lw lx">city &lt;- submydata1[,c(3,28)]</span><span id="e773" class="ls lt iq lo b gy ly lv l lw lx">pfinal &lt;- merge(city,p,by="id")</span></pre><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi md"><img src="../Images/dc2acc6b631538bb7e12bacbe663645f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E5mvWGy1UcoiNjdnKiGP_Q.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Screenshot of the performance of the PCA based on variance explained</figcaption></figure><p id="d7ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">6…根据城市的PCA向量绘制2D项目标题</p><pre class="lf lg lh li gt ln lo lp lq aw lr bi"><span id="5a00" class="ls lt iq lo b gy lu lv l lw lx">plot &lt;- ggplot(pfinal,aes(PC1, PC2, color = pfinal$location1))+<br/>geom_point(alpha=0.7,size=0.5)<br/>plot</span></pre><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi le"><img src="../Images/2a79146479e79a423608f99d972c42dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*40jEN-Tu2s4IyzJILzQe8Q.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Screenshot of the project title vectors with PCA</figcaption></figure><p id="9b7a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不幸的是，这两种可视化方法都没有对我们最初的理论产生有意义的结果，即在创新的美国城市中，项目名称存在差异。然而，我们从PCA中注意到，这些创新城市可能有类似的项目名称，给出了中间的集群。</p><p id="356e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们将检查某些项目标题是否更有可能成功。但是，由于数据量大，我们将取20%作为样本。</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi le"><img src="../Images/399fb866588b275ffd6512b2d21d6d3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fVJyPmM4OHOZnXD8Da40Ag.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Screenshot of the project titles with PCA by successful and failed status (20% data points as sample)</figcaption></figure><p id="c60a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们看看按照创新城市和其他城市来划分项目名称是否会有所帮助。</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi le"><img src="../Images/17982801f12589dd9a22cf573e536d36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*88NTO3vW2sANgPEfjkkBIQ.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Screenshot of the project titles with PCA by innovative cities and other cities</figcaption></figure><p id="b280" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，无论是失败与成功，还是创新与其他城市，在项目名称上似乎都没有任何有趣的发现。</p><p id="3694" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还能做什么？</p><p id="885a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">1…删除停止词以查看性能是否提高<br/>2…我们可以查看项目描述，而不是项目标题</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><p id="20d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi ml translated">有什么问题、意见或顾虑吗？<br/>jchen6912@gmail.com</p></div></div>    
</body>
</html>