<html>
<head>
<title>Ranking News Bias in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的新闻倾向性排名</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/ranking-news-bias-in-python-e9bb5d1ba93f?source=collection_archive---------8-----------------------#2018-07-21">https://towardsdatascience.com/ranking-news-bias-in-python-e9bb5d1ba93f?source=collection_archive---------8-----------------------#2018-07-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="a7ac" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我最近在《华盛顿邮报》上读到一篇文章，标题是<a class="ae ko" href="https://www.washingtonpost.com/news/the-fix/wp/2014/10/21/lets-rank-the-media-from-liberal-to-conservative-based-on-their-audiences/?noredirect=on&amp;utm_term=.592ab216ff0a" rel="noopener ugc nofollow" target="_blank">“根据受众对媒体进行从自由到保守的排序”</a>。启发我根据新闻网站在特定主题上的主观性和极性对其进行排名，在这个例子中，是唐纳德·特朗普。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/1c4c158a68367b7bf12ed44e8a6e67d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QZjMmT95qmq9SojCCI2NFQ.jpeg"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Photo by <a class="ae ko" href="https://unsplash.com/photos/UrA0VtUAgmo?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">rawpixel</a> on <a class="ae ko" href="https://unsplash.com/search/photos/newspapers-bias?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3bcd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我用 Python 调出了以下新闻网站中包含关键词“特朗普”的 30 篇最新文章(从《华盛顿邮报》文章的自由派到保守派):</p><ol class=""><li id="414e" class="lf lg it js b jt ju jx jy kb lh kf li kj lj kn lk ll lm ln bi translated">纽约市人</li><li id="ca04" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">噪声功率比(noise power ratio)</li><li id="c5d4" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">美国有线新闻网；卷积神经网络</li><li id="61b8" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">福克斯新闻频道</li><li id="329a" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">德鲁吉报告</li><li id="b142" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">布莱巴特</li></ol><p id="17a2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后对文章的描述进行文本分析，以返回一个列表，其中列出了文章的主观程度(或固执己见)以及极性(作者对特朗普的感觉是积极还是消极)。通过这样做，我可以得出一个新闻网站的(非常基本的)排名，显示他们对我们的总统有多么偏见，以及他们对他的看法如何。有了这个，我就可以和《华盛顿邮报》的文章进行比较，看新闻来源与哪个政治派别联系最紧密，哪个最有偏见。</p><h1 id="e7cd" class="lt lu it bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">进口</h1><p id="0e7a" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">为了搜索 google，我使用了<a class="ae ko" href="https://github.com/MarioVilas/googlesearch" rel="noopener ugc nofollow" target="_blank">这个库</a>、<a class="ae ko" href="https://textblob.readthedocs.io/en/dev/" rel="noopener ugc nofollow" target="_blank"> TextBlob </a>进行文本分析，使用<a class="ae ko" href="https://pypi.org/project/texttable/" rel="noopener ugc nofollow" target="_blank"> TextTable </a>在终端中显示结果。</p><pre class="kq kr ks kt gt mw mx my mz aw na bi"><span id="ee87" class="nb lu it mx b gy nc nd l ne nf">from google import google<br/>from textblob import TextBlob<br/>import texttable as tt<br/>from time import sleep</span></pre><h1 id="2a62" class="lt lu it bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">搜索</h1><p id="fc3b" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">为了获得和分析来自不同网站的文章，我使用了<a class="ae ko" href="https://whatis.techtarget.com/definition/Google-dorkhttps://whatis.techtarget.com/definition/Google-dork" rel="noopener ugc nofollow" target="_blank"> Google Dork searches </a>，它允许你搜索特定网站的关键词(以及其他许多东西)。例如，您可以键入</p><pre class="kq kr ks kt gt mw mx my mz aw na bi"><span id="24b0" class="nb lu it mx b gy nc nd l ne nf">inurl:medium.com intext:python</span></pre><p id="e573" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以便只从提到 python 的中型网站返回搜索结果。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/2373aed6d8edaf45b0d242b88b9b2113.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*tOjIR9PttCqHzpsmZSAR-g.png"/></div></figure><p id="baec" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我创建了一个名为<code class="fe nh ni nj mx b">search</code>的函数，它接受您正在搜索的站点的参数和要搜索的关键字。然后将变量<code class="fe nh ni nj mx b">search_results</code>设置为使用站点和关键字参数的 Google Dork 搜索，我们就可以收集文章了。</p><p id="d752" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，我创建了一个<code class="fe nh ni nj mx b">search_results_list</code>、<code class="fe nh ni nj mx b">subjectivity_list</code>和一个<code class="fe nh ni nj mx b">polarity_list</code>，以便稍后追加结果。创建<code class="fe nh ni nj mx b">num</code>列表只是让文章按照它们在文本表格中出现的顺序编号。</p><pre class="kq kr ks kt gt mw mx my mz aw na bi"><span id="ad64" class="nb lu it mx b gy nc nd l ne nf">def search(site, search):<br/> site = site<br/> search = search<br/> num_page = 3<br/> search_results = google.search(“inurl:” + site + “ intext:” + search, 3)<br/> search_results_list = []<br/> subjectivity_list = []<br/> polarity_list = []<br/> num = []<br/> number = 1</span></pre><h1 id="a0ce" class="lt lu it bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">情感分析</h1><p id="3407" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">下一步是确定给定文章的主观性和极性。这可以通过在搜索结果上调用<code class="fe nh ni nj mx b">result.description</code>方法来完成，然后将其附加到<code class="fe nh ni nj mx b">search_results_list.</code></p><p id="df73" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过设置 TextBlob，将<code class="fe nh ni nj mx b">search_results</code>作为变量<code class="fe nh ni nj mx b">analysis</code>，可以对文章进行基本的情感分析。运行<code class="fe nh ni nj mx b">analysis.sentiment.subjectivity</code>获得结果的主观性，运行<code class="fe nh ni nj mx b">analysis.sentiment.polarity</code>返回极性。将这些结果附加到各自的列表中。</p><pre class="kq kr ks kt gt mw mx my mz aw na bi"><span id="e98f" class="nb lu it mx b gy nc nd l ne nf">for result in search_results:<br/> search_results = result.description<br/> search_results_list.append(search_results)</span><span id="8bc1" class="nb lu it mx b gy nk nd l ne nf"> analysis = TextBlob(search_results)<br/> subjectivity = analysis.sentiment.subjectivity<br/> subjectivity_list.append(subjectivity)<br/> polarity = analysis.sentiment.polarity<br/> polarity_list.append(polarity)<br/> number = number + 1<br/> num.append(number)<br/> sleep(5)</span></pre><h1 id="b003" class="lt lu it bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">文本表格</h1><p id="5737" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">为了创建表格，创建一个新变量<code class="fe nh ni nj mx b">tab</code>，并将其设置为等于<code class="fe nh ni nj mx b">tt.Texttable()</code>。然后写出你的标题，我用了数字、结果、主观性和极性。</p><pre class="kq kr ks kt gt mw mx my mz aw na bi"><span id="3084" class="nb lu it mx b gy nc nd l ne nf">tab = tt.Texttable()<br/>headings = [‘Number’,’Results’,’Subjectivity’, ‘Polarity’]<br/>tab.header(headings)</span></pre><p id="c8a0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后运行一个<code class="fe nh ni nj mx b">for</code>循环，将列表中的每个元素作为一行添加到表中。</p><pre class="kq kr ks kt gt mw mx my mz aw na bi"><span id="e74a" class="nb lu it mx b gy nc nd l ne nf">for row in zip(num, search_results_list, subjectivity_list, polarity_list):<br/> tab.add_row(row)</span></pre><p id="c122" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">采用主观性和极性列表，我们可以找到每个新闻源的平均值，然后我们可以将它与给定的网站、搜索结果和表格一起打印出来。</p><pre class="kq kr ks kt gt mw mx my mz aw na bi"><span id="c455" class="nb lu it mx b gy nc nd l ne nf">avg_subjectivity = (sum(subjectivity_list) / len(subjectivity_list))<br/>avg_polarity = (sum(polarity_list) / len(polarity_list))</span><span id="94e3" class="nb lu it mx b gy nk nd l ne nf">table = tab.draw()<br/>print site<br/>print search<br/>print table<br/>print (site + “ average subjectivity: “ + str(avg_subjectivity))<br/>print (site + “ average polarity: “ + str(avg_polarity))</span></pre><h1 id="a9c5" class="lt lu it bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">调用函数</h1><p id="86bc" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">最后，您必须为每个新闻站点调用<code class="fe nh ni nj mx b">search</code>函数。</p><pre class="kq kr ks kt gt mw mx my mz aw na bi"><span id="2dc7" class="nb lu it mx b gy nc nd l ne nf">search(“newyorker”, “trump”)<br/>search(“npr”, “trump”)<br/>search(“cnn”, “trump”)<br/>search(“foxnews”, “trump”)<br/>search(“drudgereport”, “trump”)<br/>search(“breitbart”, “trump”)</span></pre><p id="9527" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">就是这样！</p><h1 id="f551" class="lt lu it bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">结果</h1><p id="2f79" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">运行该脚本，终端输出将如下所示:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/e3be899eacce178663807548df9e8c9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*zmrQTiyME5bU81K1GfzWvA.png"/></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/e0a7cc2a5cedf00f01cf47bd34aaf097.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*5YnCHuo9yotpc_UYUd5b3Q.png"/></div></figure><p id="2e07" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">显示站点、文章数量、文章描述、每篇文章的主观性和极性，然后显示站点的平均值。</p><p id="ce49" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">网站各自主观评价的平均值如下(从最客观到最主观的顺序):</p><ol class=""><li id="ff08" class="lf lg it js b jt ju jx jy kb lh kf li kj lj kn lk ll lm ln bi translated">NPR (0.21)</li><li id="3924" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">福克斯新闻频道(0.23)</li><li id="6dd6" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">CNN (0.25)</li><li id="c2ed" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">《纽约客》( 0.27)</li><li id="1ff5" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">布莱巴特(0.34)</li><li id="321d" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">德拉吉报告(0.36)</li></ol><p id="0c22" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">毫不奇怪，NPR 是最客观的新闻来源，而《德拉吉报道》和布莱巴特在特朗普问题上最固执己见。然而，福克斯新闻频道在客观性上排名第二的事实让我很惊讶。</p><p id="3f17" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">极性的排名同样令人惊讶，数值越接近-1 越负，越接近 1 越正。</p><ol class=""><li id="d1ce" class="lf lg it js b jt ju jx jy kb lh kf li kj lj kn lk ll lm ln bi translated">福克斯新闻频道(0.04)</li><li id="a71d" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">NPR (0.05)</li><li id="01cc" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">CNN (0.07)</li><li id="ab9a" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">《纽约客》( 0.07)</li><li id="1a7c" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">德拉吉报告(0.11)</li><li id="0cb1" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">布莱巴特(0.12)</li></ol><p id="2822" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">福克斯新闻频道再一次让我吃惊，在 30 篇文章中，他对川普的负面看法最多。在那之后，新闻来源如预期的那样一致。非常有趣的是，最高的正平均值仅仅在零以上！我预计德拉吉报告和布莱巴特至少在 0.6 的范围内。</p><p id="ad81" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">布莱巴特在一篇文章上记录了 0.8 的最积极情绪，然而，它也有 0.4 的最消极情绪。这让我相信布莱巴特的文章比它的同行使用了更多的内涵语言。布莱巴特在主观性方面排名第二的事实支持了这一点。</p><h1 id="2642" class="lt lu it bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">最后的想法</h1><p id="506e" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">显然，这是一个非常基本的排名，不应该被视为真理，因为一个非常小和有限的(仅使用描述，而不是全文)数据集。</p><p id="b741" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我看到了邮报的文章，并认为这将是一个有趣的实验，运行并查看结果。希望你喜欢！</p><p id="84f3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里是 Github 上的完整源代码</p><p id="4ddb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">查看我的其他 Python 文章:</p><div class="nn no gp gr np nq"><a href="https://medium.freecodecamp.org/creating-a-twitter-bot-in-python-with-tweepy-ac524157a607" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd iu gy z fp nv fr fs nw fu fw is bi translated">使用 Tweepy 在 Python 中创建一个 Twitter 机器人</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">Twitter 大约有 15%是由机器人组成的，我想尝试一下。我谷歌了如何创建一个推特机器人…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">medium.freecodecamp.org</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe kz nq"/></div></div></a></div><div class="nn no gp gr np nq"><a href="https://medium.freecodecamp.org/basic-data-analysis-on-twitter-with-python-251c2a85062e" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd iu gy z fp nv fr fs nw fu fw is bi translated">基于 Python 的 Twitter 基础数据分析</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">在使用 Tweepy 和 Python 以及这段代码创建了免费的 Wtr bot 之后，我想用一种方式来看看 Twitter 用户是如何…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">medium.freecodecamp.org</p></div></div><div class="nz l"><div class="of l ob oc od nz oe kz nq"/></div></div></a></div></div></div>    
</body>
</html>