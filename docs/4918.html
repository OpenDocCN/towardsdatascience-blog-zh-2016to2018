<html>
<head>
<title>Explore and get value out of your raw data: An Introduction to Splunk</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索原始数据并从中获取价值:Splunk 简介</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/explore-and-get-value-out-of-your-raw-data-an-introduction-to-splunk-e5cb94c0855e?source=collection_archive---------8-----------------------#2018-09-15">https://towardsdatascience.com/explore-and-get-value-out-of-your-raw-data-an-introduction-to-splunk-e5cb94c0855e?source=collection_archive---------8-----------------------#2018-09-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="2b46" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您刚刚接触了一些原始数据文件(json、csv 等)。现在会发生什么？你如何理解它？</p><p id="7078" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你打开一个控制台，开始使用 less、grep、jq 等工具。开始的时候很棒，但是…除了基本的，很难做更多的事情。</p><p id="1a74" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这听起来熟悉吗？太好了！请继续阅读，了解 Splunk 如何帮助您。</p></div><div class="ab cl ko kp hx kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="im in io ip iq"><h1 id="9469" class="kv kw it bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">安装 Splunk 企业版</h1><p id="55f4" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">让我们从在您的计算机中安装 Splunk Enterprise 开始。安装 Splunk 非常简单，安装包几乎适用于所有平台:OSX/Linux/Windows。在此下载软件包<a class="ae ly" href="https://www.splunk.com/en_us/download/splunk-enterprise.html" rel="noopener ugc nofollow" target="_blank">，并按照安装说明进行操作。</a></p><p id="3360" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Splunk <em class="lz">企业</em>？但是...它有免费许可证吗？是啊！</p><blockquote class="ma mb mc"><p id="4230" class="jq jr lz js b jt ju jv jw jx jy jz ka md kc kd ke me kg kh ki mf kk kl km kn im bi translated"><strong class="js iu">指标 500 MB/天</strong>。(…)60 天后，您可以转换为永久免费许可证或购买 Splunk 企业许可证，以继续使用专为企业级部署设计的扩展功能。”</p><p id="d214" class="jq jr lz js b jt ju jv jw jx jy jz ka md kc kd ke me kg kh ki mf kk kl km kn im bi translated"><a class="ae ly" href="https://www.splunk.com/en_us/download/splunk-enterprise.html" rel="noopener ugc nofollow" target="_blank">https://www . splunk . com/en _ us/download/splunk-enterprise . html</a></p></blockquote><p id="d944" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然在介绍和个人使用的范围内，在您的机器上进行本地安装是很好的，但我强烈建议您在开始更广泛地使用 Splunk 时，尽快转移到正确的 Splunk 部署(内部部署或云中部署)。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mg"><img src="../Images/314b286d31e4a96ad36bab18d0c7aa62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zeQUCJBPDgShD-5pwINmDA.png"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk">Splunk Enterprise 7.1.3 Web Interface</figcaption></figure><p id="3dd0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您的本地安装进展顺利，您将会看到一个类似于上面截图的 web 界面。耶！</p><h1 id="bf15" class="kv kw it bd kx ky mw la lb lc mx le lf lg my li lj lk mz lm ln lo na lq lr ls bi translated">导入原始数据</h1><p id="6aa0" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">本文适用于任何类型的原始数据-  Splunk <strong class="js iu">与其生成一些无意义的虚拟测试数据集，我决定搜索一个有趣的真实世界数据集，作为<a class="ae ly" href="https://en.wikipedia.org/wiki/Open_data" rel="noopener ugc nofollow" target="_blank">开放数据</a>。</strong></p><blockquote class="nb"><p id="896f" class="nc nd it bd ne nf ng nh ni nj nk kn dk translated">赫尔辛基公共交通(HSL)—2016 年 10 月期间每个车站的客运量</p></blockquote><p id="571c" class="pw-post-body-paragraph jq jr it js b jt nl jv jw jx nm jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">我从赫尔辛基地区交通局(HSL)找到了一个有趣的数据集，其中包含赫尔辛基地区每个车站的乘客量。数据集(<a class="ae ly" href="https://hri.fi/data/en_GB/dataset/hsl-n-nousijamaarat-pysakeittain" rel="noopener ugc nofollow" target="_blank">此处可用</a>)包含 2016 年 11 月期间每天的平均乘客人数，从乘客旅行卡系统中收集。虽然我对这个特定的数据集只有可用的旧数据(2016 年 11 月)感到有点失望，但我非常惊讶地发现<a class="ae ly" href="https://www.hsl.fi/" rel="noopener ugc nofollow" target="_blank"> HSL </a>(以及芬兰公共当局总体而言)有相当大的公开可用的数据目录(【https://www.opendata.fi/en】)。不错！</p><p id="f760" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过下载<a class="ae ly" href="https://hri.fi/data/en_GB/dataset/hsl-n-nousijamaarat-pysakeittain/resource/82d905c8-d008-4422-9b8b-a4563f16d0ac" rel="noopener ugc nofollow" target="_blank">这个特定的 HSL 数据集</a>——我选择了<a class="ae ly" href="https://hri.fi/data/en_GB/dataset/hsl-n-nousijamaarat-pysakeittain/resource/82d905c8-d008-4422-9b8b-a4563f16d0ac" rel="noopener ugc nofollow" target="_blank"> GeoJSON APIJSON </a>数据格式——您将获得一个名为<em class="lz">HSL % 3 an _ nousijam rt . geo JSON</em>的原始数据文件</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/1a6dd43127178bf7243d77a74da0b275.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*nMI9me8JAy7DwwEA5utQlw.png"/></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk">Raw data from HSL</figcaption></figure><p id="b25a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如你所看到的，在顶层我们有一个单一的<em class="lz"> FeatureCollection </em>，其中包含了所有的<em class="lz"> Feature </em>事件。</p><p id="517d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于我们只关心事件(不需要高级 FeatureCollection 数组部分)，我们可以通过删除 JSON 数组并把所有的<em class="lz">特性事件</em>放到一个新文件(HSLvolumes.json)中来清理数据。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/d7719edc8dbbeca684587ad2e399cb3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*p581Bnhrpk59fI-OQ3XXjg.png"/></div></figure><h1 id="e95d" class="kv kw it bd kx ky mw la lb lc mx le lf lg my li lj lk mz lm ln lo na lq lr ls bi translated">将数据添加到 Splunk</h1><p id="fa3d" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">从本地硬盘中的文件向 Splunk 添加新数据非常简单。让我们前往 Splunk 并使用 UI 选项来实现这一目的。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ns"><img src="../Images/abb8bc89405af06d4ec5522cb504763e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M34VDNB6CZLHxLsUZIRPpw.png"/></div></div></figure><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nt"><img src="../Images/4b026b290312f6cd8f9ffd8aaa8217e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oroboXVK7ou06DG6hqlfkA.png"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk">Splunk &gt; Add data</figcaption></figure><p id="06cc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">单击添加数据选项，然后选择上传(从我电脑中的文件)</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nu"><img src="../Images/88a0bb4570610135adb9a4b90035a23f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4alQqBZRAlrKELgbgqK5wA.png"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk">Splunk &gt; Add data: Select Source</figcaption></figure><p id="0ee5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将出现一个逐步指南。让我们从选择原始数据文件开始。在我的例子中，我将使用包含<em class="lz">特性事件的 HSLvolumes.json 文件。</em></p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nv"><img src="../Images/bb8c740aabc2495c3ad8b91f0129f532.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aKFaAE0LwOpeGeOZ2qy95g.png"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk">Splunk &gt; Add data: Set Source Type</figcaption></figure><p id="1af6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在获得您的数据后，Splunk 将尝试自动"<em class="lz">理解"</em>"您的数据，并允许您调整和提供有关数据格式的更多细节。</p><p id="3dd2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这个特殊的例子中，您可以看到它自动将我的数据识别为 JSON (Source type: _json)，总体来说事件看起来不错。但是，有一些警告说它无法解析每个事件的时间戳。</p><p id="98db" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为什么？Splunk 的核心是事件处理，时间至关重要。基于您正在索引的事件，Splunk 将自动尝试查找时间戳。由于我们的数据没有时间戳字段，Splunk 将使用每个事件被编入索引时的当前时间作为事件时间戳。</p><p id="592d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有关 Splunk 时间戳分配如何工作的深入解释，请查看此<a class="ae ly" href="http://docs.splunk.com/Documentation/Splunk/7.1.2/Data/HowSplunkextractstimestamps" rel="noopener ugc nofollow" target="_blank"> Splunk 文档页面。</a></p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nw"><img src="../Images/c7117020d91fa1c652c038db9aa306a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MTYd00-g52NMbAmpfcmfeA.png"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk">Splunk &gt; Add data: Save Source Type</figcaption></figure><p id="2660" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，在时间戳部分，我们将通过选择<em class="lz">当前</em>来实施这一点，因为我们修改了 _json 源类型，所以让我们点击“另存为”并根据我们的数据源对其进行命名(例如 hslvolumesjson)。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nx"><img src="../Images/92fa556c8b7ef0a4161129dbf52fd941.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PBXrb_0nPepGI5FXJKN_IQ.png"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk">Splunk &gt; Add data: Input Settings</figcaption></figure><p id="2815" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在此部分中，我们需要选择要在哪个 Splunk 索引中存储此数据。为不同类型的数据创建单独的索引是一个好习惯，所以让我们创建一个新的索引。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ny"><img src="../Images/ed1baa04852f1711f981bda9c7e73850.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dx8B3LFYKv1B9ddVCUPvIA.png"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk">Splunk &gt; Add data: New Index</figcaption></figure><p id="20ef" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">选择您的索引名称，然后单击保存。我们可以保留其他字段的默认值。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nz"><img src="../Images/0736ef386b01e03c060e655d93c056b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D9t3BDnmWjQ8exKiJANcbw.png"/></div></div></figure><p id="fd83" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">仔细检查是否选择了新索引。点击<em class="lz">审核</em>，<em class="lz">提交</em> &amp; <em class="lz">开始搜索</em>即可。</p><p id="ff3f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有关在 Splunk 中获取数据的更深入的解释，请查看 Splunk 文档:<a class="ae ly" href="http://dev.splunk.com/view/dev-guide/SP-CAAAE3A" rel="noopener ugc nofollow" target="_blank">http://dev.splunk.com/view/dev-guide/SP-CAAAE3A</a></p><h1 id="1e5a" class="kv kw it bd kx ky mw la lb lc mx le lf lg my li lj lk mz lm ln lo na lq lr ls bi translated">第一眼看你的数据:探索</h1><p id="2590" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">单击<em class="lz">开始搜索</em>按钮后，您将被引导至 Splunk 搜索面板。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi oa"><img src="../Images/2f3127507dc2b239af7b86e23930f1f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BSkiEGATzaOFRnxQCemJ6A.png"/></div></div></figure><p id="7e59" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个观点里有很多有趣的东西。如果你以前从未使用过 Splunk，你可能会感到有点不知所措。请允许我重点介绍一些领域，并为您拆分视图。</p><p id="08ae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在左上角，你会找到你当前所在的 Splunk 应用(<em class="lz">默认:搜索&amp;报告</em>)和面板(<em class="lz">默认:搜索</em>)。</p><p id="1244" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在它的正下方，您会发现 Splunk 搜索栏，其中有一个查询(乍一看)可能有点复杂。给定我们的简单用例，完全相同的搜索结果将出现在查询中:<em class="lz"> index="hslnov2016 "。</em>我们将在下面探索查询语言。</p><p id="b687" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在右上角，你会发现时间选择器(<em class="lz">默认:所有时间</em>)。这允许您选择搜索的时间范围。因为我们的时间戳被设置为索引当前时间，这在这里没有用。</p><p id="470b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在左下角，你会发现<em class="lz">有趣的字段。这些是 Splunk 能够从您的数据中自动提取的字段。</em></p><p id="3898" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，剩下的下半部分将显示您的搜索查询结果事件。在这种情况下，所有的索引结果都会出现。</p><p id="b681" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">酷，现在怎么办？</p><p id="e4b9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在 Splunk 中浏览数据时，我最喜欢首先使用的选项之一是“有趣的字段”面板。通过点击任何一个领域，你都可以很快获得有价值的见解。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ob"><img src="../Images/ec4578bc46b0f2e14d5deab61b09d7bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UehlHJc5h3C-RYzcwOEK0w.png"/></div></div></figure><p id="c04c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这种情况下，通过选择字段<em class="lz"> properties.nimi_s </em>，我们能够快速了解什么是字段顶值，即在大多数事件中出现的 HSL 站名称。[对任何赫尔辛基地区的居民来说都不奇怪的是，<em class="lz">劳塔廷托里</em>(中央火车站)和<em class="lz">坎皮</em>在最上面:]</p><h1 id="e370" class="kv kw it bd kx ky mw la lb lc mx le lf lg my li lj lk mz lm ln lo na lq lr ls bi translated">获得答案:统计和数据整理</h1><p id="1118" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">Splunk 搜索和查询语言既强大又庞大，但是通过一些简单的命令和少量经验，您可以快速获得一些有价值的答案。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/2c883bca463cabcccbd2a26a1abf8c7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*lH7ebGzxGc4pdZtI0Zm87w.png"/></div></figure><p id="38f7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您从:<em class="lz"> index=yourindex | command，</em> Splunk 将为您提供关于每个命令的自动完成、指导和解释。</p><p id="1ab4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于每个事件都包含单个车站的日平均乘客量，假设我们想知道每个车站的总乘客量是多少。我们如何做到这一点？</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi od"><img src="../Images/639691fd998017f8aa54a457fa871561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6r0NE39_pUYyIAUGjgbPOg.png"/></div></div></figure><p id="700c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">轻松点。我们可以快速使用 stats 命令，将所有的日平均值(properties.nousijat)相加，并按电台名称(properties.nimi_s)汇总这些结果。</p><p id="5f28" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">额外收获</strong>:通过获得 5071 个结果，我们还知道了数据集中的电台总数。不错！</p><p id="ef42" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">想知道前几名或者后几名的 X 站怎么办？</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi oe"><img src="../Images/c8e92492a8f1ef087589df5911f20b21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i-DAeUkYD4jhlAdxFZcphg.png"/></div></div></figure><p id="53fd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过追加到我们之前的查询:<em class="lz"> | sort -volume | head 20 </em>，我们立即得到了这个问题的答案。</p><p id="2389" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们使用<em class="lz">排序</em>来获得<strong class="js iu">较高</strong>音量的结果，即降序(对于<strong class="js iu">较低</strong>，即升序，将是排序<em class="lz">+音量</em>)和<strong class="js iu">头</strong>来仅过滤出前 X 个结果</p><p id="0e43" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过不同的 Splunk 查询探索您的数据并获得有价值的答案。</p><h1 id="adf8" class="kv kw it bd kx ky mw la lb lc mx le lf lg my li lj lk mz lm ln lo na lq lr ls bi translated">仪表板和可视化</h1><p id="4957" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">一旦您开始掌握 Splunk 搜索的诀窍并保存了几个最有趣的查询，您就可以创建您的第一个仪表板并以不同的方式可视化您的数据。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi od"><img src="../Images/985f15147eed101ce834a82f26daf535.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qePCNJxGzj5KK71XrY_0Sg.png"/></div></div></figure><p id="f7d6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">转到仪表板部分，点击<em class="lz">创建新仪表板。</em>为您的仪表板命名，并添加您的第一个面板。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi of"><img src="../Images/570eb6e97280452724228dda78a86213.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SIv01asNSHe4zC1RhjWEBg.png"/></div></div></figure><p id="17fa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用与前面相同的查询，我添加了一个简单的柱形图面板。</p><p id="f75e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">很快，我们的前 20 个车站在客流量方面变得非常非常不同。Kamppi 和 Rautatientori 的客流量是排名前五的其他三个车站的两倍。当我们看剩下的 15 个站(前 20！)我们得到 3 倍的体积。</p><p id="fd88" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这一点上，我决定添加两个额外的新面板…</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi og"><img src="../Images/19463cd5a59d45426e66241aee035327.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GVkFxqtOr44nT_n9f2UWaw.png"/></div></div></figure><p id="40c2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">左边是<strong class="js iu">每站旅客量前 50 名</strong>(与<em class="lz">|头 50 </em>查询相同)和一个简单的可视化表格。</p><p id="ec7b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">右边是每个车站的<strong class="js iu">乘客量(最下面一排，不到 30 名乘客)。</strong>带饼图和查询:<strong class="js iu"/><em class="lz">index = " HSL nov 2016 " | stats sum(properties . nousijat)as volume by " properties . nimi _ s " | sort+volume | search volume&lt;30 | stats count by volume</em></p><p id="50b1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我决定只包括客流量少于 30 人的车站。而且我很惊讶的看到有这么多车站(1827)0 乘客。</p><p id="a4ca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">最后一个面板… </strong></p><p id="1651" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于我的数据集包括每个站点的地理坐标(纬度和经度)，我决定再添加一个面板(类型地图)。为此，我扩展了我的 Splunk 并安装了一个名为<em class="lz"> Maps+ for Splunk </em>的第三方可视化工具。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/4d030ab73aa7781c41602bbdf9d5b95d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*OZa5EK38patjb91tdwYaGA.png"/></div></figure><p id="b146" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以通过浏览现有的可视化类型并转到<em class="lz">“查找更多可视化”</em>来完成同样的操作</p><blockquote class="ma mb mc"><p id="c128" class="jq jr lz js b jt ju jv jw jx jy jz ka md kc kd ke me kg kh ki mf kk kl km kn im bi translated">Splunk 具有内置的地图可视化功能。为什么不用它呢？</p><p id="097c" class="jq jr lz js b jt ju jv jw jx jy jz ka md kc kd ke me kg kh ki mf kk kl km kn im bi translated">我一开始确实使用了内置地图，但我发现了一些局限性:你不能在城市级别缩放，而且我的 Splunk 查询更复杂。Splunk 的 Maps+对我来说是一个明显的赢家。</p></blockquote><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi oi"><img src="../Images/04c500f9516bc6a77717b2f0f62d582a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wiAJ40z_fbQUrJLchf8cQA.png"/></div></div></figure><p id="16ca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">面板 Splunk 搜索查询为:<em class="lz">index = " hslnov 2016 " | spath path = " geometry . coordinates { 0 } " output = longitude | spath path = " geometry . coordinates { 1 } " output = latitude | stats first(latitude)为纬度，first(longitude)为经度，first(properties.nimi_s)为描述，sum(properties.nousijat)为标题 by " properties . nimi _ s " | sort-title |搜索标题&gt; 0 </em></p><p id="f60c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">需要使用 spath 进行初始转换，因为纬度和经度在同一个字段中(多值 json 类型)，因此我必须将它们“分割”到不同的字段中。</p><p id="2675" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这种可视化(Maps+ for Splunk)只要求您在一个表中有一些带有特定标签名称的字段。更多详细信息，请查看位于<a class="ae ly" href="https://github.com/sghaskell/maps-plus" rel="noopener ugc nofollow" target="_blank">https://github.com/sghaskell/maps-plus</a>的项目文件。</p><pre class="mh mi mj mk gt oj ok ol om aw on bi"><span id="c4ae" class="oo kw it ok b gy op oq l or os">base_search | table latitude, longitude [ description| title | (...)</span></pre><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi oe"><img src="../Images/a75d8e6543c03e3c8086b5423e6d4d3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tti_yasOTy7VPylS6uaPHA.png"/></div></div></figure><p id="dc38" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我发现这张地图真的很好，很有帮助。我可以通过悬停在某个车站上来快速查看该车站的乘客量。</p><p id="257b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望这篇文章对你有用！请分享您的反馈和想法。</p><p id="287d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">伸出手，在<a class="ae ly" href="https://twitter.com/bruno_amaro" rel="noopener ugc nofollow" target="_blank"> Twitter </a>和<a class="ae ly" href="https://www.instagram.com/brunoamaroalmeida/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>上关注</p><p id="d498" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">布鲁诺</p></div></div>    
</body>
</html>