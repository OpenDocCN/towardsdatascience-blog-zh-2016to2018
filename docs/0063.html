<html>
<head>
<title>Udacity Self-Driving Car Nanodegree Project 4 — Advanced Lane-Finding</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Udacity 无人驾驶汽车纳米学位项目 4 —高级车道发现</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/udacity-self-driving-car-nanodegree-project-4-advanced-lane-finding-f4492136a19d?source=collection_archive---------2-----------------------#2017-03-03">https://towardsdatascience.com/udacity-self-driving-car-nanodegree-project-4-advanced-lane-finding-f4492136a19d?source=collection_archive---------2-----------------------#2017-03-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/3fc282c20d6322e4ade6977d8cdf0ce7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mIUGhx7xauG007984AhUiA.png"/></div></div></figure><div class=""/><p id="315d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kw">欢迎来到“妈妈报告”(嗨妈妈！);如果技术术语和晦涩难懂的语言更符合你的风格，那么</em> <a class="ae kx" href="https://github.com/jeremy-shannon/CarND-Advanced-Lane-Lines" rel="noopener ugc nofollow" target="_blank"> <em class="kw">请点击这里</em> </a> <em class="kw">，否则请尽情享受吧！</em></p><p id="cdd3" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Udacity 自动驾驶汽车工程师 Nanodegree 第一学期的第四个项目建立在第一个项目的<a class="ae kx" href="http://jeremyshannon.com/2016/12/23/udacity-sdcnd-finding-lane-lines.html" rel="noopener ugc nofollow" target="_blank">之上，超过了第二个项目</a>和第三个项目。虽然这看起来很明显，因为它们都涉及到寻找车道线，但这背后的原因是项目 2 和项目 3 向我们介绍了深度学习的新奇之处，几乎可以为我们编写代码，而项目 1 和项目 4 依赖于更传统的计算机视觉技术来非常明确地了解我们如何从输入到输出。这几乎让人失望——就像用键盘换铅笔一样——但是人们会说:(我听起来像总统吗？)公司仍然依赖这些技术，所以它绝对值得学习(并且仍然有趣和具有挑战性), OpenCV 库是承担所有重担的人。</p><p id="97ed" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">"所以让我们拿个仪表盘找些车道！"你是说？好吧，等一下，特克斯。你不能随便就开始找车道。首先，你用的摄像机？它扭曲了图像。你可能看不出来，但这是真的！看:</p><figure class="kz la lb lc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ky"><img src="../Images/8f941ae8c162ec6b3897fb81d91409d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dSbfqCgrJQx7ScOS."/></div></div></figure><p id="a8c3" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">幸运的是，这可以通过几张棋盘照片和 OpenCV 函数<code class="fe ld le lf lg b">findChessboardCorners</code>和<code class="fe ld le lf lg b">calibrateCamera</code>来纠正(对于单个相机/镜头)。看看这个:</p><figure class="kz la lb lc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ky"><img src="../Images/7dab429ec90ef2502b43ae575ca2da99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SP8QunxwqNyA0mJ3."/></div></div></figure><p id="b8a9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我知道——对我来说它看起来也几乎一样，但失真在图像的角落最明显(看看底部汽车引擎盖形状的差异)。</p><p id="79ab" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们可以开始有趣的事情了。下一步是应用透视变换来获得前方车道的鸟瞰图。它看起来是这样的:</p><figure class="kz la lb lc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ky"><img src="../Images/af29a112eaeb56e5d605ab67effa2c84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jwGduyFBVEbytuQA."/></div></div></figure><p id="d95e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我可能做了不必要的努力来使我的透视变换<em class="kw">恰到好处</em>(使直线在最终的鸟瞰图中完全垂直)，但是因为变换是根据相同的规则反向的，所以最终可能没什么关系。</p><p id="d236" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我探索了一些不同的颜色转换和渐变阈值，试图隔离车道线，并生成一个二进制图像，其中车道线处为 1(白色)，其他地方为 0(黑色)。这无疑是整个过程中最微妙的部分，对光线条件和褪色非常敏感(更不用说那些该死的白色汽车了！)在路上。我不会用细节来烦你；我只想说这是我在这个项目上花了大部分时间的地方。最后，我结合了一个在<a class="ae kx" href="https://en.wikipedia.org/wiki/Lab_color_space" rel="noopener ugc nofollow" target="_blank"> Lab 色彩空间</a>的 B 通道上提取黄线的阈值和一个在<a class="ae kx" href="https://en.wikipedia.org/wiki/HSL_and_HSV" rel="noopener ugc nofollow" target="_blank"> HLS 色彩空间</a>的 L 通道上提取白色的阈值。这是每一个的样子:</p><figure class="kz la lb lc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ky"><img src="../Images/4fb4fe6509f4c6e02475f02b842b62cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HNe2dI1LJjSkJJsu."/></div></div></figure><figure class="kz la lb lc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ky"><img src="../Images/62411e392efd5ebf64b608292ac1797c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*waAdqZP6U7s9aQSF."/></div></div></figure><p id="ee56" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是它们在几幅测试图像上的组合:</p><figure class="kz la lb lc gt is gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/280a3284ecfce29abfaf653ac83500e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/0*ClNeohMPiKmXlZ8a."/></div></figure><p id="429b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不算太寒酸！</p><p id="942d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，聪明的一点是:搜索整个图像来识别哪些像素属于左车道和右车道是不必要的(并且计算量很大),因此我们计算了二进制图像下半部分的直方图，如下所示:</p><figure class="kz la lb lc gt is gh gi paragraph-image"><div class="gh gi li"><img src="../Images/8a89eec06f6aca725d3869dfe3279b3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/0*OFleiBFdM-lSH3JS."/></div></figure><p id="a373" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">左半部分和右半部分的峰值为我们提供了车道线开始位置的良好估计，因此我们可以从底部开始搜索小窗口，并基本上沿着车道线一直到顶部，直到识别出每条线中的所有像素。然后可以将多项式曲线应用于识别的像素，瞧！</p><figure class="kz la lb lc gt is gh gi paragraph-image"><div class="gh gi li"><img src="../Images/b13699d893c161f6930b281d2976fb9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/0*ZF79nKc9HOiLYVmZ."/></div></figure><p id="e15a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不仅如此，使用前一帧的拟合并在附近搜索，可以更容易地在视频的连续帧中找到像素，如下所示:</p><figure class="kz la lb lc gt is gh gi paragraph-image"><div class="gh gi li"><img src="../Images/4d6d1d8dad6df67d7ec1012da268f2c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/0*9CmclYcCcvVP7z8M."/></div></figure><p id="f9a4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它只是在多项式线和多边形中着色以填充它们之间的通道，应用反向透视变换，并将结果与原始图像相结合。我们还做了一些简单的计算和转换，以确定道路的曲率半径和汽车离车道中心的距离。这是最终的结果:</p><figure class="kz la lb lc gt is gh gi paragraph-image"><div class="gh gi li"><img src="../Images/f46343082682799983a392955fed67a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/0*tTcc_yPYanItxoq0."/></div></figure><p id="757e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是我应用于下面链接的视频的管道，带有一点平滑(整合来自过去几帧的信息)和健全性检查以拒绝异常值(例如忽略不在特定距离内的拟合)。</p><p id="2336" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该视频可爱地展示了图像处理管道中的步骤:</p><figure class="kz la lb lc gt is"><div class="bz fp l di"><div class="lj lk l"/></div></figure><p id="bc6c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里有一个<a class="ae kx" href="https://github.com/jeremy-shannon/CarND-Advanced-Lane-Lines/blob/master/project_video_output.mp4" rel="noopener ugc nofollow" target="_blank">链接到我的视频结果</a>，这里有一个<a class="ae kx" href="https://github.com/jeremy-shannon/CarND-Advanced-Lane-Lines/blob/master/challenge_video_output_diag.mp4" rel="noopener ugc nofollow" target="_blank">奖励视频，其中有一些额外的诊断信息</a>，在这里你可以看到算法与困难的照明和路面条件进行斗争(在某些情况下会崩溃)。</p><p id="c92d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kw">再说一遍，如果你感兴趣的是技术类的东西，</em> <a class="ae kx" href="https://github.com/jeremy-shannon/CarND-Advanced-Lane-Lines" rel="noopener ugc nofollow" target="_blank"> <em class="kw">去这里</em> </a> <em class="kw">。</em></p></div><div class="ab cl ll lm hu ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ij ik il im in"><p id="295a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kw">最初发表于</em> <a class="ae kx" href="..//2017/03/03/udacity-sdcnd-advanced-lane-finding.html" rel="noopener ugc nofollow" target="_blank"> <em class="kw">..//2017/03/03/uda city-SD CND-advanced-lane-finding . html</em></a><em class="kw">2017 年 3 月 3 日。</em></p></div></div>    
</body>
</html>