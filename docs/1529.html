<html>
<head>
<title>Databases — SQL and NoSQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据库— SQL和NoSQL</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/databases-sql-and-nosql-7bdbab25b6ef?source=collection_archive---------2-----------------------#2017-09-15">https://towardsdatascience.com/databases-sql-and-nosql-7bdbab25b6ef?source=collection_archive---------2-----------------------#2017-09-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="79c4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">对NoSQL数据库的介绍和对MongoDB的一瞥</h2></div><p id="00f2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">SQL在1970年与E. F. Codd博士的研究论文“大型共享数据库的关系数据模型”一起使用。是啊！！这是Boyce-Codd规范化中的Codd。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/a84def0e11d58f8797220906b7e56e33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/format:webp/1*YntqR0IhBszckQReutYNqQ.jpeg"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">SQL/NoSQL: <a class="ae ln" href="https://www.google.com/url?sa=i&amp;rct=j&amp;q=&amp;esrc=s&amp;source=images&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwjL0rjSn6fWAhUFNI8KHcmBBCkQjRwIBw&amp;url=https%3A%2F%2Fwww.monitis.com%2Fblog%2Fnosql-vs-sql-what-you-need-to-know%2F&amp;psig=AFQjCNE9uaQ_fkFAHccCe5xkwj0UV-mmMw&amp;ust=1505566827614230" rel="noopener ugc nofollow" target="_blank">url</a></figcaption></figure><p id="3c55" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">NoSQL在20世纪90年代后期开始出现。然而，在此之前就已经有这样的数据库了。NoSQL是带着打破传统<strong class="kh ir"><em class="lo"/></strong>事务型数据库瓶颈的动机引入的。一个常见的误解是NoSQL数据库不是关系型的，这是不太正确的。关系确实存在于数据中，否则这些数据将毫无用处。让我们看看发生了什么变化以及如何变化。</p><h1 id="03ff" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">布鲁尔帽定理和酸性</h1><h2 id="21cb" class="mh lq iq bd lr mi mj dn lv mk ml dp lz ko mm mn mb ks mo mp md kw mq mr mf ms bi translated">CAP定理—与NoSQL有关</h2><p id="d3c7" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">CAP定理试图证明NoSQL数据库所期望的性质。大多数数据库被设计成以另一个属性为代价来实现这些属性中的两个。</p><p id="cccd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="lo"> C —一致性</em> </strong> <br/>这证明了一旦更新被更新者确认，更新的执行和可用性的保证。简而言之，如果数据库是一致的，更新一旦完成就可用，这在分布式环境中是无法保证的。</p><p id="61ac" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="lo"> A —可用性<br/> </em> </strong>这展示了一个数据库的属性，它能够服务于一个请求。如果加载/执行时间较长，大多数SQL数据库都会删除查询。通过消除SQL数据库中存在的事务属性，NoSQL数据库的可用性预计会非常高，响应时间预计会非常短。</p><p id="b5e1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="lo"> P —分区容差</em> </strong> <br/>数据库能够在节点间因网络问题出现故障时正常运行的属性。例如，一个数据库可能包含几个协同工作的节点(MongoDB节点)(通过Mapreduce之类的机制)。如果在分布式环境中，即使一个或多个节点不可访问，数据库作为一个整体也可以运行，则保留该属性。</p><h2 id="bfe5" class="mh lq iq bd lr mi mj dn lv mk ml dp lz ko mm mn mb ks mo mp md kw mq mr mf ms bi translated">ACID — SQL数据库</h2><p id="4a27" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">ACID属性是传统关系数据库(如MySQL、MS SQL或Oracle数据库)中的预期属性。</p><p id="345a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="lo"> A —原子性</em> </strong> <br/>保证原子操作的性质，要么一组查询可以作为一个整体完成，要么一个都不能。这是交易的关键特征。</p><p id="a456" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="lo"> C —一致性</em> </strong> <br/>数据一旦完全插入或更新，即可使用。</p><p id="24b2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="lo"> I —隔离</em> </strong> <br/>暗示，事务是独立的。因此，数据不会受到发生在同一组数据上的两个事务的负面影响。</p><p id="642e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="lo"> D —耐久性</em> </strong> <br/>事务或任何其他操作后提交的数据永不丢失。要么插入它们，要么通知失败(失败的事务)。</p><h1 id="ee43" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">NoSQL数据库</h1><p id="8d84" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">NoSQL数据库保证遵守两个CAP属性。这种数据库有几种类型。</p><ol class=""><li id="0ad5" class="my mz iq kh b ki kj kl km ko na ks nb kw nc la nd ne nf ng bi translated"><strong class="kh ir">键值存储</strong> <strong class="kh ir"> — </strong>哈希表形式的存储{例如- Riak、亚马逊S3(迪纳摩)、Redis}</li><li id="17e5" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated"><strong class="kh ir">基于文档的</strong> <strong class="kh ir">存储— </strong>存储对象，主要是JSON，它是web友好的或支持ODM(对象文档映射)。{示例- CouchDB、MongoDB}</li><li id="87a9" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated"><strong class="kh ir">基于列的存储— </strong>每个存储块只包含来自一列的数据{示例- HBase，Cassandra}</li><li id="9375" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated"><strong class="kh ir">基于图形— </strong>关系的图形表示，主要用于社交网络。{示例- Neo4J}</li></ol><h1 id="de7a" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">MongoDB</h1><p id="dd63" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">MongoDB是广泛使用的<strong class="kh ir"> <em class="lo">文档数据库</em> </strong>之一。它服从CAP thoerem中的<strong class="kh ir"> <em class="lo"> C </em> </strong>和<strong class="kh ir"> <em class="lo"> A </em> </strong>。由于其JSON友好的API，MongoDB大量用于NodeJS。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi nm"><img src="../Images/e0b24a0f4ae3bfb74f348bca02d73cae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T0a-QUNewZDsyx6Bkinfew.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">MongoDB: <a class="ae ln" href="http://joelcox.io/scripts/logos/mongo-logo.png" rel="noopener ugc nofollow" target="_blank">url</a></figcaption></figure><p id="9e57" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Mongo官网有安装说明:<a class="ae ln" href="https://www.mongodb.com" rel="noopener ugc nofollow" target="_blank">https://www.mongodb.com</a>。让我们考虑几个使用MongoDB CLI的命令。</p><p id="d6ed" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">进入命令行界面:<code class="fe nr ns nt nu b">mongo</code>并按回车键。如果安装成功，您应该会看到以下输出。通常mongo DB运行在端口27017上。</p><pre class="lc ld le lf gt nv nu nw nx aw ny bi"><span id="6291" class="mh lq iq nu b gy nz oa l ob oc"># mongo</span><span id="5c6d" class="mh lq iq nu b gy od oa l ob oc">MongoDB shell version v3.4.5</span><span id="56ca" class="mh lq iq nu b gy od oa l ob oc">connecting to: mongodb://127.0.0.1:27017</span><span id="0501" class="mh lq iq nu b gy od oa l ob oc">MongoDB server version: 3.4.5</span><span id="6e20" class="mh lq iq nu b gy od oa l ob oc">Server has startup warnings:</span><span id="e96f" class="mh lq iq nu b gy od oa l ob oc">2017-09-15T11:42:04.673+0000 I STORAGE  [initandlisten]</span><span id="2820" class="mh lq iq nu b gy od oa l ob oc">2017-09-15T11:42:04.673+0000 I STORAGE  [initandlisten] ** WARNING: Using the XFS filesystem is strongly recommended with the WiredTiger storage engine</span><span id="d657" class="mh lq iq nu b gy od oa l ob oc">2017-09-15T11:42:04.673+0000 I STORAGE  [initandlisten] **          See http://dochub.mongodb.org/core/prodnotes-filesystem</span><span id="9f7d" class="mh lq iq nu b gy od oa l ob oc">2017-09-15T11:42:05.313+0000 I CONTROL  [initandlisten]</span><span id="a002" class="mh lq iq nu b gy od oa l ob oc">2017-09-15T11:42:05.313+0000 I CONTROL  [initandlisten] ** WARNING: Access control is not enabled for the database.</span><span id="1492" class="mh lq iq nu b gy od oa l ob oc">2017-09-15T11:42:05.313+0000 I CONTROL  [initandlisten] **          Read and write access to data and configuration is unrestricted.</span><span id="f05d" class="mh lq iq nu b gy od oa l ob oc">2017-09-15T11:42:05.313+0000 I CONTROL  [initandlisten]<br/>&gt;</span></pre><p id="78f3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">显示数据库:<code class="fe nr ns nt nu b">show dbs</code></p><h2 id="f7af" class="mh lq iq bd lr mi mj dn lv mk ml dp lz ko mm mn mb ks mo mp md kw mq mr mf ms bi translated">启动、选择数据库和执行插入。</h2><p id="2a8a" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated"><strong class="kh ir"> <em class="lo">插入<br/> </em> </strong>回车<code class="fe nr ns nt nu b">use mydb</code>会创建一个新的数据库名<strong class="kh ir"> <em class="lo"> mydb </em> </strong>。与MySQL中的表不同，Mongo有集合。文档(JSON)被插入到这样的集合中。让我们创建<strong class="kh ir"> <em class="lo">狗</em> </strong>集合，并添加一个<strong class="kh ir"> <em class="lo">狗</em> </strong> <strong class="kh ir"> <em class="lo">名称莫莉</em> </strong>与<strong class="kh ir"> <em class="lo">重量50kg。</em> </strong>既然我们选择了<strong class="kh ir"> <em class="lo"> mydb </em> </strong>我们就可以称之为db并执行运算。</p><pre class="lc ld le lf gt nv nu nw nx aw ny bi"><span id="757a" class="mh lq iq nu b gy nz oa l ob oc">db.dogs.insert({name: ‘Molly’, weight:50})</span></pre><p id="df19" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="lo">查看数据<br/> </em> </strong>使用pretty方法将输出格式化为可读性更强的格式。正如您所看到的，mongo添加了一个id名称<code class="fe nr ns nt nu b">_id</code>作为每个文档的索引。</p><pre class="lc ld le lf gt nv nu nw nx aw ny bi"><span id="c9d1" class="mh lq iq nu b gy nz oa l ob oc">&gt; db.dogs.find()<br/>{ "_id" : ObjectId("59bbce8288b6c364cefd9de6"), "name" : "Molly", "weight" : 50 }<br/>&gt; db.dogs.find().pretty()<br/>{<br/>    "_id" : ObjectId("59bbce8288b6c364cefd9de6"),<br/>    "name" : "Molly",<br/>    "weight" : 50<br/>}<br/>&gt;</span></pre><p id="cb8d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="lo">更新数据<br/> </em> </strong>下面的命令更新我们创建的条目，并将名称设置为<strong class="kh ir"> <em class="lo"> Tommy。</em>T77】</strong></p><pre class="lc ld le lf gt nv nu nw nx aw ny bi"><span id="df52" class="mh lq iq nu b gy nz oa l ob oc">&gt; db.dogs.update({_id: ObjectId('59bbce8288b6c364cefd9de6')},<br/>   {$set: {name:'Tommy'}})</span></pre><p id="0744" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="lo">删除数据<br/> </em> </strong>让我们删除我们插入的内容</p><pre class="lc ld le lf gt nv nu nw nx aw ny bi"><span id="f7f7" class="mh lq iq nu b gy nz oa l ob oc">&gt; db.dogs.remove({_id:ObjectId('59bbce8288b6c364cefd9de6')})<br/>WriteResult({ "nRemoved" : 1 })<br/>&gt;</span></pre><blockquote class="oe of og"><p id="d7e5" class="kf kg lo kh b ki kj jr kk kl km ju kn oh kp kq kr oi kt ku kv oj kx ky kz la ij bi translated">这些是任何数据库的基本操作，或者简称为CRUD操作。</p><p id="99c2" class="kf kg lo kh b ki kj jr kk kl km ju kn oh kp kq kr oi kt ku kv oj kx ky kz la ij bi translated">C —创建<br/> R —读取<br/> U —更新<br/> D —删除</p></blockquote></div></div>    
</body>
</html>