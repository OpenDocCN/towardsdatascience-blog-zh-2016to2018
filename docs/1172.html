<html>
<head>
<title>TensorFlow Photo x-Ray Object Detection with App Engine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用应用程序引擎的TensorFlow照片x射线对象检测</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tensorflow-photo-x-ray-object-detection-with-app-engine-7de9dd8f63f5?source=collection_archive---------5-----------------------#2017-08-05">https://towardsdatascience.com/tensorflow-photo-x-ray-object-detection-with-app-engine-7de9dd8f63f5?source=collection_archive---------5-----------------------#2017-08-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="39d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在以前的文章中，我们使用<a class="ae kl" href="https://github.com/tensorflow/models/tree/master/object_detection" rel="noopener ugc nofollow" target="_blank"> TensorFlow对象检测API </a>应用不同类型的模型来分析图像中的对象。(<a class="ae kl" href="https://medium.com/towards-data-science/object-detection-dinner-with-friends-ea1caab3b666" rel="noopener">第一条</a>，<a class="ae kl" href="https://medium.com/towards-data-science/tensorflow-object-detection-an-overview-of-facebook-publications-2391698ed82f" rel="noopener">第二条</a>)</p><p id="7f20" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这些例子中，解决方案总是为一个控制台应用程序设计的(即一个本地运行的Python脚本)。</p><p id="8b98" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们的挑战是把它带到一个<strong class="jp ir">网络环境</strong>，<strong class="jp ir">检测照片中的物体(比如x光)</strong>，最后我们应该提出一个<strong class="jp ir">简单的架构选项。</strong></p><h1 id="2c25" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">概观</h1><p id="f7fb" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">我们可以考虑使用服务器模式的几种架构选项(来自官方文档<a class="ae kl" href="https://tensorflow.github.io/serving/" rel="noopener ugc nofollow" target="_blank"> TensorFlow Serving </a>的示例)。我们甚至可以考虑传统的替代方案(如Apache、Nginx等)。)但是我们应该考虑安装Web服务器，并使用<a class="ae kl" href="https://www.tensorflow.org/" rel="noopener ugc nofollow" target="_blank"> TensorFlow </a>调整所有元素来执行分析。</p><p id="8cc3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我喜欢使用像App Engine这样的<strong class="jp ir">平台</strong> <strong class="jp ir">方案</strong>的想法，但是实现我们的想法对于像App Engine这样的传统环境来说是一个挑战(我们可以考虑使用PubSub和VMs workers的解决方案，但是会考虑到更多的复杂性)，所以…为了解决我们的挑战，我将使用<strong class="jp ir"> App Engine灵活环境</strong>。</p><h1 id="354c" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">拟议解决方案</h1><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/4a6b22a9c06a4629f183dc4e9a5b1504.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/1*b823ARqXVtFwLWr3EoZsyw.gif"/></div></figure><p id="f3c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">* <a class="ae kl" href="https://youtu.be/Uoi7O04asd4" rel="noopener ugc nofollow" target="_blank">更高质量的视频</a></p><h1 id="1327" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">提议的架构</h1><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/13a229826e4d97c6af2195b90bb163d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*G4sAue51bpUWM4SQbvs_iA.png"/></div></figure><h1 id="5c02" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">App Engine灵活环境项目</h1><ul class=""><li id="1ee3" class="ly lz iq jp b jq lk ju ll jy ma kc mb kg mc kk md me mf mg bi translated">app.yaml</li><li id="28f1" class="ly lz iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">main.py</li><li id="2336" class="ly lz iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">模板/索引. html</li></ul><p id="6a35" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">关于<a class="ae kl" href="https://cloud.google.com/appengine/docs/flexible/" rel="noopener ugc nofollow" target="_blank"> App Engine灵活环境</a>的更多详情</p><p id="5dbe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">照片的评估程序:</p><figure class="lq lr ls lt gt lu"><div class="bz fp l di"><div class="mm mn l"/></div></figure><ul class=""><li id="3459" class="ly lz iq jp b jq jr ju jv jy mo kc mp kg mq kk md me mf mg bi translated">主要依赖关系<a class="ae kl" href="http://flask.pocoo.org/" rel="noopener ugc nofollow" target="_blank">Flask</a>(0 . 12 . 2)<a class="ae kl" href="https://www.tensorflow.org/" rel="noopener ugc nofollow" target="_blank">tensor flow</a>(1 . 2 . 1)除了这些支持元素，numpy，Image，cStringIO，urllib。</li></ul><p id="5802" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要使用这个示例，您需要<a class="ae kl" href="https://github.com/tensorflow/models/tree/master/object_detection" rel="noopener ugc nofollow" target="_blank"> TensorFlow对象检测API </a>的这些基本元素:</p><ul class=""><li id="902e" class="ly lz iq jp b jq jr ju jv jy mo kc mp kg mq kk md me mf mg bi translated">模型[文件夹]</li><li id="b682" class="ly lz iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">原型[文件夹]</li><li id="b832" class="ly lz iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">实用程序[文件夹]</li></ul><p id="a8e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">注</strong>:如果你需要下载测试功能文件，<a class="ae kl" href="https://storage.googleapis.com/appengine_tensorflow/object_detection_api.zip" rel="noopener ugc nofollow" target="_blank">这里</a>我准备了一个工作版本。</p><p id="1459" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，我们需要在我们的解决方案中有模型的<strong class="jp ir">冻结_推理_图形</strong>。对于我们的例子:</p><ul class=""><li id="4cd7" class="ly lz iq jp b jq jr ju jv jy mo kc mp kg mq kk md me mf mg bi translated">SSD _ mobilenet _ v1 _ coco _ 11 _ 06 _ 2017(如果您需要更多条件，可以更改此型号)</li></ul><p id="2e1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">注意</strong>:如果你需要下载测试功能文件，这里<a class="ae kl" href="https://storage.googleapis.com/appengine_tensorflow/ssd_mobilenet_v1_coco_11_06_2017.zip" rel="noopener ugc nofollow" target="_blank">我准备了一个工作版本。</a></p><p id="c9dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于我们的例子，我们使用<a class="ae kl" href="http://mscoco.org/" rel="noopener ugc nofollow" target="_blank"> COCO </a>作为对象识别方案，因此我们需要识别标签来进行分析。</p><ul class=""><li id="d612" class="ly lz iq jp b jq jr ju jv jy mo kc mp kg mq kk md me mf mg bi translated">data/mscoco_label_map.pbtxt</li></ul><p id="823d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">注意</strong>:如果你需要下载测试功能文件，这里<a class="ae kl" href="https://storage.googleapis.com/appengine_tensorflow/data.zip" rel="noopener ugc nofollow" target="_blank">我准备了一个工作版本。</a></p><p id="1735" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我将从这个<a class="ae kl" href="https://github.com/nbortolotti/TensorPhotoXRay" rel="noopener ugc nofollow" target="_blank"> Github库</a>中实现解决方案(初始阶段)。</p><h1 id="8b0d" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">部署项目</h1><ul class=""><li id="2e0b" class="ly lz iq jp b jq lk ju ll jy ma kc mb kg mc kk md me mf mg bi translated"><strong class="jp ir">本地</strong> : python main.py</li><li id="8ae9" class="ly lz iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated"><strong class="jp ir">生产环境</strong> : gcloud app部署</li></ul><p id="99fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">*(-v版本)如果要将其部署到特定版本。</p><p id="a28d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">注意</strong>:你要有<a class="ae kl" href="https://cloud.google.com/sdk/docs/" rel="noopener ugc nofollow" target="_blank"> Google Cloud SDK </a>。更多关于App Engine灵活环境的信息，Python <a class="ae kl" href="https://cloud.google.com/appengine/docs/flexible/python/quickstart" rel="noopener ugc nofollow" target="_blank">在此。</a></p></div></div>    
</body>
</html>