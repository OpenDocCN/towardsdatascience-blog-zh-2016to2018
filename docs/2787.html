<html>
<head>
<title>Why take the log of a continuous target variable?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么要取连续目标变量的对数？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/why-take-the-log-of-a-continuous-target-variable-1ca0069ee935?source=collection_archive---------5-----------------------#2018-03-05">https://towardsdatascience.com/why-take-the-log-of-a-continuous-target-variable-1ca0069ee935?source=collection_archive---------5-----------------------#2018-03-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d464" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">数据科学是一个阴谋。</p><p id="fbae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">“嗨，我叫鲍勃，我是你们的教练。我将教你如何开车。打开第 147 页的书，让我们了解不同类型的排气歧管。这是基本的波义耳定律的公式……”</p><p id="3158" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这永远不会发生，对吗？</p><p id="32f4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，在数据科学的教学中，阐述复杂的主题是很常见的，而对基础知识却不感兴趣。没有人告诉我们什么时候加速，什么时候减速。但是几乎每个人似乎都准备好带领我们完成实数的构造。</p><p id="21bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章中，我们将看看一个简单但有用的概念，它经常被忽视。但是首先让我们考虑对数的一个有趣的性质。</p><h2 id="5ba2" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">加法就是乘法</h2><p id="0395" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">想象你是泡泡世界里的一个泡泡。你刚刚开始，你的尺寸只有 0.69，相当于自然对数 2。</p><p id="49f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你完成了一个 NPC 巫师的任务，他会给你一种药剂，让你的体型翻倍，不管你有多大。</p><p id="1f9a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那很好。药剂所要做的就是将你的尺寸乘以 2 来得到你的新尺寸 4。如果你是 3 号，你会长到 3 乘以 2 等于 6。</p><p id="ab23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是如果药剂唯一能做的操作就是加法呢？现在事情变得更加棘手。巫师给你一种药剂，可以让你的体型从 2 到 4 增加 2 倍。但是如果你第二天喝了药水，而你已经是 3 号了，那该怎么办呢？3 加 2 等于 5，所以药剂没有兑现它的承诺！</p><p id="79ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看起来这是无解的。幸运的是，巫师很老，也很聪明。她给你的不是增加你体型 2 的药剂，而是增加 log(2)的药剂。</p><p id="9c49" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你掂量着手中的小瓶子，看上去并不确信。向导对你露出灿烂的笑容，向东北方向走去。</p><p id="1526" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你在同一天服用了这种药剂——你像预期的那样长到了 4 码。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/699252b5de394a2ed955bff07cf0f601.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*3TanLRxfVsZbZi-Y7WEjjQ.png"/></div></figure><p id="56e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于不信任巫师，你在喝下药剂前进行了一次豁免。为了看看会发生什么，你决定只在你长到 3 码的时候才喝。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/bc8ccbf1cc61cd9a4a9d1d28158dd86f.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*ncl9xE8DQRjI1yP87QV9eQ.png"/></div></figure><p id="3d97" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗯，也许巫师预料到了你会这么做，并在药剂中设置了一些计时机制，一段时间后它会给你的尺寸增加 3 而不是 2。你决定扔给巫师一个曲线球。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ls"><img src="../Images/8ca7911169f591911d208608c8ee40d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*cNxPd_zyDBptEhgFA5Sm4w.png"/></div></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">Written in tiny print on the label: “Beware floating point arithmetic — use allclose”</figcaption></figure><p id="e81b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗯。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/5e3941ef85efc1e498035a4b741fb443.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*tJhw_413ybotCCVJJnm-yA.png"/></div></figure><h2 id="3474" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">魔术有哪些规则适用于模特？</h2><p id="eb3f" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">让我们考虑随机森林。</p><p id="1d56" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">想象你看着一把你的泡泡可以装备的剑，并且想根据它的颜色和形状来预测力量调整值。</p><p id="dc1b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果剑蓝-&gt;增加+2 预测力量。如果剑是圆的，加-3。</p><p id="b506" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一个随机森林既不能加也不能减，但它所学到的东西会产生类似上述规则的效果。当一棵树长大后，它会查看示例的特征并选择要分裂的示例。</p><p id="c71f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它试图将具有相似目标变量值的例子分组在一起。一个分支内的相似性越大，树做出正确预测的机会就越大。</p><p id="5455" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是我们如何衡量相似性呢？一种方法是考虑价值的绝对差异——一瓶 20 美元的葡萄酒与 40 美元的葡萄酒相差 20 美元。一瓶 100 美元的威士忌和 200 美元的相差 100 美元。</p><p id="8287" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以这种方式来看价格，威士忌之间的差异是 5 倍之大。但是如果我们用相对的角度来看，距离是一样的！在这两对瓶子中，第二瓶的价格是第一瓶的两倍。</p><p id="827f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">没有一种衡量相似性的方法是普遍更好或更差的。根据具体情况，其中一个可能比另一个更有用。</p><h2 id="6ca3" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">答案就在问题中</h2><p id="b6d2" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">让我们想象一下，我们想了解一些关于汽车的知识。</p><p id="b585" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可能想知道什么？举个例子，如果我们给一辆车装上空调，它的价值会增加多少？</p><p id="5bdd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">事实证明，我们非常幸运——我们的数据集很简单，只包含兰博基尼和菲亚特。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/474c8e7eed557d1dd1c626cd0bcf8cf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*DjcGpqEbh-tQEzYCy8rB4g.jpeg"/></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">Tom Hanks by a Fiat 126p.</figcaption></figure><p id="9afc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">“似乎给菲亚特加装空调平均会使其价格增加 307 美元，给兰博基尼加装空调平均会增加 12 000 美元，所以让我来做一件唯一合理的事情，预测给汽车加装空调会使其价格增加(12 000 美元+ 307 美元)/ 2 = 6 153.50 美元。”</p><p id="34b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但这将意味着，如果我们为菲亚特 126p 配备空调，它将升值数倍于其基价！这是我想从事的行业。</p><p id="a462" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">退一步说，这不是一个很好的答案。</p><p id="19f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">或者，如果我们问一辆车的价值相对于它的基价会增加多少呢？这可能是一条更有用的信息。</p><p id="b8bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是我们的模型无法回答这个问题！它所拥有的是绝对的距离。</p><p id="99ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">进入明智的向导。在 numpy 变体的一个咒语之后，我们的目标变量变成了对数。</p><p id="af82" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的模型现在可以根据添加或删除这个或那个功能来了解汽车价值相对于基价的变化量。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><p id="1449" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mk">如果你觉得这篇文章很有趣并且想保持联系，你可以在 Twitter 上找到我</em> <a class="ae ml" href="https://twitter.com/radekosmulski" rel="noopener ugc nofollow" target="_blank"> <em class="mk">这里</em> </a> <em class="mk">。</em></p></div></div>    
</body>
</html>