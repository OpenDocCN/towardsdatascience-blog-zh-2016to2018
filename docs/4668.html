<html>
<head>
<title>Automated Features Generation for Text Data using textfeatures</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用文本特征为文本数据自动生成特征</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/automated-features-generation-for-text-data-using-textfeatures-c814f2b46eb1?source=collection_archive---------10-----------------------#2018-08-29">https://towardsdatascience.com/automated-features-generation-for-text-data-using-textfeatures-c814f2b46eb1?source=collection_archive---------10-----------------------#2018-08-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/668d57199e4178308e3a0ac139547824.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fvOGdPU-pbAmu7JhKRnzBg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Image Courtesy: <a class="ae kc" href="https://pixabay.com/en/knowledge-book-library-glasses-1052010/" rel="noopener ugc nofollow" target="_blank">https://pixabay.com/en/knowledge-book-library-glasses-1052010/</a></figcaption></figure><p id="254c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">许多 Kaggle 竞赛的获胜者和数据科学家都强调一件事，那就是“特征工程”，它能让你在竞赛中名列前茅。不管你的模型有多复杂，好的特征总是会比其他的更好地帮助你的机器学习模型建立过程。</p><h1 id="8f96" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">什么是特征工程？</h1><p id="78fe" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">功能只不过是列/维度，而功能工程是基于领域知识或统计原则创建新功能或预测器的过程。特征工程一直伴随着机器学习，但最新的是自动化特征工程，最近研究人员开始使用机器学习本身来创建有助于模型准确性的新特征。虽然大多数自动化工程解决的是数字数据，但文本数据由于其固有的非结构化性质，在这场竞争中总是被排除在外。我可以说，没有了。</p><h1 id="56f7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">textfeatures — R 包</h1><p id="55c8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">密苏里大学的助理教授 Michael Kearney 在 R 社区以现代 twitter 包<a class="ae kc" href="https://github.com/mkearney/rtweet" rel="noopener ugc nofollow" target="_blank"> rtweet </a>而闻名，他提出了一个新的 R 包，名为<code class="fe me mf mg mh b">textfeatures</code>，它基本上可以为你提供的任何文本数据生成一系列特性。在你梦想基于深度学习的自动化文本特征工程包之前，这不是。这使用非常简单的文本分析原理，并生成诸如大写字母的数量、标点符号的数量之类的特征——简单明了的东西，没有什么特别的，但非常有用。</p><h1 id="4bea" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">装置</h1><p id="ccd8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">textfeatures</code>可以直接从<a class="ae kc" href="https://cran.r-project.org/web/packages/textfeatures/index.html" rel="noopener ugc nofollow" target="_blank">起重机</a>上安装，开发版本可以从<a class="ae kc" href="https://github.com/mkearney/textfeatures" rel="noopener ugc nofollow" target="_blank"> github </a>上获得。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="bd45" class="mq lc iq mh b gy mr ms l mt mu">install.packages("textfeatures")</span></pre><h1 id="838c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用例</h1><p id="d779" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在本帖中，我们将使用<code class="fe me mf mg mh b">textfeatures</code>包为来自英国的 Fifa 官方世界杯 ios 应用评论生成功能。我们将 R 包<code class="fe me mf mg mh b">itunesr</code>来提取评论和<code class="fe me mf mg mh b">tidyverse</code>进行数据操作和绘图。</p><h1 id="b86d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">加载所需的包:</h1><p id="d874" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">让我们加载所有需要的包。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="46f7" class="mq lc iq mh b gy mr ms l mt mu">#install.packages("itunesr")<br/>#install.packages("textfeatures")<br/>#install.packages("tidyverse")</span><span id="7588" class="mq lc iq mh b gy mv ms l mt mu">library(itunesr)<br/>library(textfeatures)<br/>library(tidyverse)</span></pre><h1 id="bfaa" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">提取最近的评论:</h1><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2cdc" class="mq lc iq mh b gy mr ms l mt mu">#Get UK Reviews of Fifa official world cup ios app<br/>#https://itunes.apple.com/us/app/2018-fifa-world-cup-russia/id756904853?mt=8</span><span id="423b" class="mq lc iq mh b gy mv ms l mt mu">reviews1 &lt;- getReviews(756904853,"GB",1)<br/>reviews2 &lt;- getReviews(756904853,"GB",2)<br/>reviews3 &lt;- getReviews(756904853,"GB",3)<br/>reviews4 &lt;- getReviews(756904853,"GB",4)</span><span id="3a8e" class="mq lc iq mh b gy mv ms l mt mu">#Combining all the reviews into one dataframe<br/>reviews &lt;- rbind(reviews1,<br/>                 reviews2,<br/>                 reviews3,<br/>                 reviews4)</span></pre><h1 id="91dc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">神奇开始了:</h1><p id="6f69" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">既然我们已经得到了评论，让我们让 textfeatures 发挥它的魔力吧。我们将使用函数<code class="fe me mf mg mh b">textfeatures()</code>来完成这项工作。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="726d" class="mq lc iq mh b gy mr ms l mt mu">#Combining all the reviews into one dataframe<br/>reviews &lt;- rbind(reviews1,<br/>                 reviews2,<br/>                 reviews3,<br/>                 reviews4)</span><span id="9920" class="mq lc iq mh b gy mv ms l mt mu"># generate text features<br/>feat &lt;- textfeatures(reviews$Review)</span><span id="6559" class="mq lc iq mh b gy mv ms l mt mu"># check what all features generated <br/>glimpse(feat)<br/>Observations: 200<br/>Variables: 17<br/>$ n_chars         149, 13, 263, 189, 49, 338, 210, 186, 76, 14, 142, 114, 242, ...<br/>$ n_commas        1, 0, 0, 0, 0, 1, 2, 1, 1, 0, 1, 1, 0, 3, 0, 0, 1, 0, 3, 1, 0...<br/>$ n_digits        0, 0, 6, 3, 0, 4, 1, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 3, 0, 0, 0...<br/>$ n_exclaims      0, 0, 2, 2, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 3, 0, 0...<br/>$ n_extraspaces   1, 0, 0, 0, 0, 3, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 4, 0...<br/>$ n_hashtags      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...<br/>$ n_lowers        140, 11, 225, 170, 46, 323, 195, 178, 70, 12, 129, 106, 233, ...<br/>$ n_lowersp       0.9400000, 0.8571429, 0.8560606, 0.9000000, 0.9400000, 0.9557...<br/>$ n_mentions      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...<br/>$ n_periods       2, 0, 5, 1, 0, 0, 3, 1, 2, 0, 2, 1, 1, 2, 0, 0, 4, 2, 0, 4, 0...<br/>$ n_urls          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...<br/>$ n_words         37, 2, 55, 45, 12, 80, 42, 41, 14, 3, 37, 28, 50, 16, 15, 8, ...<br/>$ n_caps          4, 1, 12, 8, 2, 7, 3, 4, 2, 2, 6, 4, 6, 2, 3, 1, 6, 4, 29, 9,...<br/>$ n_nonasciis     0, 0, 0, 0, 0, 0, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...<br/>$ n_puncts        2, 1, 7, 0, 1, 3, 4, 1, 1, 0, 4, 2, 2, 0, 1, 0, 1, 1, 0, 7, 2...<br/>$ n_capsp         0.03333333, 0.14285714, 0.04924242, 0.04736842, 0.06000000, 0...<br/>$ n_charsperword  3.947368, 4.666667, 4.714286, 4.130435, 3.846154, 4.185185, 4...</span></pre><p id="e549" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从上面可以看到，textfeatures 已经创建了 17 个新功能。请注意，这些功能对于任何文本数据都是一样的。</p><h1 id="53aa" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">可视化结果:</h1><p id="1bcc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">对于这篇文章，我们不会建立一个机器学习模型，但这些特征可以很好地用于建立一个分类模型，如情感分类或类别分类。</p><p id="c4a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是现在，我们只是用一些特征来想象结果。</p><p id="b1ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以根据评论评分，查看字符数和每个单词的字符数之间是否有任何关系。一个假设可能是，给予好评的人不会写得太长或其他。我们不打算在这里验证它，只是用散点图可视化。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1e5f" class="mq lc iq mh b gy mr ms l mt mu"># merging features with original reviews<br/>reviews_all % <br/>  ggplot(aes(n_charsperword, n_chars, colour = Rating)) + geom_point()</span></pre><p id="2403" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">给出了这个图:</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/eb7de0d3880e5c1f0b25e9fe58f61d3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8a44O7fWekVxO-IV.png"/></div></div></figure><p id="68ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们用不同的情节从不同的角度来看同一个假设，但是要用一些单词而不是一些字符来比较。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1687" class="mq lc iq mh b gy mr ms l mt mu">reviews_all %&gt;% <br/>  ggplot(aes(n_charsperword, n_words)) + geom_point() +<br/>  facet_wrap(~Rating) +<br/>  stat_smooth()</span></pre><p id="6095" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">给出了这个图:</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/b94276902dfc5e57d3a192bbba2105d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BA3uhx3MhInuWBgj.png"/></div></div></figure><p id="12b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，您可以使用<code class="fe me mf mg mh b">textfeatures</code>自动生成新的特征，并更好地理解您的文本数据。希望这篇文章能帮助你开始使用这个漂亮的软件包，如果你想了解更多关于文本分析的知识，请查看由朱莉娅·西尔格撰写的<a class="ae kc" href="https://www.datacamp.com/courses/sentiment-analysis-in-r-the-tidy-way?tap_a=5644-dce66f&amp;tap_s=210728-e54afe" rel="noopener ugc nofollow" target="_blank">这篇教程。这里使用的完整代码可以在</a><a class="ae kc" href="https://github.com/amrrs/blogpost_codes/blob/master/textfeatures_demo.R" rel="noopener ugc nofollow" target="_blank">我的 github </a>上获得。</p><p id="0c4b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mx">本帖最初发表于</em> <a class="ae kc" href="https://datascienceplus.com/automated-text-feature-engineering-using-textfeatures-in-r/" rel="noopener ugc nofollow" target="_blank"> <em class="mx"> DS+ </em> </a></p></div></div>    
</body>
</html>