<html>
<head>
<title>Probability concepts explained: Marginalisation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">概率概念解释:边缘化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/probability-concepts-explained-marginalisation-2296846344fc?source=collection_archive---------0-----------------------#2018-01-27">https://towardsdatascience.com/probability-concepts-explained-marginalisation-2296846344fc?source=collection_archive---------0-----------------------#2018-01-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/74a95ddcdef2dfb307dd82665841fd10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*17PNo9EwgnUjLyBxbMD8KA.jpeg"/></div></div></figure><h1 id="7d78" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">介绍</h1><p id="ea58" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在这篇文章中，我将解释边缘化的概念，并通过一个例子来解决一个相当简单的<a class="ae lu" rel="noopener" target="_blank" href="/probability-concepts-explained-maximum-likelihood-estimation-c7b4342fdbb1">最大似然</a>问题。这篇文章需要一些基本概率概念的知识，你可以在我这个系列的<a class="ae lu" rel="noopener" target="_blank" href="/probability-concepts-explained-introduction-a7c0316de465">介绍性博客文章</a>中找到解释。</p><h1 id="6ce5" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">什么是边缘化</h1><p id="3b64" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">边缘化是一种需要对一个变量的可能值求和来确定另一个变量的边际贡献的方法。这个定义听起来有点抽象，所以让我们试着用一个例子来说明这一点</p><p id="ecd7" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">假设我们对天气如何影响英国人的快乐感兴趣。我们可以用数学方法把它写成P(幸福|天气),即在给定天气类型的情况下，某人幸福水平的概率是多少。</p><p id="0b0f" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">假设我们有测量某人快乐程度的设备和定义，还记录了英格兰和苏格兰的天气情况。现在，苏格兰人总体上比英格兰人更幸福是可行的。问题是，人们总是有一个国籍，所以我不能在测量中摆脱它。所以我们实际测量的是P(幸福，国家|天气)，也就是说，我们同时在看幸福和国家。</p><p id="da05" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">边缘化告诉我们，如果我们对所有国家的可能性求和，就可以计算出我们想要的数量(记住，英国由3个国家组成:英格兰、苏格兰和威尔士)，即P(幸福|天气)= P(幸福，国家=英格兰|天气)+ P(幸福，国家=苏格兰|天气)+ P(幸福，国家=威尔士|天气)。</p><p id="c044" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">就是这样！边缘化告诉我们，只要把一些概率相加，就能得到想要的概率量。一旦我们计算出我们的答案(它可以是单个值或分布)，我们就可以得到我们想要的任何属性(推论)。</p><h1 id="2715" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">相关定义</h1><p id="f676" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">如果这个概念听起来与你相似，但你以前没有听说过边缘化，这可能是因为你听说过它被称为一个不同的名字。有时这种方法被称为<strong class="ky ir">,即剔除有害变量。</strong>积分本质上是一个变量“相加”的另一种说法，你正在求和的变量被称为“有害变量”。因此，在上面的示例中，“<em class="ma">country”</em>变量是有害变量。</p><p id="3f8a" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">如果您正在使用<a class="ae lu" href="https://blog.statsbot.co/probabilistic-graphical-models-tutorial-and-solutions-e4f1d72af189" rel="noopener ugc nofollow" target="_blank">概率图形模型</a>，那么边缘化是一种您可以执行精确推理的方法(即，您可以从您感兴趣的分布中写下精确的数量，例如，可以从分布中精确计算出平均值)。在这个语境中边缘化是一种方法，有时与<a class="ae lu" href="https://en.wikipedia.org/wiki/Variable_elimination" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">同义使用，变量消去。</strong> </a></p><h1 id="561e" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">例子:骰子未知的骰子游戏。</h1><p id="6097" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我将仔细阅读世界上最好的数学和计算晶体学家之一艾利·j·麦考伊写的精彩的<a class="ae lu" href="https://doi.org/10.1107/S0907444904016038" rel="noopener ugc nofollow" target="_blank">喜欢可能性</a>论文中给出的例子。如果你正在寻找关于骰子的各种最大似然概念(如对数似然、中心极限定理等)的很好的介绍。)那么我强烈推荐。</p><p id="6f79" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">假设我们有四个骰子:4面骰子，6面骰子，8面骰子和10面骰子(如下所示)。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mb"><img src="../Images/483948200d0fa3711a70ed7a5cd27bb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i4jeY-EWSXnDhvOQGKvKcg.png"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk">The 4 dice that we have. From left to right: 4-sided die, 6-sided die, 10-sided die and an 8-sided die</figcaption></figure><h2 id="1720" class="mk jz iq bd ka ml mm dn ke mn mo dp ki lh mp mq km ll mr ms kq lp mt mu ku mv bi translated">游戏</h2><ul class=""><li id="c0c5" class="mw mx iq ky b kz la ld le lh my ll mz lp na lt nb nc nd ne bi translated">我把一个六面和一个八面的骰子放在一个红色的盒子里，一个四面和十面的骰子放在一个蓝色的盒子里。</li><li id="3267" class="mw mx iq ky b kz nf ld ng lh nh ll ni lp nj lt nb nc nd ne bi translated">我从红色和蓝色的盒子中随机选择一个骰子，并把它们放入黄色的盒子中。</li><li id="1f85" class="mw mx iq ky b kz nf ld ng lh nh ll ni lp nj lt nb nc nd ne bi translated">我从黄色盒子里随机选择一个骰子，掷骰子，告诉你结果。</li></ul><p id="7397" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">玩游戏后，我们被告知结果是3。我们要回答的问题是:<em class="ma">骰子最初最有可能来自红盒子还是蓝盒子？</em></p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/d2f63f7cf17dee90fdd3a06305bcb3d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ffwom24WN3NLZLeiKfeMsw.png"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk">Graphic depiction of the game described above</figcaption></figure><h2 id="211b" class="mk jz iq bd ka ml mm dn ke mn mo dp ki lh mp mq km ll mr ms kq lp mt mu ku mv bi translated">接近解决方案</h2><p id="28bb" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">为了解决这个问题，我们必须计算出当我们掷出3，<em class="ma"> L </em> (box=red| dice roll=3)时，骰子从红色盒子中取出的可能性，以及当我们掷出3，<em class="ma"> L </em> (box=blue| dice roll=3)时，骰子从蓝色盒子中取出的可能性。无论哪个概率最高，都是我们给出的答案。</p><p id="a245" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">那么我们如何计算<em class="ma">L</em>(box =红色|掷骰子=3)和<em class="ma">L</em>(box =蓝色|掷骰子=3)？</p><p id="48f8" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">首先要知道的是，可能性和概率通过以下等式相关联:</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nl"><img src="../Images/2e62d76f7ffcf8fefa33b4a07ac415a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wug2qaodfbM1G0crwXJycw.png"/></div></div></figure><p id="eb16" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">关于这一点的解释，请参见我关于最大似然的帖子的<a class="ae lu" rel="noopener" target="_blank" href="/probability-concepts-explained-maximum-likelihood-estimation-c7b4342fdbb1">结尾。</a></p><p id="79c3" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">这意味着，可能性，<em class="ma"> L </em> (box=red| dice roll=3)，相当于在骰子来自红色盒子的情况下，找出掷出3的概率，即<em class="ma"> P </em> (dice roll=3 | box=red)。同样<em class="ma">L</em>(box =蓝色|掷骰子=3) = <em class="ma"> P </em>(掷骰子= 3 | box =蓝色)。</p><p id="6ec1" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">让我们假设我们已经从红盒子中选择了一个骰子。它可以是六面或八面模具。我有50%的机会选择两个死者中的一个。假设我选择六面骰子。也就是说，我必须从黄色盒子中选择六面骰子，然后掷出3。因此这种情况下的概率由下式给出:</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/f4483e524aac1fa9a68b57b70030809c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Vb_81VfKNFiWKXDOa_QYA.png"/></div></div></figure><p id="c84a" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">只是为了说明一下。“1/2”来自于我有50%的机会从红色盒子中随机选择6面骰子，因为它也包含8面骰子。“1/6”是因为我有一个6面骰子，因此有1/6的机会掷出3。</p><p id="255f" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">请注意，答案中没有包含任何关于从黄色盒子中挑选6面骰子的概率的内容。这是因为在这种情况下，从黄色盒子中挑选六面骰子的概率是1(您可能认为是1/2，因为黄色盒子包含6面骰子和我从蓝色盒子中挑选的任何骰子)。这是因为我们正在计算从6面骰子<strong class="ky ir">掷出3的条件概率，假设骰子来自红色盒子。</strong>因此，在另一个场景中，我们在黄色框中选择另一个骰子是不可能的，因为另一个骰子最初来自蓝色框。给定我们从红框中选择的条件，我们只能从黄框中选择6面骰子，因此从黄框中选择6面骰子的概率是1。</p><p id="de56" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">以类似的方式，我们可以计算结果为3的概率，我们实际上已经从红盒子中挑选了8面骰子。这一次的概率是</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/aa3325e7a3b5bdea9ed54fd18daef748.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wKT0D-6mXjybcjk-bu8TPw.png"/></div></div></figure><p id="0cec" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">我们现在已经完成了计算骰子来自红盒子的概率所需的几乎所有工作。记住，红盒子只包含6面和8面骰子，所以我们要做的就是找出骰子是6面<strong class="ky ir">还是</strong> 8面的概率。从<a class="ae lu" rel="noopener" target="_blank" href="/probability-concepts-explained-introduction-a7c0316de465">的介绍文章</a>中，我们知道在<strong class="ky ir">或</strong>的情况下，我们需要将概率相加。因此，骰子来自红盒子的概率是</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/df6a7607c743e6393e4529993d8b4c3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FPgrlGJAs9kxz5-z3L2MOg.png"/></div></div></figure><p id="44b2" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">对于那些不熟悉上式中数字之间的“wavey”等号的人来说，它的意思是“大约等于”。真正的答案是0.1458333333……(3永远继续下去，我们说这是3的循环)，但我变懒了，只给出了小数点后3位的答案(即四舍五入到小数点后3位)。为了明确我们没有给出准确答案的事实，我们通常使用“wavey”等号。</p><p id="118d" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">我们可以对蓝盒子做同样的计算</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/2e9da2a469f0c852564c195efdc716bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WwiKYvFsK9CvtMmQ5LG88Q.png"/></div></div></figure><p id="e256" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">骰子最初来自蓝盒的概率更高，因此使用最大似然法，我们可以得出骰子最有可能来自蓝盒的结论。</p><h2 id="d872" class="mk jz iq bd ka ml mm dn ke mn mo dp ki lh mp mq km ll mr ms kq lp mt mu ku mv bi translated">那个例子中的边缘化在哪里？</h2><p id="3bee" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">对于那些观察力非常敏锐的人来说，你会注意到我在那个例子部分一次都没有使用“边缘化”这个词。这是因为我想让你直观地理解如何计算从盒子中挑选骰子的概率。</p><p id="b478" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">如果你看上面蓝框的等式，你会看到我们把所有可能性的概率加在一起，即挑选4面骰子和10面骰子。这是边缘化！我们对讨厌的变量(骰子)求和。注意，在那个游戏中，我们根本没有观察到我们选择的骰子，我们也不需要观察！我们需要知道的只是结果(掷骰子= 3)和骰子的所有可能值。这就是它如此强大的原因。我们可以计算出我们从未观察到的事情的概率。只要我们知道有害变量的可能值，我们总是可以使用它来执行边缘化，并计算不同变量的分布。</p><h1 id="7b27" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">注释</h1><p id="fd29" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这是我让我们写一些更可怕的方程的部分，但是请耐心听我说，我会尽力让它变得容易理解。</p><p id="f06a" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">让我们想想我们刚刚在示例中做了什么。我们从联合概率开始，<em class="ma"> P </em>(掷骰子，骰子|盒子)(即<em class="ma">掷骰子</em>是3，<em class="ma">骰子</em>是我们选择掷骰子的骰子，<em class="ma">盒子</em>是我们选择骰子的原始盒子；蓝色或红色)。一旦我们执行边缘化，我们就以条件概率结束，<em class="ma"> P </em>(掷骰子|盒子)。这是边缘化的主要好处之一。我们可以从联合概率到条件概率。</p><p id="48fd" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">事实上我们也可以从联合概率到边际概率。如果你看到边缘化的数学定义，这就是你会看到的典型形式。如果你还没看好数学定义，…你很幸运。你马上就要看到了。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nq"><img src="../Images/214d67b4affcd83c53b8b2f47606f59a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7G7DfNzc0Aqn60EIDudE0w.png"/></div></div></figure><p id="349f" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">大的ol' ∑是懒惰的数学家符号，表示“把所有的东西加起来”，它下面的<em class="ma">【y】</em>告诉我们应该把什么加起来。所以等式是这样说的，<em class="ma">“如果你想要X的边际概率(等号的左边)，那么你需要把Y的每个可能结果的X和Y的联合概率加起来”</em>。</p><p id="b386" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">联合概率有时很难处理，所以我们可以使用概率中的<a class="ae lu" href="https://www.khanacademy.org/math/ap-statistics/probability-ap/probability-multiplication-rule/a/general-multiplication-rule" rel="noopener ugc nofollow" target="_blank">一般乘法规则</a>重写右边的联合概率，我在<a class="ae lu" rel="noopener" target="_blank" href="/probability-concepts-explained-introduction-a7c0316de465">介绍性博客帖子中展示过。</a></p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nr"><img src="../Images/db0fe81618d88ff432bcd2e87dca799d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j2R1fc9IvneSwsqnzjw8Lg.png"/></div></div></figure><p id="282a" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">最右边的等式是条件分布和边际分布的乘积，有时边际分布更容易计算。</p><p id="1eac" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">正如我之前提到的,∑告诉我们“将一切相加”。我没有提到的是，只有当变量为<em class="ma">“离散”时，才会使用特定符号。</em>我的意思是，变量只能取有限数量的值。在前面的例子中，我们对离散的讨厌变量求和(例如，英国国家只能是英格兰、威尔士或苏格兰，骰子只有有限的结果数，例如6面的从1到6)。但是离散值不一定是有限的。例如，它们可以是所有的正整数(即正整数)，如1、2、3、…。等等。</p><p id="2bcb" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">然而，当我们处理在给定范围内具有无限个可能值的变量时(例如，0到10米之间的距离测量可以具有无限个值，例如5米、5.1米、5.01米、5.001米、5.0001米……等等)，我们将这些变量称为“<em class="ma">连续变量</em>，并且我们不使用∑符号。相反，我们使用∫。这个符号仍然告诉我们，我们必须把所有的东西加起来，但是我们知道这个讨厌的变量是连续的，所以我们把边际化写成</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ns"><img src="../Images/2cabd91936cc01dbe40d388af7eec62b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oiqxUUAKFRc0N2D-a2ObTA.png"/></div></div></figure><p id="b42c" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">这与上面离散变量情况下的边际化方程意思相同。结尾的“d <em class="ma"> y </em>”告诉我们要积分什么(“积分”是我们在处理连续变量时对“加法”的称呼)。</p><p id="6bd9" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">“d <em class="ma"> y </em>是必要的原因是，如果我们不声明它，我们要积分的东西并不总是很明显。考虑干扰变量是围绕圆的角度的情况。我们知道角度在0到360度之间，或者更专业地说，我们喜欢用弧度来代替我们所说的从0到2π的角度</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/710fa7275503be18d63ccf52212ef2a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/1*PxFQE9g75RyamtHEAGYJxg.gif"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk"><a class="ae lu" href="https://en.wikipedia.org/wiki/Radian#/media/File:Circle_radians.gif" rel="noopener ugc nofollow" target="_blank">Source: Wikipedia</a>. Radians in a circle</figcaption></figure><p id="5f24" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">所以我们可能会想写</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nu"><img src="../Images/1cb2acf7a09b25bb37ee4ce0a1f24ffe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z0F3GYgax96ej7xVCsE7qA.png"/></div></div></figure><p id="1151" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">我们知道我们需要对从0到2π的值进行积分，但是我们是对X的值进行积分还是对Y的值进行积分呢？全世界的数学家都渴望为上述暴行打我一巴掌。</p><p id="3e78" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">为了解决这个问题，我们将“d <em class="ma"> y </em>放在最后，以明确我们正在对0和2π之间的<em class="ma"> Y </em>值进行积分，这意味着我们也知道答案是X上的边际分布(如下)。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nv"><img src="../Images/493e7c833cf90cdb3ce2ada5121dc8b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RMxClUodrkyxYlt1Ylc97A.png"/></div></div></figure><p id="02d5" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">对那些感兴趣的人来说，积分从0到2π的角度是我们在X射线晶体学中必须做的事情，这是我博士学位的领域，因为有一个叫做<a class="ae lu" href="https://en.wikipedia.org/wiki/Phase_problem" rel="noopener ugc nofollow" target="_blank">相位问题</a>。这基本上是一个问题，我们不能在实验中测量“相位”,而相位可以像角度一样被数学处理。因此，为了计算我们观察到的数据的理论分布，我们必须忽略这些阶段。</p><p id="a032" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated"><a class="nw nx ep" href="https://medium.com/u/1cdc1cca2f85?source=post_page-----2296846344fc--------------------------------" rel="noopener" target="_blank">亚当·凯莱赫</a>在他的<a class="ae lu" href="https://github.com/akelleh/causality" rel="noopener ugc nofollow" target="_blank">因果包</a>中使用边缘化来消除混杂变量的影响。他还使用一般乘法法则，把边际化写成我们上面讨论过的条件分布和边际分布的乘积。你可以在他的<a class="ae lu" href="https://medium.com/@akelleh/causal-inference-with-pandas-dataframes-fc3e64fce5d" rel="noopener">博客中读到。</a></p><h1 id="2e3b" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">结束语</h1><h2 id="613f" class="mk jz iq bd ka ml mm dn ke mn mo dp ki lh mp mq km ll mr ms kq lp mt mu ku mv bi translated">概率的链式法则</h2><p id="5875" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在上面的计算中，我们实际上使用了一个相当普通的概率程序，甚至没有意识到这一点。我们使用的结果是概率的<em class="ma">链式法则</em>(不要与微分的<a class="ae lu" href="https://en.wikipedia.org/wiki/Chain_rule" rel="noopener ugc nofollow" target="_blank">链式法则</a>混淆)。它指出</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/e464dcabb75ee5e4b7b794f10d18829f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zxfcX5hL6jLSgvJLcWYOsg.png"/></div></div></figure><p id="a2e0" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">它允许我们将联合概率(左侧)写成条件概率和边际概率(右侧)的乘积</p><p id="3608" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">这在计算联合分布时经常用到，因为正如我们已经提到的，确定条件概率和边际概率更容易。</p><p id="8024" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">要查看我们在哪里使用了上面的结果，请记住我们使用了等式</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/f4483e524aac1fa9a68b57b70030809c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Vb_81VfKNFiWKXDOa_QYA.png"/></div></div></figure><p id="1d93" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">比较这些等式，我们可以让A =骰子滚动，B =骰子，C =盒子。这意味着我们可以把上面等式的左边写成</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nz"><img src="../Images/ddbe3b66ab61dccabb1130a8a51b9479.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XcMMozU7RMNYbStiRCllXQ.png"/></div></div></figure><p id="5a17" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">现在让我们来理解这些。</p><ul class=""><li id="df64" class="mw mx iq ky b kz lv ld lw lh oa ll ob lp oc lt nb nc nd ne bi translated"><em class="ma"> P </em>(掷骰子= 3|骰子= 6面，盒子=红色)是我们掷出3的概率，假设我们拿起6面骰子，它在红色盒子里。这等于1/6。</li><li id="3aa9" class="mw mx iq ky b kz nf ld ng lh nh ll ni lp nj lt nb nc nd ne bi translated"><em class="ma"> P </em>(骰子= 6面|盒子=红色)是我们从红色盒子中选择6面骰子的概率。这等于1/2。</li></ul><p id="820e" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">因此，我们得到1/2 ✕ 1/6，这正是我们在这个例子中通过直觉确定的结果。</p><p id="f2c2" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">这里我们用三个变量展示了链式法则。如果你看看维基百科上<a class="ae lu" href="https://en.wikipedia.org/wiki/Chain_rule_(probability)" rel="noopener ugc nofollow" target="_blank">链式法则的定义(看起来更可怕),你会看到它对于四个变量和无限多个变量的样子。</a></p><p id="5a0f" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">这看起来很可怕，但想法是一样的。我们在左边有一个联合概率分布，我们想把它写成右边的条件概率和边际概率的乘积。</p><h2 id="aa9c" class="mk jz iq bd ka ml mm dn ke mn mo dp ki lh mp mq km ll mr ms kq lp mt mu ku mv bi translated">用于贝叶斯推理</h2><p id="5da1" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">如果你读了我以前关于<a class="ae lu" rel="noopener" target="_blank" href="/probability-concepts-explained-bayesian-inference-for-parameter-estimation-90e8930e5348">贝叶斯推理</a>的文章，你会知道贝叶斯定理的模型形式被写成</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi od"><img src="../Images/f4c859142e902fc52cdf8470144e35b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uDbeG6aZP16h46S1DboWHg.png"/></div></div></figure><p id="c7c9" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">我提到过，我们经常不计算分母P(数据)，也称为归一化常数，因为在许多情况下它可能太难计算，我们并不总是需要它。</p><p id="b14b" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">在某些情况下，我们可以精确计算，边缘化会有所帮助。如果我们将边缘化方程写成与上述“<em class="ma">符号</em>”部分中连续变量情况相同的形式，我们得到</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oe"><img src="../Images/bc05c41d44464734689a6acb74c283ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8bmSsf7p9FOoaN9L2WLM2g.png"/></div></div></figure><p id="6a50" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">显而易见，我们通过所有可能的参数值对右侧进行积分。在某些情况下，我们可以精确地或近似地计算这个表达式，这样我们就可以得到一个归一化的后验分布。</p></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><p id="9234" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">再次感谢你能走到这一步。我知道这篇文章包含了很多数学知识，但我希望它有意义。如果有什么不清楚的，你想让我写的或者我可以改进的地方，请不要犹豫让我知道。</p><p id="87a9" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">谢谢大家！</p></div></div>    
</body>
</html>