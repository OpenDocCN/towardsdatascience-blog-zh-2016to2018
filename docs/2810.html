<html>
<head>
<title>Web Scraping Basics — Selenium and Beautiful Soup applied to searching for campsite availability</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网页抓取基础知识——硒和美丽的汤应用于搜索营地可用性</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/web-scraping-basics-selenium-and-beautiful-soup-applied-to-searching-for-campsite-availability-4a8de1decac9?source=collection_archive---------2-----------------------#2018-03-09">https://towardsdatascience.com/web-scraping-basics-selenium-and-beautiful-soup-applied-to-searching-for-campsite-availability-4a8de1decac9?source=collection_archive---------2-----------------------#2018-03-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/857c0f3f723b78c1489484dbee2793d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wZ87hzEubJ8xxBhfoudu2w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">[Image[1] (Image courtesy: <a class="ae kc" href="https://pixabay.com" rel="noopener ugc nofollow" target="_blank">https://pixabay.com</a>)]</figcaption></figure><p id="1875" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于数据科学领域的人来说，网络搜集是一项重要的基本数据收集技能。它对于收集项目和兴趣的小信息也非常有用。并不是你分析的每一个数据集都能以一种方便的格式获得，而且，如果你想做有趣和独特的分析，那么通过搜集自己编译一个数据集是做新颖和有见地的工作的一个很好的方法。</p><p id="7282" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我将介绍Python中抓取的一些基础知识，并提供创建一个抓取器的示例代码，该抓取器将收集关于即将到来的营地预留空缺的信息。我选择这个特别的例子，是因为我想解决自己在加州营地保留地导航的问题，还因为除了促进技术素养，帮助人们走出户外享受自然对我个人来说也很有意义。</p><p id="89b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们开始吧——如果你从头到尾都遵循了这篇教程和文章，你应该掌握了从网络上收集易于访问的数据并用于你自己的项目的所有技能。更具体地说，您将能够:</p><ul class=""><li id="0dba" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">了解如何导航HTML源代码以找到您想要捕获的信息</li><li id="35bc" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">使用Beautiful Soup从网站收集并解析HTML代码</li><li id="18a1" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">使用Selenium和ChromeDriver自动导航到站点，在文本框中填充信息，单击所需的下拉菜单和输入，并为多个网站地址、变量和输入返回这样做的响应</li><li id="b292" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">了解如何使用Requests、ChromeDriver、BeautifulSoup和Selenium进行网页抓取的基础知识</li><li id="da73" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">使用Pandas解析HTML表，使用datetime转换日期</li></ul><p id="9a96" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lp">一些背景和基础知识:</em></p><p id="b871" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Web抓取就是从互联网上自动收集和解析数据。这些数据可以构成数据科学项目的基础，用于比较各种产品或服务，用于研究或其他商业用途。</p><p id="a422" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Python中有许多对web抓取有用的库，一些主要的有:<a class="ae kc" href="http://docs.python-requests.org/en/master/" rel="noopener ugc nofollow" target="_blank">请求</a>、<a class="ae kc" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank">美汤</a>、<a class="ae kc" href="http://selenium-python.readthedocs.io/" rel="noopener ugc nofollow" target="_blank">硒</a>和<a class="ae kc" href="https://scrapy.org/" rel="noopener ugc nofollow" target="_blank">刺儿头</a>。本教程将只涵盖前三个，但我会鼓励你自己去看看Scrapy。</p><p id="1461" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将使用Requests向网站发送请求信息，使用Beautiful Soup提取和解析HTML组件，使用Selenium选择和导航网站中非静态的、需要单击或从下拉菜单中选择的组件。</p><p id="2283" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你不熟悉HTML——超文本标记语言，也称为web编码语言——你可能想尝试一下<a class="ae kc" href="https://www.w3schools.com/html/html_basic.asp" rel="noopener ugc nofollow" target="_blank"> W3schools基础教程</a>,然而对于这个例子来说，你只需要熟悉一些标题的<a class="ae kc" href="https://www.w3schools.com/tags/ref_byfunc.asp" rel="noopener ugc nofollow" target="_blank">基本标签</a>&lt;标题&gt;、表格&lt;表格&gt;以及行&lt; tr &gt;和数据单元格&lt; td &gt;、项目列表&lt; li &gt;和链接【T22】就足够了</p><p id="be44" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">网络抓取示例——营地预订信息教程</strong></p><figure class="lr ls lt lu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lq"><img src="../Images/11c0fede66afdef0bfb8a7e95d85d55e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NyqQo14-K-1fKN8RnJZVRw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">[Image[2] — Recreation.gov search bar (Image courtesy: <a class="ae kc" href="https://pixabay.com" rel="noopener ugc nofollow" target="_blank">https://recreation.</a>gov)]</figcaption></figure><p id="8738" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将要浏览和收集信息的网站是<a class="ae kc" href="https://www.recreation.gov/" rel="noopener ugc nofollow" target="_blank">www.recreation.gov</a>，特别是他们的<a class="ae kc" href="https://www.recreation.gov/camping/aspen-hollow-group/r/campgroundDetails.do?contractCode=NRSO&amp;parkId=71546" rel="noopener ugc nofollow" target="_blank">页面，用于预订阿斯彭·霍洛群营地</a>。</p><p id="524a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们首先导入这项工作所需的库，并定义要导航到的url:</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="92c7" class="ma mb iq lw b gy mc md l me mf">from bs4 import BeautifulSoup<br/>from selenium import webdriver<br/>from selenium.webdriver.common.keys import Keys<br/>from random import randint<br/>import datetime<br/>import os<br/>import time<br/>import pandas as pd</span><span id="a37c" class="ma mb iq lw b gy mg md l me mf">url = '<a class="ae kc" href="https://www.recreation.gov/camping/aspen-hollow-group/r/campgroundDetails.do?contractCode=NRSO&amp;parkId=71546'" rel="noopener ugc nofollow" target="_blank">https://www.recreation.gov/camping/aspen-hollow-group/r/campgroundDetails.do?contractCode=NRSO&amp;parkId=71546'</a></span></pre><p id="c93d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我对查找与我当前日期相关的预订感兴趣，所以我将使用datetime库来管理它。下面的代码存储今天的。现在时间戳为当前时间，时间戳的一部分为今天的日期，格式为网站可以读取的格式。</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="f378" class="ma mb iq lw b gy mc md l me mf">current_time = datetime.datetime.now()<br/>current_time.strftime("%m/%d/%Y")</span></pre><p id="7bff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我可以定义我想在露营地呆多少个晚上，从现在开始我想看多远，以及我想查看多少个周末的预订，以便开始为这些日期收集信息:</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="9b24" class="ma mb iq lw b gy mc md l me mf">nights_stay = 2<br/>weeks_from_now_to_look = 13<br/>how_many_weeks_to_check = 4</span></pre><p id="c385" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在查看了预订网站如何格式化输入日期后，我将检查以确保我的格式化方式看起来是正确的:</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="ade9" class="ma mb iq lw b gy mc md l me mf">for week in range(0, how_many_weeks_to_check):<br/>    start_date = current_time + datetime.timedelta(days=week*7) + datetime.timedelta(days=weeks_from_now_to_look*7)<br/>    end_date = start_date + datetime.timedelta(days=nights_stay)<br/>    print(start_date.strftime("%a %b %d %Y") + ' to ' + end_date.strftime("%a %b %d %Y"))</span></pre><p id="8ff3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这给了我一个看起来正确的输出—我看到的是:</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="4ce8" class="ma mb iq lw b gy mc md l me mf">Sat Jun 02 2018 to Mon Jun 04 2018<br/>Sat Jun 09 2018 to Mon Jun 11 2018<br/>Sat Jun 16 2018 to Mon Jun 18 2018<br/>Sat Jun 23 2018 to Mon Jun 25 2018</span></pre><p id="6f87" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了选择网站的元素并解析出将返回我想要的信息的源代码，我将通过右键单击并选择“inspect”来选择网站的元素，这将允许我查看页面的HTML源代码，并将自动突出显示我单击的元素。</p><figure class="lr ls lt lu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mh"><img src="../Images/f2dd5be8a6b9b7450093c0725f355a2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m8NUR89HBAqiQbjroe3E-g.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">[Image[3] — Inspecting source code (Image courtesy: <a class="ae kc" href="https://pixabay.com" rel="noopener ugc nofollow" target="_blank">https://recreation.</a>gov)]</figcaption></figure><p id="e9c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从那里，我可以右键单击与我感兴趣的元素相关的代码，并复制xpath，这样我就可以在我的抓取代码中使用它作为导航输入。</p><figure class="lr ls lt lu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mi"><img src="../Images/a232edfc9e6c62d1b9ee6dc3af5b002f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YHQJWQbUKFphzD-FU3Uu5Q.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">[Image[4] — Coping element XPath (Image courtesy: <a class="ae kc" href="https://pixabay.com" rel="noopener ugc nofollow" target="_blank">https://recreation.</a>gov)]</figcaption></figure><p id="4456" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我将这样做来查找到达日期、离开日期和输出信息摘要的类路径的xpath，以便我可以使用chromedriver来根据路径查找和选择这些元素。</p><p id="77b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面的代码通过访问网站，在开始和结束日期字段中选择和输入信息，然后将它得到的汇总信息存储到我命名为<code class="fe mj mk ml lw b">camping_availability_dictionary</code>的字典中来实现这一点。请注意，我在这段代码中包含了一个介于3和6之间的随机整数秒的时间延迟，这样，如果您运行这个示例，您将能够看到chromedriver启动、导航、输入您的开始和结束日期，以及点击。我通过类名找到站点摘要数据，并将其存储到一个列表中，然后获取该列表的文本并保存到我初始化的字典中。该字典使用文本格式的搜索开始和结束日期作为关键字，并将搜索的摘要数据存储为其值。</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="cec1" class="ma mb iq lw b gy mc md l me mf">chromedriver = "/Applications/chromedriver"<br/>os.environ["webdriver.chrome.driver"] = chromedriver</span><span id="cf62" class="ma mb iq lw b gy mg md l me mf">driver = webdriver.Chrome(chromedriver)</span><span id="12c4" class="ma mb iq lw b gy mg md l me mf">time_delay = randint(3,6)<br/>camping_availability_dictionary={}</span><span id="826e" class="ma mb iq lw b gy mg md l me mf">for week in range(0,how_many_weeks_to_check):<br/>    driver.get(url)<br/>    time.sleep(time_delay)<br/>    start_date = current_time + datetime.timedelta(days=week*7) + datetime.timedelta(days=weeks_from_now_to_look*7)<br/>    end_date = start_date + datetime.timedelta(days=nights_stay)<br/>    selectElem=driver.find_element_by_xpath('//*[<a class="ae kc" href="http://twitter.com/id" rel="noopener ugc nofollow" target="_blank">@id</a>="arrivalDate"]')<br/>    selectElem.clear()<br/>    selectElem.send_keys(start_date.strftime("%a %b %d %Y"))<br/>    time.sleep(time_delay)<br/>    selectElem.submit()<br/>    time.sleep(time_delay)<br/>    selectElem=driver.find_element_by_xpath('//*[<a class="ae kc" href="http://twitter.com/id" rel="noopener ugc nofollow" target="_blank">@id</a>="departureDate"]')<br/>    selectElem.clear()<br/>    selectElem.send_keys(end_date.strftime("%a %b %d %Y"))<br/>    time.sleep(time_delay)<br/>    selectElem.submit()<br/>    time.sleep(time_delay)<br/>    site_data = driver.find_elements_by_class_name('searchSummary')<br/>    time.sleep(time_delay)<br/>    <br/>    property_data = []</span><span id="6b81" class="ma mb iq lw b gy mg md l me mf">for i in site_data:<br/>        if len(i.text) != 0:<br/>             property_data.append(i.text)<br/>          <br/>    camping_availability_dictionary[start_date.strftime("%a %b %d %Y") + ' to ' + end_date.strftime("%a %b %d %Y")] = property_data        <br/>    <br/>    time.sleep(time_delay)</span></pre><p id="d72a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，如果我查看一下<code class="fe mj mk ml lw b">camping_availability_dictionary</code>存储了什么，它有以下键和值:</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="8121" class="ma mb iq lw b gy mc md l me mf">{'Sat Jun 02 2018 to Mon Jun 04 2018': ['1 site(s) available out of 1 site(s)\nALL (1)\nGROUP STANDARD NONELECTRIC (1)'],<br/> 'Sat Jun 09 2018 to Mon Jun 11 2018': ['0 site(s) available out of 1 site(s)\nALL (0)\nGROUP STANDARD NONELECTRIC (0)'],<br/> 'Sat Jun 16 2018 to Mon Jun 18 2018': ['0 site(s) available out of 1 site(s)\nALL (0)\nGROUP STANDARD NONELECTRIC (0)'],<br/> 'Sat Jun 23 2018 to Mon Jun 25 2018': ['0 site(s) available out of 1 site(s)\nALL (0)\nGROUP STANDARD NONELECTRIC (0)']}</span></pre><p id="cbf8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这对于了解这个站点的可用性来说已经足够了，但是让我们使用其他的图书馆来整理信息，并把一些露营地服务打印出来。</p><p id="cd78" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将导入我们的请求库，通过html文本从我们的url和页面请求信息，并定义我们的汤配方:</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="4d30" class="ma mb iq lw b gy mc md l me mf">import requests</span><span id="3b31" class="ma mb iq lw b gy mg md l me mf">response = requests.get(url)<br/>page = response.text<br/>soup = BeautifulSoup(page,"lxml")</span></pre><p id="d177" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们要打印出刚刚通过调用<code class="fe mj mk ml lw b">print(soup.prettify())</code>得到的页面信息，我们会看到页面的HTML代码的格式化版本，比如:</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="6139" class="ma mb iq lw b gy mc md l me mf">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en" xml:lang="en"  xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:og="http://opengraphprotocol.org/schema/"&gt;<br/> &lt;head&gt;<br/>  &lt;meta content="IE=edge" http-equiv="X-UA-Compatible"/&gt;<br/>  &lt;script type="text/javascript"&gt;<br/>   window.name="ra";<br/>			var _brandName_ = "NRSO";<br/>  &lt;/script&gt;<br/>  &lt;script type="text/javascript"&gt;<br/>   // Instructions: please embed this snippet directly into every page in your website template.<br/>	    // For optimal performance, this must be embedded directly into the template, not referenced<br/>	    // as an external file.</span></pre><p id="f2eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过滚动该文本，我们可以看到我们可能想要获取<title>块，因此让我们获取该标题并将其分配给一个新变量— <code class="fe mj mk ml lw b">campsite_info=(soup.find("title"))</code>我们可以获得该新元素的文本，并看到它确实是我们的露营地标题— <code class="fe mj mk ml lw b">campsite_info.get_text()</code>返回:</title></p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="47d2" class="ma mb iq lw b gy mc md l me mf"> ‘Facility Details — ASPEN HOLLOW GROUP, CA — Recreation.gov’</span></pre><p id="cc30" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">进一步查看代码，我们可以看到我们想要的内容表，并使用基于类名的find:</p><p id="f108" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mj mk ml lw b">print(soup.find_all(class_='contable'))</code></p><p id="0fee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">退货:</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="9984" class="ma mb iq lw b gy mc md l me mf">[&lt;table class="contable" id="contenttable" name="contenttable"&gt;<br/>&lt;thead&gt;<br/>&lt;tr style="display:none;"&gt;<br/>&lt;th id="th1"&gt;th1&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;<br/>&lt;tbody&gt;<br/>&lt;tr&gt;<br/>&lt;td class="td1" colspan="2"&gt;Within Facility&lt;/td&gt;&lt;/tr&gt;<br/>&lt;tr&gt;<br/>&lt;td class="td2"&gt;&lt;ul class="detail"&gt;&lt;li&gt;Bike Rentals&lt;/li&gt;&lt;li&gt;Boat Rentals&lt;/li&gt;&lt;li&gt;Campfire Rings&lt;/li&gt;&lt;li&gt;Drinking Water&lt;/li&gt;&lt;li&gt;Food storage lockers&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;<br/>&lt;td class="td2"&gt;&lt;ul class="detail"&gt;&lt;li&gt;General Store&lt;/li&gt;&lt;li&gt;Laundry Facilities&lt;/li&gt;&lt;li&gt;Potable Water&lt;/li&gt;&lt;li&gt;Vault Toilets&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;&lt;/tr&gt;<br/>&lt;tr class="brline"&gt;<br/>&lt;td class="td1" colspan="2"&gt;Within 10 Miles&lt;/td&gt;&lt;/tr&gt;<br/>&lt;tr&gt;<br/>&lt;td class="td2"&gt;&lt;ul class="detail"&gt;&lt;li&gt;Canoeing&lt;/li&gt;&lt;li&gt;Fishing&lt;/li&gt;&lt;li&gt;Kayaking&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;<br/>&lt;td class="td2"&gt;&lt;ul class="detail"&gt;&lt;li&gt;Swimming&lt;/li&gt;&lt;li&gt;Wireless Internet&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;]</span></pre><p id="5d57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们只想获取该文本，让我们使用<code class="fe mj mk ml lw b">table_body = soup.find_all(class='contable')</code>将它分配给一个变量，并获取该列表的第一个元素，以便对信息进行一些格式化。</p><p id="e627" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为最终输出，我们希望打印出营地信息和可用性，以及设施内和设施附近的内容摘要:</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="279d" class="ma mb iq lw b gy mc md l me mf">print(campsite_info.get_text()+"\n")<br/>print("Campsite availability: \n")<br/>                <br/>for key in camping_availability_dictionary:<br/>    full_string = str(camping_availability_dictionary[key])<br/>    parsed_string = " - " + full_string.split(" out of")[0][2::] + ", type: " + full_string.split("ALL")[1][6:-5]<br/>    print(key, parsed_string)  <br/>print("\n")</span><span id="63b9" class="ma mb iq lw b gy mg md l me mf">rows = table_body[0].find_all('tr')<br/>for row in rows:<br/>    columns = row.find_all('td')<br/>    for column in columns:<br/>        string = column.get_text()<br/>        if string == 'Within Facility':<br/>            print("Items Within Facility: \n")<br/>        if string == 'Within 10 Miles':<br/>            print("\nItems Within 10 Miles: \n")   <br/>        else:    <br/>            items = column.find_all('li')<br/>            for item in items:<br/>                words = item.get_text()<br/>                print(words)</span></pre><p id="d34e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面给出了我们的最终输出:</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="4522" class="ma mb iq lw b gy mc md l me mf">Facility Details - ASPEN HOLLOW GROUP, CA - Recreation.gov<br/><br/>Campsite availability: <br/><br/>Sat Jun 02 2018 to Mon Jun 04 2018  - 1 site(s) available, type: GROUP STANDARD NONELECTRIC <br/>Sat Jun 09 2018 to Mon Jun 11 2018  - 0 site(s) available, type: GROUP STANDARD NONELECTRIC <br/>Sat Jun 16 2018 to Mon Jun 18 2018  - 0 site(s) available, type: GROUP STANDARD NONELECTRIC <br/>Sat Jun 23 2018 to Mon Jun 25 2018  - 0 site(s) available, type: GROUP STANDARD NONELECTRIC <br/><br/><br/>Items Within Facility: <br/><br/>Bike Rentals<br/>Boat Rentals<br/>Campfire Rings<br/>Drinking Water<br/>Food storage lockers<br/>General Store<br/>Laundry Facilities<br/>Potable Water<br/>Vault Toilets<br/><br/>Items Within 10 Miles: <br/><br/>Canoeing<br/>Fishing<br/>Kayaking<br/>Swimming<br/>Wireless Internet</span></pre><p id="700d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在你可以去预定那个网站了——露营快乐！</p><p id="262f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">参考链接:</strong></p><ul class=""><li id="f77b" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated"><a class="ae kc" href="http://docs.python-requests.org/en/master/" rel="noopener ugc nofollow" target="_blank">请求文档</a></li><li id="ebde" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank"> BeautifulSoup文档</a></li><li id="b6a7" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" href="http://selenium-python.readthedocs.io/" rel="noopener ugc nofollow" target="_blank">硒文档</a></li><li id="9d66" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" href="https://sites.google.com/a/chromium.org/chromedriver/getting-started" rel="noopener ugc nofollow" target="_blank"> Chromedriver启动信息</a></li></ul></div></div>    
</body>
</html>