<html>
<head>
<title>A hitchhiker guide to python NumPy Arrays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">python NumPy 数组的搭便车指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-hitchhiker-guide-to-python-numpy-arrays-9358de570121?source=collection_archive---------1-----------------------#2018-08-03">https://towardsdatascience.com/a-hitchhiker-guide-to-python-numpy-arrays-9358de570121?source=collection_archive---------1-----------------------#2018-08-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/c520f3907e96c180732f77a1dc2f4255.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z8ICq2eMBuCvtcnTwUe-mg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">A hitchhiker guide to python NumPy Arrays</figcaption></figure><div class=""/><p id="65c8" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果您正在使用 python 进行数据科学研究，那么您要么使用过 NumPy，要么肯定听说过它。大多数需要将数据存储在内存中的统计分析都使用 Numpy。</p><blockquote class="la lb lc"><p id="4f27" class="kc kd ld ke b kf kg kh ki kj kk kl km le ko kp kq lf ks kt ku lg kw kx ky kz ij bi translated">有人可能会问为什么是 NumPy？难道 python 列表或其他数据结构不能做同样的事情吗？</p></blockquote><p id="2a9c" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">嗯，是也不是，在 NumPy 中没有什么是不能通过 python 列表或使用其他数据结构来完成的，但是，NumPy 提供了一个有效的存储和更好的方式来处理使用简单 API 的数学运算的数据，其好处远远超过了编写自己的代码。</p><blockquote class="lh"><p id="97a5" class="li lj jf bd lk ll lm ln lo lp lq kz dk translated">NumPy 为数学运算提供了高效的存储和更好的数据处理方式</p></blockquote><h1 id="55e8" class="lr ls jf bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">为什么使用 NumPy 数组？</h1><p id="bd80" class="pw-post-body-paragraph kc kd jf ke b kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz ij bi translated">NumPy 用于创建<strong class="ke jg"> <em class="ld">同构</em> </strong> n 维数组(n = 1..n)。与 Python 列表不同，NumPy 数组的所有元素都应该是同一类型。因此，如果提供了数据类型，下面的代码无效</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="7a9b" class="nd ls jf mz b gy ne nf l ng nh">numpy_arr = np.array([1,2,"Hello",3,"World"], dtype=np.int32)  # Error</span></pre><p id="359c" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然而，对于 python 列表，这是一个有效的代码</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="c643" class="nd ls jf mz b gy ne nf l ng nh">py_arr = [1,2,"Hello",3,"World"]  # Valid Code</span></pre><blockquote class="la lb lc"><p id="77d1" class="kc kd ld ke b kf kg kh ki kj kk kl km le ko kp kq lf ks kt ku lg kw kx ky kz ij bi translated">考虑到可以在 NumPy 数组上执行的数学运算，NumPy 数组被创建为同构数组。对于异构数据集，这是不可能的。</p></blockquote><p id="1618" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我们看看 NumPy 为我们提供了什么额外的好处，以及它如何简化我们的编程生活，尤其是处理数学计算的编程。</p><h2 id="69e1" class="nd ls jf bd lt ni nj dn lx nk nl dp mb kn nm nn mf kr no np mj kv nq nr mn ns bi translated">1.NumPy 使用更少的内存来存储数据</h2><p id="0184" class="pw-post-body-paragraph kc kd jf ke b kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz ij bi translated">与 python 列表相比，<code class="fe nt nu nv mz b">NumPy</code>数组占用的内存要少得多。它还提供了指定内容的数据类型的机制，这允许进一步优化代码。</p><p id="1bf0" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">作为一个例子，我们可以使用 python list 和使用<code class="fe nt nu nv mz b">numpy.array(...)</code>创建一个简单的 6 个元素的数组，它所占用的内存量的差异是相当惊人的。参见下面的例子</p><figure class="mu mv mw mx gt is"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="b491" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果这种差异看起来令人生畏，那就准备好接受更多。如果我们知道我们计划拥有的单个数据的最大数量，就有可能对 NumPy 数组做进一步的优化。</p><p id="3c10" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在上面的例子中，NumPy 默认认为这些整数是<code class="fe nt nu nv mz b">8 Bytes</code>整数，但是，如果我们知道数据的最大范围，我们可以用 NumPy 数组提供数据类型。例如，我们可以使用<code class="fe nt nu nv mz b">1 Byte</code>整数存储到<code class="fe nt nu nv mz b">255</code>的数字，使用<code class="fe nt nu nv mz b">2 Bytes</code>整数存储到<code class="fe nt nu nv mz b">65535</code>的数字</p><figure class="mu mv mw mx gt is"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="6874" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">优化的内存分配不仅限于存储数字，它还扩展到存储字符串。但是，由于 NumPy 数组主要用于数学计算，string 将很少被存储和使用。然而，知道需求是否出现是很好的</p><figure class="mu mv mw mx gt is"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="5f13" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">类似地，NumPy 数组在存储浮点值方面提供了相当大的节省。</p><figure class="mu mv mw mx gt is"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="2ec3" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在我们知道了 NumPy 的内存优势，让我们继续了解它如何允许我们创建多维数组</p></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><h2 id="84b9" class="nd ls jf bd lt ni nj dn lx nk nl dp mb kn nm nn mf kr no np mj kv nq nr mn ns bi translated">2.使用 NumPy 创建 n 维数组</h2><p id="ae52" class="pw-post-body-paragraph kc kd jf ke b kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz ij bi translated">n 维数组通常用于创建矩阵或张量，也主要用于数学计算目的。与基于 python 列表的 n 维数组相比，NumPy 不仅节省了内存使用，还提供了大量额外的好处，使数学计算变得容易</p><p id="3da9" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这是我们可以用 NumPy n 维数组做的一系列事情，否则很难做到。</p></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="bcd9" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="ld">只要多重因子产生相同数量的元素，数组的维数就可以在运行时改变。例如，2 * 5 的矩阵可以转换为 5 * 2，1 * 4 可以转换为 2 * 2。这可以通过调用数组</em>上的 NumPy  <code class="fe nt nu nv mz b"><em class="ld">.reshape(...)</em></code> <em class="ld">函数来完成</em></p><figure class="mu mv mw mx gt is"><div class="bz fp l di"><div class="nw nx l"/></div></figure></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="fafb" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="ld"> NumPy 也可以为一个数组生成一组预定义的数。使用</em> <code class="fe nt nu nv mz b"><em class="ld">numpy.arange(...)</em></code> <em class="ld">功能可以生成一组预定义的数字(包括小数步长)。这个函数的输出总是一维的数字集合。但是，我们可以对这个输出使用 reshape 来生成我们选择的维度。</em></p><figure class="mu mv mw mx gt is"><div class="bz fp l di"><div class="nw nx l"/></div></figure></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="810b" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="ld"> NumPy 提供了使用预先填充的 1 和 0 创建 n 维数组的 API，其中矩阵的所有成员不是 0 就是 1。最有可能的用途之一是为机器学习创建一个稀疏或密集的矩阵。</em></p><p id="8839" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="ld">默认情况下，NumPy 使用浮点</em> <code class="fe nt nu nv mz b"><em class="ld">float64</em></code> <em class="ld">数据类型来创建 1 和 0，但是可以使用</em> <code class="fe nt nu nv mz b"><em class="ld">dtype</em></code> <em class="ld">选项将数据类型更改为整数，如下图</em></p><figure class="mu mv mw mx gt is"><div class="bz fp l di"><div class="nw nx l"/></div></figure></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="9843" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="ld">正如</em> <code class="fe nt nu nv mz b"><em class="ld">.reshape(x,y)</em></code> <em class="ld">可以将一个数组转换成多维数组，同样，使用</em> <code class="fe nt nu nv mz b"><em class="ld">.ravel()</em></code>函数可以从任意多维数组创建一个一维数组</p><figure class="mu mv mw mx gt is"><div class="bz fp l di"><div class="nw nx l"/></div></figure></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><h2 id="da83" class="nd ls jf bd lt ni nj dn lx nk nl dp mb kn nm nn mf kr no np mj kv nq nr mn ns bi translated">3.n 维数组的数学运算</h2><p id="a4c3" class="pw-post-body-paragraph kc kd jf ke b kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz ij bi translated">如前所述，NumPy 不仅可以有效地存储数据，还可以非常容易地对数据进行数学运算。对 n 维数组的任何操作都与数学运算非常相似。</p><blockquote class="lh"><p id="b7b0" class="li lj jf bd lk ll lm ln lo lp lq kz dk translated">NumPy n 维数组使得对其执行数学运算变得极其容易</p></blockquote><p id="496e" class="pw-post-body-paragraph kc kd jf ke b kf of kh ki kj og kl km kn oh kp kq kr oi kt ku kv oj kx ky kz ij bi translated">这是 NumPy 的主要 USP，因为它被广泛用于数据分析社区。python 列表离它能做的还差得很远。例如，考虑将 python 列表乘以 2。这是我们将得到的</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="f258" class="nd ls jf mz b gy ne nf l ng nh">py_arr = [1,2,3] * 2<br/># Generates [1,2,3,1,2,3]</span></pre><p id="f7c8" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">而 numpy 数组产生输出，每个数组元素乘以 2</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="a0a8" class="nd ls jf mz b gy ne nf l ng nh">np_arr = np.array([1,2,3]) * 2<br/># Generates [2,4,6]</span></pre><p id="4778" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">类似地，我们也可以对 numpy 数组进行其他数学运算，如加、减和除</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="85fd" class="nd ls jf mz b gy ne nf l ng nh">np_arr = np.array([1,2,3]) + 2<br/># Generates [3,4,5]</span></pre><p id="e0cd" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">一个多维矩阵的运算就像我们使用两个数一样简单</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="9727" class="nd ls jf mz b gy ne nf l ng nh">np_arr1 = np.array([[1,2,3],[4,5,6]])<br/>np_arr2 = np.array([[1,2,3],[4,5,6]])</span><span id="5f52" class="nd ls jf mz b gy ok nf l ng nh">np_arr3 = np_arr1 * np_arr2<br/>#Generates<br/># [[ 1  4  9]<br/># [16 25 36]]</span><span id="0299" class="nd ls jf mz b gy ok nf l ng nh">np_arr3 = np_arr1 + np_arr2<br/>#Generates<br/># [[ 2  4  6]<br/># [ 8 10 12]]</span></pre><p id="e760" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">NumPy 内置的数学函数还允许我们执行复杂的数学运算，如 sqrt、mean 和 median。</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="d945" class="nd ls jf mz b gy ne nf l ng nh">np.sqrt(np_arr1)<br/>#generates<br/># [1.         1.41421356 1.73205081]<br/># [2.         2.23606798 2.44948974]]</span><span id="33ac" class="nd ls jf mz b gy ok nf l ng nh">np.mean(np_arr1) #generates 3.5<br/>np.median(np_arr1) #generates 3.5</span></pre><p id="1c66" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">还有额外的内置成员函数来获取数组的更多细节，包括 sum、min 和 max</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="5ffb" class="nd ls jf mz b gy ne nf l ng nh">np_arr1.sum()  # 21<br/>np_arr1.min()  # 1<br/>np_arr1.max()  # 6</span></pre></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><h2 id="14ee" class="nd ls jf bd lt ni nj dn lx nk nl dp mb kn nm nn mf kr no np mj kv nq nr mn ns bi translated">4.在 NumPy 数组中查找元素</h2><p id="3448" class="pw-post-body-paragraph kc kd jf ke b kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz ij bi translated">在处理数据集时，有时我们需要从可用的数据集中找到特定的数据。虽然 NumPy 为相同的功能提供了多种功能，但其中三种功能会比其他功能使用得更频繁。他们是<code class="fe nt nu nv mz b">where, nonzero</code>和<code class="fe nt nu nv mz b">count_nonzero</code></p><p id="3949" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe nt nu nv mz b">Where</code>和<code class="fe nt nu nv mz b">nonzero</code>函数返回与 True 语句相关的索引。例如</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="294e" class="nd ls jf mz b gy ne nf l ng nh">np_arr = np.array([1,2,0,4,5])<br/>find = np.where(np_arr &gt; 2)<br/>#returns [3,4]</span></pre><p id="5d7e" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">和</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="f3fb" class="nd ls jf mz b gy ne nf l ng nh">np_arr = np.array([1,2,0,4,5])<br/>find = np.nonzero(np_arr)<br/># return [0,1,3,4]</span></pre><p id="46bd" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">最后可以通过使用<code class="fe nt nu nv mz b">count_nonzero(...)</code>函数来计算 numpy 数组中非零元素的个数</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="47e7" class="nd ls jf mz b gy ne nf l ng nh">n_arr = np.array([1,2,3,0,3,0,2,0,0,2])<br/>np.count_nonzero(n_arr) <br/># returns 6</span></pre><p id="5b44" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这些方法在计算矩阵的稀疏度或密度时非常有用。</p><p id="03d3" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在机器学习中有其自身用途的最后一种方法是找到 NumPy 数组的形状。这是使用<code class="fe nt nu nv mz b">.shape</code>完成的。例如</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="2350" class="nd ls jf mz b gy ne nf l ng nh">n_arr = np.array([1,2,3,0,3,0,2,0,0,2])<br/>n_arr.shape<br/># Generates =&gt; (10,)<br/>n_arr = np.array([[1,2],[3,0]])<br/># Generates =&gt; (2,2)</span></pre></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><h2 id="1bc0" class="nd ls jf bd lt ni nj dn lx nk nl dp mb kn nm nn mf kr no np mj kv nq nr mn ns bi translated">5.最后的想法</h2><p id="1f75" class="pw-post-body-paragraph kc kd jf ke b kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz ij bi translated">上面提供的例子仅仅描述了 NumPy 功能的最小集合。虽然不全面，但是应该对什么是 NumPy 以及我们为什么要学习和使用它有足够的了解。</p><p id="84fe" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这就是这篇文章的全部内容。将在另一篇文章中提出另一组有趣的 NumPy 功能</p><p id="fae2" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">感谢阅读…！！！</p><p id="83d7" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">达克什</p></div></div>    
</body>
</html>