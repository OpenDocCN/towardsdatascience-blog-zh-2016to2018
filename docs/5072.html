<html>
<head>
<title>Azure Data Studio: Initial thoughts and walk-through</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure Data Studio:初步想法和演练</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/azure-data-studio-initial-thoughts-and-walk-through-905d25daf62b?source=collection_archive---------19-----------------------#2018-09-25">https://towardsdatascience.com/azure-data-studio-initial-thoughts-and-walk-through-905d25daf62b?source=collection_archive---------19-----------------------#2018-09-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/fe683600632a327a94a31a511b7ef111.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/0*6LNlv8LJ1y0CPLlC.jpg"/></div></figure><p id="4328" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在微软 Ignite 上，Azure Data Studio 已经全面上市。Azure Data Studio 以前被称为 SQL Operations Studio，是一个跨平台的数据库工具，可以用来管理本地和云数据源。</p><p id="d1be" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当我第一次<a class="ae ks" href="https://docs.microsoft.com/en-gb/sql/azure-data-studio/download?view=sql-server-2017" rel="noopener ugc nofollow" target="_blank">安装</a>并运行 Azure Data Studio 时，我对它的最初印象是它几乎是一个 Visual Studio 数据代码。它带有智能感知、代码片段、源代码控制集成和一个集成终端。</p><p id="1f44" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Azure Data Studio 中支持 Git，但是您需要安装 2.0.0 版或更高版本才能使用它。</p><p id="defd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">与 Visual Studio 代码非常相似，您可以同时运行多个集成的终端，而不是在每次想要执行一些命令行工作时切换出编辑器:</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi kt"><img src="../Images/b1eb2ebe185b0aa3672bd86b37563030.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kHE058d-0CYhtDB_OFjlyw.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk">All the terminals!</figcaption></figure><p id="2201" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Windows 10 中的终端默认使用 Powershell，而 Linux 和 macOS 使用$SHELL。点击可以了解更多关于终端<a class="ae ks" href="https://docs.microsoft.com/en-gb/sql/azure-data-studio/integrated-terminal?view=sql-server-2017" rel="noopener ugc nofollow" target="_blank">的配置。</a></p><p id="bbcc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">还支持扩展。Azure Data Studio 中的扩展允许我们向基础安装添加更多功能，就像 Visual Studio 代码一样。你也可以<a class="ae ks" href="https://docs.microsoft.com/en-gb/sql/azure-data-studio/extension-authoring?view=sql-server-2017" rel="noopener ugc nofollow" target="_blank">开发自己的扩展</a>，这非常棒！</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lg"><img src="../Images/c6297b51db37ecb434aee083bf816783.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_xRNFOF0CG8bAu2vflhiPA.png"/></div></div></figure><p id="6c74" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们通过一个简单的教程来连接和查询 Azure SQL 数据库。我将假设您知道如何在 Azure 中创建数据库。如果没有，可以按照<a class="ae ks" href="https://docs.microsoft.com/en-gb/sql/azure-data-studio/download?view=sql-server-2017" rel="noopener ugc nofollow" target="_blank">这个教程</a>来入门。</p><p id="777a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">打开 Azure Studio 开始使用。如果这是你第一次运行 Azure Data Studio，你会自动看到一个连接页面打开。如果没有，您可以通过单击服务器侧边栏中的图标来添加新连接(见下文):</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/ebdd7727802ad79fdfdc6ee8cb080d0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/format:webp/1*YNoMhUtni3TLQoBc2SkXhw.png"/></div></figure><p id="3610" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Azure Data Studio 支持 SQL 登录和 Windows 身份验证。我使用过 SQL 登录，所以我需要提供我的服务器名、用户名和密码。</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi li"><img src="../Images/4ad98b54db241a3cf6d7a2b3249ef6f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EqGlL1ojBPcXwU-cOZMrCw.png"/></div></div></figure><p id="5ee0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">(<em class="lj">注意:确保您在 Azure 中为您的服务器启用了</em> <a class="ae ks" href="https://docs.microsoft.com/en-gb/azure/sql-database/sql-database-firewall-configure" rel="noopener ugc nofollow" target="_blank"> <em class="lj">防火墙规则</em> </a> <em class="lj">。如果你不这样做，你可以在 Azure Data Studio 中通过一个简单的 UI 向导来完成。相当酷！)</em></p><p id="e3ac" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">登录后，让我们创建一个数据库和一个要使用的表。右键单击您的服务器并选择<strong class="jw ir">新查询</strong>。在查询编辑器中，运行以下 SQL 代码:</p><pre class="ku kv kw kx gt lk ll lm ln aw lo bi"><span id="aee4" class="lp lq iq ll b gy lr ls l lt lu">IF NOT EXISTS (<br/>    SELECT name<br/>    FROM sys.databases<br/>    WHERE name = N'PersonDB'<br/>)</span><span id="78b9" class="lp lq iq ll b gy lv ls l lt lu">CREATE DATABASE [PersonDB]<br/>GO</span><span id="b350" class="lp lq iq ll b gy lv ls l lt lu">ALTER DATABASE [PersonDB] SET QUERY_STORE=ON<br/>GO</span></pre><p id="6fb2" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">一旦我们的数据库被创建，我们想改变我们的数据库到 PersonBD。我们可以使用下拉菜单来完成此操作:</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lw"><img src="../Images/438cf550b0e27b604eefc0caa996e5fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-sgDHnycFySaKO01LmatbQ.png"/></div></div></figure><p id="b394" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然后，我们可以通过运行以下代码来创建人员表:</p><pre class="ku kv kw kx gt lk ll lm ln aw lo bi"><span id="d6a5" class="lp lq iq ll b gy lr ls l lt lu">IF OBJECT_ID('dbo.People', 'U') IS NOT NULL<br/>DROP TABLE dbo.People<br/>GO</span><span id="6e0a" class="lp lq iq ll b gy lv ls l lt lu">CREATE TABLE dbo.People<br/>(<br/>   PeopleId INT NOT NULL PRIMARY KEY,<br/>   Name [NVARCHAR](50) NOT NULL,<br/>   Age INT NOT NULL,<br/>   Email [NVARCHAR](50) NOT NULL<br/>);<br/>GO</span></pre><p id="a472" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们可以在服务器侧栏中看到我们的新表:</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/523edd4f0c84b5bea18cb50238dc6e7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*WF-BfhUa7m5PfVz6kkKy6A.png"/></div></figure><p id="b983" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在让我们在新表中插入一些行:</p><pre class="ku kv kw kx gt lk ll lm ln aw lo bi"><span id="866e" class="lp lq iq ll b gy lr ls l lt lu">INSERT INTO dbo.People<br/> ([PeopleID], [Name], [Age], [Email])<br/>VALUES<br/>  (1, N'Will', 27, N'will@example.com'),<br/>  (2, N'Isaac', 7, N'isaac@example.com'),<br/>  (3, N'Sam', 4, N'sam@example.com'),<br/>  (4, N'Jan', 33, N'jan@example.com'),<br/>  (5, N'Jane', 57, N'jane@example.com')<br/>GO</span></pre><p id="7787" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">最后，我们可以查询它以查看其内容:</p><pre class="ku kv kw kx gt lk ll lm ln aw lo bi"><span id="27ed" class="lp lq iq ll b gy lr ls l lt lu">SELECT * FROM dbo.People;</span></pre><p id="517d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们应该会看到以下结果:</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ly"><img src="../Images/c89f28c8e895329f49771905da3d0ac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QfbdBNgNp6GXWn9oC7BIYg.png"/></div></div></figure><p id="177b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">既然我们已经创建了表并在其中插入了一些数据，现在让我们通过创建一个 insight 小部件来管理我们的数据库，它为我们提供了表在数据库中使用了多少空间的视图。</p><p id="05e3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">与 Visual Studio 代码非常相似，我们可以使用命令面板快速查找内容。要打开它，按下<strong class="jw ir"> Ctrl+Shift+P. </strong>打开后，输入<em class="lj">设置</em>，选择<strong class="jw ir">首选项:打开用户设置。</strong></p><p id="ca4b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们将看到一个 JSON 文件和一个搜索输入框一起打开。在这里，键入<em class="lj"> dashboard </em>并找到<em class="lj">dashboard . database . widgets</em>设置:</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lz"><img src="../Images/bccbd8f104d2a1057738363b1e45d92d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O8QvXd44nuhNET73F_W-3A.png"/></div></div></figure><p id="ddd4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在默认用户设置中找到该设置后，您需要点击铅笔图标并选择<strong class="jw ir">复制到设置</strong>。如果设置中显示替换，请<strong class="jw ir">不要点击它！</strong></p><p id="94dd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当您将设置复制到您的<strong class="jw ir">用户设置</strong>文件中时，您想要添加以下 JSON:</p><pre class="ku kv kw kx gt lk ll lm ln aw lo bi"><span id="65ac" class="lp lq iq ll b gy lr ls l lt lu">{          <br/>   "name": "Space Used by Tables",<br/>   "gridItemConfig": {<br/>           "sizex": 2,<br/>           "sizey": 1          <br/>    },          <br/>    "widget": {              <br/>        "table-space-db-insight": null          <br/>    }      <br/>},</span></pre><p id="a296" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">右键单击您的<strong class="jw ir"> PeopleDB </strong>并单击<strong class="jw ir">管理</strong>，保存您的设置并打开您的数据库仪表板。您应该会在控制面板中看到以下小部件:</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ma"><img src="../Images/a4e96bc973df36f6b223f9033421fe6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5dhH4HNaiqn4NmN7UK8Mvg.png"/></div></div></figure><p id="e802" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在，您可以通过使用过滤等方式，使用该洞察力图表来获得不同的洞察力。</p><p id="cf25" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">一旦你使用完你的资源，你可以自由地回到 Azure 并清理掉你不再需要的资源。</p><p id="86d3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">正如你所看到的，Azure Data Studio 是一个非常棒的工具，可以让数据工程师管理本地和云数据源。就我个人而言，我迫不及待地想看到这个产品如何随着社区的投入而发展。</p><p id="76a8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果你想查看源代码，这里有<a class="ae ks" href="https://github.com/Microsoft/azuredatastudio" rel="noopener ugc nofollow" target="_blank"> GitHub repo。</a>同样，你也可以在这里看到<a class="ae ks" href="https://docs.microsoft.com/en-gb/sql/azure-data-studio/release-notes?view=sql-server-2017" rel="noopener ugc nofollow" target="_blank">发布说明</a>。</p></div></div>    
</body>
</html>