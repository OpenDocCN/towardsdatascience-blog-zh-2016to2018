<html>
<head>
<title>Job Title Analysis in python and NLTK</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">python 和 NLTK 中的职称分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/job-title-analysis-in-python-and-nltk-8c7ba4fe4ec6?source=collection_archive---------2-----------------------#2018-11-14">https://towardsdatascience.com/job-title-analysis-in-python-and-nltk-8c7ba4fe4ec6?source=collection_archive---------2-----------------------#2018-11-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c8f77fb2e03d151f03c36300b4f01460.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c_agfli7z10aCJDO"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@homajob?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Scott Graham</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="688b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">职称表明了一个人的角色和职责。它说如果他们管理一个团队，如果他们控制预算，和他们的专业化水平。</p><p id="e8d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">了解这一点在自动化业务开发或客户拓展时非常有用。例如，一家销售语音识别软件的公司可能希望将消息发送给:</p><ul class=""><li id="5621" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">CTO 和技术主管告知他们使用语音识别软件的价格和好处。</li><li id="891a" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">潜在投资者或顾问邀请他们了解公司潜在市场规模的信息。</li><li id="7cee" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">创始人和工程师指导他们如何使用软件。</li></ul><p id="a941" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">训练一个软件对职称进行分类是一个多文本的文本分类问题。对于这个任务，我们可以使用 Python 自然语言工具包(NLTK)和贝叶斯分类。</p><h1 id="337f" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">概念化</h1><p id="d5bb" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">首先，让我们概念化一下职称代表什么。对于某个<em class="ms">部门</em>，每项工作都有一级<em class="ms">职责</em>。</p><p id="e65e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">职责包括清洁地板等维护任务，团队领导等管理任务，或决定预算等战略任务。</p><p id="d3a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">部门包括基于增长的部门，如业务开发和营销部门，基于合规的部门，如财务和法律部门，或基于执行的部门，如产品开发和运营部门。</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/1a17691168806795b39207b3cc27a279.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*95qdzTkDV9zksVcghGJeBQ.png"/></div></div></figure><p id="f4da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">职责和部门被编码成许多职称，如下所示:</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div class="gh gi my"><img src="../Images/92cb5f3b2fccf40a3e4dffe4174eb62f.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*-dl4EyVyJ3OEee9MWwju1Q.png"/></div></figure><p id="ff67" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们希望将每个工作描述归入这些职责和部门中的一个。</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/10075edcb3726aafbdc3b5f68600f84a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lcoi-XSGRVmbRboeWr_0aQ.png"/></div></div></figure><h1 id="75fb" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">执行</h1><h2 id="6857" class="na lq iq bd lr nb nc dn lv nd ne dp lz ko nf ng md ks nh ni mh kw nj nk ml nl bi translated">数据采集</h2><p id="e0e5" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">第一步是得到一份职位列表。在<a class="ae kc" href="https://www.careerbuilder.com/browse" rel="noopener ugc nofollow" target="_blank"> CareerBuilder </a>上有一个大约 800 个职位的列表。</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/d982be8e75af6be1236f0454800feb12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HTeW58PtORTpgZF6jYIxDA.png"/></div></div></figure><p id="c0ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">职位名称是有页码的，所以唯一的方法就是点击每一页。</p><h2 id="bf31" class="na lq iq bd lr nb nc dn lv nd ne dp lz ko nf ng md ks nh ni mh kw nj nk ml nl bi translated">培训数据创建</h2><p id="97d2" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">导入职位名称后，我们可以描述这些职位的职责和部门。</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/6b968b292c2baee6fd35739aec2925ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*mv1DHWGr85SaUMJOl3vdCA.png"/></div></figure><h2 id="f34e" class="na lq iq bd lr nb nc dn lv nd ne dp lz ko nf ng md ks nh ni mh kw nj nk ml nl bi translated">数据格式编排</h2><p id="a20e" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">对于这个项目，我们需要<a class="ae kc" href="https://www.nltk.org/" rel="noopener ugc nofollow" target="_blank">自然语言工具包</a> (NLTK)。它包含文本处理资源、机器学习工具等等。</p><p id="b7b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将使用贝叶斯多类分类器和自然语言工具包对这些职位进行分类。</p><p id="3549" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像这样导入 NLTK:</p><pre class="mu mv mw mx gt no np nq nr aw ns bi"><span id="5a06" class="na lq iq np b gy nt nu l nv nw">import re<br/>import nltk<br/>from nltk.corpus import stopwords<br/>import pandas as pd<br/>stop_words = set(stopwords.words('english'))</span></pre><p id="cc2a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ms">停用词</em>是常见的词，如<em class="ms"> a </em>、<em class="ms">和</em>、<em class="ms"> the </em>，这些词对我们的职称没有什么意义。NLTK 提供了一个英语停用词列表，我们将从每个职位中过滤掉。</p><p id="418c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们在网上获取职位头衔时，例如从 LinkedIn 或会议上，他们有时会包含多个职位头衔，用逗号、破折号、冒号或其他字符分隔。为简单起见，我将展示如何提取第一个职位:</p><pre class="mu mv mw mx gt no np nq nr aw ns bi"><span id="2d37" class="na lq iq np b gy nt nu l nv nw">def get_first_title(title):<br/>    # keep "co-founder, co-ceo, etc"<br/>    title = re.sub(r"[Cc]o[\-\ ]","", title)<br/>    split_titles = re.split(r"\,|\-|\||\&amp;|\:|\/|and", title)<br/>    return split_titles[0].strip()</span></pre><p id="f763" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">贝叶斯分类器将需要一个特征列表——在这种情况下，哪个单词出现在哪个职位描述中。我还把第一个词和最后一个词加到了特写中，因为有时候第一个词或最后一个词对职位有重要意义。例如，<em class="ms">营销总监</em>和<em class="ms">营销总监</em>是不同的角色。</p><pre class="mu mv mw mx gt no np nq nr aw ns bi"><span id="5282" class="na lq iq np b gy nt nu l nv nw">def get_title_features(title):<br/>    features = {}<br/>    word_tokens = nltk.word_tokenize(title)<br/>    filtered_words = [w for w in word_tokens if not w in stop_words] <br/>    for word in filtered_words:<br/>        features['contains({})'.format(word.lower())] = True<br/>    if len(filtered_words) &gt; 0:<br/>        first_key = 'first({})'.format(filtered_words[0].lower())<br/>        last_key = 'last({})'.format(filtered_words[-1].lower())<br/>        features[first_key] = True<br/>        features[last_key] = True<br/>    return features</span></pre><p id="d98a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将产生一个职位名称的单词列表，包括第一个和最后一个单词，例如职位名称，<em class="ms">全球运营总监</em>:</p><pre class="mu mv mw mx gt no np nq nr aw ns bi"><span id="5774" class="na lq iq np b gy nt nu l nv nw">{<br/>    "contains(director)": True,<br/>    "contains(global)": True,<br/>    "contains(operations)": True,<br/>    "first(director)": True,<br/>    "last(operations)": True<br/>}</span></pre><p id="af76" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们需要为分类器清理和准备职位、职责和部门的列表。</p><p id="5521" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设我们的原始职位数据格式如下:</p><pre class="mu mv mw mx gt no np nq nr aw ns bi"><span id="3a0c" class="na lq iq np b gy nt nu l nv nw">raw_job_titles = [<br/>    {<br/>        "title": "Business Development",<br/>        "responsibility": "Strategy",<br/>        "department": "Business Development"<br/>    },<br/>    {<br/>        "title": "Inside Sales Consultant",<br/>        "responsibility": "Execution",<br/>        "department": "Sales"<br/>    },<br/>    ...<br/>]</span></pre><h2 id="bc97" class="na lq iq bd lr nb nc dn lv nd ne dp lz ko nf ng md ks nh ni mh kw nj nk ml nl bi translated">分类器训练</h2><p id="41fa" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">接下来，我们可以在这些数据集上训练贝叶斯分类器。我们通过对每个职位的特征进行分类来做到这一点。</p><pre class="mu mv mw mx gt no np nq nr aw ns bi"><span id="0c98" class="na lq iq np b gy nt nu l nv nw"># Responsibilities<br/>responsibilities_features = [<br/>    (<br/>         get_title_features(job_title["title"]),<br/>         job_title["responsibility"]<br/>    )<br/>    for job_title in raw_job_titles<br/>    if job_title["responsibility"] is not None<br/>]</span><span id="dab6" class="na lq iq np b gy nx nu l nv nw"># Departments<br/>departments_features = [<br/>    (<br/>         get_title_features(job_title["title"]),<br/>         job_title["department"]<br/>    )<br/>    for job_title in raw_job_titles<br/>    if job_title["department"] is not None<br/>]</span></pre><p id="2117" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以分割特征，以便我们可以使用一些特征来训练分类器，并使用其余的特征来测试分类器。</p><pre class="mu mv mw mx gt no np nq nr aw ns bi"><span id="8be4" class="na lq iq np b gy nt nu l nv nw"># Responsibilities<br/>r_size = int(len(responsibilities_features) * 0.5)<br/>r_train_set = responsibilities_features[r_size:]<br/>r_test_set = responsibilities_features[:r_size]<br/>responsibilities_classifier = nltk.NaiveBayesClassifier.train(<br/>    r_train_set<br/>)<br/>print("Responsibility classification accuracy: {}".format(<br/>    nltk.classify.accuracy(<br/>        responsibilities_classifier,<br/>        r_test_set<br/>    )<br/>))</span><span id="74f0" class="na lq iq np b gy nx nu l nv nw"># Departments<br/>d_size = int(len(departments_features) * 0.5)<br/>d_train_set = departments_features[d_size:]<br/>d_test_set = departments_features[:d_size]<br/>departments_classifier = nltk.NaiveBayesClassifier.train(<br/>    d_train_set<br/>)<br/>print("Department classification accuracy: {}".format(<br/>    nltk.classify.accuracy(<br/>        departments_classifier,<br/>        d_test_set<br/>    )<br/>))</span></pre><p id="0949" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输出应该如下所示:</p><pre class="mu mv mw mx gt no np nq nr aw ns bi"><span id="c651" class="na lq iq np b gy nt nu l nv nw">Responsibility classification accuracy: 0.80588235294117646<br/>Department classification accuracy: 0.80526315789473684</span></pre><h2 id="2c64" class="na lq iq bd lr nb nc dn lv nd ne dp lz ko nf ng md ks nh ni mh kw nj nk ml nl bi translated">数据分类</h2><p id="2647" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">如果你对结果满意，你可以给新的职位分类。</p><pre class="mu mv mw mx gt no np nq nr aw ns bi"><span id="4f4c" class="na lq iq np b gy nt nu l nv nw">title = "Director of Communications"<br/>responsibility = responsibilities_classifier.classify(<br/>    get_title_features(title)<br/>)<br/>department = departments_classifier.classify(<br/>    get_title_features(title)<br/>)<br/>print("Job title: '{}'".format(title))<br/>print("Responsibility: '{}'".format(responsibility))<br/>print("Department: '{}'".format(department))</span></pre><p id="9ac6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将产生以下输出:</p><pre class="mu mv mw mx gt no np nq nr aw ns bi"><span id="8e9b" class="na lq iq np b gy nt nu l nv nw">Job title: 'Director of Communications'<br/>Responsibility: 'Strategist'<br/>Department: 'Marketing'</span></pre><p id="9c86" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一个限制是分类器将为每个职位分配一个部门和责任，不管职位有多模糊。这导致了应该保持不分类或由人审查的职称的分类。</p><p id="6d32" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了克服这一点，我们可以揭示分类器对其解释的信心，以便我们可以选择是否接受它。</p><pre class="mu mv mw mx gt no np nq nr aw ns bi"><span id="5a51" class="na lq iq np b gy nt nu l nv nw"># Responsibility<br/>responsibility_probability = \<br/>    responsibilities_classifier.prob_classify(<br/>        get_title_features(title)<br/>    )<br/>responsibility_probability = 100 * responsibility_probability.prob(<br/>    responsibility_probability.max()<br/>)<br/>print("Responsibility confidence: {}%".format(<br/>    round(responsibility_probability)<br/>))</span><span id="de4f" class="na lq iq np b gy nx nu l nv nw"># Department<br/>department_probability = \<br/>    departments_classifier.prob_classify(<br/>        get_title_features(title)<br/>    )<br/>department_probability = 100 * department_probability.prob(<br/>    department_probability.max()<br/>)<br/>print("Department confidence: {}%".format(<br/>    round(department_probability)<br/>))</span></pre><p id="d796" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结果是这样的:</p><pre class="mu mv mw mx gt no np nq nr aw ns bi"><span id="901b" class="na lq iq np b gy nt nu l nv nw">Responsibility confidence: 86%<br/>Department confidence: 79%</span></pre><p id="1606" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">源代码可以在<a class="ae kc" href="https://gist.github.com/backupbrain/f355126042513188c484db5ef91650cd#file-job_title_analysis-py" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到。我期待听到任何反馈或问题。</p></div></div>    
</body>
</html>