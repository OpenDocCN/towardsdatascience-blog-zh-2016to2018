<html>
<head>
<title>GPU-accelerated Neural Networks in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript 中的 GPU 加速神经网络</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/gpu-accelerated-neural-networks-in-javascript-195d6f8e69ef?source=collection_archive---------3-----------------------#2018-03-19">https://towardsdatascience.com/gpu-accelerated-neural-networks-in-javascript-195d6f8e69ef?source=collection_archive---------3-----------------------#2018-03-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="64b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">据<a class="ae kl" href="https://octoverse.github.com" rel="noopener ugc nofollow" target="_blank"> Octoverse 2017 </a>报道，JavaScript 是 Github 上最受欢迎的语言。用 pull 请求的数量来衡量，JavaScript 的活跃程度可以与 Python、Java 和 Go 的总和相媲美。</p><p id="dc06" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">JavaScript 已经征服了网络，并在服务器、手机、桌面和其他平台上取得了进展。</p><p id="d7a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">与此同时，GPU 加速的使用已经远远超出了计算机图形学的范围，现在已经成为机器学习不可或缺的一部分。</p><p id="cb2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用深度架构训练神经网络是一个计算密集型过程，已经在机器智能的许多重要领域产生了最先进的结果。</p><p id="ced0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文着眼于这些趋势的持续融合，并概述了将 GPU 加速的神经网络引入 JavaScript 世界的项目。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/a60512fb74fa685b89c610e038e1bd7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Qqz8opYBazlD7cese_qtA.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk"><a class="ae kl" href="https://github.com/voodootikigod/logo.js" rel="noopener ugc nofollow" target="_blank">Community logo for JavaScript</a></figcaption></figure><h1 id="85ef" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">概述</h1><p id="4189" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">下面列出的所有项目都得到积极维护，在 Github 上有数千颗星，并通过 NPM 或 CDNs 分发。</p><p id="47de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它们都通过<a class="ae kl" href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API" rel="noopener ugc nofollow" target="_blank"> WebGL </a>在浏览器中实现 GPU 加速，如果没有合适的显卡，则退回到 CPU。</p><p id="0b8f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">旨在运行现有模型的库(尤其是那些用 Python 框架训练的)不包括在本概述中。</p><p id="973b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最终，有四个项目成功上榜。</p><p id="608a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然 deeplearn.js 的功能集面向神经网络，但它可以被描述为一个通用的机器学习框架。Propel 是一个科学计算库，提供自动微分。Gpu.js 提供了一种在 Gpu 上运行 JavaScript 函数的便捷方式。Brain.js 是一个更老的神经网络库的延续，使用 gpu.js 进行硬件加速。</p><p id="6b73" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我打算保留这篇文章，并将其扩展成一个 Github 库。如果你看到相关消息，请告诉我。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mf"><img src="../Images/b8765d9decc5c6bb196dfb8fadba3f79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vLO8UNdIXow6wCRz."/></div></div></figure><h1 id="cd26" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">Deeplearn.js</h1><p id="9490" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated"><a class="ae kl" href="https://deeplearnjs.org/" rel="noopener ugc nofollow" target="_blank"> Deeplearn.js </a>是四个项目中最受欢迎的，被描述为“机器智能的硬件加速 JavaScript 库”。它得到了谷歌大脑团队和一个由 50 多名贡献者组成的社区的支持。两位主要作者是<a class="ae kl" href="https://smilkov.com/" rel="noopener ugc nofollow" target="_blank">丹尼尔·斯米尔科夫</a>和<a class="ae kl" href="https://github.com/nsthorat" rel="noopener ugc nofollow" target="_blank">尼基尔·苏拉特</a>。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mg mh l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Definition of a convolutional layer in deeplearn.js</figcaption></figure><p id="24a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">deeplearn.js 以 TypeScript 编写，并模仿 Tensorflow，支持 Google Brain 旗舰开源项目中提供的越来越多的功能子集。API 本质上有三个部分。</p><p id="96bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第一部分涵盖了用于<a class="ae kl" href="http://www.deeplearnjs.org/docs/api/index.html#Tensors-Creation" rel="noopener ugc nofollow" target="_blank">创建、初始化和转换张量</a>的函数，张量是保存数据的类似数组的结构。</p><p id="18c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">API 的下一部分提供了在张量上执行的<a class="ae kl" href="http://www.deeplearnjs.org/docs/api/index.html#Operations-Arithmetic" rel="noopener ugc nofollow" target="_blank">操作</a>。这包括基本的数学运算、归约、归一化和卷积。在这一点上，对递归神经网络的支持是初步的，但确实包括长短期记忆网络单元的堆栈。</p><p id="814b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第三部分围绕模型训练展开。所有流行的优化器，从<a class="ae kl" href="http://www.deeplearnjs.org/docs/api/index.html#dl.train.sgd" rel="noopener ugc nofollow" target="_blank">随机梯度下降</a>到<a class="ae kl" href="http://www.deeplearnjs.org/docs/api/index.html#dl.train.adam" rel="noopener ugc nofollow" target="_blank">亚当</a>，都包括在内。另一方面，交叉熵损失是参考文献中提到的唯一损失函数。</p><p id="eb71" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">API 的其余部分用于设置环境和管理资源。</p><p id="7bf0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">node.js 中的实验性 GPU 加速可以通过<a class="ae kl" href="https://github.com/stackgl/headless-gl" rel="noopener ugc nofollow" target="_blank"> headless-gl </a>实现(参见<a class="ae kl" href="https://github.com/PAIR-code/deeplearnjs/issues/49" rel="noopener ugc nofollow" target="_blank">第 49 期</a>)。</p><p id="cf1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该项目网站有许多令人难忘的<a class="ae kl" href="http://www.deeplearnjs.org/index.html#demos" rel="noopener ugc nofollow" target="_blank">演示</a>。这些包括通过递归神经网络进行的钢琴演奏，建立模型的视觉界面和基于 SqueezeNet(一种参数数量相对较少的图像分类器)的网络摄像头应用程序。</p><h1 id="0aef" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">推进</h1><p id="cf1b" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated"><a class="ae kl" href="http://propelml.org" rel="noopener ugc nofollow" target="_blank"> Propel </a>被描述为“JavaScript 的差异化编程”。两位主要作者<a class="ae kl" href="http://tinyclouds.org/" rel="noopener ugc nofollow" target="_blank">瑞安·达尔</a>和<a class="ae kl" href="https://github.com/piscisaureus" rel="noopener ugc nofollow" target="_blank">伯特·贝尔德</a>的工作得到了 11 位撰稿人的补充。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mg mh l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">A feed-forward neural network with three layers trained with Propel on the MNIST data set</figcaption></figure><p id="45c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">自动微分(AD)是这个项目的核心，让我们不再需要手动指定导数。对于用支持的张量运算定义的给定函数<em class="mi"> f(x) </em>，梯度函数可以用<a class="ae kl" href="http://propelml.org/docs/#grad" rel="noopener ugc nofollow" target="_blank"> <em class="mi"> grad </em> </a>得到。多变量箱由<a class="ae kl" href="http://propelml.org/docs/#multigrad" rel="noopener ugc nofollow" target="_blank">多 grad </a>覆盖。</p><p id="31c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">除了 AD，这个项目的走向似乎并不完全明朗。虽然网站上提到“类似 numpy 的基础设施”是一个目标，但该 API 在<a class="ae kl" href="https://github.com/propelml/propel#user-content-status-and-examples" rel="noopener ugc nofollow" target="_blank">“重度开发”</a>下，包括与<a class="ae kl" href="http://propelml.org/docs/#conv2d" rel="noopener ugc nofollow" target="_blank">神经网络</a>和<a class="ae kl" href="http://propelml.org/docs/#imread" rel="noopener ugc nofollow" target="_blank">计算机视觉</a>相关的功能。使用<a class="ae kl" href="http://propelml.org/docs/#load" rel="noopener ugc nofollow" target="_blank"> load </a>函数，npy 文件的内容可以被解析并作为张量使用。</p><p id="2ede" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在浏览器环境中，Propel 利用 deeplearn.js 中的 WebGL 功能。对于 Node 中的 GPU 加速，该项目使用 TensorFlow 的 C API。</p><h1 id="8aed" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">gpu.js</h1><p id="4707" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">虽然我的大部分经验是使用 CUDA 而不是 WebGL，但我可以证明 GPU 编程的耗时本质。因此，当我看到<a class="ae kl" href="http://gpu.rocks/" rel="noopener ugc nofollow" target="_blank"> gpu.js </a>时，我感到惊喜。该项目在 Github 上有大约 5700 颗星，其受欢迎程度可与 deeplearn.js 媲美，并有 18 名贡献者。随着时间的推移，一些个人做出了重大贡献。罗伯特·普卢默是主要作者。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mg mh l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Matrix multiplication with gpu.js: The Hello World equivalent in GPU programming</figcaption></figure><p id="9437" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在当前的上下文中，内核是在 GPU 而不是 CPU 上执行的功能。有了 gpu.js，内核可以用 JavaScript 的子集<a class="ae kl" href="https://github.com/gpujs/gpu.js#creating-and-running-functions" rel="noopener ugc nofollow" target="_blank">来编写。代码然后被编译并在 GPU 上运行。</a><a class="ae kl" href="https://github.com/mikeseven/node-opencl/issues/55" rel="noopener ugc nofollow" target="_blank">节点。通过 OpenCL 的 JS 支持</a>已经在几周前添加了。</p><p id="2a07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">多达三维的数字和数字数组被用作输入和输出。除了<a class="ae kl" href="https://github.com/gpujs/gpu.js#supported-math-functions" rel="noopener ugc nofollow" target="_blank">基本数学运算</a>，gpu.js 还支持局部变量、循环和 if/else 语句。</p><p id="89b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了实现代码重用和更模块化的设计，可以注册定制函数<a class="ae kl" href="https://github.com/gpujs/gpu.js#adding-custom-functions" rel="noopener ugc nofollow" target="_blank">然后在内核代码中使用。</a></p><p id="d949" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在内核的 JavaScript 定义中，<em class="mi"> this </em>对象提供了<a class="ae kl" href="https://github.com/gpujs/gpu.js#dynamic-sized-via-constants" rel="noopener ugc nofollow" target="_blank">线程标识符</a>，并保存了在实际内核内部为<a class="ae kl" href="https://github.com/gpujs/gpu.js#dynamic-sized-via-constants" rel="noopener ugc nofollow" target="_blank">常量</a>但在外部为动态的值。</p><p id="a748" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该项目专门研究加速的 JavaScript 函数，并不试图提供一个神经网络框架。为此，我们可以求助于依赖于 gpu.js 的库。</p><h1 id="f2ee" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">Brain.js</h1><p id="8bde" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated"><a class="ae kl" href="http://brain.js.org" rel="noopener ugc nofollow" target="_blank"> Brain.js </a>是<a class="ae kl" href="https://github.com/harthur/brain" rel="noopener ugc nofollow" target="_blank"> harthur/brain </a>的继任者，这是一个历史可以追溯到 2010 年古代的存储库。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="728b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">总共有近 30 人对这两个资料库作出了贡献。</p><p id="efbc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对<a class="ae kl" href="https://github.com/BrainJS/brain.js/blob/40568af9c45fcb9467f8344c62c6ffadfd8f3155/src/neural-network-gpu.js" rel="noopener ugc nofollow" target="_blank"> GPU 加速神经网络</a>的支持基于 gpu.js，可以说是该项目最近历史上最重要的发展。</p><p id="bcd1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">除了前馈网络，Brain.js 还包括三种重要类型的<a class="ae kl" href="https://github.com/BrainJS/brain.js#neural-network-types" rel="noopener ugc nofollow" target="_blank">递归神经网络</a>的实现:经典的 Elman 网络、长短期记忆网络和最近的带门控递归单元的网络。</p><p id="cb5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">资源库中包含的演示还处于早期阶段。主页上显示了学习色彩对比度偏好的神经网络。<a class="ae kl" href="https://github.com/BrainJS/brain.js/tree/develop/examples" rel="noopener ugc nofollow" target="_blank">另外两个演示</a>，一个涉及对用 ASCII 符号绘制的字符的检测，可以在源代码中找到。</p></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><p id="c3fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用于机器学习的加速 JavaScript 库的出现有几个有趣的含义。</p><p id="947c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在线课程可以将与机器学习或 GPU 计算相关的练习直接集成到 web 应用程序中。学生不必跨不同的操作系统和软件版本建立单独的开发环境。</p><p id="56fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">许多基于神经网络的演示可以更容易地部署，不再需要服务器端 API。</p><p id="06de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对机器学习感兴趣的 JavaScript 开发者可以充分利用他们的专业技能，在集成问题上花费更少的时间。</p><p id="8f98" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，可以更有效地利用客户端可用的计算资源。毕竟，并不是所有的显卡都一直被用于虚拟现实和加密货币挖掘。</p></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><p id="d6ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">明确地说，在这一点上，我不提倡将本文中提到的库用于任务关键型神经网络。Python 生态系统仍然是大多数应用程序的首选。</p><p id="bb65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，看到过去 12 个月取得的进展令人鼓舞。一年前，deeplearn.js 和 Propel 都不存在。gpu.js 存储库中的活动水平相对较低，Brain.js 不支持 gpu 加速。</p><p id="2786" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">随着时间的推移，这些项目将在某些方面与已建立的框架竞争，并启用 JavaScript 独一无二适合的全新应用程序。</p></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><h1 id="e728" class="lc ld iq bd le lf mq lh li lj mr ll lm ln ms lp lq lr mt lt lu lv mu lx ly lz bi translated">感谢您的阅读！如果你喜欢这篇文章，请点击拍手按钮并关注我，以获得更多关于机器学习最新发展的信息。</h1><h1 id="2280" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">关于这个话题的介绍，可以看看我的<a class="ae kl" rel="noopener" target="_blank" href="/machine-learning-from-scratch-part-1-76603dececa6">机器从头学习</a>系列。</h1></div></div>    
</body>
</html>