<html>
<head>
<title>GSoC 2017 : Eclipse plugin for Siddhi Documentation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GSoC 2017:神功文档的Eclipse插件</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/gsoc-2017-eclipse-plugin-for-siddhi-documentation-c4d82e8089cb?source=collection_archive---------11-----------------------#2017-08-28">https://towardsdatascience.com/gsoc-2017-eclipse-plugin-for-siddhi-documentation-c4d82e8089cb?source=collection_archive---------11-----------------------#2017-08-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="278d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">WSO2复杂事件处理器(WSO2 CEP)是一个实时复杂事件处理引擎，在识别传入的事件流/大型数据馈送中的模式时具有快速的响应时间，并且存储空间最小。WSO2 CEP的核心是Siddhi，这是一种类似SQL的查询语言，用于模式和序列检测等复杂查询，几乎解决了复杂事件处理中抑制应用程序性能指标的所有问题。</p><p id="cf32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">除了组织给出的项目<a class="ae kl" href="https://docs.wso2.com/display/GSoC/Project+Proposals+for+2017#ProjectProposalsfor2017-Proposal5:EclipsePluginforSiddhi" rel="noopener ugc nofollow" target="_blank">目标</a>之外，还完成了从Antlr到Xtext的语法文件转换，并修复了神功语法中的歧义。</p><p id="9e2e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">迄今为止所做的工作如下。</p><ul class=""><li id="31dd" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated">神功语法文件的Antlr到Xtext转换</li><li id="29c5" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">修正神功语法中的歧义</li><li id="dc15" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">语法和语义突出显示</li><li id="99a7" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">内容辅助</li><li id="46c3" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">错误报告</li></ul><h2 id="698b" class="la lb iq bd lc ld le dn lf lg lh dp li jy lj lk ll kc lm ln lo kg lp lq lr ls bi translated">Antlr到Xtext神功语法文件转换</h2><p id="3780" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ij bi translated"><a class="ae kl" href="https://github.com/siddhi-io/siddhi/blob/master/modules/siddhi-query-compiler/src/main/antlr4/io/siddhi/query/compiler/SiddhiQL.g4" rel="noopener ugc nofollow" target="_blank">原始神功语法文件</a>是用Antlr写的。因为Xtext被确定在这个项目中使用，所以将Antlr语法文件转换成Xtext是必要的。Xtext框架是在Antlr LL(*)解析器生成器之上开发的。尽管Antlr和Xtext的语法大致相似，但在Siddhi语法中处理左递归是我在转换语法文件时面临的一个挑战，因为Xtext处理它的方式不同。因为LL解析器是一个自顶向下的解析器，并且输入是从左到右传递的，所以需要小心处理左递归。EveryPatternSourceChain、PatternSourceChain、LeftAbsentPatternSource、RightAbsentPatternSource、LeftAbsentSequenceSource、RightAbsentSequenceSource、SequenceSourceChain和MathOperation是为Xtext解析器生成器设置了<a class="ae kl" href="https://en.wikipedia.org/wiki/Left_recursion" rel="noopener ugc nofollow" target="_blank">左递归调用图</a>的规则。下面描述一个例子。</p><p id="41e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">神功最初的EveryPatternSourceChain和PatternSourceChain规则如下。</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="bfcd" class="la lb iq md b gy mh mi l mj mk">every_pattern_source_chain    : <br/>'('every_pattern_source_chain')' within_time?     <br/>| EVERY '('pattern_source_chain ')' within_time?       <br/>| every_pattern_source_chain  '-&gt;' every_pattern_source_chain    <br/>| pattern_source_chain    <br/>| EVERY pattern_source within_time?     ;</span><span id="35bb" class="la lb iq md b gy ml mi l mj mk"> pattern_source_chain    : <br/>'('pattern_source_chain')' within_time?    <br/>| pattern_source_chain  '-&gt;' pattern_source_chain    <br/>| pattern_source within_time?    ;</span></pre><p id="a431" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">规则every_pattern_source_chain在“every _ pattern_source_chain”-&gt;“every _ pattern _ source _ chain”替代元素中留下了递归，并且规则pattern _ source _ chain在“pattern _ source _ chain”-&gt;“pattern _ source _ chain”替代元素中留下了递归，因为最左边的符号是规则本身。这些被转换成Xtext语法，如下所示。</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="433b" class="la lb iq md b gy mh mi l mj mk">EveryPatternSourceChain:<br/>EveryPatternSourceChain1 =&gt;({EveryPatternSourceChain.left=current} op= ‘-&gt;’ right=EveryPatternSourceChain1)*;</span><span id="488c" class="la lb iq md b gy ml mi l mj mk">EveryPatternSourceChain1 returns EveryPatternSourceChain:<br/>=&gt;(OPEN_PAR eps=EveryPatternSourceChain CLOSE_PAR wt=WithinTime?)<br/>|psc=PatternSourceChain<br/>|every=EVERY psc=PatternSourceChain1;</span><span id="e6b7" class="la lb iq md b gy ml mi l mj mk">PatternSourceChain:<br/>PatternSourceChain1 -&gt; ({PatternSourceChain.left=current} op=’-&gt;’ right=PatternSourceChain1)*;</span><span id="773b" class="la lb iq md b gy ml mi l mj mk">PatternSourceChain1 returns PatternSourceChain:<br/>=&gt;(OPEN_PAR psc_2=PatternSourceChain CLOSE_PAR wt=WithinTime?)<br/>|ps=PatternSource wt=WithinTime?;</span></pre><p id="061b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">移除MathOperation规则中的左递归是一项不同的任务，因为它需要考虑语法的运算符优先级。运算符优先级越高，规则调用得越晚。例如，下面解释规则的一部分。</p><p id="b59b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">原始MathOperation规则的一部分如下。</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="2c96" class="la lb iq md b gy mh mi l mj mk">math_operation    :<br/>'('math_operation')'                         <br/>|null_check                                   <br/>|NOT math_operation<br/>|math_operation (multiply='*'|devide='/'|mod='%') math_operation    <br/>|math_operation (add='+'|substract='-') math_operation                 <br/>|function_operation                           <br/>|constant_value                               <br/>|attribute_reference;</span></pre><p id="66e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里“math _ operation(multiply = ' * ' | devide = '/' | mod = ' % ')math _ operation”和“math _ operation(add = '+' | subtract = '-')math _ operation”是左递归规则。由于乘法的运算符优先级高于加法，所以应该在Xtext中首先调用与加法相关的规则，如下所示。</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="7dac" class="la lb iq md b gy mh mi l mj mk">MathOperation:<br/>MathAddsubOperation;</span><span id="2400" class="la lb iq md b gy ml mi l mj mk">MathAddsubOperation returns MathOperation:<br/>MathDivmulOperation =&gt;({MathAddsubOperation.left=current} (add='+'|substract='-') right=MathDivmulOperation)*;</span><span id="1833" class="la lb iq md b gy ml mi l mj mk">MathDivmulOperation returns MathOperation:<br/>MathOtherOperations =&gt;({MathDivmulOperation.left=current} (multiply='*'|devide='/'|mod='%') right=MathOtherOperations)*;</span><span id="f66d" class="la lb iq md b gy ml mi l mj mk">MathOtherOperations returns MathOperation:<br/>=&gt;({NotOperation} not=NOT op=MathOperation)<br/>|OPEN_PAR op=MathOperation CLOSE_PAR<br/>|=&gt;NullCheck<br/>|mathOtherOperations1=MathOtherOperations1;</span><span id="1e0e" class="la lb iq md b gy ml mi l mj mk">MathOtherOperations1:<br/>const_val=ConstantValue<br/>|fo=FunctionOperation<br/>|attrRef=AttributeReference;</span></pre><p id="f3f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">其他Antlr至Xtext转换可在此处找到<a class="ae kl" href="https://github.com/udeshika-sewwandi/siddhi_editor/blob/master/org.xtext.example.siddhi/src/org/xtext/example/siddhi/Siddhi.xtext" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="1702" class="la lb iq bd lc ld le dn lf lg lh dp li jy lj lk ll kc lm ln lo kg lp lq lr ls bi translated">修正语法中的歧义</h2><p id="e115" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ij bi translated">语法中的模糊性会导致特定输入有几个解析树，而解析器无法确定它应该遍历的确切路径。特别是在Xtext中，歧义可以通过使用句法谓词、左因子分解和在工作流中启用回溯来解决。启用回溯并不是一个好的选择，因为它隐藏了由模糊语法引起的大问题。</p><p id="062b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我使用了<a class="ae kl" href="https://blogs.itemis.com/en/debugging-xtext-grammars-what-to-do-when-your-language-is-ambiguous" rel="noopener ugc nofollow" target="_blank"> Antlrworks </a>调试工具来识别语法中的歧义，以及输入如何通过解析器进行解析。也就是说，它显示了在解析树表示中为特定用户输入解析了哪些规则。Antlrworks以如下所示的典型方式显示语法规则中的歧义。两个彩色箭头显示了导致特定模糊性的两个可选路径。</p><figure class="ly lz ma mb gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mm"><img src="../Images/e35f49accbb2d5f937a831c9482820a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gpEUB_eZRLln5SymJvsHHQ.png"/></div></div></figure><p id="e9a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Xtext中有两种类型的语法谓词运算符，即“-&gt;”和“= &gt;”。“--&gt;”是第一个标记谓词，表示如果您处于决策点，无法做出决策，请查看第一个标记并做出决策。" = &gt; "表示如果你正处于一个决定点，难以做出决定，检查语法的特定部分并做出决定。</p><p id="251d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，LogicalStatefulSource规则中的歧义是使用如下的句法谓词解决的。</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="e209" class="la lb iq md b gy mh mi l mj mk">LogicalStatefulSource: <br/>=&gt;(stdSource+=StandardStatefulSource and=AND)stdSource+=StandardStatefulSource    <br/>|=&gt;(stdSource+=StandardStatefulSource or=OR) stdSource+=StandardStatefulSource;</span></pre><p id="1dff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这意味着，如果解析器处于LogicalStatefulSource，需要做出决定，请考虑“(STD source+= StandardStatefulSource AND = AND)”或“= &gt;(STD source+= StandardStatefulSource OR = OR)”来决定选择哪个备选项。</p><p id="ea9e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">另一个例子是ExecutionPlan的歧义修复，如下所示。</p><p id="b72e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最初的规则是，</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="c7cc" class="la lb iq md b gy mh mi l mj mk">siddhi_app    : <br/>(app_annotation|error)*      ( (definition_stream|definition_table|definition_trigger|definition_function|definition_window|definition_aggregation|error) (';' (definition_stream|definition_table|definition_trigger|definition_function|definition_window|definition_aggregation|error))* ';'?      || (execution_element|error) (';' (execution_element|error))* ';'?      || (definition_stream|definition_table|definition_trigger|definition_function|definition_window|definition_aggregation|error) (';' (definition_stream|definition_table|definition_trigger|definition_function|definition_window|definition_aggregation|error))* (';' (execution_element|error))* ';'? )    ;</span></pre><p id="1710" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里第一个和第三个替代元素是不明确的。Xtext中的模糊固定规则是，</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="f7b0" class="la lb iq md b gy mh mi l mj mk">ExecutionPlan: <br/>(appAnn+=AppAnnotation)*(  (=&gt;defStream+=DefinitionStream|=&gt;defTable+=DefinitionTable| =&gt;def_window+=DefinitionWindow| =&gt;defTrigger+=DefinitionTrigger|=&gt;defFunction+=DefinitionFunction|=&gt;defAgrregation+=DefinitionAggregation)=&gt;(';'   (=&gt;defStream+=DefinitionStream|=&gt;defTable+=DefinitionTable| =&gt;def_window+=DefinitionWindow| =&gt;defTrigger+=DefinitionTrigger|=&gt;defFunction+=DefinitionFunction|=&gt;defAgrregation+=DefinitionAggregation))*  =&gt;(';'(exElement+=ExecutionElement))* ';'?);</span></pre><p id="22e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更多歧义固定可以在<a class="ae kl" href="https://docs.google.com/document/d/1AHfncxIG5WmYWITkxM6-7FkRfDJ5PJL1h8tLQq0cxIU/edit?usp=sharing" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h2 id="c8a4" class="la lb iq bd lc ld le dn lf lg lh dp li jy lj lk ll kc lm ln lo kg lp lq lr ls bi translated">语法突出显示</h2><p id="4d49" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ij bi translated">句法突显由词汇突显和语义突显两部分组成。对关键词、数字和标点符号进行词汇突出显示。语义突出显示在变量名上，如流名、表名、触发器名、窗口名、函数名和紫色事件名。如下图所示，实现了词汇和语义突出显示。</p><figure class="ly lz ma mb gt mn gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/3542c972d8033bd2b965e93db2cfd15a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*S0T3Tw7yuW60JFpKNLqdDg.png"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk">Lexical and Semantic highlighting for Siddhi</figcaption></figure><h2 id="6b15" class="la lb iq bd lc ld le dn lf lg lh dp li jy lj lk ll kc lm ln lo kg lp lq lr ls bi translated">代码自动完成</h2><p id="b735" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ij bi translated">内容辅助在任何编辑器中都是一个非常重要的特性。在这个插件中，根据如下所示的语法为关键字和标点符号提供了内容帮助。</p><div class="ly lz ma mb gt ab cb"><figure class="mz mn na nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/871785340d9fc43efafa4a20921ae1fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*ZdwOxNRrEOSQJd879XpuwQ.png"/></div></figure><figure class="mz mn nf nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/31c123ec12ddbd5fc38cb1302046b75d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*HKoGcudjTv_H9LE1o9EUMA.png"/></div></figure></div><figure class="ly lz ma mb gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi ng"><img src="../Images/2660eaf67ac9b25ecb8d6c85647af574.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kri7LsXxxEtjsajpP-TwGg.png"/></div></div></figure><p id="7d47" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">代码自动完成是针对执行计划中不同位置使用的流名、表名、窗口名、属性名和事件名完成的。这主要是通过使用Xtext中的局部作用域和交叉引用来实现的，因为它只需要提出属于一个执行计划的变量。交叉引用的一个例子将在下面解释。</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="843b" class="la lb iq md b gy mh mi l mj mk">Source:<br/>strId=[Source1|IdNew];</span><span id="1386" class="la lb iq md b gy ml mi l mj mk">Source1:<br/>inner='#'? name=IdNew;</span><span id="c407" class="la lb iq md b gy ml mi l mj mk">DefinitionStream:<br/>{DefinitionStream}(ann += Annotation)* DEFINE (STREAM|TABLE) src=Source1 OPEN_PAR (feature += Features )(',' feature += Features )* CLOSE_PAR;</span><span id="a0a8" class="la lb iq md b gy ml mi l mj mk">StandardStream:<br/>MainSource =&gt;((postWindowHandlers = BasicSourceStreamHandlers)?);</span><span id="42ff" class="la lb iq md b gy ml mi l mj mk">MainSource:<br/>src=Source basicSSh=BasicSourceStreamHandlers1;</span></pre><p id="5a18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此处，源规则具有对IdNew类型(标识符)的Source1的交叉引用。因此，在流定义中定义的流名称可以在查询输入规则的StandardStream元素中访问。在<a class="ae kl" href="https://github.com/udeshika-sewwandi/siddhi_editor/blob/master/org.xtext.example.siddhiql/src/org/xtext/example/siddhiql/SiddhiQL.xtext#L198" rel="noopener ugc nofollow" target="_blank">语法文件</a>中还使用了其他几个交叉引用，如SourceOrEventReference、FeaturesOrOutAttrReference和AttributeNameReference。</p><p id="05aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查询输入中实现的代码完成如下所示。当所需变量的字母作为建议给出时，建议变量名。</p><div class="ly lz ma mb gt ab cb"><figure class="mz mn nh nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/742a680af3fd7fcc92960515b5222a52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*gEfwQXsjV_3zvn6Vz-c8Fw.png"/></div></figure><figure class="mz mn ni nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/45a76e70c6239496e7308b7e6d1cbfc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*qGjWeIawF3dFbPNnr1_GTA.png"/></div></figure></div><div class="ab cb"><figure class="mz mn nj nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/32e7dbff603e4db745ebfa8d307b6387.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*o1vwAmEyv3kjaVph3xfqTQ.png"/></div></figure><figure class="mz mn nk nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/076580a5322dfd27902864c91431594c.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*eMdQM-7xltOVRay0xP3GaA.png"/></div></figure></div><div class="ab cb"><figure class="mz mn nl nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/f6281ff7d54a2cb7781a73a75e3e404f.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*eAW3Cp9HPWUWRG0V5Y97jg.png"/></div></figure><figure class="mz mn nm nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/b78accf51f3d2e144061acf6d685f64e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*1bumlYKAJnCoTED1BWh6rg.png"/></div></figure></div><div class="ab cb"><figure class="mz mn nn nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/baee270df99d2b49a8f54d58663f21cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*2wh6AtLi9nz6lKEAp92ymQ.png"/></div></figure><figure class="mz mn no nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/9599328311534b4c9d77bc7a2e9be299.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*2B83hVEtOFSadMV2jiOnXA.png"/></div></figure></div><p id="af8a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为查询部分实现的代码完成如下。</p><div class="ly lz ma mb gt ab cb"><figure class="mz mn np nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/6589ec06bd9fdeaf4d25aba85b049dc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*lXsZ3FwRHBUpmS4hbMGsZQ.png"/></div></figure><figure class="mz mn nq nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/461118b3ca335374b3e11ed7e956489b.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*iiwoAK66kd1-zEdvWx6RLA.png"/></div></figure></div><div class="ab cb"><figure class="mz mn nr nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/8a9c0417e744b9545f98740d287a0b39.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*bkPqeZqRHq45m2ih_b57-w.png"/></div></figure><figure class="mz mn ns nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/60cb256d61ae95c8dd4fee5b37c94e21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*V8v1vTCPHlDwnsDhK1RMUg.png"/></div></figure></div><p id="d54e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">定义了查询部分功能操作的一般方案，方便了用户的使用。当键入“，”或“:”时触发。</p><figure class="ly lz ma mb gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi nt"><img src="../Images/69316ba5028a4329a5de0eb1ca52382d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sSq-zswP6Y5PZK5AYEXOOQ.png"/></div></div></figure><p id="3362" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该建议可以定制如下。</p><figure class="ly lz ma mb gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi nu"><img src="../Images/a5d2f02c7eace9d202df15dfb8b17126.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ch0QJAuDYz9IS1-q0ztkPw.png"/></div></div></figure><div class="ly lz ma mb gt ab cb"><figure class="mz mn nv nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/c3a390ac36cd849127f73c32e0c9b9ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*gzljTi47PR6rJ-A-5fOvrw.png"/></div></figure><figure class="mz mn nw nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/6577626f019f0c02150ae22d70abae4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*N29MkVlqmzdmOm84mttSOw.png"/></div></figure></div><h2 id="bbc7" class="la lb iq bd lc ld le dn lf lg lh dp li jy lj lk ll kc lm ln lo kg lp lq lr ls bi translated">错误报告</h2><p id="7f93" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ij bi translated">语法错误由Xtext框架本身捕获，并显示在编辑器中。逻辑错误，比如把错误的变量放在错误的地方，是在对流名、表名等进行了局部作用域之后捕获的。</p><p id="c16e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">语法错误显示在编辑器中，如下所示。</p><div class="ly lz ma mb gt ab cb"><figure class="mz mn nx nb nc nd ne paragraph-image"><img src="../Images/e558c2789d2aa139383c7c1b9f9fc61c.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*puPoDs08TboIF_YAyKub4w.png"/></figure><figure class="mz mn ny nb nc nd ne paragraph-image"><img src="../Images/ff29fc25262edf1bfcfb35cdc0e9dbc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*k-QCptDIxWLCqqqk6fk2cQ.png"/></figure></div><p id="1f7b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">逻辑错误显示给用户，如下所示。</p><figure class="ly lz ma mb gt mn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/fcd11ce0391edb01d06ddbdde7cbb255.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*8MODmRiluefSNKAU7MX6oQ.png"/></div></figure><div class="ly lz ma mb gt ab cb"><figure class="mz mn oa nb nc nd ne paragraph-image"><img src="../Images/788cffea0a5f581497fc695e2906bfbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*bxCUZ3YBgrsWkEcdwoYWXQ.png"/></figure><figure class="mz mn ob nb nc nd ne paragraph-image"><img src="../Images/45e2ae185e0d2c038fc2538418513616.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*ZLdgdGJKhNTXYginsV4nTg.png"/></figure></div><p id="581f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"><em class="oc">github中共享代码的链接:</em></strong><a class="ae kl" href="https://github.com/udeshika-sewwandi/siddhi_editor" rel="noopener ugc nofollow" target="_blank">https://github.com/udeshika-sewwandi/siddhi_editor</a></p><p id="83dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="oc">已实现特性的Eclipse编辑器插件链接:</em></strong><a class="ae kl" href="https://drive.google.com/drive/folders/0B3tawRCYox59c1pXa2VDamMzcUU?usp=sharing" rel="noopener ugc nofollow" target="_blank">https://drive . Google . com/drive/folders/0 B3 tawrcyox 59 C1 pxa 2 vdammzuu？usp =共享</a></p><h2 id="7959" class="la lb iq bd lc ld le dn lf lg lh dp li jy lj lk ll kc lm ln lo kg lp lq lr ls bi translated">如何安装插件？</h2><p id="be85" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ij bi translated">要在Eclipse中安装插件，需要遵循以下步骤。</p><ul class=""><li id="f826" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated">下载并安装Eclipse IDE(例如Mars 2可以在这里下载<a class="ae kl" href="https://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/mars2" rel="noopener ugc nofollow" target="_blank"/>)</li></ul><p id="e8b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">按照下面的过程在Eclipse中安装Xtext。</p><ul class=""><li id="34de" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated">点击帮助菜单-&gt;安装新软件</li><li id="4f9b" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">将<a class="ae kl" href="http://download.eclipse.org/modeling/tmf/xtext/updates/composite/releases/" rel="noopener ugc nofollow" target="_blank">http://download . eclipse . org/modeling/tmf/xtext/updates/composite/releases/</a>放入<strong class="jp ir">与</strong>字段一起安装Xtext</li><li id="944e" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">获取后，从列表中的Xtext类别中选择Xtext complete SDK并安装Xtext</li></ul><figure class="ly lz ma mb gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi od"><img src="../Images/09ef844b2d0bd42d5b5c8386769f6ab2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rA8_iL9kZEc2CTmfTJh3bg.png"/></div></div></figure><ul class=""><li id="f8aa" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated">一段时间后，Xtext将被安装并完成安装</li><li id="ee25" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">重启Eclipse</li></ul><p id="bd48" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后安装神功插件</p><ul class=""><li id="0b36" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated">在这里下载<a class="ae kl" href="https://drive.google.com/drive/folders/0B3tawRCYox59VDdXcVNKY05SRnM?usp=sharing" rel="noopener ugc nofollow" target="_blank">中的插件文件夹。</a></li><li id="2eff" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">点击帮助-&gt;安装新软件</li><li id="7409" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">点击“添加”按钮</li><li id="863e" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">点击“本地”按钮，选择主插件文件夹，然后点击“确定”</li></ul><figure class="ly lz ma mb gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi oe"><img src="../Images/9ac0ae0d456897dfd525786c16ba0fba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xrjE5mC9JGAGwwNP8x3_dA.png"/></div></div></figure><ul class=""><li id="3097" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated">为“名称”字段命名，然后单击“确定”</li></ul><figure class="ly lz ma mb gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi of"><img src="../Images/748159884cf5110fa2d3bd615efc1068.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ENiynvZMFNW-5r42H1QQoA.png"/></div></div></figure><ul class=""><li id="d6cf" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated">从列表中选中该功能，取消选中“按类别分组项目”,然后单击“下一步”</li></ul><figure class="ly lz ma mb gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi og"><img src="../Images/72e2dafe63e3a86aec0ce0f0c800811d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3rXahBRM101Zy-50JXxWDw.png"/></div></div></figure><ul class=""><li id="c16a" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated">经过一些下载过程后，插件将安装到Eclipse IDE中</li><li id="ad6d" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">重启Eclipse</li></ul><p id="bcc7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装两个插件后，按照下面的步骤创建一个. siddhi文件。</p><ul class=""><li id="fd52" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated">点击文件-&gt;新建-&gt;项目</li><li id="2f8f" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">选择常规-&gt;项目</li><li id="c12e" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">右键单击创建的项目并选择新建-&gt;文件</li><li id="101e" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">将文件名命名为file_name.siddhi</li><li id="83d7" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">点击完成</li><li id="29d1" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">Eclipse将询问“您想将项目转换成Xtext项目吗？”-&gt;单击是</li><li id="9509" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">然后创建了。神功文件可以如下图所示使用</li></ul><figure class="ly lz ma mb gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi oh"><img src="../Images/830d7997628203982886c6cef5fa8cdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ReMyhiwstjBfhGhqhKvH5Q.png"/></div></div></figure><h2 id="5bdb" class="la lb iq bd lc ld le dn lf lg lh dp li jy lj lk ll kc lm ln lo kg lp lq lr ls bi translated">未来的工作</h2><p id="1484" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ij bi translated">实现Siddhi Eclipse编辑器的运行和调试功能需要在将来完成，以便使用该插件。运行功能可以通过使用Xtext框架提供的代码生成器存根为特定于领域的语言定制来提供。</p><h2 id="caca" class="la lb iq bd lc ld le dn lf lg lh dp li jy lj lk ll kc lm ln lo kg lp lq lr ls bi translated">确认</h2><p id="6500" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ij bi translated">这是我在大学生活中第一次参加2017年谷歌代码之夏，为WSO2的一个项目做贡献，WSO2是一家开源的知名公司。Sriskandarajah Suhothayan和Nirmal Fernando是我在WSO2的导师。虽然这是我第一次为WSO2做贡献，但是导师们真的很有帮助，在整个夏天都在这个项目上指导我。非常感谢导师和WSO2给我机会，指导我确定项目目标。我真的很高兴在GSoC 2017中为WSO2做出贡献，我也愿意在这款产品以及其他产品上为WSO2做出贡献。</p><p id="2f15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">GSoC是一个鼓励大学生为开发自由和开源软件做出贡献的项目。我很高兴成为2017年GSoC的一员，我非常感谢谷歌每年组织这个项目，这为学生提供了一个在虚拟工作环境中工作来提高许多技能的大好机会。</p><p id="2762" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果需要任何澄清，请通过<em class="oc">sewwandikaus . 13 @ CSE . mrt . AC . lk</em>联系我。</p><h2 id="63e6" class="la lb iq bd lc ld le dn lf lg lh dp li jy lj lk ll kc lm ln lo kg lp lq lr ls bi translated">关于Xtext的进一步阅读</h2><p id="d3ef" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ij bi translated">[1]<a class="ae kl" href="https://eclipse.org/Xtext/documentation/102_domainmodelwalkthrough.html" rel="noopener ugc nofollow" target="_blank">https://eclipse . org/Xtext/documentation/102 _ domainmodelwalk . html</a></p><p id="d42e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">[2]<a class="ae kl" href="https://eclipse.org/Xtext/documentation/301_grammarlanguage.html" rel="noopener ugc nofollow" target="_blank">https://eclipse . org/Xtext/documentation/301 _ grammar language . html</a></p><p id="4257" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">[3]<a class="ae kl" href="https://eclipse.org/Xtext/documentation/307_special_languages.html" rel="noopener ugc nofollow" target="_blank">https://eclipse . org/Xtext/documentation/307 _ special _ languages . html</a></p><p id="0531" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://github.com/MartijnDwars/Xtext/wiki/Expressions" rel="noopener ugc nofollow" target="_blank">https://github.com/MartijnDwars/Xtext/wiki/Expressions</a></p></div></div>    
</body>
</html>