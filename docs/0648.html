<html>
<head>
<title>On measuring recurring users</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">衡量经常性用户</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/on-measuring-recurring-users-ca4142be8efa?source=collection_archive---------3-----------------------#2017-06-02">https://towardsdatascience.com/on-measuring-recurring-users-ca4142be8efa?source=collection_archive---------3-----------------------#2017-06-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><blockquote class="jn jo jp"><p id="89e3" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">每个人都在谈论数据驱动。设置度量标准是困难的，即使在选择了要度量的东西之后，正确地度量它仍然是困难的！在这里，我将通过多种方法来衡量流失错误。</p></blockquote><p id="430f" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">当你在开发一个产品时，最重要的一个指标就是你的用户中有多少会回来重复使用。这个指标有很多种，流失(给定时间后有多大比例的用户不再是用户)是最常见的一种。</p><p id="a110" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">在<a class="ae ks" href="http://www.peergrade.io" rel="noopener ugc nofollow" target="_blank"> Peergrade </a>我们正在为教师制作一个产品，我们有兴趣确定我们的用户是否对该产品足够满意，以便回来再次使用它。我们面临的挑战之一是，一些教师经常使用Peergrade，而一些教师(主要是大学教师)一年只使用我们的产品一次或两次。这里的问题是，我们不知道用户是否已经离开我们，或者用户是否只是处于使用期的中间。</p><p id="a42a" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">当我们查看我们的数据时，它看起来像这样(这不是实际数据):</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi kt"><img src="../Images/ddad0c6143a0121059f46f01a85a1fbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*roLvAuyPThWlG55V_DA57Q.png"/></div></div></figure><p id="b532" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">每个蓝条对应一个不使用我们产品的用户(横轴是天)。在结束前停止的蓝色条意味着相应的用户再次回来使用我们的产品。延伸到图表末端的蓝色条(本例中为365)意味着用户要么还没有回来，要么已经永远离开了我们。</p><p id="c9bb" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">一个<strong class="jt ir">简单的</strong>方法是计算在第365天之前结束的棒线数量和没有结束的棒线数量之间的比率，来衡量有多大比例的用户回到我们的产品。这样做的明显问题是，我们会高估流失的人数，把还没有回来的人都算成永远不会回来了。一个<strong class="jt ir">更好的</strong>策略是设置一个固定的最大值(例如2个月),并把在这段时间后没有回来的人算作被搅动——这个最大值可以从数据中确定，例如通过将其设置为已知已经回来的用户的不活动持续时间的第95个百分位数。</p><h1 id="1b89" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">估计误差的影响</h1><p id="d9b9" class="pw-post-body-paragraph jq jr iq jt b ju md jw jx jy me ka kb kp mf ke kf kq mg ki kj kr mh km kn ko ij bi translated">使用不正确的评估策略会导致非常错误的结果。下面我将描述一种不同的方法来计算客户流失，这种方法在相当合理的假设下会产生更好的结果。在我们的实验中，上面的简单方法导致11%的平均估计误差，更好的版本导致5.4%的平均误差，而我们改进的方法导致仅1.2%的平均误差。</p><h1 id="2822" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">长尾理论和不同的方法</h1><p id="1555" class="pw-post-body-paragraph jq jr iq jt b ju md jw jx jy me ka kb kp mf ke kf kq mg ki kj kr mh km kn ko ij bi translated">上述较好策略的问题是，当用户的不活动持续时间分布具有长尾时，即当一些用户的不活动时间非常长时，设置这样的最大值可能会很不幸地出现问题。我们的用户就是这种情况。</p><p id="3097" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">为了尝试以更好的方式解决这个问题，我们从制作一个小的合成数据集开始。我们设置了一个<em class="js">产品质量</em>参数(称之为<em class="js"> q </em>)，这是一个用户回来重复使用的概率(这是我们有兴趣测量的参数)。</p><p id="9d3b" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">然后，我们创建了2000个虚拟用户，并使用我们的<em class="js"> q </em>参数来确定他们是否会回来。我们将合成数据集的时间跨度设置为365天。对于每个用户，我们在0到365之间随机选择一个不活动期的开始日期(上面的条形开始的位置)。为了以现实的方式模拟非活动持续时间，我们从伽玛分布中采样非活动持续时间，如下所示:</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi mi"><img src="../Images/9d9aad160f629f8ae30a040679e5ffbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vp3NM2dWyQktQE0gb8gDEA.png"/></div></div></figure><p id="f7ba" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">对于被选择不返回的用户，不活动期被延长到第365天(我们的时间跨度结束)。对于经常性用户，等待时间从上述分布中取样，并添加到开始时间中，以获得非活动间隔的结束时间。如果高于365，则上限为365。</p><p id="edbe" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">这样做的结果是帖子顶部的图中所示的数据，其中可以观察到一些用户返回，一些是非经常性用户或经常性用户，他们的返回超出了时间跨度(在第365天之后)。</p><h1 id="2670" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">不同的方法</h1><p id="c42b" class="pw-post-body-paragraph jq jr iq jt b ju md jw jx jy me ka kb kp mf ke kf kq mg ki kj kr mh km kn ko ij bi translated">我们估计流失率的方法是使用下面的简单算法:</p><ul class=""><li id="03ed" class="mj mk iq jt b ju jv jy jz kp ml kq mm kr mn ko mo mp mq mr bi translated">用1标记我们知道用户返回的每个时间间隔</li><li id="67c4" class="mj mk iq jt b ju ms jy mt kp mu kq mv kr mw ko mo mp mq mr bi translated">按长度对时间间隔进行排序，从最长的间隔开始</li><li id="d3ce" class="mj mk iq jt b ju ms jy mt kp mu kq mv kr mw ko mo mp mq mr bi translated">如果最长的间隔没有标签1，则给它标签0</li><li id="91f7" class="mj mk iq jt b ju ms jy mt kp mu kq mv kr mw ko mo mp mq mr bi translated">对于每个区间(按排序顺序)，用所有更长区间标签的平均值对其进行标记。</li><li id="cd7c" class="mj mk iq jt b ju ms jy mt kp mu kq mv kr mw ko mo mp mq mr bi translated">将重复出现的概率确定为所有区间的平均标签。</li></ul><p id="79a4" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">这里的概念是，为了估计用户在X天不活动后返回的概率，我们查看所有不活动超过X天的用户，并查看有多少用户返回。</p><h1 id="103f" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结果和其他想法</h1><p id="3f1c" class="pw-post-body-paragraph jq jr iq jt b ju md jw jx jy me ka kb kp mf ke kf kq mg ki kj kr mh km kn ko ij bi translated">在合成数据集上，我们可以测试简单的估计，看看它们与我们的新方法相比表现如何。产品质量参数<em class="js"> q </em>在0到1之间随机抽样，并进行不同的推断方法。这样做了100次，以限制数据中随机噪声的影响。最终结果显示，简单方法的平均估计误差为11%，更好的版本的平均误差为5.4%，而我们改进的方法的平均误差仅为1.2%。</p><p id="a4b1" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kp kd ke kf kq kh ki kj kr kl km kn ko ij bi translated">解决这个问题的一个有趣的方法是用完全概率的方式建模，例如使用<a class="ae ks" href="https://github.com/pymc-devs/pymc3" rel="noopener ugc nofollow" target="_blank"> PyMC3 </a>。这种建模将导致一种不那么特别的解决方案，并且还将给出估计量的不确定性的度量。此外，可能有可能以某种方式对产品的开发建模(并且有希望以某种方式增加<em class="js">q</em><em class="js"/>)——这将有可能估计您是否以显著影响度量的方式改进产品。最后，研究其他因素的建模会很有趣，比如季节性(对我们来说，夏季是一个低活动期)，并可能引入其他因素，以便更准确地预测用户流失。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><a href="https://www.eduflow.com"><div class="gh gi mx"><img src="../Images/4724bcab1d59063269d028fcc0d3b969.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m4R_gRlmIRB6eA0-vUUZpw.png"/></div></a></figure></div></div>    
</body>
</html>