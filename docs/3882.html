<html>
<head>
<title>The house always wins : Monte Carlo Simulation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">赌场总是赢家:蒙特卡洛模拟</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-house-always-wins-monte-carlo-simulation-eb82787da2a3?source=collection_archive---------0-----------------------#2018-06-28">https://towardsdatascience.com/the-house-always-wins-monte-carlo-simulation-eb82787da2a3?source=collection_archive---------0-----------------------#2018-06-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8a60" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">赌场是怎么挣钱的？诀窍很简单——你玩的时间足够长，输钱的概率就会增加。让我们用一个简单的蒙特卡罗模拟来看看这是如何工作的。</p><blockquote class="kl km kn"><p id="82c6" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><strong class="jp ir">蒙特卡洛模拟</strong>是一种用于理解金融、项目管理、成本和其他预测模型中风险和不确定性影响的技术。蒙特卡洛模拟器有助于人们将大多数或所有的潜在结果可视化，从而对决策的风险有更好的了解。</p></blockquote><p id="5c42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">考虑一个假想的游戏，其中我们的玩家“杰克”掷出一个假想的骰子，得到 1 比 100 的结果。如果杰克掷出 1-51 之间的任何数字，赌场赢，但是如果掷出的数字是 52-100，杰克赢。够简单吗？</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/21dffb261813795be0126aeb6b4bb6f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*J2XZDiZBxiHR5BKTDaX5ZQ.gif"/></div></div></figure><p id="b38c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在模拟结果之前，让我们计算一下房子的边缘。房子边缘显示了赌场在赢得赌注方面的优势。<strong class="jp ir">这是赌场从玩家下注中获得的平均利润。</strong></p><p id="c06e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们假设杰克在这个游戏中下注 1 美元。</p><p id="9543" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">杰克赢的概率= 49/100</p><p id="13eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">赌场获胜的概率= 51/100</p><p id="55cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae le" href="http://www.statisticshowto.com/probability-and-statistics/expected-value/" rel="noopener ugc nofollow" target="_blank">玩家的预期</a>利润= 1 *(49/100)-1 *(51/100)=-0.02 =-2%</p><p id="7db4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，<strong class="jp ir">我们假想游戏中的房子边缘是 2%。</strong>作为对比，欧洲轮盘最低的房子边缘是 2.7%。简而言之，我们在想象的游戏中比在轮盘赌中有更大的胜算。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><p id="ca34" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们在 Python 中模拟不同的场景，以可视化玩家持续下注时的不同结果。</p><p id="f14b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 1。导入所需的库</strong></p><pre class="kt ku kv kw gt lm ln lo lp aw lq bi"><span id="838e" class="lr ls iq ln b gy lt lu l lv lw">#Import libraries<br/>import random<br/>import matplotlib.pyplot as plt</span></pre><p id="f232" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 2。我们需要一个骰子模拟器，它能以均匀的概率分布抛出一个从 1 到 100 的值。让我们用 Python 创建一个函数，如果玩家赢了，它返回“真”,如果赌场赢了，它返回“假”。</strong></p><pre class="kt ku kv kw gt lm ln lo lp aw lq bi"><span id="ff03" class="lr ls iq ln b gy lt lu l lv lw">#Create function for simulating die roll <br/>#The die can take values from 1 to 100. If the number is between 1 #and 51, the house wins. <br/>#If the number is between 52 and 100, the player wins.</span><span id="a0dc" class="lr ls iq ln b gy lx lu l lv lw">def rolldice():<br/>    <br/>    dice = random.randint(1,100)<br/>    <br/>    if dice &lt;=51:<br/>        return False<br/>    elif dice &gt;51 &amp; dice &lt;=100:<br/>        return True</span></pre><p id="268e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 3。创建一个模拟赌注的函数。我们需要为函数提供三个参数:</strong></p><p id="966b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">I .总资金:玩家开始的资金(10，000 美元)</p><p id="e3ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">二。下注金额:玩家在每场游戏中下注的金额(100 美元)</p><p id="aaac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">三。总游戏次数:玩家玩游戏的次数(该值因创建不同的场景而异)</p><pre class="kt ku kv kw gt lm ln lo lp aw lq bi"><span id="9de1" class="lr ls iq ln b gy lt lu l lv lw">#Define a function for the play which takes 3 arguments :<br/>#1. total_funds = total money in hand the player is starting with<br/>#2. wager_amount = the betting amount each time the player plays<br/>#3. total_plays = the number of times the player bets on this game</span><span id="242b" class="lr ls iq ln b gy lx lu l lv lw">def play(total_funds, wager_amount, total_plays):<br/>    <br/>    #Create empty lists for :<br/>    # 1.Play_number and <br/>    # 2.Funds available<br/>    # 3.Final Fund<br/>    Play_num = []<br/>    Funds = []</span><span id="8775" class="lr ls iq ln b gy lx lu l lv lw">#Start with play number 1<br/>    play = 1<br/>#If number of plays is less than the max number of plays we have set<br/>    while play &lt; total_plays:<br/>        #If we win<br/>        if rolldice():<br/>            #Add the money to our funds<br/>            total_funds = total_funds + wager_amount<br/>            #Append the play number<br/>            Play_num.append(play)<br/>            #Append the new fund amount<br/>            Funds.append(total_funds)<br/>        #If the house wins<br/>        else:<br/>            #Add the money to our funds<br/>            total_funds = total_funds - wager_amount <br/>            #Append the play number<br/>            Play_num.append(play)<br/>            #Append the new fund amount<br/>            Funds.append(total_funds)<br/>            <br/>        #Increase the play number by 1<br/>        play = play + 1<br/>        </span><span id="f8e1" class="lr ls iq ln b gy lx lu l lv lw">    #Line plot of funds over time<br/>    plt.plot(Play_num,Funds)<br/>    Final_funds.append(Funds[-1])<br/>    return(Final_funds)</span></pre><p id="bc9f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 4。最后运行一个循环调用以上函数，模拟游戏多种场景。要对我们游戏的最终结果</strong><a class="ae le" href="http://blog.3dcs.com/dimensional-analysis-how-many-monte-carlo-simulations-should-i-run" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"/></a><strong class="jp ir">有信心，每个场景都会模拟 100 次。</strong></p><pre class="kt ku kv kw gt lm ln lo lp aw lq bi"><span id="f319" class="lr ls iq ln b gy lt lu l lv lw">#Call the function to simulate the plays and calculate the remaining #funds of the player after all the bets<br/>#Intialize the scenario number to 1<br/>x=1<br/>#Create a list for calculating final funds<br/>Final_funds= []</span><span id="9a3a" class="lr ls iq ln b gy lx lu l lv lw">while x&lt;=100:<br/>    <strong class="ln ir">ending_fund = play(10000,100,5)</strong><br/>    x=x+1</span><span id="9dfd" class="lr ls iq ln b gy lx lu l lv lw">#Plot the line plot of "Account Value" vs "The number of plays"<br/>plt.ylabel('Player Money in $')<br/>plt.xlabel('Number of bets')<br/>plt.show()</span><span id="9f8f" class="lr ls iq ln b gy lx lu l lv lw">#Print the money the player ends with<br/>print("The player starts the game with $10,000 and ends with $" + str(sum(ending_fund)/len(ending_fund)))</span></pre><p id="eece" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 5。让我们用下面的图表来想象 7 种不同的场景。在每个场景中，杰克下注 n 次。</strong></p><p id="ff90" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了生成多个场景，使用上方的<strong class="jp ir">代码块(#4)，但是只修改突出显示的代码(如下所示)来调整玩家下注的数量。</strong></p><pre class="kt ku kv kw gt lm ln lo lp aw lq bi"><span id="c19f" class="lr ls iq ln b gy lt lu l lv lw">ending_fund = play(10000,100,<strong class="ln ir">5</strong>)</span></pre><p id="fbdc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">x 轴:杰克下注的次数</p><p id="76ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">y 轴:每次下注后杰克的账户余额</p><p id="d4da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">每张图显示了杰克继续玩游戏时的账户余额。此外，为了找出 Jack 的期末余额，我们将对 100 个不同模拟的余额进行平均。</strong></p><blockquote class="kl km kn"><p id="88b4" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><strong class="jp ir">这个实验的目的是回答一个简单的问题——“如果一个人以 10，000 美元开始，玩这个游戏 n 次(每局下注 100 美元)，平均来说，玩家最后会有多少钱？”</strong></p></blockquote><h1 id="9a01" class="ly ls iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated"><strong class="ak">场景 1 - &gt;投注数量:5 </strong></h1><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/02628af8d8245a11dba1157e10b09bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*6kMV0g3paFh_LBRQjz7pfw.png"/></div></figure><h1 id="130e" class="ly ls iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated"><strong class="ak">场景 2 - &gt;投注数量:10 </strong></h1><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi mw"><img src="../Images/7fbce15fdebdf0ee40c9012a304c7f6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*JFow2MUIrxtiv52tT5yAHg.png"/></div></div></figure><h1 id="7295" class="ly ls iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated"><strong class="ak">场景 3 - &gt;投注数量:50 </strong></h1><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/11429d2b4b34a25b8bb125a6bd0b4080.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*ZInLl3ZwYlgQ2agsU6uz8A.png"/></div></figure><h1 id="b9aa" class="ly ls iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated"><strong class="ak">场景 4 - &gt;投注数量:100 </strong></h1><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi my"><img src="../Images/8f7b1e7e5f826409a6c1222ea46c6b0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*JrtvHKOusVYYQ3AabJXIxA.png"/></div></figure><h1 id="e93d" class="ly ls iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated"><strong class="ak">场景 5 - &gt;投注数量:500 </strong></h1><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/965bd439f9e90dfab55e8bdf57e98bf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*tPNvLj8HcUmST6KtVJ4r5w.png"/></div></figure><h1 id="7152" class="ly ls iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">场景 6 -&gt;投注数量:1000</h1><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi na"><img src="../Images/b7e59f029c0682e05baf918e34d70f47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*iq0MelAY2oCb2oNn9wz0ww.png"/></div></figure><h1 id="9fa5" class="ly ls iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated"><strong class="ak">场景 7 - &gt;投注数量:10000 </strong></h1><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/ae661ec0fdbbfd6d8e570d0dddfa4ea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YrJYYPtMw2nX86_JXzmgVw.png"/></div></figure><p id="e816" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从模拟实验中，我们可以观察到，如果杰克下注较少，他就有更大的机会盈利(或最大限度地减少损失)。</p><p id="1ee5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">还可以观察到，在每个场景中损失的金额大约是下注金额的 2%(与房子边缘相同)</strong>。例如，在我们的最后一个场景中，杰克下了 10，000 次注，每次 100 美元。因此，我们预计杰克将损失大约(10，000)*(0.02*100)，相当于 20，000 美元。</p><p id="472e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，在最后一个场景中，当他玩 10，000 次时，资金变成了负数，即杰克比他开始时输掉了更多的钱(在现实生活中，这意味着杰克输掉了所有的钱)。</p><p id="0886" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">总之，<strong class="jp ir">房子永远是赢家！</strong></p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><p id="836e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">资源:</p><p id="e819" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">1.<a class="ae le" href="https://pythonprogramming.net/monte-carlo-simulator-python/" rel="noopener ugc nofollow" target="_blank">https://pythonprogramming.net/monte-carlo-simulator-python/</a></p><p id="75b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.<a class="ae le" href="http://math.info/Misc/House_Edge/" rel="noopener ugc nofollow" target="_blank">http://math.info/Misc/House_Edge/</a></p><p id="80e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<a class="ae le" href="https://www.linkedin.com/in/rohan-joseph-b39a86aa/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> LinkedIn </strong> </a>上连接。</p><p id="b3cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请找到下面嵌入的 Python 笔记本:</p><figure class="kt ku kv kw gt kx"><div class="bz fp l di"><div class="nc nd l"/></div></figure></div></div>    
</body>
</html>