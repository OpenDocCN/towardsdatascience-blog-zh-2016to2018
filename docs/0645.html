<html>
<head>
<title>Part 1: Using YouTube’s Python API for Data Science</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第 1 部分:将 YouTube 的 Python API 用于数据科学</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tutorial-using-youtubes-annoying-data-api-in-python-part-1-9618beb0e7ea?source=collection_archive---------0-----------------------#2017-06-02">https://towardsdatascience.com/tutorial-using-youtubes-annoying-data-api-in-python-part-1-9618beb0e7ea?source=collection_archive---------0-----------------------#2017-06-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4aea" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">搜索 YouTube 庞大目录的简单技巧</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5d36237f762fb6f82c311164ce82cba0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2UBkJVqVgCIqzwuXZibRWg.jpeg"/></div></div></figure><p id="2ceb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上周，我写了一篇使用谷歌语音识别 API 的<a class="ae ln" href="http://truediggs.com/presdev/google_tutorial.html" rel="noopener ugc nofollow" target="_blank">快速指南</a>，我将其描述为“有点-有点-真的令人困惑。”你猜怎么着？他们的 YouTube 数据 API 也不是非常清晰。</p><p id="da0b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你是一个有几十年经验的编程专家，你可能现在就可以停止阅读了。然而，如果你是一个中级或自学的程序员(像我一样)，这个指南应该可以帮助你快速使用 YouTube 进行数据科学研究。</p><p id="3629" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">出于时间和整体可读性的考虑，我决定将本教程分成多个部分。在第一部分中，除了进行简单的关键字查询之外，我们将重点关注 API 库的安装和认证。</p><p id="b6cd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来的部分将关注其他类型的任务，比如评论收集、地理查询和使用频道。</p><p id="2a80" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要完成本教程，您需要以下工具:</p><ul class=""><li id="5c71" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated"><strong class="kt ir"> Python 2.7 </strong></li><li id="413a" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><strong class="kt ir">一个谷歌账户</strong></li></ul><h1 id="513a" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">入门指南</h1><p id="65fc" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated"><strong class="kt ir"> 1)克隆 GitHub 库</strong></p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="dc64" class="ne md iq na b gy nf ng l nh ni">git clone <a class="ae ln" href="https://github.com/spnichol/youtube_tutorial.git" rel="noopener ugc nofollow" target="_blank">https://github.com/spnichol/youtube_tutorial.git</a><br/>cd youtube_tutorial</span></pre><p id="530e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 2)安装 YouTube 官方 Python 客户端库</strong></p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="81df" class="ne md iq na b gy nf ng l nh ni">pip install --upgrade google-api-python-client</span></pre><p id="3799" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 3)激活 YouTube API </strong></p><p id="dab1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">注意:</strong>为了完成这一步，您需要创建一个“项目”。如果你不确定如何做到这一点，查看我的<a class="ae ln" href="http://truediggs.com/google_tutorial.html" rel="noopener ugc nofollow" target="_blank">语音识别教程</a>作为快速指南。</p><p id="abc0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">前往<a class="ae ln" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌云控制台</a>，点击左上角的汉堡菜单，选择“API 管理器”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/8a762d05822414fe6b8fd839d8387c3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U7okpo4j7KY763h8Qmcoew.png"/></div></div></figure><p id="4280" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从 YouTube APIs 中选择“YouTube 数据 API”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/b563af20b32e7d4abd53e63195fd3db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_P9E9DE4MCmdzMPFANS9DA.png"/></div></div></figure><p id="6af6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">单击“启用”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/b5419dc41a11eddb8dee95ce9edcf0d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XMeVKB615T1a9_K7AcO-KA.png"/></div></div></figure><p id="38e7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从左侧导航面板中单击“凭据”，然后选择“创建凭据”您需要从下拉列表中选择<strong class="kt ir"> API 键</strong>。您应该会看到一条带有字母数字 API 密钥的消息，上面写着“API 密钥已创建”。复制并保存在一个安全的地方！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/37f954fc5e483cd3d3cd74188dd7eb10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7F0v-mi4ORuoIWiFUI6sew.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk">Click "Enable"</figcaption></figure><h1 id="e80d" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">设置我们的 Python 脚本</h1><p id="ea06" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">在代码编辑器中打开 youtube_videos.py。这是 YouTube 的<a class="ae ln" href="https://developers.google.com/youtube/v3/code_samples/python#search_by_keyword" rel="noopener ugc nofollow" target="_blank">样本代码</a>的大规模修改版本。</p><p id="ff20" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将第五行的<strong class="kt ir"> DEVELOPER_KEY </strong>变量替换为我们之前创建的 API 密钥，并保存文件。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="d504" class="ne md iq na b gy nf ng l nh ni">DEVELOPER_KEY = "REPLACETHISWITHYOURKEY_GOTIT?"<!-- --> </span></pre><p id="d84e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">酷，酷，酷。我们准备开始编写代码来进行关键字查询。继续创建一个新的 python 脚本，并将其保存在相同的目录中。</p><h1 id="bfd0" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">设置我们的 Python 脚本</h1><p id="2e9a" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">我们希望能够使用保存 API 密钥的 youtube_search.py 文件中的函数。一种方法是将该目录附加到我们的 Python 路径中。</p><p id="77d3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 1)将目录追加到 Python 路径</strong></p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="9535" class="ne md iq na b gy nf ng l nh ni">import sys<br/>sys.path.append("/home/your_name/youtube_tutorial/")</span></pre><p id="cb6b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 2)导入</strong> <code class="fe nr ns nt na b"><strong class="kt ir">youtube_search</strong></code> <strong class="kt ir">功能</strong></p><p id="e98f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">既然我们已经设置了路径，我们可以用一个简单的 import 语句从 youtube_videos.py 文件中引入<code class="fe nr ns nt na b">youtube_search</code>函数。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="5f7a" class="ne md iq na b gy nf ng l nh ni">from youtube_videos.py import youtube_search</span></pre><p id="e8c8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们也导入<strong class="kt ir"> json </strong>库，因为它在解析 API 的 json 输出时会派上用场。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="62cf" class="ne md iq na b gy nf ng l nh ni">import json</span></pre><p id="21be" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">太好了。我们已经准备好使用我们的<strong class="kt ir"> youtube_search </strong>功能来尝试快速关键字搜索。</p><p id="cdab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 4)测试出</strong> <code class="fe nr ns nt na b"><strong class="kt ir">youtube_search</strong></code> <strong class="kt ir">功能。</strong></p><p id="33fa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">假设我们喜欢坐立不安的纺纱工(我们不喜欢)，我们想看看 YouTube 上有什么关于他们的视频。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="b121" class="ne md iq na b gy nf ng l nh ni">test = youtube_search("spinners")<br/>test</span></pre><p id="7cb8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您的输出应该如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/b8079d5ab43df56d51124d12191b335e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kezc_SEJHCv3iG5Jc9GH4Q.png"/></div></div></figure><p id="ad60" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们的<code class="fe nr ns nt na b">youtube_search</code>的输出是一个 len = 2 的元组。第一项是一些奇怪的六字符字符串。第二项是一堆 JSON。让我们暂时忽略这个奇怪的六字符字符串，只选择 JSON。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="175b" class="ne md iq na b gy nf ng l nh ni">just_json = test[1]<br/>len(just_json)</span></pre><p id="fad0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在你应该有这个:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/1f6939e0a770dfe10417267d5d18a7eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*whSYHe6LP9YhG7nX-p2HZg.png"/></div></div></figure><p id="e2e0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们可以看到我们有一个 len = 50 的 JSON 对象。每个条目都是一个 YouTube 视频，包含该视频的详细信息，如 ID、标题、发布日期、缩略图 URL、持续时间等。</p><p id="aa04" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">假设我们想要获得一个视频的标题，我们可以很容易地用 JSON 库循环并解析它。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="4d70" class="ne md iq na b gy nf ng l nh ni">for video in just_json:<br/>    print video['snippet']['title']</span></pre><p id="cde1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这给了我们:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/033567b2da297b31383c428b917de4e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LY-ZNtnQMmFg1Szv2WlMiA.png"/></div></div></figure><p id="6187" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">坐立不安旋转披萨？啊？</p><p id="2030" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好的，继续。现在，我们早些时候发现我们的输出由 50 个不同的视频组成。这很好，当然，关于 spinners 的视频比我想看的要多，但是，这不可能是全部，对吗？</p><p id="8167" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">没错。如果我们想要超过 50 个视频，这是我们在一个请求中可以得到的最大值，我们必须要求另一轮 50 个。我们可以通过使用我们前面看到的奇怪的六字符字符串来做到这一点…也称为令牌。</p><p id="5002" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果我们在下一次请求时发送令牌，YouTube 将知道它停止的位置，并向我们发送接下来的 50 个最相关的结果。让我们试试。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="c8d7" class="ne md iq na b gy nf ng l nh ni">token = test[0]<br/>youtube_search("spinners", token=token)</span></pre><p id="4adb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们有:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/112c1df4ae77de4b1d026291e0c99794.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iEY-YA7QRthA4CCA3WVACQ.png"/></div></div></figure><p id="ac03" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">太棒了。五十多个关于纺纱工的视频。另外，如果你注意到了，我们得到了另一个令牌。如果我们想继续下去，我们只需用这个令牌冲洗并重复。</p><p id="26d5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">显然这样做真的很糟糕。相反，我们可以编写一个函数来稍微自动化这个过程。</p><h1 id="46ce" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">自动化流程</h1><ol class=""><li id="ce67" class="lo lp iq kt b ku mu kx mv la nz le oa li ob lm oc lu lv lw bi translated">实例化一个字典来存储结果</li></ol><p id="6695" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们写函数之前，让我们用我们想要保存的变量名实例化一个字典。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="adeb" class="ne md iq na b gy nf ng l nh ni">video_dict = {'youID':[], 'title':[], 'pub_date':[]}</span></pre><p id="02c2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 2)定义我们的功能</strong></p><p id="8204" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以将我们的函数命名为<strong class="kt ir"> grab_videos </strong>，并添加两个参数。第一个是关键字，第二个是令牌的可选参数。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="a563" class="ne md iq na b gy nf ng l nh ni">def grab_videos(keyword, token=None):</span></pre><p id="400c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 3)添加</strong> <code class="fe nr ns nt na b"><strong class="kt ir">youtube_search</strong></code> <strong class="kt ir">并保存我们的变量</strong></p><p id="29d8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就像之前一样，我们将使用<code class="fe nr ns nt na b">youtube_search</code>函数进行简单的搜索，并分别保存我们的令牌和 JSON 结果。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="6226" class="ne md iq na b gy nf ng l nh ni">res = youtube_search(keyword)<br/>token = res[0]<br/>videos = res[1]</span></pre><p id="b3aa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 4)循环遍历结果，追加到字典&amp;返回标记</strong></p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="8a34" class="ne md iq na b gy nf ng l nh ni">for vid in videos:<br/>  video_dict['youID'].append(vid['id']['videoId'])<br/>  video_dict['title'].append(vid['snippet']['title'])<br/>  video_dict['pub_date'].append(vid['snippet']['publishedAt'])<br/><strong class="na ir">print </strong>"added " + str(len(videos)) + " videos to a total of " + str(len(video_dict['youID']))</span><span id="aa15" class="ne md iq na b gy od ng l nh ni">return token </span></pre><p id="65e2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我还在这里添加了一个小的 print 语句，用于在每次调用该函数时更新我们收集的视频数量。</p><p id="e42f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，我们返回令牌，这样我们可以在下次调用函数时使用它。</p><p id="f6a3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 5)用 while 语句调用函数</strong></p><p id="1909" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">既然我们已经编写了函数，我们可以编写几行简短的代码来使它工作。</p><p id="a3a8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们将使用我们的关键字调用函数，将结果保存到变量<strong class="kt ir">令牌</strong>。</p><p id="0a0b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，我们可以使用 while 语句来检查函数是否返回了一个有效的令牌(即有更多的结果)或者我们是否已经遍历了所有内容。如果它看到“last_page”，就会停止代码的执行。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="7039" class="ne md iq na b gy nf ng l nh ni">token = grab_videos("spinners")<br/><strong class="na ir">while </strong>token != "last_page":<br/>    token = grab_videos("spinners", token=token)</span></pre><p id="4914" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">输出应该如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/b9aff01faaee009345e83dbad6a6e638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LpcaUq1Ga4mqAC3NMvKctg.png"/></div></div></figure><h1 id="4745" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">结论</h1><p id="e916" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">好了，现在你至少部分准备好开始在 YouTube 上收集你自己的数据了。</p><p id="a53e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果这篇文章有帮助，请通过电子邮件或在评论区告诉我。如果没有，我会从事一些其他的爱好！请继续收看第二和第三部分。</p></div></div>    
</body>
</html>