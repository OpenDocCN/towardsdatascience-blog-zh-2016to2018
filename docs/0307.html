<html>
<head>
<title>The power of simulation: birthday paradox</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">模拟的力量:生日悖论</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-power-of-simulation-birthday-paradox-29677ca5e145?source=collection_archive---------0-----------------------#2017-04-15">https://towardsdatascience.com/the-power-of-simulation-birthday-paradox-29677ca5e145?source=collection_archive---------0-----------------------#2017-04-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="7181" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://en.wikipedia.org/wiki/Birthday_problem" rel="noopener ugc nofollow" target="_blank">生日悖论</a>是这样的……<em class="km">在一个有</em> <strong class="jp ir"> <em class="km"> 23 </em> </strong> <em class="km">人的房间里，他们中的两个人有 50%的机会在同一天过生日</em>。</p><p id="a83d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好的，引入一个悖论的第一步是解释为什么它是一个悖论。有人可能认为，对于每个人来说，都有 1/365 的机会让另一个人和他们同一天生日。事实上，我能想到的和我同一天生日的人只有一个，他是我的双胞胎兄弟！既然我遇到的远远不止<strong class="jp ir"> 23 </strong>人，这怎么可能是真的呢？</p><p id="a227" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个推理有几个原因是有缺陷的，第一个原因是这个问题不是问房间里是否有另一个人有特定的生日——任何一对人(或者更多！)可以共享一个生日来增加陈述为真的几率。</p><p id="36f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完整的答案很难计算，但是我想告诉你如何通过模拟实验来说服自己这是真的。模拟是对计算机或模型进行编程，使其表现得就像真实发生的事情一样。通常情况下，你这样做是为了让模拟的花费比实际的花费少得多。例如，将模型飞机机翼放在风洞中就是一种模拟。我用一种叫做<a class="ae kl" href="https://www.python.org/" rel="noopener ugc nofollow" target="_blank"> Python </a>的计算机编程语言模拟了生日悖论，这篇文章可以在这里的笔记本式<a class="ae kl" href="https://gist.github.com/csferrie/0de0a8f531e6507cf5c98332765275b4" rel="noopener ugc nofollow" target="_blank">中找到。的确，这比和 23 个人在一个房间里要容易得多。</a></p><p id="395e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面我将<em class="km">而不是</em>展示代码(同样，这里的<a class="ae kl" href="https://gist.github.com/csferrie/0de0a8f531e6507cf5c98332765275b4" rel="noopener ugc nofollow" target="_blank">已经结束了</a>)，但是我将描述模拟是如何工作的，并展示结果。</p><h1 id="bc45" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">模拟</h1><p id="74f1" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">打电话给我们需要问的人数，才能得到重复的生日。这就是所谓的<a class="ae kl" href="https://en.wikipedia.org/wiki/Random_variable" rel="noopener ugc nofollow" target="_blank">随机变量</a>，因为它的值是未知的，并且可能会由于我们无法控制的条件而改变(比如谁碰巧在房间里)。</p><p id="7bbd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们模拟一个实验，实现如下的<em class="km"> n </em>值。</p><ol class=""><li id="660b" class="lq lr iq jp b jq jr ju jv jy ls kc lt kg lu kk lv lw lx ly bi translated">随便选一个人，问他们的生日。</li><li id="ef04" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">看看别人是否已经给了你答案。</li><li id="96c6" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">重复步骤 1 和 2，直到生日被重复两次。</li><li id="6788" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">数一数被询问的人数，称之为。</li></ol><p id="3370" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">进入步骤 4 构成了一个单独的实验。出来的数字可能是<em class="km"> n = 2 </em>或者<em class="km"> n = 100 </em>。这完全取决于谁在房间里。所以我们重复所有的步骤很多很多次，看看数字是如何下降的。我们重复的次数越多，我们获得的数据就越多，我们对正在发生的事情的理解就越好。</p><p id="f15b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是我们运行这个实验一百万次后的样子。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi me"><img src="../Images/4874c39f350b2de5929db9422a9ae5c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/0*Uux0_U7CniVCpFKp."/></div></figure><p id="64eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">模拟生日悖论。横轴是<em class="km"> n </em>，在找到重复的生日之前我们需要询问的人数。我们做了一百万次实验，并记录了结果。</p><p id="c3c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那么这些数字意味着什么呢？好吧，让我们看看发生了多少次<em class="km"> n = 2 </em>比如。在这一百万次试验中，结果 2 出现了 2679 次，相对来说是 0.2679%。请注意，这接近 1/365 ≈ 0.274%，这是意料之中的，因为第二个人与第一个人具有相同的概率正好是 1/365。所以每一次出现的次数除以一百万，大概就是我们在一次实验中看到这个数字的概率。</p><p id="eb00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们可以绘制同样的数据，考虑到纵轴是在重复生日之前需要见<em class="km"> n </em>个人的概率。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi me"><img src="../Images/cc24cacab5932c1a73ed037906d4d802.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/0*vDX9a4Ho1vVyrxnV."/></div></figure><p id="8245" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">与之前的图相同，但现在每个柱都被解释为一个概率。</p><p id="b40a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将每个条形的值相加，总和为 100%。这是因为当我们做实验时，其中一个值必须出现。好，现在我们可以把这些概率加起来，从<em class="km"> n = 2 </em>开始，一直加到 50%。从视觉上看，是这个数字将上面的彩色区域分成了两个相等的部分。这个数字就是我们有 50%的机会重复过生日所需要遇到的人数。你能猜到会是什么吗？</p><p id="6a1d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">鼓声… <strong class="jp ir"> 23 </strong>！Tada！模拟的生日悖论，模拟解决！</p><h1 id="1cd1" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">但是，等等！还有更多。</h1><p id="3dd5" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">那些闰年的宝宝呢？其实生日平均分布的假设不是错的吗？如果我们真的在现实生活中尝试这个实验，我们会得到<strong class="jp ir"> 23 </strong>或其他数字吗？</p><p id="89c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">令人高兴的是，我们可以用真实数据来检验这个假设！至少对于美国的新生儿来说，你可以在 fivethirteight 的 github 页面找到数据。这是实际的分布情况。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/76fe90dc14b86d56538c3f644dab7858.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/0*dDHCAsw7i1ocbfAf."/></div></figure><p id="3b93" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">1994 年至 2014 年美国出生人口分布，按年份分。</p><p id="cddd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">也许用眼睛看起来不太均匀。你可以清楚地看到 12 月 25 日和 12 月 31 日有巨大的下降。关于这一点已经写了很多，也有很多美丽的视觉效果。但是，我们的问题是这是否对生日悖论有影响。举例来说，也许没有多少人出生在 12 月 25 日这一事实意味着很容易在剩下的日子里找到同一个生日。让我们通过用生日的真实分布模拟实验来检验这个假设。</p><p id="9784" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为此，我们执行与上面相同的 4 个步骤，但是从生日的实际分布中随机抽取答案。另外一百万次实验的结果绘制如下。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/61dac37e179c8b992acf891d325d2fa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/0*fMN8yYclMPKJ1o60."/></div></figure><p id="c64b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">模拟出生人口真实分布的生日悖论。横轴是 n，在找到重复的生日之前我们需要询问的人数。我们做了一百万次实验，并记录了结果。</p><p id="689a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">而且答案是一样的！生日悖论在生日的实际分布中依然存在。</p><h1 id="83a3" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">书呆子狙击</h1><p id="0c99" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">上述讨论很好地证明了生日悖论对于出生的实际分布是稳健的。但是，这并不构成数学上的<em class="km">证明</em>。一个实验只能提供<em class="km">证据</em>。所以我将以一个技术性的问题来结束这篇文章，这个问题是给那些数学迷们的。(我接下来要做的也叫<a class="ae kl" href="https://xkcd.com/356/" rel="noopener ugc nofollow" target="_blank">书呆子狙击</a>。)</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mo"><img src="../Images/3cf66745d4318a4da908615c88907bdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BBCsgnuxk8EsQxLti8Ot1w.png"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk"><a class="ae kl" href="https://xkcd.com/356/" rel="noopener ugc nofollow" target="_blank">Nerd Sniping</a></figcaption></figure><p id="2ebf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里有一个广泛的问题:量化上述观察。我觉得这里不止一个问题。例如，应该可以将 50–50 阈值限制为与均匀分布的偏差的函数。</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><p id="93a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这篇文章最初发表于 2017 年 3 月 23 日的<a class="ae kl" href="https://csferrie.com/2017/03/23/the-power-of-simulation-birthday-paradox/" rel="noopener ugc nofollow" target="_blank">https://csferrie.com</a>。</p></div></div>    
</body>
</html>