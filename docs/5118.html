<html>
<head>
<title>Performance Exploding! Introduction to TigerGraph Developer Edition</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">性能爆炸！TigerGraph 开发者版简介</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/performance-exploding-introduction-to-tigergraph-developer-edition-486d6e6a409?source=collection_archive---------24-----------------------#2018-09-27">https://towardsdatascience.com/performance-exploding-introduction-to-tigergraph-developer-edition-486d6e6a409?source=collection_archive---------24-----------------------#2018-09-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ef94" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi"><em class="kl">This document is translated from: </em><a class="ae km" href="https://zhuanlan.zhihu.com/p/38016914" rel="noopener ugc nofollow" target="_blank"><em class="kl">性能炸裂！图数据库 TigerGraph 开发者版本入门 — 知乎</em></a></p><h1 id="1e4a" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">介绍</h1><p id="f10b" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">图数据库是随着大数据的普及而增长的一种数据库类型。</p><p id="87f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在多年专注于商业市场后，TigerGraph 发布了其免费开发者版。TigerGraph 本身自称是 Graph Database 3.0，具有处理海量数据的能力，支持实时更新和查询，它还定义了一种新的语言，称为 GSQL。这对于图形数据库爱好者来说无疑是一个好消息。</p><p id="71b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">开发者版可在<a class="ae km" href="https://www.tigergraph.com/download/" rel="noopener ugc nofollow" target="_blank">https://www.tigergraph.com/download/</a>获得填写表格后，下载链接和相关文件将发送到您的电子邮件地址。</p><p id="1a60" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们将逐步安装 TigerGraph，并尝试加载一个 31G 的社交网络数据集。TigerGraph 在测试结果中展现了他惊人的力量，在业界遥遥领先。</p><h1 id="bc35" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">装置</h1><p id="6a85" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">目前，TigerGraph 支持包括 Ubuntu 和 CentOS 在内的主要 Linux 平台。</p><p id="b09a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们需要解压缩下载的文件:</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="6ae9" class="lz ko iq lv b gy ma mb l mc md">ubuntu@ip-172-31-6-254:~$ tar -xzvf tigergraph-developer-latest.tar.gz<br/>tigergraph-2.1.2-developer/<br/>tigergraph-2.1.2-developer/tsar.tar.gz<br/>tigergraph-2.1.2-developer/LICENSE.txt<br/>...</span></pre><p id="f442" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，以 root 权限运行<code class="fe me mf mg lv b">install.sh</code>。</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="0c2e" class="lz ko iq lv b gy ma mb l mc md">ubuntu@ip-172-31-6-254:~/tigergraph-2.1.2-developer$ sudo ./install.sh -n<br/>   _______                 ______                 __<br/>  /_  __(_)___ ____  _____/ ____/________ _____  / /_<br/>   / / / / __ `/ _ \/ ___/ / __/ ___/ __ `/ __ \/ __ \<br/>  / / / / /_/ /  __/ /  / /_/ / /  / /_/ / /_/ / / / /<br/> /_/ /_/\__, /\___/_/   \____/_/   \__,_/ .___/_/ /_/<br/>       /____/                          /_/</span><span id="b890" class="lz ko iq lv b gy mh mb l mc md">Welcome to the TigerGraph platform installer!</span><span id="c1ed" class="lz ko iq lv b gy mh mb l mc md">[PROGRESS]: Checking operation system (OS) version ...<br/>[NOTE    ]: OS obtained: UBUNTU 16.04<br/>[NOTE    ]: OS check passed [OK]<br/>...<br/>---------------------------------------------------------------<br/>Congratulations! Installation Finished!<br/>---------------------------------------------------------------</span><span id="6e93" class="lz ko iq lv b gy mh mb l mc md">Thank you for using TigerGraph platform!<br/>[PROGRESS]: Cleaning up ...<br/>DONE<br/>[NOTE    ] The TigerGraph user: tigergraph<br/>ubuntu@ip-172-31-6-254:~$</span></pre><p id="eccd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，<code class="fe me mf mg lv b">/home/tigergraph/tigergraph/</code>下已经安装了 tigergraph。有两点需要注意:</p><ol class=""><li id="4f2f" class="mi mj iq jp b jq jr ju jv jy mk kc ml kg mm kk mn mo mp mq bi translated">安装过程中会创建一个操作系统用户<code class="fe me mf mg lv b">tigergraph</code>。由于我们使用了<code class="fe me mf mg lv b">-n</code>选项(默认配置)，所以密码也是<code class="fe me mf mg lv b">tigergraph</code>。</li><li id="4dfe" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">所有后续操作都应该在用户<code class="fe me mf mg lv b">tigergraph</code>下完成，而不是拥有<code class="fe me mf mg lv b">root</code>权限的原用户。</li></ol><h1 id="3831" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">服务管理</h1><p id="f6e9" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">TigerGraph 使用命令<code class="fe me mf mg lv b">gadmin</code>来管理系统，该命令应该在 OS 用户<code class="fe me mf mg lv b">tigergraph</code>下运行。</p><h1 id="818d" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">开始和停止</h1><p id="3617" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">默认情况下，TigerGraph 将在安装后启动。</p><p id="3a7b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe me mf mg lv b">gadmin start</code>和<code class="fe me mf mg lv b">gamin stop</code>可用于启动和停止服务。</p><h1 id="bb1f" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">系统状况</h1><p id="ef2d" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">命令<code class="fe me mf mg lv b">gadmin status</code>可用于检查各部件的状态。</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="1481" class="lz ko iq lv b gy ma mb l mc md">tigergraph@ip-172-31-6-254:~/$ gadmin status<br/>Welcome to TigerGraph Developer Edition, for non-commercial use only.<br/>=== zk ===<br/>[SUMMARY][ZK] process is up<br/>[SUMMARY][ZK] /home/tigergraph/tigergraph/zk is ready<br/>=== kafka ===<br/>[SUMMARY][KAFKA] process is up<br/>[SUMMARY][KAFKA] queue is ready<br/>=== gse ===<br/>[SUMMARY][GSE] process is up<br/>[SUMMARY][GSE] id service has NOT been initialized (online)<br/>...<br/>=== Visualization ===<br/>[SUMMARY][VIS] process is up (VIS server PID: 37708)<br/>[SUMMARY][VIS] gui server is up</span></pre><h1 id="8dca" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">应用</h1><p id="8a9d" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">接下来，我们将创建一个最简单的图形，加载数据并运行一些简单的查询来查看 TigerGraph 的性能。</p><h1 id="44ca" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">硬件和数据集</h1><p id="4170" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">TigerGraph 的要求比较低，最低 8G 内存，20G 磁盘空间，这样就可以在虚拟机中运行。当然，加载大型图形需要更多的磁盘空间和内存。</p><p id="6784" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">可以在<a class="ae km" href="https://snap.stanford.edu/data/com-Amazon.html" rel="noopener ugc nofollow" target="_blank">亚马逊共购网</a>数据集上做简单测试，解压缩后只有 12.6M。</p><p id="5252" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了让它更有趣，这里我们使用<a class="ae km" href="https://snap.stanford.edu/data/com-Friendster.html" rel="noopener ugc nofollow" target="_blank"> Friendster 社交网络</a>数据集，它与<a class="ae km" href="https://snap.stanford.edu/data/com-Amazon.html" rel="noopener ugc nofollow" target="_blank">亚马逊共同购买网络</a>具有相同的格式，但是具有更多的顶点和边:650 万个顶点和大约 20 亿条边。测试在 AWS EC2 c4.8xlarge 上进行，带 GP2 磁盘，操作系统为 Ubuntu 16.04。</p><p id="338f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先我们需要解压数据文件:<code class="fe me mf mg lv b">gunzip com-friendster.ungraph.txt.gz</code></p><p id="909a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">未压缩的数据文件大小为 31G。在开始测试之前，我们先检查一下磁盘使用情况，加载后可以对比一下。</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="923d" class="lz ko iq lv b gy ma mb l mc md">tigergraph@ip-172-31-6-254:~/data$ ll com-friendster.ungraph.txt  --block-size=G<br/>-rw-rw-r-- 1 tigergraph tigergraph 31G Nov 13  2012 com-friendster.ungraph.txt<br/>tigergraph@ip-172-31-6-254:~/data$ df -h<br/>Filesystem      Size  Used Avail Use% Mounted on<br/>udev             30G     0   30G   0% /dev<br/>tmpfs           5.9G  8.5M  5.9G   1% /run<br/>/dev/xvda1      194G   67G  127G  35% /<br/>tmpfs            30G     0   30G   0% /dev/shm<br/>tmpfs           5.0M     0  5.0M   0% /run/lock<br/>tmpfs            30G     0   30G   0% /sys/fs/cgroup<br/>tmpfs           5.9G     0  5.9G   0% /run/user/1000</span></pre><p id="4438" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了感受这个数据集有多大，我们可以运行<code class="fe me mf mg lv b">time wc -l com-friendster.ungraph.no.header.txt</code>:</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="d36d" class="lz ko iq lv b gy ma mb l mc md">tigergraph@ip-172-31-6-254:~/data$ time wc -l com-friendster.ungraph.no.header.txt<br/>1806067135 com-friendster.ungraph.no.header.txt</span><span id="e457" class="lz ko iq lv b gy mh mb l mc md">real    3m8.286s<br/>user    0m31.372s<br/>sys     0m18.412s<br/>tigergraph@ip-172-31-6-254:~/data$ ls -al --block-size=G com-friendster.ungraph.no.header.txt<br/>-rw-rw-r-- 2 tigergraph tigergraph 31G Jun 12 05:36 com-friendster.ungraph.no.header.txt</span></pre><p id="31aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从结果中我们可以看到，这个文件有 18 亿行，在 SSD 上运行<code class="fe me mf mg lv b">wc -l</code>差不多要 4 分钟！</p><h1 id="50d3" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">创建图表</h1><p id="591d" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">创建图表有两种方法，要么通过 cmd 工具<code class="fe me mf mg lv b">gsql</code>，要么通过 GUI 工具<code class="fe me mf mg lv b">GraphStudio</code>。</p><p id="daa0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们使用 GraphStudio。要访问 GraphStudio，在浏览器上键入<code class="fe me mf mg lv b">http://localhost:14240</code>。如果是远程服务器，只需将<code class="fe me mf mg lv b">localhost</code>更改为远程 IP，主页将显示:</p><figure class="lq lr ls lt gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi mw"><img src="../Images/34e09976ac7d23fd821c5111433fbd58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IprVVlWz4nz2F4ikFoew-Q.jpeg"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">TigerGraph Home Page</figcaption></figure><p id="b0fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">切换到左侧面板中的<code class="fe me mf mg lv b">Design Schema</code>，添加一个顶点，设置属性、颜色和图标，点击箭头指向的按钮:</p><figure class="lq lr ls lt gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ni"><img src="../Images/ed287e4b8697f9064a7a36f78149c1a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bz9WWp0MCFUnnwhdgUJIDg.jpeg"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Add Vertex</figcaption></figure><p id="a4a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要添加边，点击下一步按钮，然后选择源顶点和目标顶点，会弹出一个对话框:</p><figure class="lq lr ls lt gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nj"><img src="../Images/377023bced6efe1175e9592ae79e6bb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SMnil3oRYhCjd19agA_XRw.jpeg"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Add edge</figcaption></figure><p id="8499" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，只需点击<code class="fe me mf mg lv b">publish</code>按钮，图表将被创建。</p><figure class="lq lr ls lt gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nk"><img src="../Images/af0cdf2acfd09a3aa9b455c73d69fc2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gEr_xR0M6ILPYWPqJUHw4g.jpeg"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Publish</figcaption></figure><h1 id="74fd" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">添加数据源</h1><p id="a634" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">切换到左侧面板上的<code class="fe me mf mg lv b">Map Data To Graph</code>。点击如图所示的按钮上传文件:</p><figure class="lq lr ls lt gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nl"><img src="../Images/178795d854f031461694f925d066630d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ynOnkGhmgDdmJavsfpTWVQ.jpeg"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Add source</figcaption></figure><p id="b7fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">考虑到本次测试的数据文件太大，并且已经在服务器上，我们可以直接将其移动到<code class="fe me mf mg lv b">/home/tigergraph/tigergraph/loadingData/</code>或者使用<code class="fe me mf mg lv b">ln</code>命令创建一个硬链接，而不是上传。</p><p id="83f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在选择了正确的文件类型和分隔符后，我们可以将数据源添加到操作面板中。在这里，我们可以点击如图所示的按钮，然后选择名为<code class="fe me mf mg lv b">friend</code>的文件和边，我们可以很容易地指定数据到属性的映射。</p><figure class="lq lr ls lt gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nm"><img src="../Images/22d58a7aea4bc095e3f3bbe0744f8d7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jnT_6tl21PxY-mz3V-i-hQ.jpeg"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">File Mapping</figcaption></figure><h1 id="3c03" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">加载数据</h1><p id="a246" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">切换到<code class="fe me mf mg lv b">Load Data</code>，点击<code class="fe me mf mg lv b">start</code>按钮，加载开始。点击<code class="fe me mf mg lv b">loading log</code>按钮可以看到加载日志。</p><figure class="lq lr ls lt gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nn"><img src="../Images/f0993fd6f34c5e5c225b0093003ad5e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*THC6-pMYM0y14tOW59QDbg.jpeg"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Load Data</figcaption></figure><figure class="lq lr ls lt gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi no"><img src="../Images/c763dc0fbc7e1e85aa40a92305bfee94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WkQr9sT2VOefjKZJ2uYrSg.jpeg"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Loading log</figcaption></figure><p id="952d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下是加载日志的一部分:</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="9214" class="lz ko iq lv b gy ma mb l mc md">filename = .gsql.loader.progress.2018.6.12-5.57.54, progress size = 309<br/>...<br/>906761 lines/second|------------------- |99 %<br/>899769 lines/second|------------------- |99 %<br/>907965 lines/second|--------------------|100%<br/>352247 lines/seconddestroy worker</span><span id="726f" class="lz ko iq lv b gy mh mb l mc md">06:41:54.181621 gcleanup.cpp:38] System_GCleanUp|Finished</span></pre><p id="eecd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以看到，31G 的原始数据，从 5:57 开始到 6:41，总共需要 44 分钟。其实我们创建的是无向图，所以实际加载的数据量要翻倍，相当于 62G 的有向图。这只是开发者版，太神奇了！</p><p id="70eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是磁盘使用情况</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="3a60" class="lz ko iq lv b gy ma mb l mc md">tigergraph@ip-172-31-6-254:~$ df -h<br/>Filesystem      Size  Used Avail Use% Mounted on<br/>udev             30G     0   30G   0% /dev<br/>tmpfs           5.9G  8.5M  5.9G   1% /run<br/>/dev/xvda1      194G  110G   85G  57% /<br/>tmpfs            30G     0   30G   0% /dev/shm<br/>tmpfs           5.0M     0  5.0M   0% /run/lock<br/>tmpfs            30G     0   30G   0% /sys/fs/cgroup<br/>tmpfs           5.9G     0  5.9G   0% /run/user/1000</span></pre><p id="3f8a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当前磁盘使用量为 110G，加载前为 67G，与原始数据相当于 62G 有向图相比，磁盘使用量只增加了 43G！</p><p id="4c77" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看看记忆，</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="09a6" class="lz ko iq lv b gy ma mb l mc md">tigergraph@ip-172-31-6-254:~/data$ free -m<br/>              total        used        free      shared  buff/cache   available<br/>Mem:          60382       24114       19564          16       16703       35686<br/>Swap:             0           0           0</span></pre><p id="1bdd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">加载后，磁盘使用量只有 24G。</p><h1 id="d7df" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">询问</h1><p id="3fb2" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">数据加载后，我们可以切换到<code class="fe me mf mg lv b">Explore Graph</code>进行一些基本的查询。因为 TigerGraph 是一个实时数据库，数据加载过程是在线的。因此，实际上我们不需要在运行查询之前等待加载完成。</p><p id="348d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下图显示了拾取顶点、1 步邻居和 6 步连通子图的结果。</p><figure class="lq lr ls lt gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi np"><img src="../Images/35c64fd9be8a0c1bec372c1aa24539d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fi6T9_kP8Cqvf9kzg4u9dQ.jpeg"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Query Neighbors</figcaption></figure><figure class="lq lr ls lt gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi np"><img src="../Images/015d4d4bef9ad9f421a20d23b5743063.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D8Y4bNh_EUAhi0hGSzbRkw.jpeg"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">K-step Subgraph</figcaption></figure><p id="7a55" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">发动机反应如此之快，没有明显的延迟。</p><p id="d028" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe me mf mg lv b">Write Queries</code>面板中，使用查询语言 GSQL，可以完成更多的定制查询。GSQL 的风格类似于一些常用的编程语言，很容易上手。IDE 非常强大，有漂亮高亮显示和实时的语法和语义检查。</p><p id="71ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">给定一个顶点，下面是一个简单的 k 步邻居查询。</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="d929" class="lz ko iq lv b gy ma mb l mc md">CREATE QUERY k_step_neighbor(VERTEX&lt;person&gt; p, int k) FOR GRAPH MyGraph { <br/>  initial_set = {p};<br/>  result = initial_set;<br/>  FOREACH i in RANGE[1, k] DO<br/>    result = SELECT dest_vertex <br/>      FROM result:start_vertex-(friend)-&gt;person:dest_vertex<br/>    ;<br/>  END;<br/>  PRINT result;<br/>}</span></pre><p id="720c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">保存并安装查询后，我们就可以运行它了</p><figure class="lq lr ls lt gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nq"><img src="../Images/eb6086f6154657cd266f93b87d048c1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x_MkQe4cH_EWkV1oWXk3BQ.jpeg"/></div></div></figure><p id="6b89" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，更多的条件和过滤器可以添加到查询中，例如，顶点和边属性上的过滤器。这里我们不赘述。</p><p id="9429" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在附录中提到的 TigerGraph 的 testdrive 中还有更复杂的用例可用，比如反欺诈、供应链、社交网络、公司信息知识图、</p><h1 id="d3b7" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">结论</h1><p id="741b" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">TigerGraph 开发者版性能惊人。UI 工具 GraphStudio 提供了流畅的入门体验，查询语言也很容易学习。</p><p id="ecc5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">TigerGraph 开发版的推出可能会开启图形数据库的新时代。</p><h1 id="7e37" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">附录</h1><ul class=""><li id="13cc" class="mi mj iq jp b jq ll ju lm jy nr kc ns kg nt kk nu mo mp mq bi translated"><a class="ae km" href="https://zhuanlan.zhihu.com/p/32857155" rel="noopener ugc nofollow" target="_blank">《让我们学习图形数据库》:图形数据库介绍</a></li><li id="85ed" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk nu mo mp mq bi translated">TigerGraph 开发者文档【https://doc.tigergraph.com T4】</li><li id="1b49" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk nu mo mp mq bi translated">TigerGraph Testdrive [ <a class="ae km" href="http://testdrive.tigergraph.com.cn/" rel="noopener ugc nofollow" target="_blank">中文</a> ] [ <a class="ae km" href="http://testdrive.tigergraph.com/" rel="noopener ugc nofollow" target="_blank">英文</a> ]</li><li id="2c01" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk nu mo mp mq bi translated">GSQL 教程<a class="ae km" href="https://doc.tigergraph.com/2.1/GSQL-101.html" rel="noopener ugc nofollow" target="_blank">https://doc.tigergraph.com/2.1/GSQL-101.html</a></li></ul></div></div>    
</body>
</html>