<html>
<head>
<title>Sentiment Analysis in R — Good vs Not Good — handling Negations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R——好与不好——处理否定中的情感分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/sentiment-analysis-in-r-good-vs-not-good-handling-negations-2404ec9ff2ae?source=collection_archive---------7-----------------------#2018-05-14">https://towardsdatascience.com/sentiment-analysis-in-r-good-vs-not-good-handling-negations-2404ec9ff2ae?source=collection_archive---------7-----------------------#2018-05-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/df0a343db11b9af5995b061046989c99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GZKIX8A66TTbz8PLbPlv1w.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Image credit: <a class="ae kc" href="https://pixabay.com/en/eggs-colors-easter-holiday-spring-3398664/" rel="noopener ugc nofollow" target="_blank">https://pixabay.com/en/eggs-colors-easter-holiday-spring-3398664/</a></figcaption></figure><p id="f946" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi lb translated">情感分析是拥有未标记文本数据(没有分数或评级)的数据分析师最终试图从中提取一些见解的最明显的事情之一，同样的情感分析也是任何自然语言处理(NLP)爱好者的潜在研究领域之一。</p><p id="4f3d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于分析师来说，同样的情感分析是一件痛苦的事情，因为大多数处理情感分析的原始包/库执行简单的字典查找，并根据正面和负面单词的出现次数计算最终的综合得分。但这往往会导致许多假阳性，一个非常明显的例子是“好”对“不好”——否定，通常是<strong class="kf ir">价移</strong>。</p><p id="90c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">考虑一下这句话:'<strong class="kf ir">我不太好</strong>'。任何原始的情感分析算法只会将这句话标记为肯定的，因为单词“good”显然会出现在肯定词典中。但是读这句话我们知道这不是一个肯定句。</p><p id="e271" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然我们可以构建自己的方式来处理这些否定，但有几个新的 R-package 可以轻松做到这一点。泰勒·林克<a class="ae kc" href="https://github.com/trinker" rel="noopener ugc nofollow" target="_blank">开发的<code class="fe lk ll lm ln b"><a class="ae kc" href="https://github.com/trinker/sentimentr" rel="noopener ugc nofollow" target="_blank">sentimentr</a></code>就是这样一个软件包。</a></p><h1 id="971e" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">视频教程</h1><figure class="mm mn mo mp gt jr"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h1 id="1dc7" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">安装软件包</h1><p id="47e0" class="pw-post-body-paragraph kd ke iq kf b kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">sentimentr 可以从<a class="ae kc" href="https://cran.r-project.org/web/packages/sentimentr/index.html" rel="noopener ugc nofollow" target="_blank"> CRAN </a>安装，也可以从 github 安装开发版。</p><pre class="mm mn mo mp gt mx ln my mz aw na bi"><span id="77ef" class="nb lp iq ln b gy nc nd l ne nf">install.packages('sentimentr')<br/>#or<br/>library(devtools)<br/>install_github('trinker/sentimentr')</span></pre><h1 id="8fd8" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">为什么是 sentimentr？</h1><p id="730d" class="pw-post-body-paragraph kd ke iq kf b kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">这个包的作者自己解释了<code class="fe lk ll lm ln b">sentimentr</code>做了什么而其他包没有做，为什么这很重要？</p><p id="6d12" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">sentimentr 试图在保持速度的同时考虑变价词(即否定词、增强词、去增强词和转折连词)。简单地说，sentimentr 是一个扩充的字典查找。接下来的问题是为什么它很重要。”</p><h1 id="ed71" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">情感评分:</h1><p id="bb50" class="pw-post-body-paragraph kd ke iq kf b kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">sentimentr 提供了两个情感分析功能:1 .<code class="fe lk ll lm ln b">sentiment_by()</code> 2。<code class="fe lk ll lm ln b">sentiment()</code></p><p id="080b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<code class="fe lk ll lm ln b">sentiment_by</code>的给定文本的聚合(平均)情感分数</p><pre class="mm mn mo mp gt mx ln my mz aw na bi"><span id="9156" class="nb lp iq ln b gy nc nd l ne nf">sentiment_by('I am not very good', by = NULL)</span><span id="48a1" class="nb lp iq ln b gy ng nd l ne nf">element_id sentence_id word_count   sentiment<br/>1:          1           1          5 -0.06708204</span></pre><p id="f8c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是当我们有多个不同极性的句子时，这可能没有多大帮助，因此用<code class="fe lk ll lm ln b">sentiment</code>进行句子级评分会有所帮助。</p><pre class="mm mn mo mp gt mx ln my mz aw na bi"><span id="c0e0" class="nb lp iq ln b gy nc nd l ne nf">sentiment('I am not very good. He is very good')</span><span id="bf12" class="nb lp iq ln b gy ng nd l ne nf">element_id sentence_id word_count   sentiment<br/>1:          1           1          5 -0.06708204<br/>2:          1           2          4  0.67500000</span></pre><p id="5b22" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这两个函数都返回一个包含四列的数据帧:</p><p id="bc0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">1.<code class="fe lk ll lm ln b">element_id </code>–给定文本的 ID /序列号<br/> 2。<code class="fe lk ll lm ln b">sentence_id</code>–句子的 ID /序列号，在<code class="fe lk ll lm ln b">sentiment_by</code> <br/> 3 的情况下等于 element_id。<code class="fe lk ll lm ln b">word_count</code>–给定句子的字数<br/> 4。<code class="fe lk ll lm ln b">sentiment</code>–给定句子的情感得分</p><h1 id="fdd3" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">提取情感关键词</h1><p id="6f86" class="pw-post-body-paragraph kd ke iq kf b kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated"><code class="fe lk ll lm ln b">extract_sentiment_terms()</code>功能帮助我们提取关键词——正面的和负面的，这是情感得分计算的一部分。sentimentr 还支持管道操作符<code class="fe lk ll lm ln b">%&gt;%</code>，这使得编写多行代码变得更容易，赋值更少，代码也更简洁。</p><pre class="mm mn mo mp gt mx ln my mz aw na bi"><span id="0cd8" class="nb lp iq ln b gy nc nd l ne nf">'My life has become terrible since I met you and lost money' %&gt;% extract_sentiment_terms()<br/>   element_id sentence_id      negative positive<br/>1:          1           1 terrible,lost    money</span></pre><h1 id="7e24" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">情绪突出:</h1><p id="d1e0" class="pw-post-body-paragraph kd ke iq kf b kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">最后，<code class="fe lk ll lm ln b">highight()</code>函数与<code class="fe lk ll lm ln b">sentiment_by()</code>相结合，给出一个 html 输出，其中部分句子用绿色和红色突出显示，以显示其极性。相信我，这可能看起来微不足道，但它确实有助于在做演示时分享结果，讨论假阳性，并确定准确性方面的改进空间。</p><pre class="mm mn mo mp gt mx ln my mz aw na bi"><span id="b307" class="nb lp iq ln b gy nc nd l ne nf">'My life has become terrible since I met you and lost money. But I still have got a little hope left in me' %&gt;% <br/>  sentiment_by(by = NULL) %&gt;%<br/>  highlight()</span></pre><p id="b1ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输出截图:</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/0a0f9acbbc9ed6f74784eb45a21372a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/0*oSXQgKZGfapx6JYd.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Sentiment Highlight</figcaption></figure><p id="3b0d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">尝试将<code class="fe lk ll lm ln b">sentimentr</code>用于您的情感分析和文本分析项目，并在评论中分享您的反馈。此处使用的完整代码可在<a class="ae kc" href="https://github.com/amrrs/blogpost_codes/blob/master/sentimentr_basics.R" rel="noopener ugc nofollow" target="_blank"> my github </a>上获得。欲了解更多信息，请查看本<a class="ae kc" href="https://www.datacamp.com/courses/sentiment-analysis-in-r-the-tidy-way?tap_a=5644-dce66f&amp;tap_s=210728-e54afe" rel="noopener ugc nofollow" target="_blank">数据营课程——R 中的情绪分析——整洁的方式</a></p></div></div>    
</body>
</html>