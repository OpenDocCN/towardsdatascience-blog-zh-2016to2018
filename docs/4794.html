<html>
<head>
<title>Apply RFM principles to cluster customers with K-Means</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">应用 RFM 原理用 K-Means 聚类客户</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/apply-rfm-principles-to-cluster-customers-with-k-means-fef9bcc9ab16?source=collection_archive---------4-----------------------#2018-09-07">https://towardsdatascience.com/apply-rfm-principles-to-cluster-customers-with-k-means-fef9bcc9ab16?source=collection_archive---------4-----------------------#2018-09-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0404" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">从 2020 年 6 月起，我将不再使用媒体发布新故事。想继续看我的文章请访问我的个人博客:</em><a class="ae km" href="https://vallant.in/" rel="noopener ugc nofollow" target="_blank"><em class="kl">https://val lant . in</em></a><em class="kl">。</em></p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/6ea455eb92a9945ec48470e7fb3c5551.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WglwwjeY8bIYRw64quyofg.jpeg"/></div></div></figure><p id="48aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">谁是你的客户？有时候这个问题的答案不是很明显——或者很简短。有很多种方法可以对顾客进行分类和分组。但既然这里是讨论数据问题的地方，那就用数据的方法来回答这个问题吧。</p><p id="5e2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您拥有数据(如客户列表和他们购买的商品)并且需要使用这些数据创建具有相似特征的组时，您需要一种聚类方法。聚类是无监督机器学习技术组的一部分。我们称之为无监督的，因为计算机没有关于它应该如何分组实体的先前信息。事实上，它将试图通过分析相似实体之间的接近程度来创建具有相似实体的集群。</p><p id="1ef4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">太宽泛？让我们开始讨论我们的学习案例。去 UCI 下载<a class="ae km" href="https://archive.ics.uci.edu/ml/datasets/Online+Retail" rel="noopener ugc nofollow" target="_blank">在线零售</a>数据集。该数据集由 8 个属性和 541.909 个实例组成，显示了一家英国在线零售商在 2010 年 1 月 12 日和 2011 年 9 月 12 日之间发生的所有交易。据 UCI 称，该公司主要销售独特的全场合礼品，公司的许多客户是批发商。</p><p id="888b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的主要目标是通过使用聚类技术将这些客户分成不同的客户群。在这里，我们将使用 K-Means。但是，如何对这些客户进行分组呢？使用哪些变量？我们可以尝试使用 RFM(近期、频率、货币价值)方法来分析客户。这种方法是用来评估客户价值的，我们稍后会详细讨论。</p><p id="ea2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以首先要做的是加载我们的库和数据，并做一些探索性的数据分析。</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="f7a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们稍后会详细讨论这些值。现在，让我们寻找空值并删除它们。让我们花一些时间来研究数据集上的唯一值。您将看到，我们现在拥有来自 37 个国家的客户(我们删除了一些空条目，之前我们有 38 个国家的客户)和 4，372 个独立客户。</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="3106" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以做的一件事是借助<code class="fe lb lc ld le b">describe()</code>检查数据集上的主要数字统计信息。当你这样做的时候，注意一些有趣的事情:数量的最小值是一个负数。为什么？我真的不知道。但是既然在这种情况下负数是没有意义的，我们也把它们排除掉吧。</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="kz la l"/></div></figure><h1 id="cbb8" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">从 RFM 开始</h1><p id="124d" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">你记得我说过我们会用 RFM 来聚集我们的客户吗？让我们现在就开始吧。但是首先，为什么不谈谈这种方法呢？</p><p id="a88f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">根据<a class="ae km" href="https://en.wikipedia.org/wiki/RFM_(customer_value)" rel="noopener ugc nofollow" target="_blank">维基百科，RFM </a>代表三个维度:</p><ul class=""><li id="932a" class="mi mj iq jp b jq jr ju jv jy mk kc ml kg mm kk mn mo mp mq bi translated"><strong class="jp ir"> R </strong> ecency — <em class="kl">客户最近购买了什么？</em></li><li id="d17c" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">频率—他们多久购买一次？</li><li id="09f2" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated"><strong class="jp ir"> M </strong>一元值— <em class="kl">他们花了多少钱？</em></li></ul><p id="80ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以对 RFM 做的一件事是在 1 到 5 的范围内为每个维度分配一个分数，5 是最想要的行为。我们稍后会计算分数。我们首先需要创建一个由新近性、频率和货币价值组成的新数据框架。</p><p id="11b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了计算最近的时间，我们将调查发票日期。由于我们上一张发票的日期是 2011 年 12 月 9 日，我们会将其视为最近的一张。然后，我们将从第二天减去每一天来计算其他的“最近”。</p><p id="5f07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了计算频率，我们简单地将每个客户的发票号码相加。对于货币价值，我们将单位价格乘以购买数量，并对每个客户进行求和。</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="0291" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们要计算分数。我们是这样做的:首先，我们以降序方式按频率对数据进行排序。然后，我们将数据集上的客户数量除以 5。我们为之前创建的每一个段分配一个从 5 到 1 的数字。让我们对“货币”和“最近”列也这样做。</p><p id="440a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">注意:对于“最近”一栏，由于最近的订单更好，我们将其排序为</em> <strong class="jp ir"> <em class="kl">升序</em> </strong> <em class="kl">。</em></p><p id="0cd8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将把分数添加到一个名为<code class="fe lb lc ld le b">rfmTableScores.</code>的新数据集</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="1931" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我们的分数在 1 到 5 之间，所以我们不需要缩放数字。</p><p id="46d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在可以开始考虑模型了。K-Means 模型只能对数据集上的信息进行聚类，但是您必须选择想要多少个聚类。你可以用 K-Means 模型本身来做这个决定。为此，让我们创建类内平方和(WCSS)来支持我们的决定。</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="c835" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的肘形图显示了最佳的集群数量是 4。这是直线开始柔和下降的点。现在，让我们建立模型。</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="7028" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们已经完成了聚类过程。就是这样。如您所见，由于 R、F 和 M 分数分析，聚类被分配给每个客户。</p><p id="a13c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了便于您了解我们所做的工作，让我们绘制一个图表，显示聚类过程之前的数据点以及聚类过程之后的一些图表。所以你可以清楚地看到星团的形成。</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="kz la l"/></div></figure></div></div>    
</body>
</html>