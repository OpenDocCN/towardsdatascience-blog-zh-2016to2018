<html>
<head>
<title>How to Datalab: Running notebooks against large datasets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何进行数据实验:针对大型数据集运行笔记本电脑</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-datalab-running-notebooks-against-large-datasets-2c4f932729f6?source=collection_archive---------2-----------------------#2018-01-12">https://towardsdatascience.com/how-to-datalab-running-notebooks-against-large-datasets-2c4f932729f6?source=collection_archive---------2-----------------------#2018-01-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/ba2134726e608430e998da62bc0f74bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*50iJJVEgQwCHMku8."/></div></div></figure><div class=""/><p id="1bae" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将大数据传输到本地计算环境既缓慢又昂贵。在这一集的人工智能冒险中，我们将看到如何将您的笔记本环境应用到您的数据中！</p><p id="6248" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">唯一比交互式 Python 笔记本更好的是什么？当然，这是一个具有快速简单的数据连接的交互式 Python 笔记本！</p><p id="bff8" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" rel="noopener" target="_blank" href="/interactive-data-science-with-jupyter-notebooks-457ab4928b08">上一集</a>我们看了 Jupyter 笔记本有多有用。这一次，我们将看到如何通过在云中运行它来实现更多的额外好处！</p><figure class="kx ky kz la gt is"><div class="bz fp l di"><div class="lb lc l"/></div></figure><h1 id="abae" class="ld le jb bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">数据，但更大</h1><p id="3fe2" class="pw-post-body-paragraph jy jz jb ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">随着您在云中处理越来越大的数据集，使用您的本地机器与它进行交互变得越来越困难。下载具有统计代表性的数据样本来测试你的代码会变得很困难，而在本地传输数据进行训练依赖于稳定的连接。那么，数据科学家应该做些什么呢？</p><p id="fe0c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">如果您无法将数据带到您的电脑上，请将您的电脑带到您的数据上</strong>！让我们看看如何在云中运行笔记本环境，靠近您的数据集！</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mg"><img src="../Images/e84ba68203d527502d6fb0964844b664.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ldaFu9da81kPZO_u91zww.png"/></div></div></figure><p id="dbff" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://cloud.google.com/datalab/" rel="noopener ugc nofollow" target="_blank"> Google Cloud Datalab </a>建立在我们熟悉的 Jupyter 笔记本之上，增加了一些功能，包括轻松验证 BigQuery 数据集、快速操作 Google 云存储以及 SQL-query 支持！这个工具包在 GitHub 上也是开源的，所以你可以在你自己的环境中运行它。</p><p id="08c0" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们创建一个数据实验室环境，并为在云中运行我们的笔记本电脑做好准备。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><p id="2146" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用<code class="fe mo mp mq mr b">gcloud components install datalab</code>安装 datalab 组件。然后您将拥有一个名为<code class="fe mo mp mq mr b">datalab</code>的新命令行工具。</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ms"><img src="../Images/51f79ca410905564060ce96aa58f03a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*iIjvYvn1eLJSNdBF-ObJcQ.gif"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk">Installing Datalab is a one-command operation</figcaption></figure><p id="d45a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">启动 Datalab 是一行命令:<code class="fe mo mp mq mr b">datalab create</code></p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ms"><img src="../Images/12761f7501abbef9bee742a675bf537f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*VMIQWFLrRL5eyemYPhe9Hw.gif"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk">Datalab still connects to localhost!</figcaption></figure><p id="51c8" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该命令启动您将用于分析的虚拟机，配置网络，并安装我们将使用的必要库，包括 TensorFlow、pandas、numpy 等等。</p><p id="c632" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦 Datalab 启动，它将打开一个笔记本环境，看起来与我们在 Jupyter 笔记本中看到的非常相似。然而，这不是在本地运行，而是在云中的虚拟机上运行。Datalab 默认安装了一些示例，这是一个开始探索的好地方。让我们看看“你好，世界”笔记本，在“文档”文件夹中。</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/f1f7b6bb39a8150540881d458c259662.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DzGujarvT8NlKYmh1odajA.png"/></div></div></figure><p id="7958" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这里，我们可以立即开始使用笔记本，运行细胞并进行实验。这非常方便，因为不需要管理和配置不同的 python 库。</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/c0735b2e78ca6151a309077fe6685607.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pxu5DF1olgpDG4VjXeRm4g.png"/></div></div></figure><p id="263d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们来看看几个内置的附加工具。在右上角的帐户图标上，有一些需要注意的数字设置和有用信息。</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/71b64f929cbb398b98def349316b788f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HcuyI5oNJcOvO9OZPUI4lA.png"/></div></div></figure><p id="6055" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，请注意笔记本是作为服务帐户运行的。服务帐户已经使用我们所在项目的资产进行了身份验证，但是如果我们想要从另一个项目访问资源，我们需要授予服务帐户访问权限，而不是用户帐户。</p><p id="41bf" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于运行笔记本的虚拟机对于能够访问项目的任何人都是可访问的，所以我们不想在 datalab 笔记本中暴露我们自己的帐户凭证。</p><p id="3b22" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">继续向下，我们看到我们正在从一个名为<strong class="ka jc"> ai-adventures </strong>的 Google Compute Engine 虚拟机运行笔记本，我们可以随时通过单击该按钮关闭虚拟机。</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/09422708ae2d60d8cf8b4294687fd340.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rDaIKg5Hxfq8gCzOa0Soow.png"/></div></div></figure><p id="dadd" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">默认情况下，一旦虚拟机空闲 90 分钟，Datalab 就会关闭它。您可以通过单击消息来切换此功能。</p><p id="2678" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">超时也可以设置为自定义值。让我们去设置看看如何做到这一点。我们在此设置的值将在虚拟机重新启动后保持不变，如果设置为零，将不会发生自动关闭。</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/43299049951f59988d1ab407484d276a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mMcjf45fPAe27DOEtbECWA.png"/></div></div></figure><p id="a3a0" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这也是我们可以选择亮或暗的主题的地方。</p><p id="e251" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，我们已经设置好了 datalab 笔记本电脑，并熟悉了我们的环境，让我们看看可以用 datalab 做些什么吧！</p><h1 id="68d2" class="ld le jb bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">Datalab 运行中的一个示例</h1><p id="366a" class="pw-post-body-paragraph jy jz jb ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">今天我将通过一个例子来描述 Github 上使用的编程语言之间的相关性。也就是，“如果你用语言 A 编程，你有多大可能<em class="my">也用语言 B 编程？”笔记本在 docs 下的 samples 目录中。你也可以<a class="ae kw" href="https://github.com/googledatalab/notebooks/blob/master/samples/Programming%20Language%20Correlation.ipynb" rel="noopener ugc nofollow" target="_blank">在 GitHub </a>上查看一下。</em></p><figure class="kx ky kz la gt is"><div class="bz fp l di"><div class="lb lc l"/></div></figure><p id="da53" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该分析仅使用了更大的 GitHub 公共数据集的一小部分样本。如果你想使用完整的 Github 提交历史，你可以点击查看<a class="ae kw" href="https://bigquery.cloud.google.com/dataset/bigquery-public-data:github_repos" rel="noopener ugc nofollow" target="_blank">数据集，点击</a>查看<a class="ae kw" href="https://cloud.google.com/bigquery/public-data/github" rel="noopener ugc nofollow" target="_blank">随附指南。</a></p><h1 id="dcad" class="ld le jb bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">结论和后续步骤</h1><p id="92e4" class="pw-post-body-paragraph jy jz jb ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated"><a class="ae kw" href="https://cloud.google.com/datalab/docs/" rel="noopener ugc nofollow" target="_blank"> Datalab </a>是一种在靠近数据的地方运行云连接笔记本的好方法，它可以方便地连接到 BigQuery 等工具，并且可以轻松地在云中验证数据集。</p><p id="72f5" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">去试试 Datalab，看看它是不是适合你的选择！</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><p id="22ae" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢阅读本集<a class="ae kw" href="https://goo.gl/UC5usG" rel="noopener ugc nofollow" target="_blank">云 AI 冒险</a>。如果你喜欢这个系列，请为这篇文章鼓掌让我知道。如果你想要更多的机器学习动作，一定要关注媒体上的<a class="ae kw" href="https://medium.com/@yufengg" rel="noopener">me</a>或订阅 YouTube 频道的<a class="ae kw" href="https://goo.gl/S0AS51" rel="noopener ugc nofollow" target="_blank">来观看未来的剧集。更多剧集即将推出！</a></p></div></div>    
</body>
</html>