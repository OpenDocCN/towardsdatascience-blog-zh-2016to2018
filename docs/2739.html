<html>
<head>
<title>A Great Pitfall: Neglecting Validation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个很大的陷阱:忽视验证</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-great-pitfall-neglecting-validation-9b8621dc5a87?source=collection_archive---------16-----------------------#2018-02-26">https://towardsdatascience.com/a-great-pitfall-neglecting-validation-9b8621dc5a87?source=collection_archive---------16-----------------------#2018-02-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/d099f52cd2ce6c467af115144831cd93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7e5_hADcH6D3HB1DHdZmJQ.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo by <a class="ae jd" href="https://unsplash.com/photos/w2DsS-ZAP4U?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Paul</a> on <a class="ae jd" href="https://unsplash.com/search/photos/score?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="5e85" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它出现在你的书的第一章，出现在你参加的第一次讲座，或者出现在你看的第一个教程中。这似乎很简单:你不能根据你对用于训练的数据所做的预测来衡量你的预测者的表现。然而，随着管理层不断施加更大的压力，或者您的堆栈需要更长的时间来运行，您开始牺牲验证。整个故事是关于一个非常基本的事情:确认。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="6dfb" class="li lj jg bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">什么是验证？</h1><p id="8308" class="pw-post-body-paragraph kd ke jg kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">如果你已经知道答案，你可以跳过这一节。如果你不确定，我来大致解释一下。让我们说，你想有一个预测器，在一个特定的任务执行预测。得到预测器后，你会想知道它的表现如何？它是表现很差以至于没用，还是表现很优秀以至于你可以宣布问题解决了？为了测量性能，您需要验证。</p><p id="6a55" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了执行验证，您需要数据。更具体地说，您需要包含您想要预测的信息的数据。我们称这些信息为地面真相。根据维基百科，地面真理被定义为:<em class="ml">“直接观察提供的信息”</em> <a class="ae jd" href="https://en.wikipedia.org/wiki/Ground_truth" rel="noopener ugc nofollow" target="_blank"> <em class="ml"> * </em> </a> <em class="ml">。地面实况通常由人类提供。在我们的过程中，我们相信基础事实是我们想要为我们的数据预测的实际值。</em></p><p id="ca41" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦你有了你的预测者和真实的数据，验证的冒险就开始了。如果在你的开发过程中没有真实的数据，这很容易。你只需将预测与实际情况进行比较。但是，这种情况很少见。你很少锁定你的全部数据，不到最后也不会深入研究。在开发预测器时，经常会用到这些数据。您使用一些数据进行训练，检查数据以调整阈值，或者深入数据以了解如何实现良好的预测。在这种情况下，你需要思考如何建立一个稳固有效的验证机制。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="972f" class="li lj jg bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">我们为什么要进行验证？</strong></h1><p id="dfe4" class="pw-post-body-paragraph kd ke jg kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">这似乎很简单:我们正在进行验证，因为我们想衡量我们的预测性能。但是，我们不要被这种现成的定义所迷惑。我们不只是想衡量业绩。我们想知道我们的预测器在现实生活中是否会做得很好。</p><p id="b0b9" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们建立一个预测任务示例。在这个例子中，我们想知道一个图像中是否有一只猫。在这个任务中，你向预测器提供一幅图像，它会告诉你图像中是否有一只猫。所以根据定义，这是一个二元分类问题。</p><p id="c684" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于此任务，您可以找到一个数据集或准备自己的数据集。在那之后，你就可以开始开发你的预测器了。但是人们不应该忘记你为什么要开发一个预测器。您不想在数据集中检测猫。你想要一个预测器，当你拿起相机在当地公园给猫拍照时，它能检测到猫。为了验证，你硬盘上的数据集是为了帮助你，这样你就不用一直在你当地的公园里追猫了。但是有了这种安慰，我们经常会忘记真正的目标，而去追求奖励价格:更高的 KPI(关键绩效指标)值！</p><p id="517c" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们正在进行验证，以便让我们很好地了解我们的预测器在现实生活中的作用。你的 KPI 只是帮你，并不是你的实际目标。在开发预测工具时，我们需要记住这一点。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="51ef" class="li lj jg bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">当你忘记验证的时候</strong></h1><p id="0284" class="pw-post-body-paragraph kd ke jg kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">如果您忘记或未能建立有效的验证机制，会发生什么情况？让我给你描述一下这个场景的可能结果。</p><p id="957a" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你在做你的项目。你专注于让你的 KPI 越来越好。你在它上面努力工作。你得到更多的数据，你用不同的方法进行研究，你进行大量的实验。最后，你会得到一个看起来很棒的表演。任务完成！您现在已经准备好展示您的工作并部署它了。</p><p id="47a3" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这一点上，每个人都很高兴。你把它展示给你的团队、管理层或你的同事。如果你幸运的话，有人会发现你犯的错误。如果你幸运的话，有人会告诉你，你没有建立一个有效的验证机制。这还不是最坏的情况。你还是没有部署你的预测器。尽管如此，没有人受到这个错误的影响。你只需要回到草图板，引入一个有效的验证机制。但是如果你运气不好，你会陷入一个糟糕的境地。</p><p id="3452" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在最糟糕的情况下，你部署了你的预测器，它就启动了。过了一段时间，人们开始意识到你开发的预测器表现不好。用户会开始抱怨。每个人都变得困惑。KPI 表明预测器表现非常好。但是为什么用户对性能不满意呢？过了一段时间，你确信有问题。你回到画板，试着调试你的模型。最后，你意识到你的 KPI 显示的是不对的。你的验证机制被破坏了。你太专注于提高 KPI，牺牲了验证。现在你的声誉受损，你需要在混乱开始前迅速想出一个新的模式。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="fe8d" class="li lj jg bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">为什么我们会放弃或忘记验证</strong></h1><p id="6c25" class="pw-post-body-paragraph kd ke jg kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">我们牺牲验证或者忘记完全建立验证有很多原因。我相信这个清单很长。我下面的列表并不完整，但这些是我经常遇到的。</p><h2 id="1c74" class="mm lj jg bd lk mn mo dn lo mp mq dp ls ko mr ms lw ks mt mu ma kw mv mw me mx bi translated"><em class="my">管理层施压</em></h2><p id="d8c7" class="pw-post-body-paragraph kd ke jg kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">这个问题不是数据科学或验证所特有的。管理层或业务方总是希望快速有结果。他们给团队施加压力，让他们尽快想出一个预测器。随着压力的增加，你开始放弃你的方法的某些方面。你选择放弃的一个方面可能是验证。你知道验证并不好玩。正因为如此，你需要有一个不同的工作流程。除此之外，还需要更长的时间。因为这些，它可能看起来像一个修剪的好地方。</p><h2 id="facb" class="mm lj jg bd lk mn mo dn lo mp mq dp ls ko mr ms lw ks mt mu ma kw mv mw me mx bi translated"><em class="my">你认为你不需要验证</em></h2><p id="8f96" class="pw-post-body-paragraph kd ke jg kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">我相信这是因为忘记了我们为什么要进行验证。不管原因是什么，你可能认为你不需要验证。让我列举几个我遇到的原因:</p><p id="ab30" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ml">因为你不使用机器学习。</em></p><p id="a61f" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">验证的需要并不是机器学习所特有的。模型的复杂性并不决定验证的必要性。即使你的方法是一个单一的 if 语句，或者一个复杂的机器学习模型，也没关系。你需要被认可。</p><p id="4fad" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ml">因为你认为你的方法并不过分。</em></p><p id="f327" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">即使你使用复杂的正则化方法，也不意味着它能完美地工作。过度配合预防措施并不完美。意味着你不能依赖他们，也不能在训练集上衡量他们的表现。</p><p id="3d34" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为你的方法与验证无关。</p><p id="f786" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">也许你认为你不需要验证，因为你没有在训练中使用任何数据。然而，你确定你自己没有在你的方法中引入任何偏见吗？这是兔子洞更深的部分。即使你在训练过程中没有使用任何数据，你作为一个人可能已经发展出一种偏向于你所使用的数据的方法。让我使用猫检测示例来阐明这一点:如果您的数据集仅包含深色猫，并且您在开发算法时使用了此信息，则它在您的数据集上的表现将优于在真实生活环境中的表现，在真实生活环境中有不同颜色的猫。</p><h2 id="087b" class="mm lj jg bd lk mn mo dn lo mp mq dp ls ko mr ms lw ks mt mu ma kw mv mw me mx bi translated"><em class="my">您的跑步/实验花费了很长时间</em></h2><p id="37e1" class="pw-post-body-paragraph kd ke jg kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">通常机器学习操作需要很长时间，这不是秘密。即使一次运行没有，你也会因为各种原因想要很多次，比如尝试不同的超参数、方法等。当你的耐心开始消退，云服务器账单开始堆积，最后期限临近；你试着砍掉一些操作。在这一点上，你倾向于切断验证。您可能会开始使用较少的折叠，切换到二次采样，或者更糟:取消验证。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="cf9f" class="li lj jg bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">没有借口。您需要验证</strong></h1><p id="f573" class="pw-post-body-paragraph kd ke jg kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">不管是什么原因，不管上面是否列出，你都不能没有一个有效的验证机制。验证是预测工作的基础。你可以从不同的方法中选择一种(如交叉验证、二次抽样等。)但是你必须有一个。这是最好的从非常早期的阶段。它可能会随着项目的进行而发展，但是即使在您的第一次运行中，您也必须使用验证。没有有效的验证机制会在项目的后期导致更大的问题。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="2a9d" class="li lj jg bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">兔子洞更深:有效验证</strong></h1><p id="cb51" class="pw-post-body-paragraph kd ke jg kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">当我们再次思考为什么我们需要验证时，情况比仅仅使用现成的验证方法如 K-fold 交叉验证更深入。如果我们想确保在现实生活中获得类似的表现，我们需要更深入地考虑验证。</p><p id="df82" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个话题超出了这个故事的范围，但是这里有一些值得思考的东西:</p><ul class=""><li id="d703" class="mz na jg kf b kg kh kk kl ko nb ks nc kw nd la ne nf ng nh bi translated">您的数据是否以一种不明确的方式泄露了实例的标签？</li><li id="c81a" class="mz na jg kf b kg ni kk nj ko nk ks nl kw nm la ne nf ng nh bi translated">数据集是否包含一系列变化？</li><li id="a439" class="mz na jg kf b kg ni kk nj ko nk ks nl kw nm la ne nf ng nh bi translated">数据是在合成(实验室)环境中收集的，还是真实收集的？</li><li id="08eb" class="mz na jg kf b kg ni kk nj ko nk ks nl kw nm la ne nf ng nh bi translated">你是否通过你自己在你的方法中引入了偏见？</li></ul></div></div>    
</body>
</html>