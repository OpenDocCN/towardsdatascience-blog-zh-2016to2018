<html>
<head>
<title>Exploring, Clustering and Mapping Toronto’s Crimes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索、聚类和映射多伦多的犯罪</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/exploring-clustering-and-mapping-torontos-crimes-96336efe490f?source=collection_archive---------2-----------------------#2017-10-30">https://towardsdatascience.com/exploring-clustering-and-mapping-torontos-crimes-96336efe490f?source=collection_archive---------2-----------------------#2017-10-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a3c3b23c2f3101ce3efe352fb4014a16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mynd9eOIB18VB3P_Ht7JXg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo credit: Pixabay</figcaption></figure><p id="4876" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我通过开放数据门户网站探索美国城市的犯罪数据，从中获得了很多乐趣，因为多伦多的犯罪数据根本不可用。</p><p id="821b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然而，在今年夏天，多伦多警方推出了一个公共安全数据门户网站，以增加公众和官员之间的透明度。因此，我有机会通过<a class="ae la" href="http://data.torontopolice.on.ca/pages/open-data" rel="noopener ugc nofollow" target="_blank">多伦多警察局公共安全数据门户</a>探索多伦多的犯罪。我对<a class="ae la" href="http://data.torontopolice.on.ca/datasets?t=MCI" rel="noopener ugc nofollow" target="_blank">2016年主要犯罪指标(MCI)</a>特别感兴趣，它包含了2016年32，612份报告的列表(这是唯一有数据可用的一年)。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/a007cb02617f440a398702a1c63c4b31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v9jpC1Ilj9HomXV017URjg.png"/></div></div></figure><p id="ae22" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们用R来看看数据，看看有没有什么有趣的。</p><h1 id="9b9b" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">数据</h1><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="4eec" class="mj lh iq mf b gy mk ml l mm mn">library(ggplot2)<br/>library(ggthemes)<br/>library(dplyr)<br/>library(viridis)<br/>library(tidyr)<br/>library(cluster)<br/>library(ggmap)<br/>library(maps)</span></pre><p id="bc66" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">经过一点探索，我发现有很多重复(event_unique_id)，所以让我们从数据中删除它。</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="38eb" class="mj lh iq mf b gy mk ml l mm mn">toronto &lt;- read.csv('toronto_crime.csv')<br/>toronto &lt;- subset(toronto, !duplicated(toronto$event_unique_id))<br/>unique(toronto$occurrenceyear)<br/>unique(toronto$reportedyear)</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/944a7246a420357f2f2f764ca78e9a33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*_3cnNBHUoyebOS9zpkYKiA.png"/></div></figure><p id="7ad7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">发现什么有趣的东西了吗？发生年份从2000年到2016年不等，但所有犯罪的报告年份都是2016年。这意味着人们在2016年向警方报告了前几年发生的事件。让我们看看我们的数据中有多少延迟报告的事件。</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="4e6d" class="mj lh iq mf b gy mk ml l mm mn">year_group &lt;- group_by(toronto, occurrenceyear)<br/>crime_by_year &lt;- summarise(year_group,<br/>                          n = n())<br/>crime_by_year</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/9c32ceed4086eb038c03c44aa60a26a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*_l_TvzVwnI6jtSGqaAxZHA.png"/></div></figure><p id="9fdf" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">2起发生在2000年，2起发生在2001年，以此类推。但是，绝大多数事件发生在2016年，因此我们将只使用2016年的事件。我还删除了我们不需要的所有列，以及缺少值的四行。</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="f749" class="mj lh iq mf b gy mk ml l mm mn">drops &lt;- c("X", "Y", "Index_", "ucr_code", "ucr_ext", "reporteddate", "reportedmonth", "reportedday", "reporteddayofyear", "reporteddayofweek", "reportedhour", "occurrencedayofyear", "reportedyear", "Division", "Hood_ID", "FID")</span><span id="665a" class="mj lh iq mf b gy mq ml l mm mn">toronto &lt;- toronto[, !(names(toronto) %in% drops)]<br/>toronto &lt;- toronto[toronto$occurrenceyear == 2016, ]<br/>toronto &lt;- toronto[complete.cases(toronto), ]</span></pre><h1 id="9861" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">探索</h1><p id="d030" class="pw-post-body-paragraph kc kd iq ke b kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz ij bi translated"><strong class="ke ir">2016年有哪些重大犯罪？</strong></p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="7d82" class="mj lh iq mf b gy mk ml l mm mn">indicator_group &lt;- group_by(toronto, MCI)<br/>crime_by_indicator &lt;- summarise(indicator_group, n=n())<br/>crime_by_indicator &lt;- crime_by_indicator[order(crime_by_indicator$n, decreasing = TRUE),]</span><span id="8e4b" class="mj lh iq mf b gy mq ml l mm mn">ggplot(aes(x = reorder(MCI, n), y = n), data = crime_by_indicator) +<br/>  geom_bar(stat = 'identity', width = 0.5) +<br/>  geom_text(aes(label = n), stat = 'identity', data = crime_by_indicator, hjust = -0.1, size = 3.5) +<br/>  coord_flip() +<br/>  xlab('Major Crime Indicators') +<br/>  ylab('Number of Occurrences') +<br/>  ggtitle('Major Crime Indicators Toronto 2016') +<br/>  theme_bw() +<br/>  theme(plot.title = element_text(size = 16),<br/>        axis.title = element_text(size = 12, face = "bold"))</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/e35ebca185d864518d67dd6e2ed89034.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gkBslE9Gyt04oP3M4GYY-w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 1</figcaption></figure><p id="8ca0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">袭击是多伦多最普遍的暴力犯罪形式。什么是攻击？在刑法和民法中,<a class="ae la" href="https://en.wikipedia.org/wiki/Assault" rel="noopener ugc nofollow" target="_blank">攻击是指试图与他人进行有害的或冒犯性的接触，或威胁这样做。</a></p><p id="fa7a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">突击有哪些不同的类型？哪种类型最差？</strong></p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="2d96" class="mj lh iq mf b gy mk ml l mm mn">assault &lt;- toronto[toronto$MCI == 'Assault', ]<br/>assault_group &lt;- group_by(assault, offence)<br/>assault_by_offence &lt;- summarise(assault_group, n=n())<br/>assault_by_offence &lt;- assault_by_offence[order(assault_by_offence$n, decreasing = TRUE), ]</span><span id="065f" class="mj lh iq mf b gy mq ml l mm mn">ggplot(aes(x = reorder(offence, n), y = n), data = assault_by_offence) +<br/>  geom_bar(stat = 'identity', width = 0.6) +<br/>  geom_text(aes(label = n), stat = 'identity', data = assault_by_offence, hjust = -0.1, size = 3) +<br/>  coord_flip() +<br/>  xlab('Types of Assault') +<br/>  ylab('Number of Occurrences') +<br/>  ggtitle('Assault Crime Toronto 2016') +<br/>  theme_bw() +<br/>  theme(plot.title = element_text(size = 16),<br/>        axis.title = element_text(size = 12, face = "bold"))</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/8bc41cd5d2383baeff9bf79e1267459b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4UYWYtUEBCTVwuGXpK9RCA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 2</figcaption></figure><p id="2273" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这里没有太多的信息，因为最常见的攻击类别是…攻击。我最终通过Attorneys.com学会了不同类型的攻击。</p><p id="f197" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">然后让我们看看最严重的犯罪</strong></p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="0cbf" class="mj lh iq mf b gy mk ml l mm mn">offence_group &lt;- group_by(toronto, offence)<br/>crime_by_offence &lt;- summarise(offence_group, n=n())<br/>crime_by_offence &lt;- crime_by_offence[order(crime_by_offence$n, decreasing = TRUE), ]</span><span id="14d7" class="mj lh iq mf b gy mq ml l mm mn">ggplot(aes(x = reorder(offence, n), y = n), data = crime_by_offence) +<br/>  geom_bar(stat = 'identity', width = 0.7) +<br/>  geom_text(aes(label = n), stat = 'identity', data = crime_by_offence, hjust = -0.1, size = 2) +<br/>  coord_flip() +<br/>  xlab('Types of Offence') +<br/>  ylab('Number of Occurrences') +<br/>  ggtitle('Offence Types Toronto 2016') +<br/>  theme_bw() +<br/>  theme(plot.title = element_text(size = 16),<br/>        axis.title = element_text(size = 12, face = "bold"))</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/fa0f3f25f0cff2452d60e199d28b8526.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QSD9kzMzqkfzsL1_O1o8EQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 3</figcaption></figure><p id="0902" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">袭击是最常见的犯罪，其次是破门而入。根据Wikibooks的说法，最典型的破门而入形式是闯入商业地产或私人住宅以窃取财产。这表明破门而入最有可能发生在家里或办公室没有人的时候。</p><p id="d11e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">一天中的犯罪时间怎么样？</strong></p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="2aad" class="mj lh iq mf b gy mk ml l mm mn">hour_group &lt;- group_by(toronto, occurrencehour)<br/>crime_hour &lt;- summarise(hour_group, n=n())</span><span id="8554" class="mj lh iq mf b gy mq ml l mm mn">ggplot(aes(x=occurrencehour, y=n), data = crime_hour) + geom_line(size = 2.5, alpha = 0.7, color = "mediumseagreen", group=1) + <br/>  geom_point(size = 0.5) + <br/>  ggtitle('Total Crimes by Hour of Day in Toronto 2016') +<br/>  ylab('Number of Occurrences') +<br/>  xlab('Hour(24-hour clock)') +<br/>  theme_bw() +<br/>  theme(plot.title = element_text(size = 16),<br/>        axis.title = element_text(size = 12, face = "bold"))</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/f992229ac963d83f078c567f9b10c324.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VHFEtY9v2hiMgBA2bxV27g.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 4</figcaption></figure><p id="a266" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">最糟糕的时间是在午夜左右，另一个高峰时间是在中午左右，然后是晚上8点左右。</p><p id="4c88" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">好吧，但是一天中的每个小时什么类型的犯罪最频繁？</strong></p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="39d9" class="mj lh iq mf b gy mk ml l mm mn">hour_crime_group &lt;- group_by(toronto, occurrencehour, MCI)<br/>hour_crime &lt;- summarise(hour_crime_group, n=n())</span><span id="b6b0" class="mj lh iq mf b gy mq ml l mm mn">ggplot(aes(x=occurrencehour, y=n, color=MCI), data = hour_crime) + <br/>  geom_line(size=1.5) + <br/>  ggtitle('Crime Types by Hour of Day in Toronto 2016') +<br/>  ylab('Number of Occurrences') +<br/>  xlab('Hour(24-hour clock)') +<br/>  theme_bw() +<br/>  theme(plot.title = element_text(size = 16),<br/>        axis.title = element_text(size = 12, face = "bold"))</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/3f438594ec10050ebd3f3d483ad0d352.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FOiwz7xRTOlhk8wjsJOREw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 5</figcaption></figure><p id="bb29" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">虽然袭击是一天中最常见的犯罪，但它们发生在傍晚和夜间的频率高于清晨。另一方面，破门而入的犯罪更经常发生在早上和午夜左右(那时没有人在家或在办公室)。抢劫和汽车盗窃更有可能在深夜发生。所有这些模式都有意义。</p><p id="5be5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这些犯罪最有可能发生在多伦多的什么地方？</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="a0d6" class="mj lh iq mf b gy mk ml l mm mn">location_group &lt;- group_by(toronto, Neighbourhood)<br/>crime_by_location &lt;- summarise(location_group, n=n())<br/>crime_by_location &lt;- crime_by_location[order(crime_by_location$n, decreasing = TRUE), ]<br/>crime_by_location_top20 &lt;- head(crime_by_location, 20)</span><span id="5830" class="mj lh iq mf b gy mq ml l mm mn">ggplot(aes(x = reorder(Neighbourhood, n), y = n), data = crime_by_location_top20) +<br/>  geom_bar(stat = 'identity', width = 0.6) +<br/>  geom_text(aes(label = n), stat = 'identity', data = crime_by_location_top20, hjust = -0.1, size = 3) +<br/>  coord_flip() +<br/>  xlab('Neighbourhoods') +<br/>  ylab('Number of Occurrences') +<br/>  ggtitle('Neighbourhoods with Most Crimes - Top 20') +<br/>  theme_bw() +<br/>  theme(plot.title = element_text(size = 16),<br/>        axis.title = element_text(size = 12, face = "bold"))</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/4d0272c6dbddb0c8314918ad196d377b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VoTvZ2Erxb0fX7r5tHhEvQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 6</figcaption></figure><p id="82c4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">最危险的街区是…滨水区。<a class="ae la" href="https://torontolife.com/crime/" rel="noopener ugc nofollow" target="_blank">这个不断扩张的市中心包罗万象，不仅包括密集的公寓社区，还包括极度活跃的娱乐区。结果是:这里发生了数量惊人的暴力犯罪和纵火案。</a></p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ecc3ea28a4618391a4ea71878a56378b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Ibv8kO4fIYJeFj1Im3_nw.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo credit: Pixabay</figcaption></figure><p id="4ab8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">第二危险的街区是教堂-央街走廊。它很受学生的欢迎，因为它靠近瑞尔森大学，而且它是多伦多同性恋村的一方的家。然而，这个地区也有它的犯罪问题，考虑到它离市中心有多近，这有点令人惊讶。</p><p id="2bfe" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">哪里是最安全的社区？</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="79d2" class="mj lh iq mf b gy mk ml l mm mn">tail(crime_by_location, 5)</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/9fe7e149eb9fd078717dfbbdf773f7de.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/format:webp/1*wvRoZecqdCc9Mj0-jcGkZQ.png"/></div></figure><p id="653d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">考虑搬到多伦多吗？我们已经为你选好了新家！森林山南是多伦多一个安全、华丽和富裕的社区，拥有许多漂亮的房子，比如这栋豪宅。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/00ea162c4246451c30b74ab013c3fca5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NUEoYBYp-MN-smGNyY9tHw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo credit: Torontorentals.com</figcaption></figure><p id="7afb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">让我们比较一下犯罪率最高的街区</strong>。</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="9670" class="mj lh iq mf b gy mk ml l mm mn">offence_location_group &lt;- group_by(toronto, Neighbourhood, offence)<br/>offence_type_by_location &lt;- summarise(offence_location_group, n=n())<br/>offence_type_by_location &lt;- offence_type_by_location[order(offence_type_by_location$n, decreasing = TRUE), ]<br/>offence_type_by_location_top20 &lt;- head(offence_type_by_location, 20)</span><span id="00bd" class="mj lh iq mf b gy mq ml l mm mn">ggplot(aes(x = Neighbourhood, y=n, fill = offence), data=offence_type_by_location_top20) +<br/>  geom_bar(stat = 'identity', position = position_dodge(), width = 0.8) +<br/>  xlab('Neighbourhood') +<br/>  ylab('Number of Occurrence') +<br/>  ggtitle('Offence Type vs. Neighbourhood Toronto 2016') + theme_bw() +<br/>  theme(plot.title = element_text(size = 16),<br/>        axis.title = element_text(size = 12, face = "bold"),<br/>        axis.text.x = element_text(angle = 90, hjust = 1, vjust = .4))</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/cdc2a343194c3264284efaa755a2776b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iTQrpTZGKWa9kd8mm5GIXQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 7</figcaption></figure><p id="93fb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我没想到会这样。它不漂亮。然而，它确实告诉我们，除了袭击事件，教堂-央街走廊和海滨是破门而入犯罪最多的地方(不要去那里！)，西亨伯-克莱尔维尔的车辆失窃率最高(不要把车停在那里！).</p><p id="e7f3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">让我们试试不同的东西</strong></p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="9d44" class="mj lh iq mf b gy mk ml l mm mn">crime_count &lt;- toronto %&gt;% group_by(occurrencemonth, MCI) %&gt;% summarise(Total = n())<br/>crime_count$occurrencemonth &lt;- ordered(crime_count$occurrencemonth, levels = c('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'))</span><span id="c98a" class="mj lh iq mf b gy mq ml l mm mn">ggplot(crime_count, aes(occurrencemonth, MCI, fill = Total)) +<br/>  geom_tile(size = 1, color = "white") +<br/>  scale_fill_viridis()  +<br/>  geom_text(aes(label=Total), color='white') +<br/>  ggtitle("Major Crime Indicators by Month 2016") +<br/>  xlab('Month') +<br/>  theme(plot.title = element_text(size = 16), <br/>        axis.title = element_text(size = 12, face = "bold"))</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/72b0c31dbe4abd204341b5627f58528d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P7Kq2is96CBoVH5OYSB-EQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 8</figcaption></figure><p id="9800" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">好多了！</p><p id="0608" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">人身攻击是一年中每个月最常见的犯罪类型，无一例外。5月份的袭击事件似乎比去年其他月份都多。</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="1423" class="mj lh iq mf b gy mk ml l mm mn">day_count &lt;- toronto %&gt;% group_by(occurrencedayofweek, MCI) %&gt;% summarise(Total = n())</span><span id="7173" class="mj lh iq mf b gy mq ml l mm mn">ggplot(day_count, aes(occurrencedayofweek, MCI, fill = Total)) +<br/>  geom_tile(size = 1, color = "white") +<br/>  scale_fill_viridis()  +<br/>  geom_text(aes(label=Total), color='white') +<br/>  ggtitle("Major Crime Indicators by Day of Week 2016") +<br/>  xlab('Day of Week') +<br/>  theme(plot.title = element_text(size = 16), <br/>        axis.title = element_text(size = 12, face = "bold"))</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/16fbb471999a96883ade2b160a438f79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zn_bQR8G6T4nUQLmE8reQw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 9</figcaption></figure><p id="a037" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">周六和周日比一周中的其他任何一天有更多的袭击，比其他任何一天有更少的盗窃。偷车贼几乎每天都很忙。</p><p id="e0f5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我希望发现一些季节性犯罪模式，如温度变化和日照时间可能与全年的犯罪有关，或者学年的开始和结束与全年的犯罪变化有关。但这一年的数据不足以解决我的上述担忧。我希望在不久的将来，多伦多警察局将通过其开放数据门户发布更多的数据。</p><p id="8ee5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">凶杀案</strong></p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="9148" class="mj lh iq mf b gy mk ml l mm mn">homicide &lt;- read.csv('homicide.csv', stringsAsFactors = F)<br/>homicide$Occurrence_Date &lt;- as.Date(homicide$Occurrence_Date)</span><span id="9428" class="mj lh iq mf b gy mq ml l mm mn">year_group &lt;- group_by(homicide, Occurrence_year, Homicide_Type)<br/>homicide_by_year &lt;- summarise(year_group, n=n())</span><span id="95e4" class="mj lh iq mf b gy mq ml l mm mn">ggplot(aes(x = Occurrence_year, y=n, fill = Homicide_Type), data=homicide_by_year) +<br/>  geom_bar(stat = 'identity', position = position_dodge(), width = 0.8) +<br/>  xlab('Year') +<br/>  ylab('Number of Homicides') +<br/>  ggtitle('Homicide 2004-2016') + theme_bw() +<br/>  theme(plot.title = element_text(size = 16),<br/>        axis.title = element_text(size = 12, face = "bold"))</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/4ce13c3dd1957b379425d353ee0dc4f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P8fZv9M7fF2ufOuIs4_N0w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 10</figcaption></figure><p id="2602" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">2005年被称为多伦多的“T2枪年”。11年后的2016年，多伦多的涉枪杀人案再次激增。</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="08e0" class="mj lh iq mf b gy mk ml l mm mn">homicide$month &lt;- format(as.Date(homicide$Occurrence_Date) , "%B")</span><span id="f561" class="mj lh iq mf b gy mq ml l mm mn">homicide_count &lt;- homicide %&gt;% group_by(Occurrence_year, month) %&gt;% summarise(Total = n())<br/>homicide_count$month &lt;- ordered(homicide_count$month, levels = c('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'))<br/>ggplot(homicide_count, aes(Occurrence_year, month, fill = Total)) +<br/>  geom_tile(size = 1, color = "white") +<br/>  scale_fill_viridis()  +<br/>  geom_text(aes(label=Total), color='white') +<br/>  ggtitle("Homicides in Toronto (2004-2016)") +<br/>  xlab('Year') +<br/>  theme(plot.title = element_text(size = 16), <br/>        axis.title = element_text(size = 12, face = "bold"))</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/644789a565131ca6e3c4ccdb7896dba6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MjmiC7RMzCA4rhk1-f5fHw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 11</figcaption></figure><p id="fd87" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">令人担忧的是，与2015年相比，2016年多伦多的凶杀案总数大幅增加。希望我们有一个更好的2017年。然而，当我读到<a class="ae la" href="https://globalnews.ca/news/3798979/toronto-safest-city-north-america/" rel="noopener ugc nofollow" target="_blank">多伦多被经济学家</a>评为北美最安全的城市时，我感觉安全多了。</p><h1 id="7de8" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated"><strong class="ak"> K均值聚类</strong></h1><p id="3634" class="pw-post-body-paragraph kc kd iq ke b kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz ij bi translated">K-Means是最流行的“聚类”算法之一。它是将数据点组划分为少量簇的过程。使用我们的犯罪数据，当我们测量攻击数量和其他指标时，攻击数量高的街区将被分组在一起。K均值聚类的目标是为每个数据点(邻域)分配一个聚类。我们首先将数据点(邻域)划分为<em class="mz"> k </em>个聚类，其中每个邻域属于具有最近平均值的聚类(用作聚类的原型)。</p><p id="01b8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">作为一种无监督学习算法，我们使用K-Mean来建立模型，帮助我们更好地理解我们的数据。它使我们能够对未标记的数据点进行分组。</p><p id="3a0a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">为了进行聚类分析，我们的数据必须如下所示</strong>:</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="6121" class="mj lh iq mf b gy mk ml l mm mn">by_groups &lt;- group_by(toronto, MCI, Neighbourhood)<br/>groups &lt;- summarise(by_groups, n=n())<br/>groups &lt;- groups[c("Neighbourhood", "MCI", "n")]<br/>groups_wide &lt;- spread(groups, key = MCI, value = n)</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi na"><img src="../Images/003336511cd00ec618d3b30da7b25095.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*0nsfxW0GgizSECe-2ZhNIQ.png"/></div></figure><p id="afd2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">第一列——定性数据应从分析中移除</strong></p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="ae47" class="mj lh iq mf b gy mk ml l mm mn">z &lt;- groups_wide[, -c(1,1)]</span></pre><p id="afdc" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">数据不能有任何缺失值</strong></p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="693e" class="mj lh iq mf b gy mk ml l mm mn">z &lt;- z[complete.cases(z), ]</span></pre><p id="6fe1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">必须对数据进行缩放以进行比较</strong></p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="03fa" class="mj lh iq mf b gy mk ml l mm mn">m &lt;- apply(z, 2, mean)<br/>s &lt;- apply(z, 2, sd)<br/>z &lt;- scale(z, m, s)</span></pre><p id="d4ad" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">确定集群的数量</strong></p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="95ec" class="mj lh iq mf b gy mk ml l mm mn">wss &lt;- (nrow(z)-1) * sum(apply(z, 2, var))<br/>for (i in 2:20) wss[i] &lt;- sum(kmeans(z, centers=i)$withiness)<br/>plot(1:20, wss, type='b', xlab='Number of Clusters', ylab='Within groups sum of squares')</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/03716bd672849c2be5667127731e3158.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JumUq6asK25QGaTz_9rdUg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 12</figcaption></figure><p id="9514" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">由于该图显示了一个非常强的肘形，基于该图，我们可以有把握地说，我们不需要两个以上的群集(质心)。</p><p id="6a7c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">试衣模特</strong></p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="49be" class="mj lh iq mf b gy mk ml l mm mn">kc &lt;- kmeans(z, 2)<br/>kc</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/7c4bdcd0b764acbd698baa76ff7786d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VaY8ntbPygpNEHN-ZeE_rw.png"/></div></div></figure><p id="26ac" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">释义:</strong></p><ul class=""><li id="9c33" class="nb nc iq ke b kf kg kj kk kn nd kr ne kv nf kz ng nh ni nj bi translated">第一类有121个街区，第二类有10个街区。</li><li id="a8de" class="nb nc iq ke b kf nk kj nl kn nm kr nn kv no kz ng nh ni nj bi translated">聚类意味着:如果这些数字的范围看起来很奇怪，那是因为我们在进行聚类分析之前对数据进行了标准化。负值表示“低于大多数”，正值表示“高于大多数”。因此，集群1具有低攻击、低汽车盗窃、低破门而入、低抢劫和低盗窃的街区。第2类社区具有高攻击性、高汽车盗窃、高非法闯入、高抢劫和高盗窃率。这两组在每一个变量上都有显著的差异，这是好事，因为这表明每一个变量在聚类分类中都起着重要的作用。</li><li id="971e" class="nb nc iq ke b kf nk kj nl kn nm kr nn kv no kz ng nh ni nj bi translated">聚类向量:第一、第二和第三邻域应该都属于聚类1，第四邻域应该属于聚类2，等等。</li><li id="f3b9" class="nb nc iq ke b kf nk kj nl kn nm kr nn kv no kz ng nh ni nj bi translated">更相关的度量是“在内”和“在之间”。<br/> withinss告诉我们每个数据点到聚类中心的距离的平方和。越低越好。betwess告诉我们聚类中心之间距离的平方和。理想情况下，我们希望聚类中心彼此远离。</li><li id="22d0" class="nb nc iq ke b kf nk kj nl kn nm kr nn kv no kz ng nh ni nj bi translated">可用组件不言自明。</li></ul><p id="b495" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">绘制k均值结果</strong></p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="60d6" class="mj lh iq mf b gy mk ml l mm mn">z1 &lt;- data.frame(z, kc$cluster)<br/>clusplot(z1, kc$cluster, color=TRUE, shade=F, labels=0, lines=0, main='k-Means Cluster Analysis')</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/542b986c1c208b6598f1f443a42bbe12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LbGEUeb95ebwjVlehc5JLw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 13</figcaption></figure><p id="60e3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">看起来我们对集群数量的选择是好的，并且我们几乎没有噪声。</p><h1 id="e412" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">分层聚类</h1><p id="d816" class="pw-post-body-paragraph kc kd iq ke b kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz ij bi translated">对于分层聚类方法，树状图是深入了解聚类解决方案的主要图形工具。</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="1574" class="mj lh iq mf b gy mk ml l mm mn">z2 &lt;- data.frame(z)<br/>distance &lt;- dist(z2)<br/>hc &lt;- hclust(distance)</span></pre><p id="f7f7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在我们已经有了一个集群解决方案。让我们检查结果。</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="4ee6" class="mj lh iq mf b gy mk ml l mm mn">plot(hc, labels = groups_wide$Neighbourhood, main='Cluster Dendrogram', cex=0.65)</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/a2d991a5cf4323bfad52b8b18db4693b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4-nBAcNq7OyQaNOa-pQkrQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 14</figcaption></figure><p id="59c1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果我们沿着树形图的y轴选择任意高度，并在树形图中移动，计算我们穿过的线的数量，每条线代表一个聚类。例如，如果我们观察高度为10的物体，并在该高度移动穿过x轴，我们将穿过两条直线。它定义了一个双集群解决方案；沿着这条线向下穿过它的所有分支，我们可以看到包含在这两个集群中的街区的名称。查看多伦多犯罪数据的树状图，我们可以看到我们的数据点非常不平衡。从树的顶端，有两个不同的组；一组由有分支和更多分支的分支组成，而另一组只由几个街区组成(我们可以看到这些街区是多伦多最危险的街区)。然而，我想立刻尝试许多不同的分组，开始调查。</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="e8a2" class="mj lh iq mf b gy mk ml l mm mn">counts = sapply(2:6,function(ncl)table(cutree(hc,ncl)))<br/>names(counts) = 2:6<br/>counts</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/2ea47a382e1c35c48d34a427a4e05f09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FvWWHBHgNwqM8jVrp26KxQ.png"/></div></div></figure><p id="c236" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">解释:</p><ul class=""><li id="78be" class="nb nc iq ke b kf kg kj kk kn nd kr ne kv nf kz ng nh ni nj bi translated">对于双集群解决方案，集群1中有128个小区，集群2中有3个小区。</li><li id="8129" class="nb nc iq ke b kf nk kj nl kn nm kr nn kv no kz ng nh ni nj bi translated">对于3个集群的解决方案，我们在集群1中有128个邻居，在集群2中有2个邻居，在集群3中有1个邻居。以此类推，直到我们得到一个6集群解决方案。</li></ul><p id="54e5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在实践中，我们希望有一个解决方案，其中没有太多只有少量观察值的聚类，因为这可能会使我们难以解释我们的结果。在这个练习中，我将坚持使用3集群解决方案，看看我将获得什么结果。</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="0868" class="mj lh iq mf b gy mk ml l mm mn">member &lt;- cutree(hc, 3)<br/>aggregate(z, list(member), mean)</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nq"><img src="../Images/f7be8456545f844c5ae830f12da0029c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*bfnICTClZL_2cFp7mc6laA.png"/></div></div></figure><p id="7045" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在第一组中，所有犯罪指标都是负面的。与聚类2和聚类3相比，聚类1在每个变量上也有显著差异。除了汽车盗窃之外，第二组在大多数犯罪指标方面都高于第三组。</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="33e5" class="mj lh iq mf b gy mk ml l mm mn">plot(silhouette(cutree(hc, 3), distance))</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/d1690964415d4f1251ac3aed24277c1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3VofHi_Dz1zw8nPPwnI2wg.png"/></div></div></figure><p id="6a64" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">聚类3的轮廓宽度值是零，并且轮廓图表明我们确实不需要第三个聚类，绝大多数邻域属于第一个聚类，并且2-聚类将是我们的解决方案。</p><h1 id="04c5" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">制作多伦多犯罪地图</h1><p id="eff2" class="pw-post-body-paragraph kc kd iq ke b kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz ij bi translated">r中有许多用于绘制和操作空间数据的包。我将使用ggmap来制作一个简单易用的多伦多犯罪地图。</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="26cf" class="mj lh iq mf b gy mk ml l mm mn">lat &lt;- toronto$Lat<br/>lon &lt;- toronto$Long<br/>crimes &lt;- toronto$MCI<br/>to_map &lt;- data.frame(crimes, lat, lon)<br/>colnames(to_map) &lt;- c('crimes', 'lat', 'lon')<br/>sbbox &lt;- make_bbox(lon = toronto$Long, lat = toronto$Lat, f = 0.01)<br/>my_map &lt;- get_map(location = sbbox, maptype = "roadmap", scale = 2, color="bw", zoom = 10)<br/>ggmap(my_map) +<br/>  geom_point(data=to_map, aes(x = lon, y = lat, color = "#27AE60"), <br/>             size = 0.5, alpha = 0.03) +<br/>  xlab('Longitude') +<br/>  ylab('Latitude') +<br/>  ggtitle('Location of Major Crime Indicators Toronto 2016') +<br/>  guides(color=FALSE)</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/ba834d9c7959bab51217cbbc527d22b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dRjte76VYRWMvc-e_goyDg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 15</figcaption></figure><p id="895d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">从地图上可以清楚地看到这个城市的主要犯罪发生地。大部分集中在滨水区，北约克以南比其他任何地区都更和平。然而，在比较高密度区域时，点叠加没有帮助，所以让我们优化这种可视化。</p><pre class="lc ld le lf gt me mf mg mh aw mi bi"><span id="4766" class="mj lh iq mf b gy mk ml l mm mn">ggmap(my_map) +<br/>  geom_point(data=to_map, aes(x = lon, y = lat, color = "#27AE60"), <br/>             size = 0.5, alpha = 0.05) +<br/>  xlab('Longitude') +<br/>  ylab('Latitude') +<br/>  ggtitle('Location of Major Crime Indicators Toronto 2016') +<br/>  guides(color=FALSE) +<br/>  facet_wrap(~ crimes, nrow = 2)</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/546fcee24d114e556b53f75712a1e432.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*302ieYhY4V217CmGxZ3ipA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 16</figcaption></figure><p id="e497" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这当然更有趣，信息量也更大。一些犯罪，如袭击、破门而入，在城市各处都有发生，集中在滨水区。其他犯罪，比如偷车，西边比东边多点。抢劫和盗窃主要发生在海滨地区。</p><h1 id="f19f" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">摘要</h1><p id="05ec" class="pw-post-body-paragraph kc kd iq ke b kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz ij bi translated">通过查看多伦多重大犯罪指标的数据，可以回答的问题并不多。不过没关系。这些数据当然还有其他有趣的用途(比如在MicroStrategy上创建一个仪表板)。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nr"><img src="../Images/b38e5a2af40ad4e4b78734eeb987f1e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_XxHJe0J47DackNylE5zLQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 17</figcaption></figure><p id="1740" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">和往常一样，所有代码都可以在<a class="ae la" href="https://github.com/susanli2016/Data-Analysis-with-R/blob/master/toronto_major_crime_indicators.Rmd" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到。我将很高兴收到关于上述任何反馈或问题。</p></div></div>    
</body>
</html>