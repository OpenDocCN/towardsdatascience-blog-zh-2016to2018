<html>
<head>
<title>Javascript — Proxy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Javascript —代理</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/why-to-use-javascript-proxy-5cdc69d943e3?source=collection_archive---------5-----------------------#2018-05-05">https://towardsdatascience.com/why-to-use-javascript-proxy-5cdc69d943e3?source=collection_archive---------5-----------------------#2018-05-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3d4f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">最近，我在阅读一些不太出名的 Javascript 特性，发现了 Javascript 代理。</h2></div><p id="52bc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在探讨为什么这很重要之前，让我们先了解一下它是什么。如果你已经知道了，可以跳过几段。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/3b8b30cdcdb8f79bc376f9d5706c77aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*50xbFSxovUIx1nWI30aeSQ.jpeg"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Proxy are magic methods</figcaption></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><blockquote class="mb mc md"><p id="d3a5" class="ki kj me kk b kl km ju kn ko kp jx kq mf ks kt ku mg kw kx ky mh la lb lc ld im bi translated">代理是 javascript 中的一个对象，它封装了一个对象或一个函数，并通过一个叫做目标的东西来监控它。而不管包装的对象或函数是否存在。代理类似于其他语言中元编程。</p></blockquote><p id="e360" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在继续之前，我们需要了解 3 个关键术语:</p><ol class=""><li id="d910" class="mi mj it kk b kl km ko kp kr mk kv ml kz mm ld mn mo mp mq bi translated"><strong class="kk iu">目标:</strong>被代理的对象或功能。</li><li id="c52a" class="mi mj it kk b kl mr ko ms kr mt kv mu kz mv ld mn mo mp mq bi translated"><strong class="kk iu">处理程序:</strong>对被代理的对象或函数做某些事情的函数。</li><li id="4e4e" class="mi mj it kk b kl mr ko ms kr mt kv mu kz mv ld mn mo mp mq bi translated"><strong class="kk iu">陷阱:</strong>这些是一些用来作用于目标的函数。点击这里阅读更多关于陷阱的信息。</li></ol></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="5b47" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是我们对它的定义</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi mx"><img src="../Images/cd55d04c179de8c71cdff9aa1c91c135.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v99O8juOfA3eLbJv46YAPg.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Syntax</figcaption></figure><p id="4f1f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们使用 ES6 中的代理类，参数，目标是包装对象，处理程序将是使用陷阱在目标上执行某些操作的函数。</p><p id="f142" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是一个<strong class="kk iu"> <em class="me">简单的</em> </strong>用法的例子</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi my"><img src="../Images/44daa8fb586348a91a2e95a9ee702d14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8RKy6w1z5IsAfsDEGNZeHQ.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Basic example for proxy</figcaption></figure><p id="b690" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们制作了两个对象，分别叫做 target 和 handler，target 是一个带有消息键的简单对象，handler 是一个带有 get 键的对象，该键带有一个与之相关联的函数。我们在代理类中传递 2 个对象，作为回报，我们接收一个代理对象，通过它我们可以访问目标对象的消息属性。</p><p id="9e70" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是一个如何使用它对对象值的<strong class="kk iu"> <em class="me">验证</em> </strong>的小例子</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi mz"><img src="../Images/f6e22bebd72669ed966fd63c2676393b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3gb1EV2VblCCc9U_q-SsrQ.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Validation of object key’s</figcaption></figure><p id="dbb1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们使用一个空对象作为目标对象，并使用一个处理程序在目标对象上设置陷阱并进行验证。很简单对吧！</p><p id="1a3a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们看看如何使用它来制作<strong class="kk iu"> <em class="me"> API 调用包装器</em> </strong>。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi na"><img src="../Images/b925afa53a55b3b545991775e2c23271.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GP_K0urCwkNm7U1eW6DQNg.png"/></div></div></figure><p id="416e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们已经使用了<a class="ae mw" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank"> axios </a>，然后用我们的基本 URL 创建了一个实例，为一个代理创建了一个处理程序，它返回一个要使用的 get、post、put、delete、patch 函数的对象，最后创建了一个 API 对象，它是一个空对象目标的代理对象。</p><p id="25e9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们可以将它用作:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nb"><img src="../Images/db962cd547c0bdac0d64ba28f429115a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e42Z2ApWq_zRt5MtAZJVpQ.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Calling API proxy object</figcaption></figure><p id="1252" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这可以扩展到验证、值修正、跟踪属性访问、未知属性警告、负数组索引、数据绑定、访问 restful web 服务(方法调用)、可撤销引用、监控异步函数、类型检查等等，<a class="ae mw" href="http://exploringjs.com/es6/ch_proxies.html#sec_proxy-use-cases" rel="noopener ugc nofollow" target="_blank">阅读此处了解更多信息</a></p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="7f23" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我个人发现 javascript 代理在 restful web 服务、验证、监控异步功能中非常有用。我会探索更多。</p><p id="8532" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="me">边注</em> </strong> <em class="me">:使用的例子可以优化。</em></p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="4a11" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可能也会喜欢我的其他文章</p><ol class=""><li id="c8a5" class="mi mj it kk b kl km ko kp kr mk kv ml kz mm ld mn mo mp mq bi translated"><a class="ae mw" href="https://levelup.gitconnected.com/javascript-execution-context-and-hoisting-c2cc4993e37d" rel="noopener ugc nofollow" target="_blank"> Javascript 执行上下文和提升</a></li><li id="ae72" class="mi mj it kk b kl mr ko ms kr mt kv mu kz mv ld mn mo mp mq bi translated"><a class="ae mw" href="https://medium.com/datadriveninvestor/javascript-generator-yield-next-async-await-8442d2c77185" rel="noopener"> Javascript —生成器-产出/下一个&amp;异步-等待🤔</a></li><li id="edcb" class="mi mj it kk b kl mr ko ms kr mt kv mu kz mv ld mn mo mp mq bi translated"><a class="ae mw" href="https://medium.com/datadriveninvestor/javascript-context-this-keyword-9a78a19d5786" rel="noopener">理解 Javascript‘this’关键字(上下文)</a>。</li><li id="43be" class="mi mj it kk b kl mr ko ms kr mt kv mu kz mv ld mn mo mp mq bi translated"><a class="ae mw" href="https://levelup.gitconnected.com/write-beautiful-javascript-with-%CE%BB-fp-es6-350cd64ab5bf" rel="noopener ugc nofollow" target="_blank">带有映射、归约、过滤的 Javascript 数据结构</a></li><li id="201e" class="mi mj it kk b kl mr ko ms kr mt kv mu kz mv ld mn mo mp mq bi translated"><a class="ae mw" href="https://medium.com/datadriveninvestor/javascript-currying-vs-partial-application-4db5b2442be8" rel="noopener"> Javascript- Currying VS 部分应用</a></li><li id="7b8f" class="mi mj it kk b kl mr ko ms kr mt kv mu kz mv ld mn mo mp mq bi translated"><a class="ae mw" href="https://medium.com/datadriveninvestor/javascript-es6-iterables-and-iterators-de18b54f4d4" rel="noopener"> Javascript ES6 —可迭代程序和迭代器</a></li><li id="a8af" class="mi mj it kk b kl mr ko ms kr mt kv mu kz mv ld mn mo mp mq bi translated"><a class="ae mw" href="https://medium.com/datadriveninvestor/still-confused-in-js-scopes-f7dae62c16ee" rel="noopener"> Javascript —作用域</a></li></ol></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="a1c1" class="nc nd it bd ne nf ng nh ni nj nk nl nm jz nn ka no kc np kd nq kf nr kg ns nt bi translated">如果你喜欢这篇文章，请随时分享，帮助别人找到它！</h1><p id="7aa4" class="pw-post-body-paragraph ki kj it kk b kl nu ju kn ko nv jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated"><strong class="kk iu">谢谢！</strong></p></div></div>    
</body>
</html>