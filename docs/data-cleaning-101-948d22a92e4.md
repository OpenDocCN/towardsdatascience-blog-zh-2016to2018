# 数据清理 101

> 原文：<https://towardsdatascience.com/data-cleaning-101-948d22a92e4?source=collection_archive---------1----------------------->

早在 12 月份，我就宣布我将离开劳联-产联，去参加大会学习。我的领导要求我做几件事:我写的几个脚本的文档，创建一个包含我所有重要文件的文件夹，将管理员凭据转移给其他员工，等等。我唯一不能给他们的是如何有效清理数据的指南。

![](img/130ba6d38b0ad005f39897444448c093.png)

在我的上一份工作中，数据清理是一项非常重要的技能，因为我们会从各种政府机构和客户 IT 商店获取数据。我总是愿意花更多的时间来确保数据是干净的，而不是与客户进行困难的(但在使用建模的大数据环境中是不可避免的)对话，以了解为什么某些记录会丢失。

我给我的前雇主这个指南的困难是你的方法取决于你拥有的数据和你的最终目标。尽管困难重重，但这是我对如何清理数据的指导方针的最好尝试。

你现在看到的有意义吗？

看一下数据。如果这是一个大型数据集，看一看前 20 行、后 20 行和一个 20 行随机样本。下面是你应该问自己的问题，用项目符号表示。相应的示例用双星号**表示。

*   我看到的有意义吗？
*   数据与列标签匹配吗？

**姓名栏中是否有姓名，地址栏中是否有地址，电话号码栏中是否有电话号码？还是各列有不同的数据？

*   数据是否遵守其领域的适当规则？

**一个名字中的字符是只有字母(Brendan)还是有数字在里面(B4rendan)？

**电话号码的数字部分是 10 位数字(5558675309)还是不是(675309)？

*   计算数字数据的汇总统计数据。它们有意义吗？

**如果你处理的是经过的时间数据，最小值是负数(- 10 秒)？

**如果你在处理蓝领工人的年度工资数据，最大值(100 万美元)是否有些奇怪？

*   看看有多少值是 nulls？空值的数量可以接受吗？哪里有空值，有什么模式吗？
*   有重复的吗，可以吗？

**如果您有足够的信息，请更正数值**

一旦你对数据的问题进行了评估，就要考虑你想如何修正它。一些修正可能是显而易见的。如果 name 列的值是 B4rendan，则该值很可能是 Brendan。

然而，有些修正可能并不明显。假设你有一个超过 50 万人的数据集，其中一个人的名字是梅尔特。你可能会认为这是一个错别字，实际上应该说伯特。如果您事先知道这是一个错误(即您知道记录属于谁)，您可以进行更改。但是，除非你对自己的假设有足够的信心，否则你可能不应该修改，否则你可能会造成一个错别字，而不是纠正一个。

试着看看数据问题中是否有逻辑，并对其进行更正。比方说，如果您的系统只接受仅包含数字字符的电话号码，但您的数据集包含格式为 so (555)867-5309 的电话号码，您可以使用 Excel/Python 对所有括号和破折号进行查找和替换。

如果可以，使用相同的逻辑为空数值填充数据。但是，如果没有条件逻辑，您可以通过其他方式填写数据。一种常见的方法是使用列的平均值或中值来填充空值，这很容易，但可能会影响该列中数据的分布。还有更复杂但在统计学上有效的方法来填充数据，比如[老鼠](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3074241/)。您还应该考虑创建一个元数据列，指示哪些值是估算的，哪些值是有机的。不管使用何种统计方法，如果某一列有大量缺失数据，最好在分析中放弃使用它。

**使用有意义的工具**

思考实现目标所需的工具可以节省你重复这个过程的时间。每种工具都有利弊，下面是我的经验法则:

何时可以使用 Excel:

*   你只有不到一百万条记录
*   你需要轻松快捷地完成这项工作
*   清理数据有一个逻辑模式，使用 Excel 函数清理很容易
*   清理数据的逻辑模式很难定义，您需要手动清理数据

当您可能使用 Python 或其他脚本语言时:

*   你需要记录你的过程
*   你打算重复做这项工作
*   清理数据有一个逻辑模式，但是很难用 Excel 函数实现

这也取决于你更喜欢哪种工具。当我开始学习编程时，当我需要清理数据时，我非常依赖 Excel。当我开始处理更大的数据集并且必须将我的过程常规化时，我转向了 Python。

**与源头沟通**

有一次，当我度假回来时，我的同事们对来自马里兰州选举委员会的一个数据集有疑问。他们需要数据集中每条记录的县，但州政府只给了我们每个县的代码，而且他们与 FIPS 人口普查局的代码不匹配。所以我打电话给产生该数据集的政府机构，结果发现代码是按字母顺序排列的县。阿勒格尼是 01，安妮·阿伦德尔是 02，巴尔的摩市(独立城市)是 03，以此类推。

不要害怕拿起电话或发电子邮件给数据的来源。如果您是数据源的客户，尤其如此，因为您有权获得清晰的信息。从长远来看，这种交流可以减少很多心痛。

这是我清理数据的方法，但绝对不是唯一的方法。我鼓励任何人在评论区张贴他们清理数据的技巧和诀窍。