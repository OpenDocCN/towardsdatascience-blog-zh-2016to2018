<html>
<head>
<title>Getting Data ready for modelling: Feature engineering, Feature Selection, Dimension Reduction (Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为建模准备数据:特征工程、特征选择、降维(第 1 部分)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/getting-data-ready-for-modelling-feature-engineering-feature-selection-dimension-reduction-77f2b9fadc0b?source=collection_archive---------8-----------------------#2018-12-10">https://towardsdatascience.com/getting-data-ready-for-modelling-feature-engineering-feature-selection-dimension-reduction-77f2b9fadc0b?source=collection_archive---------8-----------------------#2018-12-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/aa2a833d84988f8e95b2531f2cb7bfbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7qGyFW5c4WH7_4BL.jpg"/></div></div></figure><p id="7e13" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">即使在机器学习的幻想世界中，就像人类无法在崎岖的道路上正确驾驶车辆一样，ML 算法也无法在大量不需要的混杂数据上产生预期的结果。因此，让我们深入探讨优化数据所有选项。</p><p id="7e2e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">注意:</strong>这可能有点冗长。所以我把它分成三个系列。因此，请一部分一部分地探索这一点。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="ce6b" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">第 1 部分:特征工程</h1><p id="fa03" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated"><strong class="ka ir"> <em class="mg">什么是特色工程，为什么要纠结于此</em>？</strong></p><p id="8239" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">特征工程是<strong class="ka ir">使用数据的领域知识来创建使机器学习算法工作的特征</strong>的过程。特征工程是机器学习应用的基础，既困难又昂贵。但如果处理得当，会产生奇迹。这就是同一个算法工作得很差和工作得很棒的区别。</p><p id="7a20" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">很重要，不容忽视。让我们看看它的大致思想:</p><ul class=""><li id="4bc1" class="mh mi iq ka b kb kc kf kg kj mj kn mk kr ml kv mm mn mo mp bi translated"><strong class="ka ir">数据清理&amp;预处理</strong></li></ul><p id="6aae" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→处理异常值</p><p id="71ad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→处理缺失值</p><p id="4609" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→处理偏斜</p><ul class=""><li id="2010" class="mh mi iq ka b kb kc kf kg kj mj kn mk kr ml kv mm mn mo mp bi translated"><strong class="ka ir">缩放</strong></li><li id="fded" class="mh mi iq ka b kb mq kf mr kj ms kn mt kr mu kv mm mn mo mp bi translated"><strong class="ka ir">编码</strong></li></ul><ol class=""><li id="7b77" class="mh mi iq ka b kb kc kf kg kj mj kn mk kr ml kv mv mn mo mp bi translated"><strong class="ka ir"> <em class="mg">数据清理&amp;预处理:</em> </strong>在现实世界中，我们永远不会得到适合某个算法的定制数据。我们需要通过以下方式做到这一点。</li></ol><figure class="mw mx my mz gt jr gh gi paragraph-image"><div class="ab gu cl na"><img src="../Images/ac40335779daa4e9fc9c7c003e7b05fd.png" data-original-src="https://miro.medium.com/v2/format:webp/1*hTzCB81C8Wi5VxMSGAzd-w.png"/></div></figure><p id="92df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> i)异常值的处理:</strong>异常值是不遵循数据一般趋势的数据点。许多算法对异常值很敏感。所以问题是怎么办？</p><p id="bbf2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→如果很少，那么就彻底清除。您可以设置阈值来识别它们，然后删除它们。如果一列有很多离群值，最好完全删除该列，行也是如此。</p><p id="da12" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→您可以将所有内容转换为“日志形式”，因为日志会将所有内容带到相同的距离。(尽管只对数字数据有效)</p><p id="aaa2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→ <strong class="ka ir">使用散点图、直方图和盒须图可视化数据</strong>，并寻找极值。还有很多其他的技术可以用来处理异常值，我建议你去尝试一下。</p><p id="c506" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> ii)处理缺失值:</strong> <strong class="ka ir">为什么要处理缺失值？</strong></p><p id="bf05" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">训练数据集中的缺失数据会降低模型的功效/拟合度。缺少值会导致模型有偏差，因为我们没有正确分析行为以及与其他变量的关系。这很有用，因为有些算法无法处理或利用丢失的数据。因此，识别和标记这些丢失的数据是很重要的。一旦标记，就可以准备替换值。</p><p id="3ae8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→替换缺失值，均值、中值、众数(完全取决于判断)。你可以使用<strong class="ka ir">sk learn . preprocessing . impute</strong>来达到同样的目的。</p><p id="76d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→如果需要，可以用全新数据替换(再次判断)。</p><p id="abff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→或者，如果缺少的值太多，您可以删除整个列。因此，这主要需要再次判断！！！</p><p id="bf97" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> iii)偏度:</strong>偏度是分布的不对称性的度量。偏斜度是对称性的一种度量，或者更准确地说，是对称性的缺乏。</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/d745c7abcc2f2944add3ba75dbc2db60.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/0*FpUO8zKh9w9rVjFl.gif"/></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">The basic three types of Skewness</figcaption></figure><p id="38cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">为什么要处理偏斜？</strong></p><p id="2819" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→许多模型构建技术都假设预测值呈正态分布并具有对称形状。因此，有时处理偏斜度是至关重要的。</p><p id="6a67" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→对称分布优于偏斜分布，因为它更容易解释和产生推论。</p><p id="18d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→使用对数变换、平方根变换等。</p><p id="078d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mg"> 2。</em> <strong class="ka ir"> <em class="mg">缩放:</em> </strong>像处理缺失值是一种强制，缩放不是。但这并不意味着它是不太重要的技术。考虑一个场景，其中一个列(比如 A)的值在 10k 到 100k 的范围内，另一个列的值在 0 到 1 的范围内(比如 B)，那么 A 将比 B 具有不适当的优势，因为它将承载更多的权重。</p><p id="8726" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→缩放将特征修改为介于给定的最小值和最大值之间，通常介于 0 和 1 之间，或者将每个特征的最大绝对值缩放至单位大小，以提高某些模型的数值稳定性。</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/548083cff7152bc1fcfe100c3fd9b5b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GboEawSo-9B8QIwWZ0rObw.jpeg"/></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">Effect Of Scaling</figcaption></figure><p id="06d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→但是标准化/缩放不能应用于分类数据，因此我们将分类数据和数值数据分开，以便对数值数据进行标准化。</p><p id="2a3c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→ <em class="mg">最小最大值定标器、标准巩膜、标准化器</em>等是一些技术。都可以使用<strong class="ka ir">' sk learn . preprocessing . scaler '</strong>来执行</p><p id="5dd5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mg">(建议你访问</em> <a class="ae nh" href="http://benalexkeen.com/feature-scaling-with-scikit-learn/" rel="noopener ugc nofollow" target="_blank"> <em class="mg">本博客</em> </a> <em class="mg">更深入地研究缩放比例)</em></p><p id="9e0a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mg"> 3。编码:</em> </strong>那么，编码是什么，为什么编码？</p><p id="d5bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们使用的大多数算法处理数值，而分类数据通常是文本/字符串(男性、女性)或 bin(0–4、4–8 等)。)形式。</p><p id="399a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一种选择是将这些变量排除在算法之外，只使用数字数据。但是在这样做的时候，我们可能会丢失一些关键的信息。因此，通过编码将分类变量转换成数值来将它们包含到算法中通常是一个好主意，但是，首先让我们学习一两件关于分类变量的事情。</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/fea1a4f47ced9b9a4fc9ba7efd1bc478.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hwvtVo7L9Z8g4xFN.jpg"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">Types of Variable</figcaption></figure><p id="8c3c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mg">对数据做的编码一般有两种，标签编码&amp;一种热编码(或 pandas.get_dummies)。</em></p><p id="c910" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> i)标签编码:</strong>每个类别被赋予一个标签(例如 0、1、2 等)。标签编码是编码分类变量的一种简便技术。然而，这种编码的名义变量可能最终被误解为序数。<strong class="ka ir">所以标签编码只在有序类型的数据上进行(这些数据有一定的顺序感)。</strong></p><p id="d079" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">→因此，即使在标签编码后，所有数据也不会失去其排名或重要性水平。</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/d9c82c582dd50014140e05e15cfff301.png" data-original-src="https://miro.medium.com/v2/resize:fit:550/0*gvccz9WvhK9yy6uj"/></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">eg of Label Encoding</figcaption></figure><p id="562d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">可以使用<strong class="ka ir">' sk learn . preprocessing . label encoder '</strong>执行</p><p id="b8df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> ii)一个热编码:</strong>标签编码不能在名义或二进制上执行，因为我们不能根据它们的属性对它们进行排序。每个数据都被平等对待。考虑以下两个分类变量及其值，如</p><p id="f128" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mg"> →颜色</em>:蓝色、绿色、红色、黄色</p><p id="26a5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mg"> →学历</em>:小学、中学、研究生、研究生、博士。</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/66e1e728a5446b9fee73e2e30b2b5de2.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*-DvH92fA3jyX2RqfKrigQw.png"/></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">Eg Of One hot Encoding</figcaption></figure><p id="4bb6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">可以使用<strong class="ka ir"> 'pd.get_dummies' </strong>或<strong class="ka ir">' sk learn . preprocessing . onehotencoder '</strong>执行</p><p id="cd56" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">具有更多维度的数据集需要模型理解更多的参数，这意味着需要更多的行来可靠地学习这些参数。使用一个热编码器的效果是增加了许多列(维度)。</p><p id="f845" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果数据集中的行数是固定的，添加额外的维度而没有添加更多的信息供模型学习，可能会对最终的模型准确性产生不利影响。</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div class="ab gu cl na"><img src="../Images/6442f14b54cab79c3ec677daa056af95.png" data-original-src="https://miro.medium.com/v2/format:webp/1*ZsYkXEa1qrKeGiplNnFHyQ.jpeg"/></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">One Hot Encoding vs Label Encoding</figcaption></figure><p id="4129" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">以此表示第 1 部分告一段落。请务必阅读第 2 部分，其中将讨论特征提取和非常重要的降维。</strong></p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi gj"><img src="../Images/c6f7c39d9ededb331425390c41d67f28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B9vPbIwT48IT-MAf"/></div></div></figure></div></div>    
</body>
</html>