<html>
<head>
<title>Simulate Random Walks With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 模拟随机漫步</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/random-walks-with-python-8420981bc4bc?source=collection_archive---------4-----------------------#2018-10-14">https://towardsdatascience.com/random-walks-with-python-8420981bc4bc?source=collection_archive---------4-----------------------#2018-10-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8ca3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用<a class="ae ki" href="https://numpy.org" rel="noopener ugc nofollow" target="_blank"> <em class="kj"> Numpy </em> </a>模拟和绘制随机行走</h2></div><p id="3788" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated"><strong class="km iu"> <em class="lg">什么是随机漫步？</em>T9】</strong></p><p id="c6a8" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">简单地说，<a class="ae ki" href="https://en.wikipedia.org/wiki/Random_walk" rel="noopener ugc nofollow" target="_blank">随机行走</a>是以一种“随机”方式对当前状态采取连续步骤的过程。然后，可以将附加条件应用于这个基本描述，以便为您的特定用例创建随机漫步。粒子的<a class="ae ki" href="https://www.britannica.com/science/Brownian-motion" rel="noopener ugc nofollow" target="_blank">布朗运动</a>、股票行情自动收录器的<a class="ae ki" href="https://www.investopedia.com/terms/r/randomwalktheory.asp" rel="noopener ugc nofollow" target="_blank">运动</a>、<a class="ae ki" href="https://doi.org/10.1088/0256-307X/30/7/070501" rel="noopener ugc nofollow" target="_blank">活细胞在基质中的运动</a>只是现实世界中一些更为人所知的随机行走。</p><p id="5fe2" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">这里，我们模拟了从原点开始的一维、二维和三维中的简化随机行走，离散步长以相等的概率选自[-1，0，1]。起点用<code class="fe lh li lj lk b">+</code>表示，终点用<code class="fe lh li lj lk b">o</code>表示。</p><p id="cd86" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">对于不同的应用，这些条件根据需要而改变，例如，在选定的股票价格、使用显微镜等检测的初始细胞位置开始行走，并且步骤选择通常是随机的，并且取决于来自过去数据、预测假设、被测试的假设等的附加信息。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ll"><img src="../Images/2db8814d8ddd9ed16209f692ddfdbded.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pXhfrba2zYTHsI_korMqmQ.png"/></div></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">Random Walks on networks can be used for clustering nodes too (<a class="ae ki" href="https://en.wikipedia.org/wiki/Internet" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Internet</a>)</figcaption></figure><p id="819e" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated"><strong class="km iu"> <em class="lg">设置你的 Jupyter 笔记本:</em> </strong></p><pre class="lm ln lo lp gt mb lk mc md aw me bi"><span id="314d" class="mf mg it lk b gy mh mi l mj mk">%pylab inline</span><span id="8edc" class="mf mg it lk b gy ml mi l mj mk">from itertools import cycle<br/>from mpl_toolkits.mplot3d import Axes3D</span><span id="c0c6" class="mf mg it lk b gy ml mi l mj mk">colors = cycle(‘bgrcmykbgrcmykbgrcmykbgrcmyk’)</span></pre><p id="6e8b" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated"><strong class="km iu"> <em class="lg">一维随机行走:</em> </strong></p><p id="03ba" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">我们从原点<strong class="km iu"> <em class="lg"> ( y=0 ) </em> </strong>开始，选择一个步长，以相等的概率移动每一个连续的步长。起点显示为红色，终点显示为黑色。累积和绘制在下图中，该图显示了在 1D 超过 10k 步的物体所遵循的路径。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi mm"><img src="../Images/4dd0147d70fa29c6590de0e7e806487a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WABRtmAWBd0rmEOsbectRA.png"/></div></div></figure><pre class="lm ln lo lp gt mb lk mc md aw me bi"><span id="da9d" class="mf mg it lk b gy mh mi l mj mk"># Define parameters for the walk</span><span id="ab08" class="mf mg it lk b gy ml mi l mj mk">dims = 1<br/>step_n = 10000<br/>step_set = [-1, 0, 1]<br/>origin = np.zeros((1,dims))</span><span id="61fb" class="mf mg it lk b gy ml mi l mj mk"># Simulate steps in 1D</span><span id="192f" class="mf mg it lk b gy ml mi l mj mk">step_shape = (step_n,dims)<br/>steps = np.random.choice(a=step_set, size=step_shape)<br/>path = np.concatenate([origin, steps]).cumsum(0)<br/>start = path[:1]<br/>stop = path[-1:]</span><span id="19f8" class="mf mg it lk b gy ml mi l mj mk"># Plot the path</span><span id="8aa0" class="mf mg it lk b gy ml mi l mj mk">fig = plt.figure(figsize=(8,4),dpi=200)<br/>ax = fig.add_subplot(111)</span><span id="b7dd" class="mf mg it lk b gy ml mi l mj mk">ax.scatter(np.arange(step_n+1), path, c=’blue’,alpha=0.25,s=0.05);<br/>ax.plot(path,c=’blue’,alpha=0.5,lw=0.5,ls=’ — ‘,);<br/>ax.plot(0, start, c=’red’, marker=’+’)<br/>ax.plot(step_n, stop, c=’black’, marker=’o’)</span><span id="6f3a" class="mf mg it lk b gy ml mi l mj mk">plt.title(‘1D Random Walk’)<br/>plt.tight_layout(pad=0)<br/>plt.savefig(‘plots/random_walk_1d.png’,dpi=250);</span></pre><p id="6816" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated"><strong class="km iu"> <em class="lg">二维随机行走:</em> </strong></p><p id="06c2" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">我们从原点<strong class="km iu"> <em class="lg"> (x=0，y=0) </em> </strong>开始，在每个方向上采取随机步骤，在每个步骤中给我们 9 个可能的移动方向<em class="lg">(∏x，∏y)⋲{-1，0，1} </em>:</p><blockquote class="mn mo mp"><p id="d926" class="kk kl lg km b kn ko ju kp kq kr jx ks mq ku kv kw mr ky kz la ms lc ld le lf im bi translated">(-1，-1)，(-1，0)，(-1，1)，<br/> (0，-1)，(0，0)，(0，1)，<br/> (1，-1)，(1，0)，(1，1)</p></blockquote><p id="dd9e" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">10k 步以上的模拟给出了以下路径。在流体表面移动的粒子表现出 2D 随机行走，并显示如下的轨迹。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi mm"><img src="../Images/2fb8ae7066ec13b0f23cdf3a428a9a7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fXAC_bmuj2ZDkiwZZAKTVQ.png"/></div></div></figure><pre class="lm ln lo lp gt mb lk mc md aw me bi"><span id="5be2" class="mf mg it lk b gy mh mi l mj mk"># Define parameters for the walk</span><span id="77c2" class="mf mg it lk b gy ml mi l mj mk">dims = 2<br/>step_n = 10000<br/>step_set = [-1, 0, 1]<br/>origin = np.zeros((1,dims))</span><span id="5f42" class="mf mg it lk b gy ml mi l mj mk"># Simulate steps in 2D</span><span id="96d7" class="mf mg it lk b gy ml mi l mj mk">step_shape = (step_n,dims)<br/>steps = np.random.choice(a=step_set, size=step_shape)<br/>path = np.concatenate([origin, steps]).cumsum(0)<br/>start = path[:1]<br/>stop = path[-1:]</span><span id="a421" class="mf mg it lk b gy ml mi l mj mk"># Plot the path</span><span id="638b" class="mf mg it lk b gy ml mi l mj mk">fig = plt.figure(figsize=(8,8),dpi=200)<br/>ax = fig.add_subplot(111)</span><span id="6b58" class="mf mg it lk b gy ml mi l mj mk">ax.scatter(path[:,0], path[:,1],c=’blue’,alpha=0.25,s=0.05);<br/>ax.plot(path[:,0], path[:,1],c=’blue’,alpha=0.5,lw=0.25,ls=’ — ‘);<br/>ax.plot(start[:,0], start[:,1],c=’red’, marker=’+’)<br/>ax.plot(stop[:,0], stop[:,1],c=’black’, marker=’o’)</span><span id="2f0b" class="mf mg it lk b gy ml mi l mj mk">plt.title(‘2D Random Walk’)<br/>plt.tight_layout(pad=0)<br/>plt.savefig(‘plots/random_walk_2d.png’,dpi=250);</span></pre><p id="5f96" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated"><strong class="km iu"> <em class="lg">模拟 2D k 次随机漫步:</em> </strong></p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi mt"><img src="../Images/53df810586c25929ca751d02a5de3f66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SqveFcu2afX-_t4YeaXo7w.png"/></div></div></figure><p id="1a4c" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated"><strong class="km iu"> <em class="lg">三维随机行走:</em> </strong></p><p id="7196" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">在体积中运动的物体是 3D 空间中随机行走的一个例子。我们从原点<strong class="km iu"> <em class="lg"> (x=0，y=0，z=0) </em> </strong>开始，从 27 个方向<em class="lg">(∏x，∏y，∆z)⋲ {-1，0，1} </em>中随机选择步伐:</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi mu"><img src="../Images/f63c58b43379ae3cfcd02482f6d5caa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*29D02bc5v6cXVYwbWo43kQ.png"/></div></div></figure><pre class="lm ln lo lp gt mb lk mc md aw me bi"><span id="3595" class="mf mg it lk b gy mh mi l mj mk"># Define parameters for the walk</span><span id="42b3" class="mf mg it lk b gy ml mi l mj mk">dims = 3<br/>step_n = 1000<br/>step_set = [-1, 0, 1]<br/>origin = np.zeros((1,dims))</span><span id="1947" class="mf mg it lk b gy ml mi l mj mk"># Simulate steps in 3D</span><span id="24e5" class="mf mg it lk b gy ml mi l mj mk">step_shape = (step_n,dims)<br/>steps = np.random.choice(a=step_set, size=step_shape)<br/>path = np.concatenate([origin, steps]).cumsum(0)<br/>start = path[:1]<br/>stop = path[-1:]</span><span id="257e" class="mf mg it lk b gy ml mi l mj mk"># Plot the path</span><span id="3ab0" class="mf mg it lk b gy ml mi l mj mk">fig = plt.figure(figsize=(10,10),dpi=200)<br/>ax = fig.add_subplot(111, projection=’3d’)<br/>ax.grid(False)<br/>ax.xaxis.pane.fill = ax.yaxis.pane.fill = ax.zaxis.pane.fill = False<br/>ax.set_xlabel(‘X’)<br/>ax.set_ylabel(‘Y’)<br/>ax.set_zlabel(‘Z’)</span><span id="0565" class="mf mg it lk b gy ml mi l mj mk">ax.scatter3D(path[:,0], path[:,1], path[:,2], <br/>             c=’blue’, alpha=0.25,s=1)<br/>ax.plot3D(path[:,0], path[:,1], path[:,2], <br/>          c=’blue’, alpha=0.5, lw=0.5)<br/>ax.plot3D(start[:,0], start[:,1], start[:,2], <br/>          c=’red’, marker=’+’)<br/>ax.plot3D(stop[:,0], stop[:,1], stop[:,2], <br/>          c=’black’, marker=’o’)<br/>plt.title(‘3D Random Walk’)<br/>plt.savefig(‘plots/random_walk_3d.png’,dpi=250);</span></pre><p id="2d2c" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated"><strong class="km iu"><em class="lg">3D 模拟 k 次随机行走:</em> </strong></p><p id="24c2" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">现在我们在 3D 中模拟多个随机行走。每一次随机行走代表一个点源的运动，该点源与从<em class="lg"> (x，y，z) ⋲ [-10，10] </em>中选择的点同时开始。</p><p id="3d85" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">一些细胞/粒子在没有任何持续方向力的情况下移动，会显示出这样的轨迹。三维随机漫步的一个有趣的方面是，即使起点很近，随着时间的推移，物体会散开。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi mv"><img src="../Images/46f2b27fe5a65bc63c5f7f1b15d0b2e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FF6IG3osB5Jfjx3mm0WIug.png"/></div></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">Simulating multiple random walks in the same 3D space</figcaption></figure><pre class="lm ln lo lp gt mb lk mc md aw me bi"><span id="4d69" class="mf mg it lk b gy mh mi l mj mk"># Define parameters for the walk</span><span id="b2d8" class="mf mg it lk b gy ml mi l mj mk">dims = 3<br/>n_runs = 10<br/>step_n = 1000<br/>step_set = [-1, 0 ,1]<br/>runs = np.arange(n_runs)<br/>step_shape = (step_n,dims)</span><span id="2403" class="mf mg it lk b gy ml mi l mj mk"># Plot</span><span id="7ba7" class="mf mg it lk b gy ml mi l mj mk">fig = plt.figure(figsize=(10,10),dpi=250)<br/>ax = fig.add_subplot(111, projection=’3d’)<br/>ax.grid(False)<br/>ax.xaxis.pane.fill = ax.yaxis.pane.fill = ax.zaxis.pane.fill = False<br/>ax.set_xlabel(‘X’)<br/>ax.set_ylabel(‘Y’)<br/>ax.set_zlabel(‘Z’)<br/> <br/>for i, col in zip(runs, colors):</span><span id="3fb9" class="mf mg it lk b gy ml mi l mj mk">    # Simulate steps in 3D</span><span id="7c9b" class="mf mg it lk b gy ml mi l mj mk">    origin = np.random.randint(low=-10,high=10,size=(1,dims))<br/>    steps = np.random.choice(a=step_set, size=step_shape)<br/>    path = np.concatenate([origin, steps]).cumsum(0)<br/>    start = path[:1]<br/>    stop = path[-1:]</span><span id="9e39" class="mf mg it lk b gy ml mi l mj mk">    # Plot the path</span><span id="7370" class="mf mg it lk b gy ml mi l mj mk">    ax.scatter3D(path[:,0], path[:,1], path[:,2],<br/>                 c=col,alpha=0.15,s=1);<br/>    ax.plot3D(path[:,0], path[:,1], path[:,2], <br/>              c=col, alpha=0.25,lw=0.25)<br/>    ax.plot3D(start[:,0], start[:,1], start[:,2],<br/>              c=col, marker=’+’)<br/>    ax.plot3D(stop[:,0], stop[:,1], stop[:,2],<br/>              c=col, marker=’o’);<br/><br/>plt.title(‘3D Random Walk - Multiple runs’)<br/>plt.savefig(‘plots/random_walk_3d_multiple_runs.png’,dpi=250);</span></pre></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><p id="c2b5" class="pw-post-body-paragraph kk kl it km b kn ko ju kp kq kr jx ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">在这篇文章中，我们讨论了如何在 1D、2D 和 3D 中模拟一次基本的随机漫步。我们可以使用不同的方法对群体表现出的随机游走进行描述性分析<em class="lg">(距离、位移、速度、速率、角度分布、指示器计数、限制比等)</em>。我们还可以模拟和讨论有向/有偏随机行走，其中下一步的方向取决于当前位置，这是由于某种形式的现有梯度或定向力。</p></div></div>    
</body>
</html>