# python NumPy 数组的搭便车指南

> 原文：<https://towardsdatascience.com/a-hitchhiker-guide-to-python-numpy-arrays-9358de570121?source=collection_archive---------1----------------------->

![](img/c520f3907e96c180732f77a1dc2f4255.png)

A hitchhiker guide to python NumPy Arrays

如果您正在使用 python 进行数据科学研究，那么您要么使用过 NumPy，要么肯定听说过它。大多数需要将数据存储在内存中的统计分析都使用 Numpy。

> 有人可能会问为什么是 NumPy？难道 python 列表或其他数据结构不能做同样的事情吗？

嗯，是也不是，在 NumPy 中没有什么是不能通过 python 列表或使用其他数据结构来完成的，但是，NumPy 提供了一个有效的存储和更好的方式来处理使用简单 API 的数学运算的数据，其好处远远超过了编写自己的代码。

> NumPy 为数学运算提供了高效的存储和更好的数据处理方式

# 为什么使用 NumPy 数组？

NumPy 用于创建 ***同构*** n 维数组(n = 1..n)。与 Python 列表不同，NumPy 数组的所有元素都应该是同一类型。因此，如果提供了数据类型，下面的代码无效

```
numpy_arr = np.array([1,2,"Hello",3,"World"], dtype=np.int32)  # Error
```

然而，对于 python 列表，这是一个有效的代码

```
py_arr = [1,2,"Hello",3,"World"]  # Valid Code
```

> 考虑到可以在 NumPy 数组上执行的数学运算，NumPy 数组被创建为同构数组。对于异构数据集，这是不可能的。

让我们看看 NumPy 为我们提供了什么额外的好处，以及它如何简化我们的编程生活，尤其是处理数学计算的编程。

## 1.NumPy 使用更少的内存来存储数据

与 python 列表相比，`NumPy`数组占用的内存要少得多。它还提供了指定内容的数据类型的机制，这允许进一步优化代码。

作为一个例子，我们可以使用 python list 和使用`numpy.array(...)`创建一个简单的 6 个元素的数组，它所占用的内存量的差异是相当惊人的。参见下面的例子

如果这种差异看起来令人生畏，那就准备好接受更多。如果我们知道我们计划拥有的单个数据的最大数量，就有可能对 NumPy 数组做进一步的优化。

在上面的例子中，NumPy 默认认为这些整数是`8 Bytes`整数，但是，如果我们知道数据的最大范围，我们可以用 NumPy 数组提供数据类型。例如，我们可以使用`1 Byte`整数存储到`255`的数字，使用`2 Bytes`整数存储到`65535`的数字

优化的内存分配不仅限于存储数字，它还扩展到存储字符串。但是，由于 NumPy 数组主要用于数学计算，string 将很少被存储和使用。然而，知道需求是否出现是很好的

类似地，NumPy 数组在存储浮点值方面提供了相当大的节省。

现在我们知道了 NumPy 的内存优势，让我们继续了解它如何允许我们创建多维数组

## 2.使用 NumPy 创建 n 维数组

n 维数组通常用于创建矩阵或张量，也主要用于数学计算目的。与基于 python 列表的 n 维数组相比，NumPy 不仅节省了内存使用，还提供了大量额外的好处，使数学计算变得容易

这是我们可以用 NumPy n 维数组做的一系列事情，否则很难做到。

*只要多重因子产生相同数量的元素，数组的维数就可以在运行时改变。例如，2 * 5 的矩阵可以转换为 5 * 2，1 * 4 可以转换为 2 * 2。这可以通过调用数组*上的 NumPy `*.reshape(...)*` *函数来完成*

*NumPy 也可以为一个数组生成一组预定义的数。使用* `*numpy.arange(...)*` *功能可以生成一组预定义的数字(包括小数步长)。这个函数的输出总是一维的数字集合。但是，我们可以对这个输出使用 reshape 来生成我们选择的维度。*

*NumPy 提供了使用预先填充的 1 和 0 创建 n 维数组的 API，其中矩阵的所有成员不是 0 就是 1。最有可能的用途之一是为机器学习创建一个稀疏或密集的矩阵。*

*默认情况下，NumPy 使用浮点* `*float64*` *数据类型来创建 1 和 0，但是可以使用* `*dtype*` *选项将数据类型更改为整数，如下图*

*正如* `*.reshape(x,y)*` *可以将一个数组转换成多维数组，同样，使用* `*.ravel()*`函数可以从任意多维数组创建一个一维数组

## 3.n 维数组的数学运算

如前所述，NumPy 不仅可以有效地存储数据，还可以非常容易地对数据进行数学运算。对 n 维数组的任何操作都与数学运算非常相似。

> NumPy n 维数组使得对其执行数学运算变得极其容易

这是 NumPy 的主要 USP，因为它被广泛用于数据分析社区。python 列表离它能做的还差得很远。例如，考虑将 python 列表乘以 2。这是我们将得到的

```
py_arr = [1,2,3] * 2
# Generates [1,2,3,1,2,3]
```

而 numpy 数组产生输出，每个数组元素乘以 2

```
np_arr = np.array([1,2,3]) * 2
# Generates [2,4,6]
```

类似地，我们也可以对 numpy 数组进行其他数学运算，如加、减和除

```
np_arr = np.array([1,2,3]) + 2
# Generates [3,4,5]
```

一个多维矩阵的运算就像我们使用两个数一样简单

```
np_arr1 = np.array([[1,2,3],[4,5,6]])
np_arr2 = np.array([[1,2,3],[4,5,6]])np_arr3 = np_arr1 * np_arr2
#Generates
# [[ 1  4  9]
# [16 25 36]]np_arr3 = np_arr1 + np_arr2
#Generates
# [[ 2  4  6]
# [ 8 10 12]]
```

NumPy 内置的数学函数还允许我们执行复杂的数学运算，如 sqrt、mean 和 median。

```
np.sqrt(np_arr1)
#generates
# [1\.         1.41421356 1.73205081]
# [2\.         2.23606798 2.44948974]]np.mean(np_arr1) #generates 3.5
np.median(np_arr1) #generates 3.5
```

还有额外的内置成员函数来获取数组的更多细节，包括 sum、min 和 max

```
np_arr1.sum()  # 21
np_arr1.min()  # 1
np_arr1.max()  # 6
```

## 4.在 NumPy 数组中查找元素

在处理数据集时，有时我们需要从可用的数据集中找到特定的数据。虽然 NumPy 为相同的功能提供了多种功能，但其中三种功能会比其他功能使用得更频繁。他们是`where, nonzero`和`count_nonzero`

`Where`和`nonzero`函数返回与 True 语句相关的索引。例如

```
np_arr = np.array([1,2,0,4,5])
find = np.where(np_arr > 2)
#returns [3,4]
```

和

```
np_arr = np.array([1,2,0,4,5])
find = np.nonzero(np_arr)
# return [0,1,3,4]
```

最后可以通过使用`count_nonzero(...)`函数来计算 numpy 数组中非零元素的个数

```
n_arr = np.array([1,2,3,0,3,0,2,0,0,2])
np.count_nonzero(n_arr) 
# returns 6
```

这些方法在计算矩阵的稀疏度或密度时非常有用。

在机器学习中有其自身用途的最后一种方法是找到 NumPy 数组的形状。这是使用`.shape`完成的。例如

```
n_arr = np.array([1,2,3,0,3,0,2,0,0,2])
n_arr.shape
# Generates => (10,)
n_arr = np.array([[1,2],[3,0]])
# Generates => (2,2)
```

## 5.最后的想法

上面提供的例子仅仅描述了 NumPy 功能的最小集合。虽然不全面，但是应该对什么是 NumPy 以及我们为什么要学习和使用它有足够的了解。

这就是这篇文章的全部内容。将在另一篇文章中提出另一组有趣的 NumPy 功能

感谢阅读…！！！

达克什