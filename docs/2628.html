<html>
<head>
<title>Getting Started with Intel Movidius</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">英特尔Movidius入门</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/getting-started-with-intel-movidius-d8ba13e7d3ae?source=collection_archive---------2-----------------------#2018-02-14">https://towardsdatascience.com/getting-started-with-intel-movidius-d8ba13e7d3ae?source=collection_archive---------2-----------------------#2018-02-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4c04e86b2ba90328da13379f9670307a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mlcorIL0FxY0hUrEeewMJw.jpeg"/></div></div></figure></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><p id="d0cd" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">英特尔Movidius是一款有趣的硬件，可以在类似Raspberry Pi的嵌入式系统上工作，支持神经网络计算。即使think只在Linux下受支持，我们也可以使用Oracle Virtual Box让它在Mac或Windows平台上工作。</p><p id="f5da" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">英特尔Movidius还支持Caffe和TensorFlow模型，典型的工作流程如下</p><figure class="le lf lg lh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ld"><img src="../Images/8207d3f2ec051009170f46d733ef1383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NsdTUYnx6gNLR9Oxc1fsEQ.jpeg"/></div></div><figcaption class="li lj gj gh gi lk ll bd b be z dk">Typical Intel Movidius workflow (Image courtesy: <a class="ae lm" href="https://movidius.github.io/ncsdk/" rel="noopener ugc nofollow" target="_blank">https://movidius.github.io/ncsdk/</a>)</figcaption></figure><p id="6f0d" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">完整文档可从英特尔Movidius NCSDK[1]获得</p><p id="8f30" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">在这篇文章中，我将重点介绍如何使用Ubuntu 16.x变体在Oracle Virtual Box和Rapsberry Pi 3 Model B环境上入门。</p><h1 id="26c5" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">Oracle虚拟机箱</h1><p id="98c0" class="pw-post-body-paragraph kf kg iq kh b ki ml kk kl km mm ko kp kq mn ks kt ku mo kw kx ky mp la lb lc ij bi translated">从Oracle Virtual Box下载[2]并安装扩展包。</p><p id="55b0" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">在安装Ubuntu 16.x之前，配置/添加以下USB设备。请注意，英特尔Movidius有两种模式，因此需要两种不同的设备配置</p><blockquote class="mq mr ms"><p id="47a2" class="kf kg mt kh b ki kj kk kl km kn ko kp mu kr ks kt mv kv kw kx mw kz la lb lc ij bi translated"><strong class="kh ir">配置1 </strong> <br/>名称:Movidius VSC环回设备【0100】<br/>厂商ID : 03e7 <br/>产品ID : f63b <br/>版本:0100 <br/>制造商:Movidius <br/>产品:VSC环回设备</p><p id="65e0" class="kf kg mt kh b ki kj kk kl km kn ko kp mu kr ks kt mv kv kw kx mw kz la lb lc ij bi translated"><strong class="kh ir">配置2 </strong> <br/>名称:m ovidius ltd . Movidius MA2X5X[0001]<br/>厂商ID : 03e7 <br/>产品ID : 2150 <br/>版本:0001 <br/>制造商:Movidius Ltd. <br/>产品:m ovidius MA2X5X</p></blockquote><p id="9aa7" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">如下图所示，使用配置1和配置2的Oracle Virtual Box USB设备的配置要求</p><figure class="le lf lg lh gt jr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/ae7b8ce3a9090ff928d67cb15d2e61d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*JWTAYAqPU_qmkRQ-vJvL_A.png"/></div><figcaption class="li lj gj gh gi lk ll bd b be z dk">Oracle Virtual Box USB setup</figcaption></figure><h1 id="39bd" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">树莓Pi 3型号B</h1><p id="73f1" class="pw-post-body-paragraph kf kg iq kh b ki ml kk kl km mm ko kp kq mn ks kt ku mo kw kx ky mp la lb lc ij bi translated">目前我正在使用树莓官网的NOOBS[3]。请注意，我们需要连接显示器和键盘+鼠标进行初始安装。之后，通过在Raspberry Pi 3 Model B上打开SSH，一切都将无头化。Raspberry的人从Raspberry Documentation[4]获得了关于打开SSH登录的很好的文档</p><p id="0839" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">Raspberry Pi需要做更多的工作来安装来自源代码[5]的OpenCV，其中包括<strong class="kh ir"> e </strong></p><p id="da5d" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated"><strong class="kh ir"> 1。增加交换空间</strong> <br/>我们还需要通过编辑<strong class="kh ir"> /etc/dphys-swapfile </strong>中的文件来增加交换空间，使用下面的命令，<strong class="kh ir">CONF _交换空间=2048 </strong>来拥有2GB的交换空间<br/>，然后发出下面的命令来生效</p><pre class="le lf lg lh gt my mz na nb aw nc bi"><span id="0c14" class="nd lo iq mz b gy ne nf l ng nh">$ sudo /etc/init.d/dphys-swapfile stop<br/>$ sudo /etc/init.d/dphys-swapfile start</span></pre><p id="4a4e" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">2 <strong class="kh ir">。我们将移除wolfram和libreoffice来节省一些NOOBS默认的空间</strong></p><pre class="le lf lg lh gt my mz na nb aw nc bi"><span id="fc99" class="nd lo iq mz b gy ne nf l ng nh">$ sudo apt-get purge wolfram-engine<br/>$ sudo apt-get purge libreoffice*<br/>$ sudo apt-get clean<br/>$ sudo apt-get autoremove</span></pre><p id="71b4" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated"><strong class="kh ir"> 3。安装依赖关系<br/> </strong>依赖关系包括构建工具和一些开发库，这些是构建Open CV所必需的</p><pre class="le lf lg lh gt my mz na nb aw nc bi"><span id="e8f6" class="nd lo iq mz b gy ne nf l ng nh">$ sudo apt-get update &amp;&amp; sudo apt-get upgrade<br/>$ sudo apt-get install build-essential cmake pkg-config<br/>$ sudo apt-get install libjpeg-dev libtiff5-dev libjasper-dev libpng12-dev<br/>$ sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev<br/>$ sudo apt-get install libxvidcore-dev libx264-dev<br/>$ sudo apt-get install libgtk2.0-dev libgtk-3-dev<br/>$ sudo apt-get install libcanberra-gtk*<br/>$ sudo apt-get install libatlas-base-dev gfortran<br/>$ sudo apt-get install python2.7-dev python3-dev</span></pre><p id="4b52" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated"><strong class="kh ir"> 4。下载Open CV源代码<br/> </strong>我们需要构建opencv和opencv_contrib源代码</p><pre class="le lf lg lh gt my mz na nb aw nc bi"><span id="4e90" class="nd lo iq mz b gy ne nf l ng nh">$ cd ~<br/>$ wget -O opencv.zip <a class="ae lm" href="https://github.com/Itseez/opencv/archive/3.3.0.zip" rel="noopener ugc nofollow" target="_blank">https://github.com/Itseez/opencv/archive/3.3.0.zip</a><br/>$ unzip opencv.zip<br/>$ wget -O opencv_contrib.zip <a class="ae lm" href="https://github.com/Itseez/opencv_contrib/archive/3.3.0.zip" rel="noopener ugc nofollow" target="_blank">https://github.com/Itseez/opencv_contrib/archive/3.3.0.zip</a><br/>$ unzip opencv_contrib.zip</span></pre><p id="2942" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated"><strong class="kh ir"> 5。编译开放CV源代码<br/> </strong>我们将从ARM平台的源代码中编译开放CV</p><pre class="le lf lg lh gt my mz na nb aw nc bi"><span id="8ee3" class="nd lo iq mz b gy ne nf l ng nh">$ cd ~/opencv-3.3.0/<br/>$ mkdir build<br/>$ cd build<br/>$ cmake -D CMAKE_BUILD_TYPE=RELEASE \<br/> -D CMAKE_INSTALL_PREFIX=/usr/local \<br/> -D OPENCV_EXTRA_MODULES_PATH=~/opencv_contrib-3.3.0/modules \<br/> -D ENABLE_NEON=ON \<br/> -D ENABLE_VFPV3=ON \<br/> -D BUILD_TESTS=OFF \<br/> -D INSTALL_PYTHON_EXAMPLES=OFF \<br/> -D BUILD_EXAMPLES=OFF ..<br/>$ sudo make install</span></pre><p id="88db" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated"><strong class="kh ir"> 6。打开CV <br/> </strong>的最后一步我们将把默认安装的库(cv2 . cpython-35m-arm-Linux-gnueabihf . so)移动为cv2.so</p><pre class="le lf lg lh gt my mz na nb aw nc bi"><span id="7c14" class="nd lo iq mz b gy ne nf l ng nh">$ cd /usr/local/lib/python3.5/site-packages/<br/>$ sudo mv cv2.cpython-35m-arm-linux-gnueabihf.so cv2.so</span></pre><p id="5e6e" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">7 .<strong class="kh ir">。安装TensorFlow <br/> </strong>我们需要为树莓Pi 3 Model B安装ARM版本的TensorFlow</p><pre class="le lf lg lh gt my mz na nb aw nc bi"><span id="b94c" class="nd lo iq mz b gy ne nf l ng nh">$ wget <a class="ae lm" href="https://github.com/lhelontra/tensorflow-on-arm/releases/download/v1.4.0/tensorflow-1.4.0-cp35-none-linux_armv7l.whl" rel="noopener ugc nofollow" target="_blank">https://github.com/lhelontra/tensorflow-on-arm/releases/download/v1.4.0/tensorflow-1.4.0-cp35-none-linux_armv7l.whl</a><br/>$ sudo pip3 install tensorflow-1.4.0-cp35-none-linux_armv7l.whl</span></pre><h1 id="e501" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">英特尔Movidius常规安装</h1><p id="ce0a" class="pw-post-body-paragraph kf kg iq kh b ki ml kk kl km mm ko kp kq mn ks kt ku mo kw kx ky mp la lb lc ij bi translated">这些步骤适用于Oracle Virtual Box和Raspberry Pi 3 Model B设置</p><pre class="le lf lg lh gt my mz na nb aw nc bi"><span id="7397" class="nd lo iq mz b gy ne nf l ng nh">$ sudo apt-get install git<br/>$ git clone <a class="ae lm" href="https://github.com/movidius/ncsdk" rel="noopener ugc nofollow" target="_blank">https://github.com/movidius/ncsdk</a><br/>$ cd ncsdk<br/>$ sudo make install</span></pre><h1 id="bce9" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">测试和基准测试</h1><p id="9a97" class="pw-post-body-paragraph kf kg iq kh b ki ml kk kl km mm ko kp kq mn ks kt ku mo kw kx ky mp la lb lc ij bi translated">我使用来自<a class="ae lm" href="https://github.com/movidius/ncappzoo" rel="noopener ugc nofollow" target="_blank">https://github.com/movidius/ncappzoo</a>的ncappzoo按照以下步骤做了一些基准测试</p><pre class="le lf lg lh gt my mz na nb aw nc bi"><span id="dde0" class="nd lo iq mz b gy ne nf l ng nh">$ git clone <a class="ae lm" href="https://github.com/movidius/ncappzoo" rel="noopener ugc nofollow" target="_blank">https://github.com/movidius/ncappzoo</a><br/>$ cd ncappzoo/apps/benchmarkncs<br/>$ ./mobilenets_benchmark.sh | grep FPS</span></pre><figure class="le lf lg lh gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/b916e62ae34ea5d2b280e80d2fb88e99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*gmxs15s00ehe_s7eXgH5Rg.png"/></div></figure><p id="ecac" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">使用时间命令<br/><strong class="kh ir">Raspberry Pi 3 Model B:</strong><br/>real 40m 56.595s<br/>user 36m 41.170s<br/>sys 0m 58.780s</p><p id="7d71" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated"><strong class="kh ir"> Oracle虚拟盒子:</strong> <br/>实11m52.631s <br/>用户4m43.956s <br/> sys 0m37.612s</p><p id="d353" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated"><strong class="kh ir">英特尔Movidius的性能似乎介于嵌入式系统(Raspberry Pi 3 Model B)和台式机/笔记本电脑系统(Oracle Virtual Box)之间。</strong>测试期间唯一的缺点是运行测试的时间，但我认为重要的一点是运行神经网络模型。</p><p id="04f6" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">根据英特尔Movidius官方网站[6]，可能的应用涵盖机器人、AR/VR、可穿戴设备和智能安防。我能想到的一个很酷的想法是修改Sun Founder[7]的机器人汽车解决方案，将英特尔Movidius作为自动驾驶能力和面部识别的视觉，可以检测入侵者。</p><p id="a28c" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">如果你对这篇文章有任何问题，请不要犹豫，在下面留言或者给我发邮件:<strong class="kh ir">me@chclab.net</strong></p><p id="f949" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">参考资料:-<br/>【1】【https://movidius.github.io/ncsdk/】<a class="ae lm" href="https://movidius.github.io/ncsdk/" rel="noopener ugc nofollow" target="_blank">【2】</a><a class="ae lm" href="https://www.virtualbox.org/wiki/Downloads" rel="noopener ugc nofollow" target="_blank">https://www.virtualbox.org/wiki/Downloads</a><br/>【3】<a class="ae lm" href="https://www.raspberrypi.org/downloads/" rel="noopener ugc nofollow" target="_blank">https://www.raspberrypi.org/downloads/</a><br/>【4】<a class="ae lm" href="https://www.raspberrypi.org/documentation/remote-access/ssh/" rel="noopener ugc nofollow" target="_blank">https://www . raspberrypi . org/documentation/remote-access/ssh/</a><br/>【5】<a class="ae lm" href="https://github.com/Itseez/opencv/archive/3.3.0.zip" rel="noopener ugc nofollow" target="_blank">https://github.com/Itseez/opencv/archive/3.3.0.zip</a><br/>【6】https://www.movidius.com/applications<br/>【7】<a class="ae lm" href="https://www.sunfounder.com/picar-s-kit-1502.html" rel="noopener ugc nofollow" target="_blank">https://www.sunfounder.com/picar-s-kit-1502.html【T43】</a></p></div></div>    
</body>
</html>