<html>
<head>
<title>Kalman filter: Intuition and discrete case derivation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">卡尔曼滤波器:直觉和离散情况推导</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/kalman-filter-intuition-and-discrete-case-derivation-2188f789ec3a?source=collection_archive---------1-----------------------#2017-03-04">https://towardsdatascience.com/kalman-filter-intuition-and-discrete-case-derivation-2188f789ec3a?source=collection_archive---------1-----------------------#2017-03-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="5425" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">介绍</h1><p id="0663" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在这篇文章中，我们将回顾离散卡尔曼滤波器的推导过程。我们将首先建立由离散动态控制的系统的方程，然后表达近似系统，计算误差协方差并计算最小化误差协方差的更新规则。由于经由卡尔曼滤波的估计涉及连续的测量和状态传播，所以在离散实现的情况下它们更容易理解。</p><p id="4f8f" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">这部分是我在石溪大学开发的高级控制系统课程的一部分。随着时间的推移，我会继续在medium上添加额外的注释，但如果你感兴趣，可以在这里找到完整的注释。相关概率概念的细节可以在介绍性的<a class="ae lo" href="https://mec560sbu.github.io/2016/10/14/Uncertainity/" rel="noopener ugc nofollow" target="_blank">课</a>中找到。首先，我们将讨论模型可能具有的不确定性类型。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lp"><img src="../Images/ae7ab1124e7b21d527e2a208ea6d4b39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_wOnlKTyRffhdxjOEQClYA.png"/></div></div></figure><p id="c370" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">综上所述，根据不确定性的类型，对模型的影响可能会有所不同。由于我们不知道真正的不确定性及其结构，一个安全的做法是假设潜在的误差是零中心高斯过程。这种假设没有错，因为在大多数情况下，我们至少能够使用系统识别方法近似地模拟系统。作为一个例子，考虑这样一种情况，我们得到状态和状态的导数，并对数据拟合一个线性模型。这给了我们一个近似的模型，我们可以假设任何与这个理想化模型的偏离都遵循高斯分布。</p><p id="d046" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">卡尔曼滤波直觉-I </strong></p><p id="6740" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">下面的动画展示了卡尔曼滤波器背后的直觉。状态按照系统动力学传播。因为我们不知道状态的真实值，所以我们基于测量来估计它们。由于这些测量是在不连续的时间进行的，所以真实的状态可能是什么是不确定的。然而，我们知道状态必须遵循一些近似的动力学。在下面的动画中，一个点以恒定的速度移动，因为位置、速度或加速度并不精确。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/4fbd563d35628d7bbebc164c7bbffdfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/1*K7zlqx1iyBSxxcA1t-0znA.gif"/></div></figure><p id="4994" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">由于不知道确切的位置、速度和加速度，红点的可能位置在一段时间后会发生偏离。这导致真实状态下的估计误差。当一个新的测量值到来时，我们可以使用这个信息来丢弃一些不太可能的值。在进一步描述之前，让我们澄清一些术语，</p><ul class=""><li id="df66" class="mc md iq kn b ko lj ks lk kw me la mf le mg li mh mi mj mk bi translated"><strong class="kn ir">状态传播</strong>是指在测量到来之前，我们允许系统跟随其动态并计算近似状态值的过程。</li><li id="0f36" class="mc md iq kn b ko ml ks mm kw mn la mo le mp li mh mi mj mk bi translated"><strong class="kn ir">先验估计值</strong>是在考虑新测量值之前，使用状态传播计算的值。</li><li id="f2ed" class="mc md iq kn b ko ml ks mm kw mn la mo le mp li mh mi mj mk bi translated"><strong class="kn ir">后验估计值</strong>是考虑新测量值后计算出的值。</li><li id="55d4" class="mc md iq kn b ko ml ks mm kw mn la mo le mp li mh mi mj mk bi translated">误差协方差是真实状态和估计值之间的误差。</li></ul><p id="c448" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">使用上面的术语，我们在测量可用之后执行状态传播。我们使用状态传播来计算状态概率分布的先验估计。一旦有了新的度量，我们就执行贝叶斯规则更新以获得更好的概率估计。下面给出了概率贝叶斯规则。这些摘自我关于<a class="ae lo" href="https://mec560sbu.github.io/2016/10/14/Uncertainity/" rel="noopener ugc nofollow" target="_blank">不确定性</a>的高级控制系统笔记。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mq"><img src="../Images/ba4a879185fb8f19e7ff033f78ab29f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WLjrfecf52IXahu6ju73UQ.png"/></div></div></figure><p id="d4a8" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">执行这个步骤给出了位置和速度的更好的估计，尽管事实上我们只有位置的估计。</p><p id="d273" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">卡尔曼滤波直觉-II </strong></p><p id="ab2f" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">我们将通过另一个例子来更好地理解卡尔曼滤波器如何将一个状态的测量值和系统动态结合起来，从而对测量状态和不测量状态给出更好的估计。</p><p id="77de" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">卡尔曼滤波器在两个主要步骤中执行状态估计。第一步涉及系统动力学的传播，以获得状态的先验概率，一旦获得测量值，就使用贝叶斯理论更新状态变量。下面的例子说明了这一点。考虑一辆汽车以固定速度沿直线行驶的情况。此外，假设我们只有位置的测量，而没有速度。开始时，传感器只知道位置，因此机器人状态可能所在的区域如下图所示，即机器人位于位置0，但速度可以是沿垂直线的任何值。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/114c03ae635bd65c30eba32fd9e76d7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/0*vMuePAk-spTgzMED.png"/></div></figure><p id="8bf8" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">现在考虑机器人移动1秒后的场景。当我们移动了1 s，新的位置就是之前的位置加上速度。所以匀速运动1秒后的概率分布就是下图的红点给出的。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/07c537561b968650ce6bc0477172d512.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/0*3nhB2R2O3-BEkURx.png"/></div></figure><p id="abeb" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">假设机器人以1的速度移动，下一个位置估计在1左右。通过在该点执行第二次测量，我们得到蓝色区域作为位置估计的可能值。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/46323115bacd48af9219bee1e459588a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/0*k-lH0G9707d2Qfxl.png"/></div></figure><p id="6604" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">因此，从系统动力学来看，我们期望新的位置在红色区域，从传感器来看，我们期望状态在蓝色区域。这两个分布之间的重叠区域非常小，我们可以说粒子的真实状态将位于这个区域。贝叶斯定理可以用来估计多元状态分布概率。沿着x轴和y轴呈现速度和位置的相应概率分布。将系统动态与状态测量相结合的过程是卡尔曼滤波器的基本原理。卡尔曼滤波器提供了良好的估计特性，在过程和测量服从高斯分布的特殊情况下是最优的。T3】</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/d547b8b4b8d893004ef28a09a3fd1678.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/0*XGJbGKY8Q2xcbGYq.png"/></div></figure><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mq"><img src="../Images/aeec0ed62e6e6b8b73dcf7ee53fd4741.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JKqhlQPZXRlDBbFIzFy2Ag.png"/></div></div></figure><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ms"><img src="../Images/402f69b4d45e992e6224a1dbb688d92a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uob9UDq6WJ9OhWXkttorJw.png"/></div></div></figure><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mt"><img src="../Images/8f39b2ca71d9172b1f7bf3f27b37d0d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j_FeCY0DClSDxLjp6NQTbw.png"/></div></div></figure><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mu"><img src="../Images/134d9ae69297b960ca02f31c0405398e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LVIDzUHoUYSedq8INhJHDA.png"/></div></div></figure><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mv"><img src="../Images/c147c870ee12c5f115330e453fca07ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rbs4lAEgG-w8H3EzloBd-g.png"/></div></div></figure><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mw"><img src="../Images/bb4f4d371b33dc4ee29d9e4dcff636d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x5pmhcOKACwe8Dfedi1N2g.png"/></div></div></figure><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mx"><img src="../Images/6eae7fbceab25a3205c2b9f94e3a7eb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zAqfOFq3YfJlru7T3FMbhQ.png"/></div></div></figure><p id="4282" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">一些更直观的解释:</p><ul class=""><li id="4dfa" class="mc md iq kn b ko lj ks lk kw me la mf le mg li mh mi mj mk bi translated">s是反过来衡量测量误差的灵敏度矩阵。因此，如果传感器噪声过大，R中的相应条目将会较高，通过求逆，来自该传感器的测量值将会减少。</li><li id="69bb" class="mc md iq kn b ko ml ks mm kw mn la mo le mp li mh mi mj mk bi translated">如果Q很高，即我们不知道真实的模型，并且我们的近似模型具有大的偏差，则先验协方差估计将会很大，这具有直观意义。</li><li id="639d" class="mc md iq kn b ko ml ks mm kw mn la mo le mp li mh mi mj mk bi translated">对于线性系统，增益项K充当来自先验预测的状态估计和基于测量的校正之间的加权因子。</li></ul><p id="aada" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">添加</strong></p><p id="fd21" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir"> NIS，收敛</strong></p><p id="4516" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">道歉</strong></p><p id="4a23" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">我很抱歉从我的笔记中复制粘贴屏幕截图。我还没有想出一个好的方法来合并介质中的方程。</p><p id="96e5" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">参考文献:</strong></p><p id="1686" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">上面所有的截图都来自我在石溪大学开发的一门高级控制系统课程。完整课程的链接是<a class="ae lo" href="https://mec560sbu.github.io/" rel="noopener ugc nofollow" target="_blank">https://mec560sbu.github.io/</a>。</p></div></div>    
</body>
</html>