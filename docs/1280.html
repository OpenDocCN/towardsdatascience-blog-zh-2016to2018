<html>
<head>
<title>Data Mining</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据挖掘</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-mining-e06cf1a0b7ee?source=collection_archive---------3-----------------------#2017-08-18">https://towardsdatascience.com/data-mining-e06cf1a0b7ee?source=collection_archive---------3-----------------------#2017-08-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e7d4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">2.熊猫数据结构和基本操作介绍</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/de412a2a6751d6f43a931e6fd99942f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*LQ-UAdZ0HBIFdEVj5swoeg.png"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Pandas Logo</figcaption></figure><p id="6806" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我已经在我的<a class="ae ln" href="https://medium.com/towards-data-science/data-mining-bc7feca95887" rel="noopener"> <strong class="kt ir">上一篇文章</strong> </a>中讨论了如何设置工具和数据挖掘的基本介绍。Pandas 基本上是作为一个库来管理数据结构的。该库还提供了一些对数据进行预处理和清理的重要操作。</p><h2 id="c1c9" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">将熊猫导入工作区</h2><p id="dc5d" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated"><code class="fe mm mn mo mp b">import pandas as pd</code>导入为<strong class="kt ir"> pd </strong>使其更简单，手更短。</p><blockquote class="mq mr ms"><p id="93da" class="kr ks mt kt b ku kv jr kw kx ky ju kz mu lb lc ld mv lf lg lh mw lj lk ll lm ij bi translated">导入特定功能<br/> <code class="fe mm mn mo mp b">from pandas import Series, DataFrame</code> <br/>我们将主要使用这两种数据结构</p></blockquote><h1 id="1f49" class="mx lp iq bd lq my mz na lt nb nc nd lw jw ne jx lz jz nf ka mc kc ng kd mf nh bi translated">熊猫数据结构</h1><h2 id="fa94" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">系列</h2><p id="4543" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">数组形式的数据结构，让标签从<strong class="kt ir"> 0 </strong>开始，一直递增。举个例子。</p><pre class="kg kh ki kj gt ni mp nj nk aw nl bi"><span id="0432" class="lo lp iq mp b gy nm nn l no np">In [1]: from pandas import Series<br/>In [2]: obj = Series([1, 2, 3, 4, 5, 6])<br/>In [3]: obj<br/>Out[3]:<br/>0    1<br/>1    2<br/>2    3<br/>3    4<br/>4    5<br/>5    6<br/>dtype: int64</span></pre><p id="9872" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您也可以使用自定义标签。</p><pre class="kg kh ki kj gt ni mp nj nk aw nl bi"><span id="adc9" class="lo lp iq mp b gy nm nn l no np">In [1]: from pandas import DataFrame, Series<br/>In [2]: obj = Series([4, 7, -5, 3], index=['d', 'b', 'a', 'c'])<br/>In [3]: obj<br/>Out[4]:<br/>d    4<br/>b    7<br/>a   -5<br/>c    3<br/>dtype: int64</span></pre><blockquote class="mq mr ms"><p id="419c" class="kr ks mt kt b ku kv jr kw kx ky ju kz mu lb lc ld mv lf lg lh mw lj lk ll lm ij bi translated">一些有用的特性<br/> *将字典转换为序列，<code class="fe mm mn mo mp b">s = Series({'age':23, 'name': 'anuradha'})</code>，<br/> *直接分配索引<code class="fe mm mn mo mp b">obj.index = ['attr 1', '<em class="iq">attr 2</em>', '<em class="iq">attr 3</em>']</code>，<br/> *索引可以有属性名<code class="fe mm mn mo mp b">obj.name = 'Population'</code></p></blockquote><h2 id="d5df" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">数据帧</h2><p id="599b" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">这些是表格数据的数据结构，非常类似于电子表格，可以包含大量数据。</p><pre class="kg kh ki kj gt ni mp nj nk aw nl bi"><span id="da7d" class="lo lp iq mp b gy nm nn l no np">In [1]: data = {'state': ['Ohio', 'Ohio', 'Ohio', 'Nevada', 'Nevada'], 'year': [2000, 2001, 2002, 2001, 2002], 'pop': [1.5, 1.7, 3.6, 2.4, 2.9]}</span><span id="72d6" class="lo lp iq mp b gy nq nn l no np">In [2]: data<br/>Out[2]:<br/>{'pop': [1.5, 1.7, 3.6, 2.4, 2.9],<br/>'state': ['Ohio', 'Ohio', 'Ohio', 'Nevada', 'Nevada'],<br/>'year': [2000, 2001, 2002, 2001, 2002]}</span><span id="11ed" class="lo lp iq mp b gy nq nn l no np">In [3]: frame = DataFrame(data)<br/>In [4]: frame<br/>Out[4]:<br/>pop   state  year<br/>0  1.5    Ohio  2000<br/>1  1.7    Ohio  2001<br/>2  3.6    Ohio  2002<br/>3  2.4  Nevada  2001<br/>4  2.9  Nevada  2002</span></pre><p id="da96" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在不深入研究上述数据结构的情况下，让我们继续研究一些功能，并在以后探索更深的领域。:)</p><h1 id="bec6" class="mx lp iq bd lq my mz na lt nb nc nd lw jw ne jx lz jz nf ka mc kc ng kd mf nh bi translated">过滤</h1><p id="a138" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">对于这个例子，让我们考虑下面这段代码。</p><pre class="kg kh ki kj gt ni mp nj nk aw nl bi"><span id="386c" class="lo lp iq mp b gy nm nn l no np">In [1]: from pandas import DataFrame, Series<br/>In [2]: import numpy as np</span><span id="41e6" class="lo lp iq mp b gy nq nn l no np">In [3]: data = DataFrame(np.arange(16).reshape(4,4), index=['Ohio', 'Colorado', 'Utah', 'New York'], columns=['one', 'two', 'three', 'four'])<br/>In [4]: data<br/>Out[4]:</span><span id="eee9" class="lo lp iq mp b gy nq nn l no np">          one  two  three  four</span><span id="fd8e" class="lo lp iq mp b gy nq nn l no np">Ohio        0    1      2     3<br/>Colorado    4    5      6     7<br/>Utah        8    9     10    11<br/>New York   12   13     14    15</span></pre><p id="3741" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们使用<code class="fe mm mn mo mp b">np.arange(16)</code>创建一个从 0 到 15 的元素数组，并使用<code class="fe mm mn mo mp b">reshape(4, 4)</code>使其成为一个 4x4 的矩阵。只是一组虚拟数据。</p><h2 id="2320" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">布尔比较</h2><pre class="kg kh ki kj gt ni mp nj nk aw nl bi"><span id="688b" class="lo lp iq mp b gy nm nn l no np">In [6]: data &gt; 5</span><span id="2870" class="lo lp iq mp b gy nq nn l no np">Out[6]:</span><span id="c7f9" class="lo lp iq mp b gy nq nn l no np">            one    two  three   four</span><span id="c094" class="lo lp iq mp b gy nq nn l no np">Ohio      False  False  False  False<br/>Colorado  False  False   True   True<br/>Utah       True   True   True   True<br/>New York   True   True   True   True</span></pre><h2 id="bdf0" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">代替</h2><p id="879c" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">我们提供了一个查询函数<code class="fe mm mn mo mp b">data &lt; 5</code>和一个替换操作<code class="fe mm mn mo mp b">= -1</code>来用-1 替换小于 5 的值。</p><pre class="kg kh ki kj gt ni mp nj nk aw nl bi"><span id="e1e5" class="lo lp iq mp b gy nm nn l no np">In [7]: data[data &lt; 5] = -1<br/>In [8]: data<br/>Out[8]:</span><span id="58cc" class="lo lp iq mp b gy nq nn l no np">          one  two  three  four<br/>Ohio       -1   -1     -1    -1<br/>Colorado   -1    5      6     7<br/>Utah        8    9     10    11<br/>New York   12   13     14    15</span></pre><h1 id="bbd4" class="mx lp iq bd lq my mz na lt nb nc nd lw jw ne jx lz jz nf ka mc kc ng kd mf nh bi translated">真实场景中的应用</h1><p id="1586" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">熊猫的一个直接应用是处理缺失值。大多数时候我们进行数据挖掘得到的数据并不是干净纯粹的数据。它们包含不一致数字的缺失数字。因此，我们需要把它们过滤掉，或者用一个替代的数字来代替。</p><h2 id="717c" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">过滤掉丢失的值</h2><p id="0599" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">创建带有缺失值(NaN 值或非数字值)的样本数组。</p><pre class="kg kh ki kj gt ni mp nj nk aw nl bi"><span id="060b" class="lo lp iq mp b gy nm nn l no np">In [9]: a = np.array([1,2,3,np.nan,4])<br/>In [10]: a<br/>Out[10]: array([  1.,   2.,   3.,  nan,   4.])<br/>In [11]: df = DataFrame(a)<br/>In [12]: df<br/>Out[12]:</span><span id="8210" class="lo lp iq mp b gy nq nn l no np">     0</span><span id="cfb6" class="lo lp iq mp b gy nq nn l no np">0  1.0<br/>1  2.0<br/>2  3.0<br/>3  NaN<br/>4  4.0</span></pre><p id="9666" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦我们有了缺失值/nan 的数据框，我们可以使用以下方式填充它们。这里我用-1 填充它。</p><pre class="kg kh ki kj gt ni mp nj nk aw nl bi"><span id="6b3e" class="lo lp iq mp b gy nm nn l no np">In [13]: df.fillna(-1)<br/>Out[13]:</span><span id="aa1b" class="lo lp iq mp b gy nq nn l no np">     0</span><span id="92c3" class="lo lp iq mp b gy nq nn l no np">0  1.0<br/>1  2.0<br/>2  3.0<br/>3 -1.0<br/>4  4.0</span></pre><p id="eba4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以在不同的柱子上使用不同的填充物。例如，第一列为 0.5，第三列为-1。注意:列编号从 0 开始。</p><pre class="kg kh ki kj gt ni mp nj nk aw nl bi"><span id="7be5" class="lo lp iq mp b gy nm nn l no np">df.fillna({1: 0.5, 3: -1})</span></pre><p id="8d7c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">可以用更聪明的方式比如填充使用 mean，其中<strong class="kt ir"> <em class="mt">也许</em> </strong>在某些情况下更有意义。</p><pre class="kg kh ki kj gt ni mp nj nk aw nl bi"><span id="4e21" class="lo lp iq mp b gy nm nn l no np">data = Series([1., NA, 3.5, NA, 7])<br/>data.fillna(data.mean())</span></pre><blockquote class="mq mr ms"><p id="63dd" class="kr ks mt kt b ku kv jr kw kx ky ju kz mu lb lc ld mv lf lg lh mw lj lk ll lm ij bi translated">这是对熊猫及其常用功能的简单介绍。随着我们继续前进，我们会发现更多。感谢阅读。</p></blockquote></div></div>    
</body>
</html>