<html>
<head>
<title>How to dedicate your laptop GPU to TensorFlow only, on Ubuntu 18.04.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 Ubuntu 18.04 上将笔记本电脑 GPU 专用于 TensorFlow？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189?source=collection_archive---------7-----------------------#2018-10-01">https://towardsdatascience.com/how-to-use-tensorflow-on-the-gpu-of-your-laptop-with-ubuntu-18-04-554e1d5ea189?source=collection_archive---------7-----------------------#2018-10-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1d68" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用 Ubuntu 18.04 将笔记本电脑的 100% GPU 内存专用于 TensorFlow 并非如此简单。在这篇文章中，你会找到一个完整的教程，一步一步地去做。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d0c5c32e2f9131e55d68c8d921036c99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uXtMhXM5fmKS1JEwOoV6Zw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Output of $ nvidia-smi at the end of this post</figcaption></figure><p id="9a46" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这篇文章分为三个部分:</p><ol class=""><li id="4743" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">检查您的 GPU 是否符合 TensorFlow 标准。</li><li id="a5af" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">在您的笔记本电脑上安装合适的驱动程序，TensorFlow 和所有必需的依赖项，以便在您的 GPU 上训练模型。</li><li id="4657" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">安装自定义驱动程序以确保只有 TensorFlow 可以使用 GPU 内存。</li></ol></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="650c" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">检查您的 GPU 是否符合 TensorFlow 标准。</h1><p id="5f68" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">走向你的终端，输入:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="00af" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这段代码将列出所有的 PCI 设备，并过滤 NVIDIA 设备。<br/>在我的例子中，前面命令的结果是:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="a35a" class="nq mn iq nm b gy nr ns l nt nu">01:00.0 3D controller: NVIDIA Corporation GM108M [GeForce 940MX] (rev a2)</span></pre><p id="ddb1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">(我的笔记本电脑是小米笔记本 Air 13”配显卡 NVIDIA GeForce 940MX。)</p><p id="7ade" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果什么都没有出现，对不起，但似乎你没有任何<strong class="kx ir"> NVIDIA </strong> GPU，所以你将无法使用 TensorFlow 与它(但它仍然有可能与你的 CPU！).</p><p id="ef6c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果出现一条线，那我们走！</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="9e56" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">在您的笔记本电脑上安装合适的驱动程序，TensorFlow 和所有必需的依赖项，以便在您的 GPU 上训练模型。</h1><h2 id="c773" class="nq mn iq bd mo nv nw dn ms nx ny dp mw le nz oa my li ob oc na lm od oe nc of bi translated">安装 NVIDIA 专有驱动程序。</h2><p id="e7d7" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">配备 NVIDIA 显卡的现代笔记本电脑通常配备 Optimus 技术。Optimus 技术意味着你的笔记本电脑实际上有 2 个图形芯片:第一个位于主板上，靠近 CPU。第二个在你的 NVIDIA 卡上。默认情况下，在 Ubuntu 18.04 上，不使用 NVIDIA 卡。你必须安装特定的驱动程序才能使用它。</p><p id="c67c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要安装它们，非常简单:</p><ul class=""><li id="d5fd" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq og lx ly lz bi translated">转到您的<strong class="kx ir">软件&amp;更新</strong>应用程序</li><li id="c9a7" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">点击标签<strong class="kx ir">附加驱动</strong></li><li id="cb7c" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated"><wait a="" little="" bit=""/></li></ul><p id="b46c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我的笔记本电脑上，我有:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bb30191136bfc0d4043ae6d68b49d6ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WR1Y1kVEAWnJvrJD7_AWWw.png"/></div></div></figure><p id="622d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以看到没有使用 NVIDIA 二进制驱动。要修复它:</p><ul class=""><li id="af9f" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq og lx ly lz bi translated">点击使用<strong class="kx ir"> NVIDIA 二进制驱动</strong>，然后点击<strong class="kx ir">应用更改</strong></li><li id="78c8" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated"><wait a="" little="" bit=""/></li><li id="ec49" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">完成后，重新启动计算机</li></ul><p id="79e0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">重新启动计算机后，打开终端写下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="61f8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我的计算机上，我得到了以下结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/a1a0ccd7860a700d9ab33011c978ba54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mnuJE0W2Ot0r4eT7d3lGFQ.png"/></div></div></figure><p id="3d98" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">显示<strong class="kx ir"> NVIDIA </strong>显卡正在使用中。</p><h2 id="8249" class="nq mn iq bd mo nv nw dn ms nx ny dp mw le nz oa my li ob oc na lm od oe nc of bi translated">CUDA 9.0 工具包安装</h2><p id="09b4" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">TensorFlow 需要 CUDA 9.0 才能使用你的 GPU。让我们安装它。<br/>你应该<strong class="kx ir">不要</strong>安装其他版本的 CUDA，因为 TensorFlow 不会接受。</p><ul class=""><li id="d141" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq og lx ly lz bi translated">进入<a class="ae oi" href="https://developer.nvidia.com/cuda-90-download-archive" rel="noopener ugc nofollow" target="_blank"> CUDA 工具包 9.0 下载页面</a></li><li id="e12a" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">点击<strong class="kx ir"> Linux </strong>，然后点击<strong class="kx ir"> </strong>你的架构(可能是<strong class="kx ir"> x86_64 </strong>，然后点击<strong class="kx ir"> Ubuntu </strong>，然后点击<strong class="kx ir"> 17.04 </strong>(因为用于 Ubuntu 18.04 的 CUDA 9.0 不可用，但我们会做需要做的事情来让它工作)，然后点击<strong class="kx ir"> </strong>然后点击<strong class="kx ir"> runfile (local) </strong>，然后点击<strong class="kx ir">下载<strong class="kx ir"><br/>(不要选择除<strong class="kx ir"> runfile(本地)</strong>之外的其他<strong class="kx ir">安装程序类型</strong>，否则我们安装 CUDA 会有一些麻烦)。</strong></strong></li><li id="0ad6" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">在控制台中，运行:</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="d495" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">不要忘记“<strong class="kx ir"> —覆盖</strong>”选项，否则安装程序会抱怨它与 GCC 7.3(Ubuntu 18.04 提供的 GCC 版本)不兼容。<br/>“<strong class="kx ir">—覆盖</strong>”选项将强制安装程序使用可用的 GCC 版本，这很好。</p><ul class=""><li id="7995" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq og lx ly lz bi translated">阅读 EULA(如果你想的话)，然后按下“<strong class="kx ir"> q </strong>，然后写下“<strong class="kx ir">接受</strong>”。</li><li id="b321" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">关于问题<em class="oj">“您正试图在不支持的配置上安装。您希望继续吗？”</em>回答<em class="oj"> </em> <strong class="kx ir">是</strong> <em class="oj">。</em></li><li id="a495" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">关于“<em class="oj">为 Linux-x86_64 384.81 安装 NVIDIA 加速图形驱动？”</em>回答<strong class="kx ir">否</strong>(非常重要！).</li><li id="1d25" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">关于<em class="oj">的问题“安装 CUDA 9.0 工具包？”</em>回答<em class="oj"> </em> <strong class="kx ir">是</strong> <em class="oj">。</em></li><li id="53e6" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">在问题<em class="oj">“输入工具箱位置”</em>上点击<strong class="kx ir">进入</strong>。</li><li id="0711" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">关于问题<em class="oj">“您希望使用‘sudo’运行安装吗？”</em>回答<strong class="kx ir">是</strong>然后输入你的密码。</li><li id="6d0c" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">关于问题<em class="oj">“要不要在/usr/local/cuda 安装一个符号链接？”</em>回答<em class="oj"> </em> <strong class="kx ir">是</strong> <em class="oj">。</em></li><li id="ffbe" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">关于问题<em class="oj">“安装 CUDA 9.0 样品？”</em>回答<em class="oj"> </em> <strong class="kx ir">没有</strong> <em class="oj">。</em></li><li id="cd08" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">安装完成后，在文件<strong class="kx ir"> ~/中添加以下两行。bashrc </strong>(或者 to <strong class="kx ir"> ~/。zshrc </strong>如果使用<strong class="kx ir"> ZSH </strong></li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="e49c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">恭喜你！你刚刚在<strong class="kx ir"> Ubuntu 18.04 </strong>上安装了<strong class="kx ir"> CUDA 9.0 </strong>！</p><h2 id="1aa5" class="nq mn iq bd mo nv nw dn ms nx ny dp mw le nz oa my li ob oc na lm od oe nc of bi translated">NVIDIA cuDNN 安装。</h2><p id="5068" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">TensorFlow 还需要 NVIDIA cuDNN 来使用你的 GPU。让我们安装它。</p><ul class=""><li id="793d" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq og lx ly lz bi translated">继续<a class="ae oi" href="https://developer.nvidia.com/cudnn" rel="noopener ugc nofollow" target="_blank"> NVIDIA cuDNN 页面</a>。</li><li id="d0b9" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">点击<strong class="kx ir">下载 cuDNN </strong>。</li><li id="e807" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">如果您还没有帐户，请创建一个帐户(这是免费的)。</li><li id="11c9" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">点击与<strong class="kx ir"> CUDA 9.0 </strong>兼容的最新<strong class="kx ir"> cuDNN </strong>版本。</li><li id="3a86" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">点击链接<strong class="kx ir"> cuDNN … for Linux </strong>。</li><li id="1029" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">提取下载的文件。</li><li id="ed4f" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">从提取的下载文件中，将<strong class="kx ir"> cuda/include </strong>的内容复制(可能需要 root 权限)到<strong class="kx ir"> /usr/local/cuda/include </strong>。</li><li id="4669" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">从提取的下载文件中，复制<strong class="kx ir"> cuda/lib64 </strong>到<strong class="kx ir"> /usr/local/cuda/lib64 </strong>的所有<strong class="kx ir"> libcudnn.so* </strong>文件(可能需要 root 权限)。<br/>(无需复制<strong class="kx ir">)。一个"</strong>文件)</li></ul><p id="7ee7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">恭喜你！你刚刚在<strong class="kx ir"> Ubuntu 18.04 </strong>上安装了<strong class="kx ir"> NVIDIA cuDNN </strong>！</p><h2 id="0887" class="nq mn iq bd mo nv nw dn ms nx ny dp mw le nz oa my li ob oc na lm od oe nc of bi translated">TensorFlow 和 TensorFlow GPU 安装。</h2><ul class=""><li id="e1e1" class="lr ls iq kx b ky ne lb nf le ok li ol lm om lq og lx ly lz bi translated">如果<strong class="kx ir"> pip </strong>尚未安装，用以下工具安装:</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><ul class=""><li id="51ef" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq og lx ly lz bi translated">安装 TensorFlow 和 TensorFlow GPU</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="b03a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果只安装<strong class="kx ir"> TensorFlow </strong>，<strong class="kx ir"> TensorFlow </strong>会使用 CPU。<br/> <strong class="kx ir"> TensorFlow </strong>安装<strong class="kx ir"> TensorFlow GPU </strong>后才会使用 GPU。</p><p id="5ff1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">恭喜你！你刚刚在<strong class="kx ir"> Ubuntu 18.04 </strong>上安装了<strong class="kx ir"> TensorFlow </strong>和<strong class="kx ir"> TensorFlow GPU </strong>！</p><p id="e536" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们训练一个 MNIST 模特吧！</p><ul class=""><li id="91a1" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq og lx ly lz bi translated">在一个全新的控制台中，下载以下文件。它包含一个简单的全连接(带有一个隐藏层)网络来识别手写数字。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="56de" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该脚本将训练 5 个时期(这意味着训练集的每个示例将在训练期间被算法看到 5 次)。</p><p id="a582" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">出于某种原因，安装完所有这些东西后，第一次培训的第一个时期相当长(在我的电脑上只有 5 分钟)。也许有一些编译，因为在这段时间里，我的一个 CPU 被完全使用。<br/>训练时间比其他所有训练都更“平常”。</p><p id="e2d8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在另一个控制台中，您可以编写:</p><p id="c152" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它会每秒刷新一次<strong class="kx ir"> nvidia-smi </strong>的输出。当 Python 脚本运行时，您应该在底部看到一行带有<strong class="kx ir">进程名:Python </strong>的内容，并为其分配了一定数量的内存。此外，<strong class="kx ir"> Volatile GPU-Util </strong>应该显示一个工作的 GPU。</p><p id="93e4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">恭喜你！你刚刚在装有<strong class="kx ir"> Ubuntu 18.04 </strong>的笔记本电脑上，用<strong class="kx ir"> TensorFlow </strong>和你的 GPU 训练了你的第一个模型！</p><p id="e593" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">不幸的是，正如<strong class="kx ir"> $ nvidia-smi </strong>的输出所示，你的 GPU 的大量内存被用于其他事情，而不是训练你的模型。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="4575" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">安装自定义驱动程序以确保只有 TensorFlow 可以使用 GPU 内存。</h1><p id="07b9" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">在这一部分，我们将看到如何将你的 GPU 内存 100%奉献给<strong class="kx ir"> TensorFlow </strong>。基本上我们会用<strong class="kx ir"> NVIDIA </strong>芯片做<strong class="kx ir"> TensorFlow </strong>，其余(包括图形显示)用<strong class="kx ir"> Intel </strong>芯片。</p><h2 id="9478" class="nq mn iq bd mo nv nw dn ms nx ny dp mw le nz oa my li ob oc na lm od oe nc of bi translated">下载 NVIDIA 驱动程序安装运行文件。</h2><ul class=""><li id="98eb" class="lr ls iq kx b ky ne lb nf le ok li ol lm om lq og lx ly lz bi translated">进入<a class="ae oi" href="https://www.nvidia.com/Download/index.aspx" rel="noopener ugc nofollow" target="_blank"> NVIDIA 驱动程序安装页面</a></li><li id="ab33" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">选择您的显卡(如果您想查看 Linux，请不要忘记点击<strong class="kx ir">“显示所有操作系统”</strong>)。</li><li id="7298" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">下载文件。</li></ul><p id="8c5a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">安装自定义 NVIDIA 驱动程序。</strong></p><p id="38bd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">暂时，我们需要关闭<strong class="kx ir"> X 服务器</strong>，这意味着你将无法访问 Ubuntu 的窗口界面(因此也无法访问这篇文章……)。</p><p id="3cb0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，请打印、写下或在其他设备上打开这篇文章，比如你的手机。</p><p id="980e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您还需要您的登录名，因此如果您不知道它，只需在控制台中写入:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><ul class=""><li id="f98c" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq og lx ly lz bi translated">要关闭<strong class="kx ir"> X 服务器</strong>，在控制台中写入:</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><ul class=""><li id="eb1a" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq og lx ly lz bi translated">重启。</li><li id="7732" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">输入您的登录名和密码。</li><li id="02d6" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">进入您下载驱动程序的文件夹，然后写下:</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="c4be" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这个命令行将安装驱动程序而不处理 X 服务器(所以这个驱动程序不会用于图形显示目的)。</p><ul class=""><li id="1dcc" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq og lx ly lz bi translated">关于问题<em class="oj">“发行版提供的预装脚本失败！您确定要继续吗？”</em>回答<em class="oj"> </em> <strong class="kx ir">继续安装</strong> <em class="oj">。</em></li><li id="ead8" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">关于问题<em class="oj">“警告:不会安装 nvidia-drm 模块。因此，DRM-MMS 将无法与此 NVIDIA 驱动程序安装一起使用。</em></li><li id="f198" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">关于问题<em class="oj">“你想向 DKMS 注册内核模块源代码吗？这将所有 DKMS 自动建立一个新的模块，il fou 安装一个不同的内核后？”</em>回答<em class="oj"> </em> <strong class="kx ir">是</strong> <em class="oj">。</em></li><li id="1cf9" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq og lx ly lz bi translated">关于<em class="oj">的问题【安装 NVIDIA 的 32 位兼容库】</em>回答<em class="oj"> </em> <strong class="kx ir">否</strong> <em class="oj">。</em></li></ul><p id="691c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在应该开始安装驱动程序了。</p><p id="b4db" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果过了一会儿(比如说 5 分钟)，安装程序卡在<br/> <em class="oj">构建模块上。(这可能需要一段时间)</em> <br/>然后只需按几次<strong class="kx ir">回车</strong>。如果多次按下<strong class="kx ir"> Enter </strong>没有任何作用，只需打开一个新的终端(例如使用<strong class="kx ir"> Ctrl + Alt +F3 </strong>)并从行<em class="oj">“输入您的登录名和密码”</em>重新执行协议。现在应该可以了。</p><p id="767d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，我们必须告诉 NVIDIA 配置工具打开英特尔图形卡，然后我们必须告诉 NVIDIA 配置工具打开 NVIDIA 图形卡，然后我们必须重新启动。不清楚为什么我们应该这样做，但是如果我们不这样做，我们可能会在下次重新启动时卡在<em class="oj">“启动的登录服务”</em>上。然后我们必须重新打开<strong class="kx ir"> X 服务器</strong>。</p><p id="5d11" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这最后四个步骤总结如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="fb13" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">重启后，</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="52d6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在应该显示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/db9ca0507d66a27944f2e72d09755b74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RsMoVKH9XghHTDrq2WMvqQ.png"/></div></div></figure><p id="8ea8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如我们所见，没有进程使用 NVIDIA GPU。</p><p id="140a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，如果我们重新运行<strong class="kx ir"> MNIST </strong> python 文件(这一次，第一个纪元可能需要几分钟)，同样的<strong class="kx ir"> NVIDIA SMI </strong>命令应该显示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/3bb65e0ecda9a38b950a11ef408c0204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RskW7J9rwntPHEQ0ZmO-TA.png"/></div></div></figure><p id="beb0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们到了！只有 TensorFlow 使用 GPU 内存！</p><p id="177f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">python 脚本完成后，应再次显示消息<em class="oj">“未找到正在运行的进程”</em>。</p><p id="d3db" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">还有一件事:如果你不小心忘记了步骤<br/><em class="oj">“sudo prime-select Intel/NVIDIA”<br/></em>，如果在重启过程中你陷入了奇怪的状态<em class="oj">“Started log in Service”</em>，那么只需等待 5 分钟以获得登录/密码命令/提示，然后再写一次。</p><p id="f5ab" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">机器学习快乐！</p></div></div>    
</body>
</html>