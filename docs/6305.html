<html>
<head>
<title>Data Studio with BigQuery: 2018's best practices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 BigQuery 的数据工作室:2018 年最佳实践</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-studio-with-bigquery-2018s-best-practices-d2824620cb35?source=collection_archive---------12-----------------------#2018-12-06">https://towardsdatascience.com/data-studio-with-bigquery-2018s-best-practices-d2824620cb35?source=collection_archive---------12-----------------------#2018-12-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/3027250c94d344b886f04475bec8f400.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wjLHgGCTNEP-XIxUYpSCjA.png"/></div></div></figure><div class=""/><div class=""><h2 id="82bf" class="pw-subtitle-paragraph jy ja jb bd b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dk translated">多年来，我一直使用 BigQuery 和公共数据集<a class="ae kq" href="https://medium.com/@hoffa" rel="noopener">来发布有趣的文章</a>——现在有了 Data Studio，我可以让它们在媒体上互动。在这里找到我们迄今为止开发的使 BigQuery 和 Data Studio 协同工作的最佳实践。</h2></div><p id="6bf4" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">【2019 重要更新:BigQuery 和 Data Studio 之间要使用 <a class="ae kq" href="https://cloud.google.com/bi-engine/docs/overview" rel="noopener ugc nofollow" target="_blank"> <strong class="kt jc"> BI 引擎</strong> </a> <strong class="kt jc"/></p><div class="ip iq gp gr ir ln"><a href="https://cloud.google.com/bi-engine/docs/overview" rel="noopener  ugc nofollow" target="_blank"><div class="lo ab fo"><div class="lp ab lq cl cj lr"><h2 class="bd jc gy z fp ls fr fs lt fu fw ja bi translated">BigQuery BI 引擎介绍| BI 引擎|谷歌云</h2><div class="lu l"><h3 class="bd b gy z fp ls fr fs lt fu fw dk translated">测试版该产品或功能处于预发布状态，可能会有变化或支持有限。有关更多信息…</h3></div><div class="lv l"><p class="bd b dl z fp ls fr fs lt fu fw dk translated">cloud.google.com</p></div></div></div></a></div><p id="b256" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">谷歌数据工作室完全免费，你也可以使用它。将它与许多不同的来源联系起来真的很容易，包括 BigQuery。这就是我现在所做的:我用 BigQuery 分析数据，我把结果连接到 Data Studio，我让我的仪表板交互，我<a class="ae kq" rel="noopener" target="_blank" href="/when-will-stack-overflow-reply-how-to-predict-with-bigquery-553c24b546a3">在媒体上发布它们</a>。</p><figure class="lw lx ly lz gt is"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk">Interactive dashboard — click to play with it: <a class="ae kq" href="https://medium.freecodecamp.org/world-cup-all-the-goals-in-2018-b52e5ef53e0a" rel="noopener ugc nofollow" target="_blank">World Cup goals</a></figcaption></figure><p id="02cd" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是也有一些挑战。如您所知，BigQuery 允许您在几秒钟内分析大量数据——并且它只对您运行的每个查询收费。我们甚至有一个<a class="ae kq" href="https://cloud.google.com/free/" rel="noopener ugc nofollow" target="_blank">免费的月层</a>用于查询，所以你可能最终什么也不用付。但是如果您将 BigQuery 连接到一个流行的仪表板，那么您的用户最终可能会代表您生成大量的查询——这意味着您最终会有一个巨大的 BigQuery 账单。我们不想那样。</p><p id="aaa9" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在 Google Next 18 上，Data Studio 的开发者代言人— <a class="mg mh ep" href="https://medium.com/u/be4fab220f85?source=post_page-----d2824620cb35--------------------------------" rel="noopener" target="_blank"> Minhaz Kazi </a> —和我做了一个关于<a class="ae kq" href="https://www.youtube.com/watch?v=KG8CpA3m1q4" rel="noopener ugc nofollow" target="_blank">最佳实践的演讲，我们已经开发了这些最佳实践来让我们最喜欢的产品协同工作。</a></p><figure class="lw lx ly lz gt is"><div class="bz fp l di"><div class="mi mb l"/></div></figure><p id="e36c" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如，避免将新查询从 Data Studio 推入 BigQuery 的最简单方法是将查询结果具体化到 Data Studio 中。没错，一旦有了想要可视化的 BigQuery 结果或表，就可以使用 extract 按钮来实现，Data Studio 将为您提供一种简单的方法来保存和刷新这些数据的副本。</p><p id="2755" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但目前该功能仍在开发中，它将受到某些限制——所以我们还分享了一些其他选项，以在 Data Studio 和 BigQuery 之间创建一个廉价的层。</p><p id="6aea" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如，你可以使用 Google Apps 脚本<a class="ae kq" href="https://developers.google.com/apps-script/guides/triggers/#available_types_of_triggers" rel="noopener ugc nofollow" target="_blank">安排查询</a>，并将结果推送到 Google 云存储中。<code class="fe mj mk ml mm b">csv</code>文件。然后，您可以将 Data Studio 连接到该文件，该文件将根据您的计划进行刷新，您的用户将能够快速浏览结果。</p><figure class="lw lx ly lz gt is"><div class="bz fp l di"><div class="mn mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk">Predicting <a class="ae kq" rel="noopener" target="_blank" href="/when-will-stack-overflow-reply-how-to-predict-with-bigquery-553c24b546a3">when will Stack Overflow reply</a></figcaption></figure><p id="1bfa" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但这仅在结果达到一定规模时有效。在其他情况下，使用支持按键查找的数据库可能更有意义。一旦您知道您的可视化只需要键查找来检索数据，而不是在 BigQuery 中扫描一个表，您就可以将 Data Studio 连接到一个传统的数据库，只从其中获取单个行。在这种情况下，您可以将 BigQuery 结果导出到托管在<a class="ae kq" href="https://cloud.google.com/sql/docs/" rel="noopener ugc nofollow" target="_blank">云 SQL </a>上的 MySQL 数据库，添加所需的索引，并快速获得便宜的结果。</p><figure class="lw lx ly lz gt is"><div class="bz fp l di"><div class="mo mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk">Reddit kept getting slower throughout 2018. Source: <a class="ae kq" href="https://github.com/rviscomi/crux-cookbook" rel="noopener ugc nofollow" target="_blank">Crux</a>.</figcaption></figure><p id="12ff" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是有时您可能有更复杂的需求——例如，当您想让一个数据源对许多用户可用，并让他们构建自己的自定义可视化时。在这种情况下，您可以使用 Apps 脚本创建一个 Data Studio <a class="ae kq" href="https://developers.google.com/datastudio/connector/" rel="noopener ugc nofollow" target="_blank">社区连接器</a>，并在其中设计您自己的缓存逻辑。</p><p id="4b88" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在完整的演讲中，您可以从 Minhaz 的例子中看到这一点——他<a class="ae kq" href="https://developers.google.com/web/updates/2018/08/chrome-ux-report-dashboard" rel="noopener ugc nofollow" target="_blank">创建了一个任何人只需点击几次</a>就可以使用的连接器，他们获得了一个自定义和可定制的可视化——在 BigQuery 中托管了新数据——无需任何编码——SQL 或其他。</p><figure class="lw lx ly lz gt is"><div class="bz fp l di"><div class="mi mb l"/></div></figure><p id="a3c3" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">总的来说，如果您想连接 BigQuery 和 Data Studio 来创建一个交互式仪表板，并且您想让每个人都可以使用这个仪表板，请记住考虑您想在 BigQuery 和 Data Studio 之间有一个什么样的层。请继续关注，因为在谷歌，我们总是在思考如何让这种联系更加强大和令人敬畏。</p><p id="8d29" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt jc">重要 2019 更新:BigQuery 和 Data Studio </strong>之间要使用 <a class="ae kq" href="https://cloud.google.com/bi-engine/docs/overview" rel="noopener ugc nofollow" target="_blank"> <strong class="kt jc"> BI 引擎</strong> </a> <strong class="kt jc"/></p></div></div>    
</body>
</html>