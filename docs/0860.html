<html>
<head>
<title>Data Mining Friends for Fun &amp; Profit*</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">娱乐和盈利的数据挖掘朋友*</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-mining-friends-for-fun-profit-a08508674b27?source=collection_archive---------2-----------------------#2017-07-02">https://towardsdatascience.com/data-mining-friends-for-fun-profit-a08508674b27?source=collection_archive---------2-----------------------#2017-07-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ee70" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Python 网页抓取、NLP(情感分析)、IBM Watson API &amp; Max/MSP 音频编程</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/32b5287dcb177a4c1f0e2a3368784070.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OH73OAgfd6HBx29rO3FGaA.jpeg"/></div></div></figure><p id="b4aa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">* <em class="ln">形象地说</em></p><p id="efee" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最近<a class="ae lo" href="https://medium.com/@dnlmc/the-logistic-map-the-onset-of-chaos-sonified-46fd73e25965" rel="noopener">我又一次被</a>说服去做一些音乐/艺术方面的事情，这一次是在一个好朋友的<a class="ae lo" href="https://vagueaudiotapes.bandcamp.com/album/denton-tschudy" rel="noopener ugc nofollow" target="_blank">磁带发行</a> &amp;生日庆祝会上。我又一次利用这个机会做了些无聊的电脑工作。</p><p id="c524" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是 python 代码和输出示例，我使用它们来收集公共(ish)数据，执行基本的 NLP /情感分析，并将结果输出馈送到 IBM Watson 以返回 600 个合成语音文件，然后我通过一个定制的<a class="ae lo" href="https://en.wikipedia.org/wiki/Max_(software)" rel="noopener ugc nofollow" target="_blank"> Max </a>程序处理和操作这些文件。一些代号被更改以保护无辜者😬).</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h2 id="d0e7" class="lw lx iq bd ly lz ma dn mb mc md dp me la mf mg mh le mi mj mk li ml mm mn mo bi translated">用 Python 刮网，硒&amp;美汤</h2><p id="c5f4" class="pw-post-body-paragraph kr ks iq kt b ku mp jr kw kx mq ju kz la mr lc ld le ms lg lh li mt lk ll lm ij bi translated"><em class="ln">(注:本节内容是欠</em> <a class="ae lo" href="https://www.udemy.com/web-scraping-with-python-beautifulsoup/" rel="noopener ugc nofollow" target="_blank"> <em class="ln">本 Udemy 课程</em> </a> <em class="ln">我几个月前闲着没事完成的)</em></p><p id="2a58" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">作为对上述朋友生日的一种敬意，我想我应该挖掘一些他们的公共网络活动&amp;然后… <em class="ln">用它做些事情。</em></p><p id="6c33" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我启动了以下 python 库:</p><ul class=""><li id="d234" class="mu mv iq kt b ku kv kx ky la mw le mx li my lm mz na nb nc bi translated"><a class="ae lo" href="https://selenium-python.readthedocs.io/" rel="noopener ugc nofollow" target="_blank">硒</a></li><li id="d6fa" class="mu mv iq kt b ku nd kx ne la nf le ng li nh lm mz na nb nc bi translated"><a class="ae lo" href="https://pypi.python.org/pypi/fake-useragent" rel="noopener ugc nofollow" target="_blank">假冒用户代理</a></li><li id="f6b6" class="mu mv iq kt b ku nd kx ne la nf le ng li nh lm mz na nb nc bi translated"><a class="ae lo" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#" rel="noopener ugc nofollow" target="_blank">美汤</a></li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="15be" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了避免被起诉而被遗忘，代码示例使用了一个假设的社交网络，姑且称之为……faceplace.com。(任何与真实的社交网络巨擘的相似之处，无论是活着的还是死去的，纯属巧合。让我们假设真实的 faceplace.com 不是……不管它实际上是什么。</p><p id="6940" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一些调查显示，由于其流线型的布局，append face place . com 的移动网站(faceplace.com)是最容易抓取的。此外，给定年份的所有帖子都可以通过 url 结构<code class="fe nk nl nm nn b">https://m.faceplace.com/daniels_friend/year/2017/</code>隔离。</p><p id="fd04" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是最初只加载了有限数量的帖子，然后当用户滚动到当前页面的底部时，更多的帖子就会显示出来。由于这个原因(一些讨厌的登录要求)，我们不能简单地抓取页面源代码。相反，我们必须在收集页面代码之前模拟浏览器和用户动作。我不会详细解释这些步骤，但是前面提到的 Udemy 课程会详细解释。</p><p id="c85f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">它最终看起来像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="bc77" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">…这会给你一堆无意义的标记，开头是:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="4145" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这些混乱中的某个地方会有这样的东西:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="7141" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如你可能注意到的，唯一感兴趣的人类语言发生在<code class="fe nk nl nm nn b">&lt;p&gt;&lt;/p&gt;</code>标签之间，所以我想只提取那些位，丢弃其余的&amp;继续我的生活。美丽的汤让这变得微不足道，&amp;被称为<a class="ae lo" href="https://en.wikipedia.org/wiki/Regular_expression" rel="noopener ugc nofollow" target="_blank">正则表达式</a>的神秘魔法允许我们移除封闭标签&amp;任何(大部分)剩余的 html:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div><figcaption class="no np gj gh gi nq nr bd b be z dk">this left some stray html &amp; long hashes in the data for some reason, but was adequate for my weird purposes so I didn’t attempt to improve</figcaption></figure><p id="763b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，我收到了一组来自我朋友时间线的纯文本帖子。</p><p id="41dd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">是时候做些事情了。</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/bfbecc8dd6ecfe3ad9ba6e5763630507.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MVrPYtoSrhrpdY3e-xu_nQ.jpeg"/></div></div></figure><h2 id="3536" class="lw lx iq bd ly lz ma dn mb mc md dp me la mf mg mh le mi mj mk li ml mm mn mo bi translated">使用<em class="nt">文本块</em>进行自然语言处理/情感分析</h2><p id="8eb2" class="pw-post-body-paragraph kr ks iq kt b ku mp jr kw kx mq ju kz la mr lc ld le ms lg lh li mt lk ll lm ij bi translated">几个<a class="ae lo" href="https://elitedatascience.com/python-nlp-libraries" rel="noopener ugc nofollow" target="_blank">知名的库</a>为<a class="ae lo" href="https://en.wikipedia.org/wiki/Natural_language_processing" rel="noopener ugc nofollow" target="_blank">自然语言处理</a>提供 pythonic 工具，功能多样，易于使用。我使用<a class="ae lo" href="https://textblob.readthedocs.io/en/dev/" rel="noopener ugc nofollow" target="_blank"> TextBlob </a>是因为它的开箱即用特性集非常全面，非常适合我的快速原型需求(阅读:到处乱搞)。</p><p id="a4a1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在将一些文本分配给一个<code class="fe nk nl nm nn b">TextBlob()</code>对象后，对<code class="fe nk nl nm nn b">.sentiment</code>属性的简单调用返回两个值:</p><ol class=""><li id="3ce7" class="mu mv iq kt b ku kv kx ky la mw le mx li my lm nu na nb nc bi translated"><code class="fe nk nl nm nn b">polarity</code> -浮动<em class="ln"> x </em>使得<em class="ln"> -1 ≤ x ≤ 1 </em>，表示积极或消极情绪</li><li id="9982" class="mu mv iq kt b ku nd kx ne la nf le ng li nh lm nu na nb nc bi translated"><code class="fe nk nl nm nn b">subjectivity</code>——一个浮点数<em class="ln"> y </em>使得<em class="ln"> 0 ≤ y ≤ 1 </em>，表示主观程度— <em class="ln"> 0 </em>最客观&amp;T29】1 最主观</li></ol><p id="8399" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="14b6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好吧，当然，足够近了。</p><p id="38d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我可以将每个纯文本帖子输入到函数中&amp;返回两个算法确定的浮点数。</p><p id="1bf9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后呢？</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><p id="63bb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> IBM Watson 开发者云文本到语音合成</strong></p><p id="e2ec" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我知道我想最终以某种方式对我的数据采集进行声音处理。与其只是将自然语言翻译成数字用于算法组合，我想我应该直接对语言进行发音，在这个过程中使用任何定量推导作为调制参数。显而易见的解决方案是文本到语音引擎(TTS)。</p><p id="7521" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">经过一番探索，我选定了 IBM Watson 开发人员云 TTS 引擎，因为每月的前一百万个字符是免费的，它接受几个参数来以各种方式调制声音。我必须创建一个 IBM <a class="ae lo" href="https://console.bluemix.net/registration/?target=/catalog/services/text-to-speech/" rel="noopener ugc nofollow" target="_blank"> Bluemix </a>账户(免费 30 天),这很简单，然后搜罗他们的<a class="ae lo" href="https://www.ibm.com/watson/developercloud/doc/text-to-speech/index.html" rel="noopener ugc nofollow" target="_blank">实质性文档</a>来了解我的方位。</p><p id="6557" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我不会在这里重复这些文档，但长话短说:该服务提供了几种不同的基本语音模型，其中一些接受额外的<a class="ae lo" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/speech-synthesis-markup-language-ssml-reference" rel="noopener ugc nofollow" target="_blank">语音合成标记语言</a> (SSML)参数来转换&amp;影响语音的表现力。这在他们的<a class="ae lo" href="https://text-to-speech-demo.mybluemix.net/" rel="noopener ugc nofollow" target="_blank">互动演示</a>中得到了很好的展示。我选择了通用的沃森声音(来自<a class="ae lo" href="https://www.youtube.com/watch?v=WFR3lOm_xhE" rel="noopener ugc nofollow" target="_blank"> Jeopardy </a>)，因为它允许最大的“转变”。</p><p id="80a0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我编写了一个小循环来遍历帖子列表，检索 TextBlob 情感分析分数，然后将它们输入 Watson TTS api:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="89ff" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如上面的代码所示，有几个 SSML 变换参数(我用<code class="fe nk nl nm nn b">polarity</code> &amp; <code class="fe nk nl nm nn b">subjectivity</code>情感分析分数的各种组合填充了这些参数):</p><ul class=""><li id="8e19" class="mu mv iq kt b ku kv kx ky la mw le mx li my lm mz na nb nc bi translated"><code class="fe nk nl nm nn b">breathiness</code></li><li id="649a" class="mu mv iq kt b ku nd kx ne la nf le ng li nh lm mz na nb nc bi translated"><code class="fe nk nl nm nn b">pitch</code></li><li id="8eb1" class="mu mv iq kt b ku nd kx ne la nf le ng li nh lm mz na nb nc bi translated"><code class="fe nk nl nm nn b">pitch range</code></li><li id="5578" class="mu mv iq kt b ku nd kx ne la nf le ng li nh lm mz na nb nc bi translated"><code class="fe nk nl nm nn b">rate</code></li><li id="8001" class="mu mv iq kt b ku nd kx ne la nf le ng li nh lm mz na nb nc bi translated"><code class="fe nk nl nm nn b">glottal tension</code></li><li id="0abb" class="mu mv iq kt b ku nd kx ne la nf le ng li nh lm mz na nb nc bi translated"><code class="fe nk nl nm nn b">timbre</code></li></ul><p id="72e4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">相关文件见<a class="ae lo" href="https://www.ibm.com/watson/developercloud/doc/text-to-speech/http.html#transformation" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><p id="37a7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是一个输出文件示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nj l"/></div></figure><p id="0003" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在遍历了我的数据集中的所有文本帖子后，我最终得到了大约 600 个这样的帖子——每一个都是我朋友的独特表达，每一个都通过几个算法过程进行了独特的合成和调制。</p><p id="0305" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">很好。</p><p id="10b9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在让它们发挥作用。</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h2 id="bf49" class="lw lx iq bd ly lz ma dn mb mc md dp me la mf mg mh le mi mj mk li ml mm mn mo bi translated">Max/MSP 中的随机回放和实时音频处理</h2><p id="b2d1" class="pw-post-body-paragraph kr ks iq kt b ku mp jr kw kx mq ju kz la mr lc ld le ms lg lh li mt lk ll lm ij bi translated">我打算在这篇文章的所有部分都留在 Python 环境中，但是没有任何一个<a class="ae lo" href="https://wiki.python.org/moin/Audio/" rel="noopener ugc nofollow" target="_blank">的几个包&amp;接近</a>从 Python 控制台进行音频回放&amp;操作。所以表演/作曲部分我把<a class="ae lo" href="https://medium.com/@dnlmc/the-logistic-map-the-onset-of-chaos-sonified-46fd73e25965" rel="noopener">退</a>进<a class="ae lo" href="https://en.wikipedia.org/wiki/Max_(software)" rel="noopener ugc nofollow" target="_blank"> Max </a>。</p><p id="3fca" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我改编了 Abby Aresty 的<a class="ae lo" href="https://www.youtube.com/watch?v=UQAeTkuHFK0" rel="noopener ugc nofollow" target="_blank">这些</a> <a class="ae lo" href="https://www.youtube.com/watch?v=l5jfvIXsV2w" rel="noopener ugc nofollow" target="_blank">教程</a>视频的大部分内容。我不太明白她为什么做一些事情，所以我也做了一些自由处理，&amp;然后用一些参数来修饰它，以操纵音频播放:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/9b7d288df7ade6750d256eac0ee729e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hug45CPchU_IB3yjsU6Urg.png"/></div></div></figure><p id="d4fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我基本上创建了三个频道/播放列表，每个都连续播放从各自的播放列表中随机选择的文件&amp;通过相同的信号处理链传递它们。我希望通过一些随机过程来编程控制这些参数，但没有时间编程，所以最终只能手动实时操纵信号。还有一些单独的文件(沿着右边界)，我希望能够在调用时触发和循环。</p><p id="15fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我不会在这里花时间详细解释补丁；在上面链接的教程和<code class="fe nk nl nm nn b"><a class="ae lo" href="https://docs.cycling74.com/max7/maxobject/sfplay~" rel="noopener ugc nofollow" target="_blank">sfplay~</a></code>(回放对象)&amp; <code class="fe nk nl nm nn b"><a class="ae lo" href="https://docs.cycling74.com/max7/maxobject/comb~" rel="noopener ugc nofollow" target="_blank">comb~</a></code>(梳状滤波器对象)Max 参考文档之间，没有太多其他的了。我把它上传到了 github repo 上，还有上面剩下的代码片段，供感兴趣的人参考。</p><p id="4aca" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有点不幸的是，在实际演出中，当我完成了计划持续时间的 3/4 时，马克斯崩溃了。但我很高兴事情发展到这一步，寿星和我们其他古怪的朋友似乎也很喜欢。我们还策划了一些模糊的计划，为可能的磁带发行重新审视素材和算法过程。敬请关注。</p><p id="d66d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">与此同时，这是表演中流产的部分:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nj l"/></div></figure><p id="bb3b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">— <br/>在推特上关注:<a class="ae lo" href="https://www.twitter.com/dnlmc" rel="noopener ugc nofollow" target="_blank">@ dnlmc</a>T3】LinkedIn:【linkedin.com/in/dnlmc】T4T6】Github:<a class="ae lo" href="https://github.com/dnlmc" rel="noopener ugc nofollow" target="_blank">https://github.com/dnlmc</a></p></div></div>    
</body>
</html>