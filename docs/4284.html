<html>
<head>
<title>How to write your favorite R functions — in Python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用 Python 写你最喜欢的 R 函数？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-write-your-favorite-r-functions-in-python-11e1e9c29089?source=collection_archive---------4-----------------------#2018-08-04">https://towardsdatascience.com/how-to-write-your-favorite-r-functions-in-python-11e1e9c29089?source=collection_archive---------4-----------------------#2018-08-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cb28" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">r vs Python——争论仍在继续。与此同时，我们尝试走一条中间道路，创建一个 Python 脚本来模仿方便的 R 风格函数，以便更好、更容易地进行统计！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fc304a74b414e708ea6b386014390497.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FqR5zGQYic_pNRyakzj_Cw.png"/></div></div></figure><h2 id="ac94" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">介绍</h2><p id="7ce6" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">数据科学和机器学习的现代大战之一是“Python vs. R”。毫无疑问，这两种语言近年来都取得了巨大的进展，成为数据科学、预测分析和机器学习的首选编程语言。事实上，在 IEEE 最近的一篇文章中，Python 取代 C++成为 2018 年的顶级编程语言，R 也牢牢占据了前 10 名的位置。</p><p id="dcbd" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">然而，这两者之间有一些基本的区别。<a class="ae mj" href="https://www.coursera.org/lecture/r-programming/overview-and-history-of-r-pAbaE" rel="noopener ugc nofollow" target="_blank"> R 最初是作为统计分析和数据分析问题的快速原型开发的工具</a>。另一方面，Python 是作为一种通用的现代面向对象语言开发的，与 C++或 Java 一脉相承，但具有更简单的学习曲线和更灵活的风格。因此，R 继续在统计学家、定量生物学家、物理学家和经济学家中非常流行，而 Python 已经慢慢成为日常脚本、自动化、后端 web 开发、分析和通用机器学习框架的首选语言，具有广泛的支持基础和开源开发社区工作。</p><h2 id="ceb7" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">在 Python 环境下模仿函数式编程？</h2><p id="7a9e" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated"><a class="ae mj" href="http://adv-r.had.co.nz/Functional-programming.html" rel="noopener ugc nofollow" target="_blank">R</a>的函数式编程特性为用户提供了极其简单紧凑的界面，用于快速计算概率和对数据分析问题进行必要的描述/推断统计。例如，<strong class="ls iu">仅仅通过一个简单的函数调用就能回答下面的问题，这不是很好吗？</strong></p><blockquote class="mp mq mr"><p id="238f" class="lq lr ms ls b lt mk ju lv lw ml jx ly mt mm ma mb mu mn md me mv mo mg mh mi im bi translated">如何计算一个数据向量的均值/中值/众数？</p><p id="f89c" class="lq lr ms ls b lt mk ju lv lw ml jx ly mt mm ma mb mu mn md me mv mo mg mh mi im bi translated">如何计算服从正态分布的事件的累积概率？如果分布是泊松分布呢？</p><p id="b5e5" class="lq lr ms ls b lt mk ju lv lw ml jx ly mt mm ma mb mu mn md me mv mo mg mh mi im bi translated">如何计算一系列数据点的四分位间距？</p><p id="07b9" class="lq lr ms ls b lt mk ju lv lw ml jx ly mt mm ma mb mu mn md me mv mo mg mh mi im bi translated">如何生成几个服从学生 t 分布的随机数？</p></blockquote><p id="af90" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">r 编程环境允许您这样做。</p><p id="d09d" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">另一方面，Python 脚本能力允许分析师在各种各样的分析管道中使用这些统计数据，具有无限的复杂性和创造性。</p><p id="5719" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated"><strong class="ls iu">为了结合两个世界</strong>的优势，我们需要一个简单的基于 Python 的包装器库，它包含了最常用的与概率分布和描述性统计相关的函数，这些函数在<em class="ms"> R-style </em>中定义，这样用户就可以非常快速地调用这些函数，而不必去适当的 Python 统计库，找出所有的方法和参数。</p><h2 id="e494" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">用于最方便的 R 函数的 Python 包装器脚本</h2><p id="2a9d" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated"><a class="ae mj" href="https://github.com/tirthajyoti/StatsUsingPython/blob/master/R_Functions.py" rel="noopener ugc nofollow" target="_blank">我写了一个 Python 脚本</a>，用 Python 定义了简单统计分析中最方便、最广泛使用的 R 函数。导入这个脚本后，您将能够像在 R 编程环境中一样自然地使用这些 R 函数。</p><p id="c8b2" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">该脚本的目标是<strong class="ls iu">提供简单的 Python 子程序，模仿 R 风格的统计函数，用于快速计算密度/点估计值、累积分布、分位数，并为各种重要的概率分布生成随机变量</strong>。</p><blockquote class="mp mq mr"><p id="2d93" class="lq lr ms ls b lt mk ju lv lw ml jx ly mt mm ma mb mu mn md me mv mo mg mh mi im bi translated">为了保持 R 风格的精神，没有使用类层次结构，只在这个文件中定义了原始函数，这样用户就可以导入这个 Python 脚本，并在需要时通过一个名字调用来使用所有的函数。</p></blockquote><p id="e522" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">注意，我用<strong class="ls iu"> <em class="ms">这个词模仿</em> </strong>。在任何情况下，我都不会声称要模仿真正的 R 函数式编程范例，它包含了深层的环境设置以及这些环境和对象之间复杂的相互关系。这个脚本只允许我(我希望无数其他 Python 用户也是)快速启动 Python 程序或 Jupyter 笔记本，导入脚本，并立即开始做简单的描述性统计。这就是目标，不多不少。</p><p id="5fe3" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">或者，您可能在研究生院编写了 R 代码，刚刚开始学习和使用 Python 进行数据分析。您将会很高兴在 Jupyter 笔记本上看到并使用一些众所周知的功能，就像您在 R 环境中使用的方式一样。</p><p id="126f" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">不管是什么原因，这都很有趣:-)。</p><h2 id="09e9" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">简单的例子</h2><p id="e4e6" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">首先，只需导入脚本并开始处理数字列表，就像它们是 r 中的数据向量一样。</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="1ff6" class="ku kv it mx b gy nb nc l nd ne"><strong class="mx iu">from R_functions import *</strong><br/>lst=[20,12,16,32,27,65,44,45,22,18]<br/>&lt;more code, more statistics...&gt;</span></pre><p id="fc32" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">例如，你想从一个矢量数据点中计算出<a class="ae mj" href="https://en.wikipedia.org/wiki/Five-number_summary" rel="noopener ugc nofollow" target="_blank"> Tuckey 五个数</a> summary。你只需要调用一个简单的函数<strong class="ls iu"> fivenum </strong>并传递向量。它将在 Numpy 数组中返回五个数字的摘要。</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="1799" class="ku kv it mx b gy nb nc l nd ne">lst=[20,12,16,32,27,65,44,45,22,18]<br/><strong class="mx iu">fivenum</strong>(lst)<br/>&gt; array([12. , 18.5, 24.5, 41. , 65. ])</span></pre><p id="0449" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">或者，你想知道下面这个问题的答案。</p><blockquote class="mp mq mr"><p id="5c73" class="lq lr ms ls b lt mk ju lv lw ml jx ly mt mm ma mb mu mn md me mv mo mg mh mi im bi translated">假设一台机器每小时平均产出 10 件成品，标准偏差为 2。输出模式遵循近似正态分布。机器在接下来的一个小时内输出至少 7 台但不超过 12 台的概率是多少？</p></blockquote><p id="6cf1" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">答案基本上是这样的，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/6c8486c3f2c994d1a56dd412d6a5d501.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nAOhyktuLlBUXYG7pVUW2g.png"/></div></div></figure><p id="098f" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">使用<strong class="ls iu"> pnorm </strong> …只需一行代码就能得到答案</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="e676" class="ku kv it mx b gy nb nc l nd ne"><strong class="mx iu">pnorm</strong>(12,10,2)-<strong class="mx iu">pnorm</strong>(7,10,2)<br/>&gt; 0.7745375447996848</span></pre><p id="39da" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">或者，下面，</p><blockquote class="mp mq mr"><p id="82e8" class="lq lr ms ls b lt mk ju lv lw ml jx ly mt mm ma mb mu mn md me mv mo mg mh mi im bi translated">假设你有一枚装了子弹的硬币，每次扔的时候，有 60%的概率正面朝上。你在玩 10 次投掷的游戏。你如何用这枚硬币画出所有可能的中奖概率(从 0 到 10)？</p></blockquote><p id="84d0" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">只用几行代码和一个函数<strong class="ls iu"> <em class="ms"> dbinom </em> </strong> …，你就可以得到一个漂亮的条形图</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="ff4d" class="ku kv it mx b gy nb nc l nd ne">probs=[]<br/>import matplotlib.pyplot as plt<br/>for i in range(11):<br/>    probs.append(<strong class="mx iu">dbinom</strong>(i,10,0.6))<br/>plt.bar(range(11),height=probs)<br/>plt.grid(True)<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/048e5a5875dda7856ca413a7dbc96df5.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*X8MyBR_oQNGqtsa1g6YEFA.png"/></div></figure><h2 id="af3c" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">概率计算的简单界面</h2><p id="e44b" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">r 为从基本概率分布中快速计算提供了一个极其简化和直观的界面，令人惊叹。界面是这样的…</p><ul class=""><li id="67f3" class="nh ni it ls b lt mk lw ml ld nj lh nk ll nl mi nm nn no np bi translated"><strong class="ls iu"><em class="ms">d</em></strong>{分布} —给出点<strong class="ls iu"> <em class="ms"> x </em> </strong>的密度函数值</li><li id="1091" class="nh ni it ls b lt nq lw nr ld ns lh nt ll nu mi nm nn no np bi translated"><strong class="ls iu"><em class="ms">p</em></strong>{分布} —给出点<strong class="ls iu"> <em class="ms"> x </em> </strong>的累积值</li><li id="37df" class="nh ni it ls b lt nq lw nr ld ns lh nt ll nu mi nm nn no np bi translated"><strong class="ls iu"> <em class="ms"> q </em> </strong>【分布】—以概率<strong class="ls iu"> <em class="ms"> p </em> </strong>给出分位数函数值</li><li id="2da8" class="nh ni it ls b lt nq lw nr ld ns lh nt ll nu mi nm nn no np bi translated"><strong class="ls iu"><em class="ms">r</em></strong>{分布} —生成一个或多个随机变量</li></ul><p id="19f1" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">在我们的实现中，我们坚持使用这个接口和相关的参数列表，这样您就可以像在 R 环境中一样执行这些函数。</p><h2 id="5247" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">当前实现的功能</h2><p id="9815" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">目前，脚本中实现了以下 R 风格的函数用于快速调用。</p><ul class=""><li id="2022" class="nh ni it ls b lt mk lw ml ld nj lh nk ll nl mi nm nn no np bi translated">均值、中值、方差、标准差</li><li id="87c8" class="nh ni it ls b lt nq lw nr ld ns lh nt ll nu mi nm nn no np bi translated">塔基五号总结，IQR</li><li id="c0df" class="nh ni it ls b lt nq lw nr ld ns lh nt ll nu mi nm nn no np bi translated">矩阵或两个向量之间的协方差</li><li id="ed22" class="nh ni it ls b lt nq lw nr ld ns lh nt ll nu mi nm nn no np bi translated">以下分布的密度、累积概率、分位数函数和随机变量生成-正态分布、均匀分布、二项式分布、泊松分布、f 分布、学生 t 分布、卡方分布、贝塔分布和伽玛分布。</li></ul><h2 id="fe14" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">工作正在进行中…</h2><p id="4d38" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">显然，这是一项正在进行的工作，我计划在这个脚本中添加一些更方便的 R 函数。例如，在 R 中，一行简单的命令<code class="fe nv nw nx mx b">lm</code>就可以让你得到一个普通的最小二乘拟合模型，它是一个带有所有必要的推断统计数据(P 值、标准误差等)的数字数据集。).这是强有力的简洁和紧凑！另一方面，Python 中的标准线性回归问题通常使用 Scikit-learn 来解决，这需要更多的脚本来完成。我计划使用 Python 的<a class="ae mj" href="https://www.statsmodels.org/stable/index.html" rel="noopener ugc nofollow" target="_blank"> statsmodels </a>后端整合这个单一函数线性模型拟合特性。</p><p id="4e8f" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">如果你喜欢这个脚本，并在你的工作中找到它的用处，请在我的 GitHub repo 上签名并传播这个消息。</p></div><div class="ab cl ny nz hx oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="im in io ip iq"><p id="74df" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi of translated"><span class="l og oh oi bm oj ok ol om on di">如果</span>您有任何问题或想法要分享，请通过<a class="ae mj" href="mailto:tirthajyoti@gmail.com" rel="noopener ugc nofollow" target="_blank"><strong class="ls iu">tirthajyoti【AT】Gmail . com</strong></a>联系作者。此外，您可以查看作者的<a class="ae mj" href="https://github.com/tirthajyoti?tab=repositories" rel="noopener ugc nofollow" target="_blank"> <strong class="ls iu"> GitHub 资源库</strong> </a>中其他有趣的 Python、R 或 MATLAB 代码片段和机器学习资源。如果你像我一样对机器学习/数据科学充满热情，请随时<a class="ae mj" href="https://www.linkedin.com/in/tirthajyoti-sarkar-2127aa7/" rel="noopener ugc nofollow" target="_blank">在 LinkedIn 上添加我</a>或<a class="ae mj" href="https://twitter.com/tirthajyotiS" rel="noopener ugc nofollow" target="_blank">在 Twitter 上关注我。</a></p><blockquote class="mp mq mr"><p id="c2af" class="lq lr ms ls b lt mk ju lv lw ml jx ly mt mm ma mb mu mn md me mv mo mg mh mi im bi translated"><strong class="ls iu">如果你喜欢这篇文章，请别忘了留下掌声:-) </strong></p></blockquote></div></div>    
</body>
</html>