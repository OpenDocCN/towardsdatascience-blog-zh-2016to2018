<html>
<head>
<title>Ubuntu + Deep Learning Software Installation Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ubuntu +深度学习软件安装指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/ubuntu-deep-learning-software-installation-guide-fdae09f79903?source=collection_archive---------0-----------------------#2017-06-04">https://towardsdatascience.com/ubuntu-deep-learning-software-installation-guide-fdae09f79903?source=collection_archive---------0-----------------------#2017-06-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/4f29a898df35e51e5723e6bd9dc99862.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*VDvYpziXbvVATGBjb7ul3A.jpeg"/></div></figure><p id="a05a" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我最近在报读<a class="ae kv" href="https://www.udacity.com/drive" rel="noopener ugc nofollow" target="_blank"> Udacity 的自动驾驶汽车工程师 Nanodegree </a>后，造了一台深度学习机器。你可以在这里阅读我的构建:<a class="ae kv" href="https://medium.com/@ncondo/build-a-deep-learning-rig-for-800-4434e21a424f" rel="noopener">花 800 美元</a>构建一个深度学习平台。在这篇文章中，我将描述从一个干净的构建到训练深度神经网络的必要步骤。有很多好的安装指南——特别是来自 floydhub 的<a class="ae kv" href="https://github.com/floydhub/dl-setup" rel="noopener ugc nofollow" target="_blank">这个</a>,大部分内容都是基于它——但是我发现自己不得不挖掘许多不同的资源来正确安装所有的东西。本文的目标是将所有必要的资源整合到一个地方。</p><h1 id="f441" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">系统检查</h1><p id="4a69" class="pw-post-body-paragraph jx jy it jz b ka lu kc kd ke lv kg kh ki lw kk kl km lx ko kp kq ly ks kt ku im bi translated">即使在安装操作系统之前，您也应该执行一些基本的检查，以确保您的系统正常启动和运行。为此，我建议遵循 Paul 的硬件 YouTube 频道中的<a class="ae kv" href="https://youtu.be/LbpqkiaO7q4" rel="noopener ugc nofollow" target="_blank">关于新 PC 构建的前 5 件事</a>。他继续安装 Windows，但视频的前半部分适用于任何机器，不管是什么操作系统。</p><h1 id="8c70" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">人的本质</h1><p id="0328" class="pw-post-body-paragraph jx jy it jz b ka lu kc kd ke lv kg kh ki lw kk kl km lx ko kp kq ly ks kt ku im bi translated">首先下载<a class="ae kv" href="https://www.ubuntu.com/download/desktop" rel="noopener ugc nofollow" target="_blank"> Ubuntu 16.04.2 LTS </a>，Ubuntu 最新的长期支持版本。然后，用 Ubuntu ISO 创建一个可启动的 u 盘。如果你在 macOS 上，你可以遵循 Ubuntu 官方说明<a class="ae kv" href="https://www.ubuntu.com/download/desktop/create-a-usb-stick-on-macos" rel="noopener ugc nofollow" target="_blank">这里</a>，或者如果你在 Windows 上，你可以遵循<a class="ae kv" href="https://www.ubuntu.com/download/desktop/create-a-usb-stick-on-windows" rel="noopener ugc nofollow" target="_blank">这里</a>。一旦你把 Ubuntu ISO 加载到你的 u 盘上，把它插入你的新版本并启动机器。要安装 Ubuntu，你需要进入启动菜单，对我来说是 F11 键，然后选择从 u 盘启动。从那里，您可以简单地按照屏幕上的安装说明。你也可以参考 Ubuntu 的社区 wiki <a class="ae kv" href="https://help.ubuntu.com/community/Installation/FromUSBStickQuick" rel="noopener ugc nofollow" target="_blank">快速指南:从 USB 记忆棒安装 Ubuntu</a>了解更多细节。</p><h1 id="49ea" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">基础</h1><p id="c662" class="pw-post-body-paragraph jx jy it jz b ka lu kc kd ke lv kg kh ki lw kk kl km lx ko kp kq ly ks kt ku im bi translated">从终端运行以下命令来更新软件包并安装一些基本软件:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="754b" class="mi kx it me b gy mj mk l ml mm">sudo apt-get update<br/>sudo apt-get upgrade<br/>sudo apt-get install build-essential cmake g++ gfortran git vim pkg-config python-dev software-properties-common wget<br/>sudo apt-get autoremove<br/>sudo rm -rf /var/lib/apt/lists/*</span></pre><h1 id="5d20" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">Nvidia 驱动程序</h1><p id="9c77" class="pw-post-body-paragraph jx jy it jz b ka lu kc kd ke lv kg kh ki lw kk kl km lx ko kp kq ly ks kt ku im bi translated">您需要根据您的 GPU 型号下载正确的驱动程序，您可以使用以下命令进行检查:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="40d8" class="mi kx it me b gy mj mk l ml mm">lspci | grep -i nvidia</span></pre><p id="1825" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">查看<a class="ae kv" href="https://launchpad.net/~graphics-drivers/+archive/ubuntu/ppa" rel="noopener ugc nofollow" target="_blank">专有 GPU 驱动程序 PPA </a>库，找到您的 GPU 的当前版本。在撰写本文时，GeForce 10 系列的最新版本是 381.22，但我选择了 375.66，这是当前的长期分支版本。使用以下命令安装驱动程序:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="414a" class="mi kx it me b gy mj mk l ml mm">sudo add-apt-repository ppa:graphics-drivers/ppa<br/>sudo apt-get update<br/>sudo apt-get install nvidia-375</span></pre><p id="973f" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">然后重新启动计算机:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="ff4c" class="mi kx it me b gy mj mk l ml mm">sudo shutdown -r now</span></pre><p id="42f7" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">要再次检查驱动程序是否已正确安装:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="233f" class="mi kx it me b gy mj mk l ml mm">cat /proc/driver/nvidia/version</span></pre><h1 id="be40" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">库达</h1><p id="753f" class="pw-post-body-paragraph jx jy it jz b ka lu kc kd ke lv kg kh ki lw kk kl km lx ko kp kq ly ks kt ku im bi translated">从<a class="ae kv" href="https://developer.nvidia.com/cuda-downloads" rel="noopener ugc nofollow" target="_blank"> Nvidia 的网站</a>下载 CUDA 8.0 工具包。转到下载目录(或者您选择保存它的地方)并安装 CUDA:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="6f6f" class="mi kx it me b gy mj mk l ml mm">sudo dpkg -i cuda-repo-ubuntu1604*amd64.deb<br/>sudo apt-get update<br/>sudo apt-get install cuda</span></pre><p id="9d3f" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">将 CUDA 添加到环境变量:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="0fdf" class="mi kx it me b gy mj mk l ml mm">echo 'export PATH=/usr/local/cuda/bin:$PATH' &gt;&gt; ~/.bashrc<br/>echo 'export LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH' &gt;&gt; ~/.bashrc<br/>source ~/.bashrc</span></pre><p id="bd3a" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">检查是否安装了正确版本的 CUDA:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="48b1" class="mi kx it me b gy mj mk l ml mm">nvcc -V</span></pre><p id="c4eb" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">重新启动计算机:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="ac96" class="mi kx it me b gy mj mk l ml mm">sudo shutdown -r now</span></pre><h1 id="15db" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">cuDNN</h1><p id="4d0b" class="pw-post-body-paragraph jx jy it jz b ka lu kc kd ke lv kg kh ki lw kk kl km lx ko kp kq ly ks kt ku im bi translated">从<a class="ae kv" href="https://developer.nvidia.com/cudnn" rel="noopener ugc nofollow" target="_blank"> Nvidia 的网站</a>下载 cuDNN 库。在下载 cuDNN 之前，您需要首先注册 Nvidia 的开发者计划。他们说这可能需要几天的时间，但是我几乎立刻就获得了访问权限。在撰写本文时，cuDNN v5.1 是 TensorFlow 官方支持的版本，所以除非你知道 v6.0 受支持，否则不要发布(<a class="ae kv" href="https://github.com/tensorflow/tensorflow/issues/8828" rel="noopener ugc nofollow" target="_blank">他们目前正在开发</a>)。下载后，转到下载目录提取并复制文件:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="8cb8" class="mi kx it me b gy mj mk l ml mm">tar xvf cudnn*.tgz<br/>cd cuda<br/>sudo cp -P */*.h /usr/local/cuda/include/<br/>sudo cp -P */libcudnn* /usr/local/cuda/lib64/<br/>sudo chmod a+r /usr/local/cuda/lib64/libcudnn*</span></pre><h1 id="a2cc" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">Anaconda +包</h1><p id="697a" class="pw-post-body-paragraph jx jy it jz b ka lu kc kd ke lv kg kh ki lw kk kl km lx ko kp kq ly ks kt ku im bi translated">从<a class="ae kv" href="https://www.continuum.io/downloads#linux" rel="noopener ugc nofollow" target="_blank"> Continuum 站点</a>下载 Anaconda 安装程序。我选择了 Python 2.7 版本，但是您可以选择任何您想要的版本作为您的默认 Python:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="a378" class="mi kx it me b gy mj mk l ml mm">bash Anaconda2-4.4.0-Linux-x86_64.sh</span></pre><p id="5700" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">当安装程序询问您是否想将 Anaconda 添加到您的路径中时，回答“是”(除非您不想将它作为您的默认 Python)。一旦安装了 Anaconda，就可以用所有必要的深度学习库创建一个新的 conda 环境。我将使用 Udacity 的初学者工具包作为一个例子，因为这是我在许多项目中使用的。从<a class="ae kv" href="https://github.com/udacity/CarND-Term1-Starter-Kit" rel="noopener ugc nofollow" target="_blank">CarND-term 1-Starter-Kit</a>下载(或复制粘贴)environment-gpu.yml 文件。您可以在文件的顶部随意更改环境的名称。从保存环境-gpu.yml 文件的目录中:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="3839" class="mi kx it me b gy mj mk l ml mm">conda env create <strong class="me iu">-</strong>f environment-gpu<strong class="me iu">.</strong>yml</span></pre><p id="7d27" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">要激活您的新环境:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="1626" class="mi kx it me b gy mj mk l ml mm">source activate carnd-term1</span></pre><p id="de19" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">现在，您可以通过运行 TensorFlow 的内置 MNIST 示例模型(不再适用于 TensorFlow 版本≥ 1.0)进行测试，以确保一切正常工作。请注意，以下命令将在首次运行时自动下载 12 MB MNIST 数据集:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="0ff7" class="mi kx it me b gy mj mk l ml mm">python -m tensorflow.models.image.mnist.convolutional</span></pre><p id="63af" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果在这一点上一切正常，那么恭喜你——你现在已经准备好对热狗进行分类了！</p><figure class="lz ma mb mc gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/7f36284252d1502800267d8026df4a6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*hdXLb9YjV2Axc2klnOdOeA.jpeg"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk"><a class="ae kv" href="http://www.foodandwine.com/news/silicon-valleys-hot-dog-identifying-app-very-real" rel="noopener ugc nofollow" target="_blank">http://www.foodandwine.com/news/silicon-valleys-hot-dog-identifying-app-very-real</a></figcaption></figure></div></div>    
</body>
</html>