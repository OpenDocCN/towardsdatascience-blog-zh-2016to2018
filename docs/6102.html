<html>
<head>
<title>Visualizing Air Pollution with Folium Maps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用树叶地图可视化空气污染</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualizing-air-pollution-with-folium-maps-4ce1a1880677?source=collection_archive---------6-----------------------#2018-11-26">https://towardsdatascience.com/visualizing-air-pollution-with-folium-maps-4ce1a1880677?source=collection_archive---------6-----------------------#2018-11-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e1f0fec619c007d1e388b1fe712c555e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PlMoYJ9MPTjB_2Ju"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@drewmark?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andrew Stutesman</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d849" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我之前关于预测空气污染的文章中，我研究了使用递归神经网络(RNN 和 LSTM)预测比利时的空气污染。</p><div class="lb lc gp gr ld le"><a rel="noopener follow" target="_blank" href="/forecasting-air-pollution-with-recurrent-neural-networks-ffb095763a5c"><div class="lf ab fo"><div class="lg ab lh cl cj li"><h2 class="bd ir gy z fp lj fr fs lk fu fw ip bi translated">用递归神经网络预测空气污染</h2><div class="ll l"><h3 class="bd b gy z fp lj fr fs lk fu fw dk translated">在 Curieuze Neuzen 的公民科学项目之后，我想了解更多关于空气污染的知识，看看我是否可以…</h3></div><div class="lm l"><p class="bd b dl z fp lj fr fs lk fu fw dk translated">towardsdatascience.com</p></div></div><div class="ln l"><div class="lo l lp lq lr ln ls jw le"/></div></div></a></div><p id="9405" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为一个小项目，我认为在地图上绘制一段时间内的空气污染会很有趣。<a class="ae kc" href="http://python-visualization.github.io/folium/" rel="noopener ugc nofollow" target="_blank">叶子包</a>是一个很好的工具。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="41eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将绘制比利时 6 种污染物的空气污染图:</p><ul class=""><li id="dece" class="ma mb iq kf b kg kh kk kl ko mc ks md kw me la mf mg mh mi bi translated"><strong class="kf ir">臭氧</strong></li><li id="5d9d" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated"><strong class="kf ir">二氧化氮</strong></li><li id="253c" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated"><strong class="kf ir">一氧化碳</strong></li><li id="aadc" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated"><strong class="kf ir">二氧化硫</strong></li><li id="11ea" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated"><strong class="kf ir">颗粒物质(PM10) </strong></li><li id="2c9a" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated"><strong class="kf ir">苯(C6H6) </strong></li></ul><p id="dc0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些数据是从<a class="ae kc" href="https://www.eea.europa.eu/data-and-maps/data/aqereporting-2/be" rel="noopener ugc nofollow" target="_blank">欧洲环境署</a>的网站上下载的。如果你想使用其他欧洲国家的数据，我鼓励你访问他们的网站。它有许多欧盟国家的数据集，并且有很好的文档记录。</p><p id="7006" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将使用的数据集是:</p><ul class=""><li id="598d" class="ma mb iq kf b kg kh kk kl ko mc ks md kw me la mf mg mh mi bi translated">BE_ <em class="mo"> &lt;污染物 _ ID&gt;</em>_ 2013–2015 _ aggregated _ time series . CSV</li><li id="cad0" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">BE _ 2013–2015 _ metadata . CSV</li></ul><p id="60cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">污染物 id 在<a class="ae kc" href="http://dd.eionet.europa.eu/vocabulary/aq/pollutant" rel="noopener ugc nofollow" target="_blank"> EEA 的空气污染物词汇</a>中描述。</p><ul class=""><li id="5ae6" class="ma mb iq kf b kg kh kk kl ko mc ks md kw me la mf mg mh mi bi translated">1 =二氧化硫</li><li id="3e85" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">5 =颗粒物质</li><li id="13a3" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">7 =臭氧</li><li id="5ca0" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">8 =二氧化氮</li><li id="6ae5" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">10 =一氧化碳</li><li id="208e" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">20 =苯</li></ul><h1 id="6be6" class="mp mq iq bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm bi translated">项目设置</h1><h2 id="6bc0" class="nn mq iq bd mr no np dn mv nq nr dp mz ko ns nt nd ks nu nv nh kw nw nx nl ny bi translated">导入包</h2><pre class="nz oa ob oc gt od oe of og aw oh bi"><span id="16b5" class="nn mq iq oe b gy oi oj l ok ol"><strong class="oe ir">from</strong> <strong class="oe ir">pathlib</strong> <strong class="oe ir">import</strong> Path<br/><strong class="oe ir">import</strong> <strong class="oe ir">pandas</strong> <strong class="oe ir">as</strong> <strong class="oe ir">pd</strong><br/><strong class="oe ir">import</strong> <strong class="oe ir">numpy</strong> <strong class="oe ir">as</strong> <strong class="oe ir">np</strong><br/><br/><strong class="oe ir">import</strong> <strong class="oe ir">seaborn</strong> <strong class="oe ir">as</strong> <strong class="oe ir">sns</strong><br/><strong class="oe ir">import</strong> <strong class="oe ir">folium</strong><br/><strong class="oe ir">from</strong> <strong class="oe ir">folium.plugins</strong> <strong class="oe ir">import</strong> TimestampedGeoJson<br/><br/>project_dir = Path('/Users/bertcarremans/Data Science/Projecten/air_pollution_forecasting')</span></pre><h2 id="d02e" class="nn mq iq bd mr no np dn mv nq nr dp mz ko ns nt nd ks nu nv nh kw nw nx nl ny bi translated">空气污染物</h2><p id="f7ce" class="pw-post-body-paragraph kd ke iq kf b kg om ki kj kk on km kn ko oo kq kr ks op ku kv kw oq ky kz la ij bi translated">我们将制作一本空气污染物及其数据集编号、科学符号、名称和垃圾箱边缘的字典。垃圾箱边缘基于维基百科页面上的比例。</p><pre class="nz oa ob oc gt od oe of og aw oh bi"><span id="6883" class="nn mq iq oe b gy oi oj l ok ol">pollutants = {<br/>    1: {<br/>        'notation' : 'SO2',<br/>        'name' :'Sulphur dioxide',<br/>        'bin_edges' : np.array([15,30,45,60,80,100,125,165,250])<br/>    },<br/>    5: {<br/>        'notation' : 'PM10',<br/>        'name' :'Particulate matter &lt; 10 µm',<br/>        'bin_edges' : np.array([10,20,30,40,50,70,100,150,200])<br/>    },<br/>    7: {'notation' : 'O3',<br/>        'name' :'Ozone',<br/>        'bin_edges' : np.array([30,50,70,90,110,145,180,240,360])<br/>    },<br/>    8: {'notation' : 'NO2',<br/>        'name' :'Nitrogen dioxide',<br/>        'bin_edges' : np.array([25,45,60,80,110,150,200,270,400])<br/>    },<br/>    10: {'notation' : 'CO',<br/>        'name' :'Carbon monoxide',<br/>         'bin_edges' : np.array([1.4,2.1,2.8,3.6,4.5,5.2,6.6,8.4,13.7])<br/>    },<br/>    20: {'notation' : 'C6H6',<br/>        'name' :'Benzene',<br/>         'bin_edges' : np.array([0.5,1.0,1.25,1.5,2.75,3.5,5.0,7.5,10.0])<br/>    }<br/>}</span></pre><h2 id="d2ee" class="nn mq iq bd mr no np dn mv nq nr dp mz ko ns nt nd ks nu nv nh kw nw nx nl ny bi translated">加载元数据</h2><p id="4890" class="pw-post-body-paragraph kd ke iq kf b kg om ki kj kk on km kn ko oo kq kr ks op ku kv kw oq ky kz la ij bi translated">在元数据中，我们有每个采样点的<strong class="kf ir">坐标</strong>。我们需要这些信息在地图上标出取样点。</p><pre class="nz oa ob oc gt od oe of og aw oh bi"><span id="792d" class="nn mq iq oe b gy oi oj l ok ol">meta = pd.read_csv(project_dir / 'data/raw/BE_2013-2015_metadata.csv', sep='<strong class="oe ir">\t</strong>')</span></pre><h2 id="7338" class="nn mq iq bd mr no np dn mv nq nr dp mz ko ns nt nd ks nu nv nh kw nw nx nl ny bi translated">彩色温标</h2><p id="0b30" class="pw-post-body-paragraph kd ke iq kf b kg om ki kj kk on km kn ko oo kq kr ks op ku kv kw oq ky kz la ij bi translated">有 10 个装订边，我们将使用不同的颜色。这些颜色是用<a class="ae kc" href="http://colorbrewer2.org/#type=diverging&amp;scheme=RdBu&amp;n=10" rel="noopener ugc nofollow" target="_blank"> ColorBrewer </a>创造的。</p><pre class="nz oa ob oc gt od oe of og aw oh bi"><span id="9f2b" class="nn mq iq oe b gy oi oj l ok ol">color_scale = np.array(['#053061','#2166ac','#4393c3','#92c5de','#d1e5f0','#fddbc7','#f4a582','#d6604d','#b2182b','#67001f'])<br/>sns.palplot(sns.color_palette(color_scale))</span></pre><figure class="nz oa ob oc gt jr gh gi paragraph-image"><div class="gh gi or"><img src="../Images/f27f4f009f7c4e3643893a8b190f2d8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*ymG4157cHZa4dIatJQldwg.png"/></div></figure><h1 id="18a8" class="mp mq iq bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm bi translated">数据准备</h1><h2 id="4adc" class="nn mq iq bd mr no np dn mv nq nr dp mz ko ns nt nd ks nu nv nh kw nw nx nl ny bi translated">加载时间序列数据</h2><p id="3099" class="pw-post-body-paragraph kd ke iq kf b kg om ki kj kk on km kn ko oo kq kr ks op ku kv kw oq ky kz la ij bi translated">我们将日期变量转换为日期时间。这样我们就可以很容易地用它们来切割熊猫的数据帧。</p><pre class="nz oa ob oc gt od oe of og aw oh bi"><span id="3dcc" class="nn mq iq oe b gy oi oj l ok ol"><strong class="oe ir">def</strong> load_data(pollutant_ID):<br/>    print('&gt; Loading data...')<br/>    date_vars = ['DatetimeBegin','DatetimeEnd']<br/>    filename = 'data/raw/BE_' + str(pollutant_ID) + '_2013-2015_aggregated_timeseries.csv'<br/>    agg_ts = pd.read_csv(project_dir / filename, sep='<strong class="oe ir">\t</strong>', parse_dates=date_vars, date_parser=pd.to_datetime)<br/>    <strong class="oe ir">return</strong> agg_ts</span></pre><h2 id="8f74" class="nn mq iq bd mr no np dn mv nq nr dp mz ko ns nt nd ks nu nv nh kw nw nx nl ny bi translated">数据清理</h2><p id="84e1" class="pw-post-body-paragraph kd ke iq kf b kg om ki kj kk on km kn ko oo kq kr ks op ku kv kw oq ky kz la ij bi translated">我们将对数据进行一些基本的清理。关于我们为什么做这些特殊的清洁行动的更多信息，你可以阅读我之前关于预测空气污染的文章。</p><ul class=""><li id="8ca4" class="ma mb iq kf b kg kh kk kl ko mc ks md kw me la mf mg mh mi bi translated">仅保留 P1D 的数据聚合过程的记录，以拥有每日数据</li><li id="e5e3" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">删除计数为 UnitOfAirPollutionLevel 的记录</li><li id="3654" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">移除可视化中多余的变量</li><li id="e7c8" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">移除少于 1000 个测量日的采样点</li><li id="f06e" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">插入缺少的日期并用下一个有效日期的值输入 AirpollutionLevel</li></ul><pre class="nz oa ob oc gt od oe of og aw oh bi"><span id="1d4b" class="nn mq iq oe b gy oi oj l ok ol"><strong class="oe ir">def</strong> clean_data(df):<br/>    print('&gt; Cleaning data...')<br/>    df = df.loc[df.DataAggregationProcess=='P1D', :] <br/>    df = df.loc[df.UnitOfAirPollutionLevel!='count', :]<br/>    ser_avail_days = df.groupby('SamplingPoint').nunique()['DatetimeBegin']<br/>    df = df.loc[df.SamplingPoint.isin(ser_avail_days[ser_avail_days.values &gt;= 1000].index), :]<br/>    vars_to_drop = ['AirPollutant','AirPollutantCode','Countrycode','Namespace','TimeCoverage','Validity','Verification','AirQualityStation',<br/>               'AirQualityStationEoICode','DataAggregationProcess','UnitOfAirPollutionLevel', 'DatetimeEnd', 'AirQualityNetwork',<br/>               'DataCapture', 'DataCoverage']<br/>    df.drop(columns=vars_to_drop, axis='columns', inplace=<strong class="oe ir">True</strong>)<br/>    <br/>    dates = list(pd.period_range(min(df.DatetimeBegin), max(df.DatetimeBegin), freq='D').values)<br/>    samplingpoints = list(df.SamplingPoint.unique())<br/>    new_idx = []<br/>    <strong class="oe ir">for</strong> sp <strong class="oe ir">in</strong> samplingpoints:<br/>        <strong class="oe ir">for</strong> d <strong class="oe ir">in</strong> dates:<br/>            new_idx.append((sp, np.datetime64(d)))<br/><br/>    df.set_index(keys=['SamplingPoint', 'DatetimeBegin'], inplace=<strong class="oe ir">True</strong>)<br/>    df.sort_index(inplace=<strong class="oe ir">True</strong>)<br/>    df = df.reindex(new_idx)<br/>    df['AirPollutionLevel'] = df.groupby(level=0).AirPollutionLevel.bfill().fillna(0)<br/>    <strong class="oe ir">return</strong> df</span></pre><h2 id="dc9b" class="nn mq iq bd mr no np dn mv nq nr dp mz ko ns nt nd ks nu nv nh kw nw nx nl ny bi translated">绘制空气污染随时间的变化图</h2><p id="0ade" class="pw-post-body-paragraph kd ke iq kf b kg om ki kj kk on km kn ko oo kq kr ks op ku kv kw oq ky kz la ij bi translated">加载所有采样点的所有日期对于地图来说太过繁重。因此，我们将在每月的最后一天<strong class="kf ir">对数据进行重新取样</strong>。</p><p id="0a90" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">备注</strong>:我们在笔记本中使用的箱边缘通常应用于 O3、NO2 和 CO 的(半)小时平均值。在我们在笔记本中使用的数据集中，我们只有日平均值。由于本笔记本只是为了说明如何在地图上绘制时间序列数据，我们将继续使用日平均值。然而，在欧洲经济区网站上，你也可以下载每小时的平均值。</p><pre class="nz oa ob oc gt od oe of og aw oh bi"><span id="5e75" class="nn mq iq oe b gy oi oj l ok ol"><strong class="oe ir">def</strong> color_coding(poll, bin_edges):    <br/>    idx = np.digitize(poll, bin_edges, right=<strong class="oe ir">True</strong>)<br/>    <strong class="oe ir">return</strong> color_scale[idx]<br/><br/><strong class="oe ir">def</strong> prepare_data(df, pollutant_ID):<br/>    print('&gt; Preparing data...')<br/>    df = df.reset_index().merge(meta, how='inner', on='SamplingPoint').set_index('DatetimeBegin')<br/>    df = df.loc[:, ['SamplingPoint','Latitude', 'Longitude', 'AirPollutionLevel']]<br/>    df = df.groupby('SamplingPoint', group_keys=<strong class="oe ir">False</strong>).resample(rule='M').last().reset_index()<br/>    df['color'] = df.AirPollutionLevel.apply(color_coding, bin_edges=pollutants[pollutant_ID]['bin_edges'])<br/>    <strong class="oe ir">return</strong> df</span></pre><p id="727d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了显示污染随时间的演变，我们将使用 leav 的<strong class="kf ir">timestampgeojson</strong><a class="ae kc" href="https://python-visualization.github.io/folium/plugins.html" rel="noopener ugc nofollow" target="_blank">插件。此插件需要 geojson 输入功能。为了转换 dataframe 的数据，我创建了一个小函数<strong class="kf ir">create _ geo JSON _ features</strong>来完成这项工作。</a></p><pre class="nz oa ob oc gt od oe of og aw oh bi"><span id="722c" class="nn mq iq oe b gy oi oj l ok ol"><strong class="oe ir">def</strong> create_geojson_features(df):<br/>    print('&gt; Creating GeoJSON features...')<br/>    features = []<br/>    <strong class="oe ir">for</strong> _, row <strong class="oe ir">in</strong> df.iterrows():<br/>        feature = {<br/>            'type': 'Feature',<br/>            'geometry': {<br/>                'type':'Point', <br/>                'coordinates':[row['Longitude'],row['Latitude']]<br/>            },<br/>            'properties': {<br/>                'time': row['DatetimeBegin'].date().__str__(),<br/>                'style': {'color' : row['color']},<br/>                'icon': 'circle',<br/>                'iconstyle':{<br/>                    'fillColor': row['color'],<br/>                    'fillOpacity': 0.8,<br/>                    'stroke': 'true',<br/>                    'radius': 7<br/>                }<br/>            }<br/>        }<br/>        features.append(feature)<br/>    <strong class="oe ir">return</strong> features</span></pre><p id="2299" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在此之后，输入要素被创建，我们可以创建一个地图，它们将被添加。TimestampedGeoJson 插件为时间滑块提供了一些简洁的选项，这些选项是不言自明的。</p><pre class="nz oa ob oc gt od oe of og aw oh bi"><span id="17f3" class="nn mq iq oe b gy oi oj l ok ol"><strong class="oe ir">def</strong> make_map(features):<br/>    print('&gt; Making map...')<br/>    coords_belgium=[50.5039, 4.4699]<br/>    pollution_map = folium.Map(location=coords_belgium, control_scale=<strong class="oe ir">True</strong>, zoom_start=8)<br/><br/>    TimestampedGeoJson(<br/>        {'type': 'FeatureCollection',<br/>        'features': features}<br/>        , period='P1M'<br/>        , add_last_point=<strong class="oe ir">True</strong><br/>        , auto_play=<strong class="oe ir">False</strong><br/>        , loop=<strong class="oe ir">False</strong><br/>        , max_speed=1<br/>        , loop_button=<strong class="oe ir">True</strong><br/>        , date_options='YYYY/MM'<br/>        , time_slider_drag_update=<strong class="oe ir">True</strong><br/>    ).add_to(pollution_map)<br/>    print('&gt; Done.')<br/>    <strong class="oe ir">return</strong> pollution_map</span><span id="78fb" class="nn mq iq oe b gy os oj l ok ol"><strong class="oe ir">def</strong> plot_pollutant(pollutant_ID):<br/>    print('Mapping <strong class="oe ir">{}</strong> pollution in Belgium in 2013-2015'.format(pollutants[pollutant_ID]['name']))<br/>    df = load_data(pollutant_ID)<br/>    df = clean_data(df)<br/>    df = prepare_data(df, pollutant_ID)<br/>    features = create_geojson_features(df)<br/>    <strong class="oe ir">return</strong> make_map(features), df</span></pre><p id="b0df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面我们展示了每种空气污染物的分布图。你可以点击图片进入带有交互式地图的网页。点击<em class="mo">播放</em>按钮，可以看到空气污染物随时间的演变。</p><h2 id="9017" class="nn mq iq bd mr no np dn mv nq nr dp mz ko ns nt nd ks nu nv nh kw nw nx nl ny bi translated">二氧化硫</h2><pre class="nz oa ob oc gt od oe of og aw oh bi"><span id="985e" class="nn mq iq oe b gy oi oj l ok ol">pollution_map, df = plot_pollutant(1)<br/>pollution_map.save('../output/pollution_so2.html')<br/>pollution_map</span></pre><figure class="nz oa ob oc gt jr gh gi paragraph-image"><a href="http://bertcarremans.be/pollution_so2.html"><div class="gh gi ot"><img src="../Images/ada605887178577d1dbbc057dfd760ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BQ7PJfWRkH3Mud3CxMvKfQ.png"/></div></a><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Link to interactive map: https://bertcarremans.github.io/air_pollution_viz/pollution_so2.html</figcaption></figure><h2 id="5769" class="nn mq iq bd mr no np dn mv nq nr dp mz ko ns nt nd ks nu nv nh kw nw nx nl ny bi translated">颗粒物质</h2><pre class="nz oa ob oc gt od oe of og aw oh bi"><span id="fa47" class="nn mq iq oe b gy oi oj l ok ol">pollution_map, df = plot_pollutant(5)<br/>pollution_map.save('../output/pollution_pm.html')<br/>pollution_map</span></pre><figure class="nz oa ob oc gt jr gh gi paragraph-image"><a href="http://bertcarremans.be/pollution_pm.html"><div class="gh gi ou"><img src="../Images/bd2765347fb8acef66048e4edc4d946e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rEDUjxZcpm9mZScDuYtdhA.png"/></div></a><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Link to interactive map: <a class="ae kc" href="https://bertcarremans.github.io/air_pollution_viz/pollution_so2.html" rel="noopener ugc nofollow" target="_blank">https://bertcarremans.github.io/air_pollution_viz/pollution_pm.html</a></figcaption></figure><p id="e3ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其他可视化可在以下位置找到:</p><ul class=""><li id="a389" class="ma mb iq kf b kg kh kk kl ko mc ks md kw me la mf mg mh mi bi translated"><a class="ae kc" href="https://bertcarremans.github.io/air_pollution_viz/pollution_c6h6.html" rel="noopener ugc nofollow" target="_blank">https://bertcarremans . github . io/air _ pollution _ viz/pollution _ c6h 6 . html</a></li><li id="f127" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated"><a class="ae kc" href="https://bertcarremans.github.io/air_pollution_viz/pollution_co.html" rel="noopener ugc nofollow" target="_blank">https://bertcarremans . github . io/air _ pollution _ viz/pollution _ co . html</a></li><li id="6dae" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated"><a class="ae kc" href="https://bertcarremans.github.io/air_pollution_viz/pollution_no2.html" rel="noopener ugc nofollow" target="_blank">https://bertcarremans . github . io/air _ pollution _ viz/pollution _ NO2 . html</a></li><li id="8e45" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated"><a class="ae kc" href="https://bertcarremans.github.io/air_pollution_viz/pollution_o3.html" rel="noopener ugc nofollow" target="_blank">https://bertcarremans . github . io/air _ pollution _ viz/pollution _ O3 . html</a></li></ul><h1 id="9f0d" class="mp mq iq bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm bi translated">结论</h1><p id="d34b" class="pw-post-body-paragraph kd ke iq kf b kg om ki kj kk on km kn ko oo kq kr ks op ku kv kw oq ky kz la ij bi translated">通过这个故事，我想展示使用 leav 在地图上可视化时间序列数据是多么容易。所有污染物的地图和 Jupyter 笔记本可以在<a class="ae kc" href="https://github.com/bertcarremans/air_pollution_forecasting/blob/master/notebooks/Visualizing%20Air%20Pollution%20in%20Belgium.ipynb" rel="noopener ugc nofollow" target="_blank"> GitHub </a>中找到。请随意重复使用它来绘制你祖国的空气污染图。</p></div></div>    
</body>
</html>