<html>
<head>
<title>1000x faster Spelling Correction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">拼写纠正速度提高 1000 倍</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/symspellcompound-10ec8f467c9b?source=collection_archive---------0-----------------------#2017-05-06">https://towardsdatascience.com/symspellcompound-10ec8f467c9b?source=collection_archive---------0-----------------------#2017-05-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="44d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">亚毫秒<strong class="jp ir">复合</strong>感知<strong class="jp ir">自动拼写纠正</strong></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/22c5cc7deec8dfd37e48c49952f02869.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*034K9ZcryXJ7-sD0vbjmbQ.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Source: <a class="ae lb" href="https://www.flickr.com/photos/theredproject/3968278028" rel="noopener ugc nofollow" target="_blank">https://www.flickr.com/photos/theredproject/3968278028</a></figcaption></figure><p id="f9ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最近我被指向了两个关于拼写纠正的<a class="ae lb" href="https://medium.com/@majortal/deep-spelling-9ffef96a24f6" rel="noopener">有趣帖子</a>(这里<a class="ae lb" href="https://hackernoon.com/improving-deepspell-code-bdaab1c5fb7e" rel="noopener ugc nofollow" target="_blank"/>)。他们应用了一种深度学习方法，即现代的魔法石。从<a class="ae lb" href="https://www.tastehit.com/blog/google-deepmind-alphago-how-it-works/" rel="noopener ugc nofollow" target="_blank"> AlphaGo 赢得围棋冠军</a>、<a class="ae lb" href="https://www.technologyreview.com/s/539226/ibm-pushes-deep-learning-with-a-watson-upgrade/" rel="noopener ugc nofollow" target="_blank"> Watson 赢得 Jeopardy </a>、<a class="ae lb" href="https://techcrunch.com/2016/11/14/facebook-fake-news/" rel="noopener ugc nofollow" target="_blank">打击假新闻</a>到<a class="ae lb" href="http://www.bbc.com/news/technology-30290540" rel="noopener ugc nofollow" target="_blank">用奇点威胁人类</a>，深度学习的普及程度真的很让人着迷。</p><p id="73b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">问题是深度学习多工具是否会在每个领域超越并取代高度专业化的算法和数据结构，如果它们都值得拥有它们的位置，或者如果它们的互补优势结合起来，它们是否会发光。与此同时，最初对深度学习纠正拼写的热情随之而来的是一些幻灭。</p><p id="b364" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">他们求助于深度学习的原因是他们认为传统拼写检查的“糟糕透顶”的性能(估计拼写一个短单词需要<strong class="jp ir"> ~0.1 秒</strong>)。</p><p id="0312" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然到目前为止没有披露深度学习方法的纠正性能和内存消耗，但我知道拼写纠正可以比 0.1 秒快得多。</p><p id="968a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lb" href="https://github.com/wolfgarbe/symspell" rel="noopener ugc nofollow" target="_blank"> SymSpell </a>，基于<a class="ae lb" href="https://seekstorm.com/blog/1000x-spelling-correction/" rel="noopener ugc nofollow" target="_blank">对称删除拼写纠正算法</a>，在一台旧 MacBook Pro 上仅仅用了<strong class="jp ir"> </strong> <a class="ae lb" href="https://seekstorm.com/blog/fast-approximate-string-matching/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> 0.000033 秒</strong>(编辑距离 2)<strong class="jp ir">0.000180</strong>秒(编辑距离 3) </a>。</p><p id="a2ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不过话说回来，他们的方法能够处理更复杂的表达式，比如<strong class="jp ir">“爱在哪里”</strong>！</p><p id="da7c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">SymSpell 总是期望单个输入项，并且不能纠正插入到单词中的<strong class="jp ir">个空格或者两个单词</strong>之间缺少的<strong class="jp ir">个空格。</strong></p><p id="1b1c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的好奇心被激起，我决定尝试在 SymSpell 上增加一个算法层来处理它。</p><h1 id="c8a1" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">symspell 化合物</h1><p id="8698" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated"><a class="ae lb" href="https://github.com/wolfgarbe/SymSpellCompound" rel="noopener ugc nofollow" target="_blank"> SymSpellCompound </a>支持多单词输入字符串的复合感知自动拼写纠正。它建立在比 SymSpell 快 100 万倍的拼写纠正算法之上。</p><p id="3bb4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 1。复合分裂&amp;分解</strong></p><p id="9276" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">SymSpell 假设每个输入字符串都是一个单独的术语。SymSpellCompound 支持<em class="mf">复合拆分/分解</em>三种情况:</p><ol class=""><li id="4329" class="mg mh iq jp b jq jr ju jv jy mi kc mj kg mk kk ml mm mn mo bi translated">错误地在正确的单词中插入空格导致两个不正确的术语</li><li id="e8cc" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">错误地<strong class="jp ir">省略了两个正确单词之间的空格</strong>导致了一个不正确的组合术语</li><li id="c2bb" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated"><strong class="jp ir">多个输入项</strong>有/无拼写错误</li></ol><p id="4d4e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">拆分错误、连接错误、替换错误、换位错误、删除错误和插入错误可以混合在同一个单词中。</p><p id="fc22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 2。自动拼写纠正</strong></p><ul class=""><li id="e3fe" class="mg mh iq jp b jq jr ju jv jy mi kc mj kg mk kk mu mm mn mo bi translated">大型文档集合使得手动校正不可行，并且需要无人监督的全自动拼写校正。</li><li id="4ec5" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk mu mm mn mo bi translated">在单个单词的常规拼写校正中，向用户呈现拼写校正建议。对于长的多单词文本的自动拼写校正，算法本身必须做出有根据的选择。</li></ul><p id="352b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">例子:</strong></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/cc31bb141cfb2c1df83f1a33b83da63c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sIteAgI50KMKAXdxQtUKBQ.png"/></div></div></figure><p id="1f5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">工作原理</strong></p><p id="a055" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mf">个人代币</em></p><p id="99cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">输入字符串被分割成标记。然后使用<a class="ae lb" href="https://seekstorm.com/blog/1000x-spelling-correction/" rel="noopener ugc nofollow" target="_blank">对称删除拼写校正算法</a>来单独获得每个单词的建议。</p><p id="c0f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mf">组合令牌</em></p><p id="dfab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，检查每个二元模型(连续标记的级联对)的建议，但仅当两个连续标记中的一个不提供建议或最佳建议的编辑距离&gt; 1 时。</p><p id="fd63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果建议(令牌 1+令牌 2 ),则建议组合令牌优先。编辑距离+1 &lt; suggestion(token1).editDistance+suggestion(token2).editDistance</p><p id="9bfd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mf">分割令牌</em></p><p id="868f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，还会生成一个标记的所有子标记对，但前提是该标记未合并，该标记由多个字符组成，并且该标记的最佳建议的 editDistance &gt;0。</p><p id="db7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mf">字典生成</em></p><p id="d31c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">词典质量对纠错质量至关重要。为了实现这一点，两个数据源通过交集进行了合并:</p><p id="e973" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lb" href="http://storage.googleapis.com/books/ngrams/books/datasetsv2.html" rel="noopener ugc nofollow" target="_blank"> Google Books Ngram data </a>，其提供了代表性的<strong class="jp ir">词频</strong>，但是包含许多带有<strong class="jp ir">拼写错误</strong>和<a class="ae lb" href="http://wordlist.aspell.net/" rel="noopener ugc nofollow" target="_blank">怒容的条目——面向拼写检查器的词表</a>，其确保了真实的<strong class="jp ir">英语词汇</strong>但是<strong class="jp ir">不需要词频</strong>来对相同编辑距离内的建议进行排序。</p><p id="1ef4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">性能</strong></p><p id="f3dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">0.0002 秒/字<br/> 5000 字/秒(2012 Macbook Pro 上的单核)</p><p id="d7ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">应用</strong></p><p id="29ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于单个用户或小编辑距离，其他算法可能就可以了。但是对于搜索引擎和搜索即服务搜索 API，您必须为数千个并发用户提供服务，同时仍然保持几毫秒的延迟，并且拼写纠正甚至不是主要的处理任务，而只是查询预处理中的许多组件之一，您需要最快的拼写纠正。</p><ul class=""><li id="aa7a" class="mg mh iq jp b jq jr ju jv jy mi kc mj kg mk kk mu mm mn mo bi translated">查询校正(<a class="ae lb" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2137159/" rel="noopener ugc nofollow" target="_blank">高达<strong class="jp ir"> 26% </strong>的网络查询包含拼写错误的术语</a>)，</li><li id="a451" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk mu mm mn mo bi translated">聊天机器人(例如使用符号拼写的<a class="ae lb" href="https://blog.infermedica.com/three-challenges-youre-going-to-face-when-building-a-chatbot/" rel="noopener ugc nofollow" target="_blank">符号</a>和<a class="ae lb" href="https://blog.florence.chat/florence-gets-a-little-bit-more-intelligent-c280c20b1b45" rel="noopener ugc nofollow" target="_blank">佛罗伦萨</a>)，</li><li id="f94c" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk mu mm mn mo bi translated">OCR 后处理，</li><li id="3e34" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk mu mm mn mo bi translated">自动校对。</li></ul><p id="c70d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">频率字典</strong></p><p id="5067" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lb" href="https://github.com/wolfgarbe/SymSpellCompound/blob/master/wordfrequency_en.txt" rel="noopener ugc nofollow" target="_blank">词频列表</a>是通过交叉下面提到的两个列表创建的。通过相互过滤，只使用那些同时出现在两个列表中的单词。应用了附加的过滤器，并且结果列表被截断为大约 80，000 个最频繁的单词。</p><ul class=""><li id="ec54" class="mg mh iq jp b jq jr ju jv jy mi kc mj kg mk kk mu mm mn mo bi translated"><a class="ae lb" href="http://storage.googleapis.com/books/ngrams/books/datasetsv2.html" rel="noopener ugc nofollow" target="_blank">谷歌图书 Ngram 数据</a> <a class="ae lb" href="https://creativecommons.org/licenses/by/3.0/" rel="noopener ugc nofollow" target="_blank">(许可)</a>:提供代表性词频</li><li id="0c03" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk mu mm mn mo bi translated"><a class="ae lb" href="http://wordlist.aspell.net/" rel="noopener ugc nofollow" target="_blank">怒容—面向拼写检查器的单词列表</a> <a class="ae lb" href="http://wordlist.aspell.net/scowl-readme/" rel="noopener ugc nofollow" target="_blank">(许可)</a>:确保真正的英语词汇</li></ul><p id="bedc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">博客文章:算法、基准、应用</strong></p><p id="4750" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lb" href="https://seekstorm.com/blog/1000x-spelling-correction/" rel="noopener ugc nofollow" target="_blank">1000 倍快速拼写校正算法</a> <br/> <a class="ae lb" href="https://seekstorm.com/blog/fast-approximate-string-matching/" rel="noopener ugc nofollow" target="_blank">快速近似字符串匹配大数据中的大编辑距离</a> <br/> <a class="ae lb" href="https://seekstorm.com/blog/very-data-cleaning-of-product-names-company-names-street-names/" rel="noopener ugc nofollow" target="_blank">非常快速的数据清理产品名称、公司名称&amp;街道名称</a></p><p id="6b13" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">待办事宜</strong></p><p id="fea7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果一个<strong class="jp ir">拼写错误同时是一个有效单词</strong>(例如消息 vs .消息)<strong class="jp ir">，那么它当前没有被纠正</strong>。</p><p id="0508" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">词频可以用于排名，但有时在给定的上下文中，罕见的词可能是正确的。</p><p id="8330" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">二元模型概率</strong>可以提供上下文，但上下文通常不是来自连续的术语，而是隐藏在文本的更远处。收集和存储滑动窗口内词汇表的所有术语组合的<strong class="jp ir">同现概率可能是禁止的。</strong></p><p id="1192" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以求助于<strong class="jp ir">语法</strong>和<strong class="jp ir">句子成分</strong>和<a class="ae lb" href="https://research.googleblog.com/2016/05/announcing-syntaxnet-worlds-most.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">语法网</strong> </a>。</p><p id="afc3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以通过利用<strong class="jp ir">键盘接近度</strong>、<strong class="jp ir">语音接近度</strong>和作者过去的<strong class="jp ir">个人词汇偏好</strong>来猜测作者的意图/错误原因。</p><p id="c2b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">正确时会出现误报</strong>，但未知单词在其他已知单词的 editDistanceMax 内。</p></div></div>    
</body>
</html>