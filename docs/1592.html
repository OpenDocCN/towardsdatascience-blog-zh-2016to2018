<html>
<head>
<title>Inter-rater agreement Kappas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">评分者间协议</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/inter-rater-agreement-kappas-69cd8b91ff75?source=collection_archive---------0-----------------------#2017-09-24">https://towardsdatascience.com/inter-rater-agreement-kappas-69cd8b91ff75?source=collection_archive---------0-----------------------#2017-09-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1aba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">又名评分者之间的可靠性或一致性</p><blockquote class="kl km kn"><p id="d9e1" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated">在统计学中，评分者之间的可靠性、评分者之间的一致性或一致性是评分者之间的一致程度。它给出了评委给出的评分中同质性或一致性的程度。</p></blockquote><p id="e588" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里涵盖的Kappas最适合于<strong class="jp ir">【名义】</strong>数据。这些方法忽略了数据中的自然排序(如果有的话)。如果您要使用这些指标，请确保您了解<a class="ae ks" href="https://www.wikiwand.com/en/Cohen%27s_kappa#/Limitations" rel="noopener ugc nofollow" target="_blank">限制</a>。</p><h1 id="efd6" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">科恩的卡帕</h1><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/379f4e8a31b65144ceca6b3a4242302f.png" data-original-src="https://miro.medium.com/v2/resize:fit:198/format:webp/1*70KTEzRPBHbKt2Dgvav9KQ.png"/></div></figure><p id="05a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这有两个部分:</p><ol class=""><li id="99ed" class="lz ma iq jp b jq jr ju jv jy mb kc mc kg md kk me mf mg mh bi translated">计算观察到的一致</li><li id="4dfb" class="lz ma iq jp b jq mi ju mj jy mk kc ml kg mm kk me mf mg mh bi translated">偶然计算一致</li></ol><p id="c6ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设我们正在处理“是”和“否”的答案以及2名评定者。以下是收视率:</p><pre class="ls lt lu lv gt mn mo mp mq aw mr bi"><span id="51b4" class="ms ku iq mo b gy mt mu l mv mw">rater1 = ['yes', 'no', 'yes', 'yes', 'yes', 'yes', 'no', 'yes', 'yes']<br/>rater2 = ['yes', 'no', 'no', 'yes', 'yes', 'yes', 'yes', 'yes', 'yes']</span></pre><p id="364e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将这些评级转化为混乱矩阵:</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/3338e61ef4b04e3a3fbaa47fcbc45ac2.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*IqZ6rQHhZb5Yj1yhylhHcQ.png"/></div></figure><pre class="ls lt lu lv gt mn mo mp mq aw mr bi"><span id="ae43" class="ms ku iq mo b gy mt mu l mv mw">Observed agreement = (6 + 1) / 10 = 0.7<br/>Chance agreement   = probability of randomly saying yes (P_yes) + probability of randomly saying no (P_no)<br/>P_yes              = (6 + 1) / 10 * (6 + 1) / 10 = 0.49<br/>P_no               = (1 + 1) / 10 * (1 + 1) / 10 = 0.04<br/>Chance agreement   = 0.49 + 0.04 = 0.53</span></pre><p id="a090" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为观察一致大于偶然一致，我们会得到一个正的Kappa。</p><pre class="ls lt lu lv gt mn mo mp mq aw mr bi"><span id="92b7" class="ms ku iq mo b gy mt mu l mv mw">kappa = 1 - (1 - 0.7) / (1 - 0.53) = 0.36</span></pre><p id="7e0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">或者直接用<code class="fe my mz na mo b">sklearn</code>的实现</p><pre class="ls lt lu lv gt mn mo mp mq aw mr bi"><span id="efca" class="ms ku iq mo b gy mt mu l mv mw"><strong class="mo ir">from</strong> <strong class="mo ir">sklearn.metrics</strong> <strong class="mo ir">import</strong> cohen_kappa_score</span><span id="138e" class="ms ku iq mo b gy nb mu l mv mw">cohen_kappa_score(rater1, rater2)</span></pre><p id="99fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它返回0.35714。</p><p id="eabc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">卡巴的解释</strong></p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/338504d1aa8382062b195c62a3b2023c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mHB6Ciljb4OnOacNWgc0aw.png"/></div></div></figure><p id="678a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">特殊情况</strong></p><h2 id="e788" class="ms ku iq bd kv nh ni dn kz nj nk dp ld jy nl nm lh kc nn no ll kg np nq lp nr bi translated">小于机会协议</h2><pre class="ls lt lu lv gt mn mo mp mq aw mr bi"><span id="cb45" class="ms ku iq mo b gy mt mu l mv mw">rater1 = ['no', 'no', 'no', 'no', 'no', 'yes', 'no', 'no', 'no', 'no']<br/>rater2 = ['yes', 'no', 'no', 'yes', 'yes', 'no', 'yes', 'yes', 'yes', 'yes']<br/>cohen_kappa_score(rater1, rater2)<br/>-0.2121</span></pre><h2 id="6bc9" class="ms ku iq bd kv nh ni dn kz nj nk dp ld jy nl nm lh kc nn no ll kg np nq lp nr bi translated">如果所有的评级都是相同和相反的</h2><p id="d0cc" class="pw-post-body-paragraph jn jo iq jp b jq ns js jt ju nt jw jx jy nu ka kb kc nv ke kf kg nw ki kj kk ij bi translated">这种情况可靠地产生0的<code class="fe my mz na mo b">kappa</code></p><pre class="ls lt lu lv gt mn mo mp mq aw mr bi"><span id="a024" class="ms ku iq mo b gy mt mu l mv mw">rater1 = ['yes'] * 10<br/>rater2 = ['no'] * 10<br/>cohen_kappa_score(rater1, rater2)<br/>0.0</span></pre><h2 id="03c0" class="ms ku iq bd kv nh ni dn kz nj nk dp ld jy nl nm lh kc nn no ll kg np nq lp nr bi translated">随机评级</h2><p id="2eb3" class="pw-post-body-paragraph jn jo iq jp b jq ns js jt ju nt jw jx jy nu ka kb kc nv ke kf kg nw ki kj kk ij bi translated">对于随机评分，<code class="fe my mz na mo b">Kappa</code>遵循平均值约为零的正态分布。</p><p id="0b1f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">随着评级数量的增加，Kappa值在分布中的可变性更小。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/95d1f6a6c0c214fdeaccbfb9ea38d1c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*ZQM2YjzJaiLhInf_DEr2vg.png"/></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk">10 random ratings for each rater (random sample of 1,000 inter-rater Kappa calculations)</figcaption></figure><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/206f087ac39901047ef20f0c34c98a9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*gz8l8cBSTptzR0zbLQW_yQ.png"/></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk">100 random ratings for each rater (random sample of 1,000 inter-rater Kappa calculations)</figcaption></figure><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/a0a6df0620ee9df6387d8d106e891929.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*_Zwsjmi95mJmTTXRo2zTfw.png"/></div></figure><p id="18f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以在此找到更多详情<a class="ae ks" href="https://www.wikiwand.com/en/Cohen%27s_kappa" rel="noopener ugc nofollow" target="_blank"/></p><p id="0c0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">请注意，Cohen的Kappa仅适用于对完全相同的项目进行评分的2名评分者。</strong></p></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><h1 id="fbbc" class="kt ku iq bd kv kw oj ky kz la ok lc ld le ol lg lh li om lk ll lm on lo lp lq bi translated">弗莱斯</h1><p id="2b27" class="pw-post-body-paragraph jn jo iq jp b jq ns js jt ju nt jw jx jy nu ka kb kc nv ke kf kg nw ki kj kk ij bi translated">将Cohen的Kappa扩展到2名以上的评定者。</p><p id="829c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">解释</p><blockquote class="kl km kn"><p id="a1c6" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><em class="iq">它可以被解释为表达评价人之间观察到的一致程度超过了所有评价人完全随机进行评价时的预期程度。</em></p></blockquote><p id="1e0e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">评分者可以对不同的项目进行评分，而对于Cohen，他们需要对完全相同的项目进行评分</p><blockquote class="kl km kn"><p id="6a64" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><em class="iq">Fleiss’kappa特别允许，尽管有固定数量的评定者(例如，三个)，不同的项目可以由不同的个人进行评定</em></p></blockquote><p id="f1a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，假设我们有10名评定者，每人对5个项目进行“是”或“否”评定:</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/c5b364b915105630c9d73154bcb387b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:166/format:webp/1*5fFpMz176SBFyh1OFlx4oA.png"/></div></figure><p id="0a0a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，假设我们有10名评定者，每人对5个项目进行“是”或“否”评定:</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi op"><img src="../Images/b4639694fe4a4dd5d53114317aea07a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:332/format:webp/1*XkmI_82dwnBuAlh8I1k_Tg.png"/></div></figure><p id="4a0e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如第一行(P_1):</p><pre class="ls lt lu lv gt mn mo mp mq aw mr bi"><span id="a3a4" class="ms ku iq mo b gy mt mu l mv mw">P_1 = (10 ** 2 + 0 ** 2 - 10) / (10 * 9) = 1</span></pre><p id="a1b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第一列(p_1):</p><pre class="ls lt lu lv gt mn mo mp mq aw mr bi"><span id="1a94" class="ms ku iq mo b gy mt mu l mv mw">p_1 = 34 / (5 * 10) = 0.68</span></pre><p id="d79e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果不清楚的话，在这里看一下这个例子。</p><p id="d2e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在你可以计算Kappa:</p><pre class="ls lt lu lv gt mn mo mp mq aw mr bi"><span id="a865" class="ms ku iq mo b gy mt mu l mv mw">P_bar = (1 / 5) * (1 + 0.64 + 0.8 + 1 + 0.53) = 0.794<br/>P_bar_e = 0.68 ** 2 + 0.32 ** 2 = 0.5648</span></pre><p id="a899" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这一点上，我们已经得到了我们需要的一切，而<code class="fe my mz na mo b">kappa</code>的计算就像我们计算科恩的:</p><pre class="ls lt lu lv gt mn mo mp mq aw mr bi"><span id="834d" class="ms ku iq mo b gy mt mu l mv mw">kappa = (0.794 - 0.5648) / (1 - 0.5648) = 0.53</span></pre><p id="b555" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在这里找到这篇文章附带的Jupyter笔记本。</p><p id="bde8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">参考文献</strong></p><ul class=""><li id="7ed9" class="lz ma iq jp b jq jr ju jv jy mb kc mc kg md kk oq mf mg mh bi translated">【https://www.wikiwand.com/en/Inter-rater_reliability T4】</li><li id="2a83" class="lz ma iq jp b jq mi ju mj jy mk kc ml kg mm kk oq mf mg mh bi translated"><a class="ae ks" href="https://www.wikiwand.com/en/Fleiss%27_kappa" rel="noopener ugc nofollow" target="_blank">https://www.wikiwand.com/en/Fleiss%27_kappa</a></li></ul></div></div>    
</body>
</html>