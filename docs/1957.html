<html>
<head>
<title>KOLMOGOROV–SMIRNOV TEST</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">科尔莫戈罗夫-斯米尔诺夫试验</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/kolmogorov-smirnov-test-84c92fb4158d?source=collection_archive---------0-----------------------#2017-11-22">https://towardsdatascience.com/kolmogorov-smirnov-test-84c92fb4158d?source=collection_archive---------0-----------------------#2017-11-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/b30411080fc71759960f2601401a8c04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D5gDYGioRL5UNdujyiwptQ.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="e426" class="pw-subtitle-paragraph jy ja jb bd b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dk translated">数据科学工具箱中的必备工具</h2></div><p id="d0f7" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">最近，在工作中，我们不得不做许多无人监督的分类。我们基本上必须从样本人群中区分出N个类别。我们大概知道有多少个类别，但没有什么是确定的，我们发现了<a class="ae lm" href="https://en.wikipedia.org/wiki/Kolmogorov%E2%80%93Smirnov_test" rel="noopener ugc nofollow" target="_blank">Kolmogorov-Smirnov测试</a>这是一种非常有效的方法，可以确定两个样本之间是否存在显著差异。</p><p id="ddf2" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">我将向您介绍一下Kolmogorov-Smirnov测试的背景，并向您介绍我们用它解决的一个问题。</p><p id="8308" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">在<a class="ae lm" href="http://coffeeanddata.ca" rel="noopener ugc nofollow" target="_blank"> coffeeanddata.ca </a>上的原始帖子</p><h1 id="815a" class="ln lo jb bd lp lq lr ls lt lu lv lw lx kh ly ki lz kk ma kl mb kn mc ko md me bi translated">一点理论</h1><p id="013f" class="pw-post-body-paragraph kq kr jb ks b kt mf kc kv kw mg kf ky kz mh lb lc ld mi lf lg lh mj lj lk ll ij bi translated"><em class="mk">拒绝零假设。这听起来像是大学统计课上的痛苦回忆，但实际上这正是我们想要做的。我们要排除两个样本来自完全相同的分布的可能性。让我们来看看一些可用测试的非常高层次、非数学的概述。如果你想很好地理解所有这些测试背后的数学原理，可以使用所有章节中提供的维基百科链接。</em></p><h2 id="890f" class="ml lo jb bd lp mm mn dn lt mo mp dp lx kz mq mr lz ld ms mt mb lh mu mv md mw bi translated">学生的T检验</h2><p id="ad2e" class="pw-post-body-paragraph kq kr jb ks b kt mf kc kv kw mg kf ky kz mh lb lc ld mi lf lg lh mj lj lk ll ij bi translated">学生的T检验可能是最广为人知的拒绝零假设的方法。该测试计算一个样本相对于正常总体或另一个样本的P值。结果P值告诉您这些样本来自完全相同的分布的可能性。</p><p id="033a" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">当获得P值时，可以将其与统计显著性阈值(例如. 05)进行比较，如果P值更小，我们可以拒绝零假设。</p><p id="5f45" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">学生的T检验有问题，样本必须是正态的(正态分布)。这对我们来说是一个问题，因为我们做了很多泊松分布的工作。</p><h2 id="d454" class="ml lo jb bd lp mm mn dn lt mo mp dp lx kz mq mr lz ld ms mt mb lh mu mv md mw bi translated">科尔莫戈罗夫-斯米尔诺夫试验</h2><p id="68e8" class="pw-post-body-paragraph kq kr jb ks b kt mf kc kv kw mg kf ky kz mh lb lc ld mi lf lg lh mj lj lk ll ij bi translated">Kolmogorov-Smirnov测试 (KS测试)稍微复杂一点，可以让你检测出用学生的T测试无法检测出的模式。</p><p id="1ed0" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">来自维基百科:</p><blockquote class="mx"><p id="7a19" class="my mz jb bd na nb nc nd ne nf ng ll dk translated"><em class="nh">“Kolmogorov–Smirnov统计量量化样本的</em> <a class="ae lm" href="https://en.wikipedia.org/wiki/Empirical_distribution_function" rel="noopener ugc nofollow" target="_blank"> <em class="nh">经验分布函数</em> </a> <em class="nh">与参考分布的</em> <a class="ae lm" href="https://en.wikipedia.org/wiki/Cumulative_distribution_function" rel="noopener ugc nofollow" target="_blank"> <em class="nh">累积分布函数</em> </a> <em class="nh">之间的距离，或者两个样本的经验分布函数之间的距离。”</em></p></blockquote><p id="01d1" class="pw-post-body-paragraph kq kr jb ks b kt ni kc kv kw nj kf ky kz nk lb lc ld nl lf lg lh nm lj lk ll ij bi translated">这里有一个例子来说明学生的T检验和KS检验之间的区别。</p><figure class="no np nq nr gt is gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/7af6ac213149bdb96efd2bf0c6c4b5c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/0*_zFg_-LPurj7FbPL."/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk">stackexchange.com</figcaption></figure><p id="5a7c" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">因为样本均值和标准差非常相似，所以学生的T检验给出了非常高的p值。KS检验可以检测方差。在这种情况下，红色分布具有KS检测到的略微二项式分布。换句话说:</p><ul class=""><li id="ca10" class="nw nx jb ks b kt ku kw kx kz ny ld nz lh oa ll ob oc od oe bi translated">学生的T检验表明，两个样本有<strong class="ks jc"> 79.3% </strong>的几率来自同一分布。</li><li id="f586" class="nw nx jb ks b kt of kw og kz oh ld oi lh oj ll ob oc od oe bi translated">KS检验表明有<strong class="ks jc"> 1.6% </strong>的几率两个样本来自同一个分布。</li></ul><h2 id="5436" class="ml lo jb bd lp mm mn dn lt mo mp dp lx kz mq mr lz ld ms mt mb lh mu mv md mw bi translated">其他测试</h2><p id="daa1" class="pw-post-body-paragraph kq kr jb ks b kt mf kc kv kw mg kf ky kz mh lb lc ld mi lf lg lh mj lj lk ll ij bi translated">有许多其他测试和算法来做这类工作。<a class="ae lm" href="https://en.wikipedia.org/wiki/Shapiro%E2%80%93Wilk_test" rel="noopener ugc nofollow" target="_blank">夏皮罗-维尔克测试</a> <strong class="ks jc">和</strong> <a class="ae lm" href="https://en.wikipedia.org/wiki/Anderson%E2%80%93Darling_test" rel="noopener ugc nofollow" target="_blank"> <strong class="ks jc">安德森-达林测试</strong> </a>是被认为比KS测试更强大的两种测试。这两种测试有一个主要的缺点，它们不允许你比较两个样本，它们总是比较一个样本和一个标准分布。</p><p id="14db" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">编辑:我的一位同事向我展示了Anderson-Darling也可以用于双向测试(比较样本)。</p><blockquote class="ok ol om"><p id="6fd5" class="kq kr mk ks b kt ku kc kv kw kx kf ky on la lb lc oo le lf lg op li lj lk ll ij bi translated"><em class="jb">“双样本K–S检验是比较两个样本的最有用和最通用的非参数方法之一”——维基百科。</em></p></blockquote><h1 id="47f5" class="ln lo jb bd lp lq lr ls lt lu lv lw lx kh ly ki lz kk ma kl mb kn mc ko md me bi translated">检测设备用户</h1><p id="9b53" class="pw-post-body-paragraph kq kr jb ks b kt mf kc kv kw mg kf ky kz mh lb lc ld mi lf lg lh mj lj lk ll ij bi translated">对于这个特定的任务，我们必须检测哪个用户正在使用特定的设备。每个设备由一个或多个不同的用户使用，我们必须想出一种技术来识别是否有一个或多个用户。在多个用户的情况下，我们希望确定哪个用户使用了哪些内容。</p><h2 id="66f0" class="ml lo jb bd lp mm mn dn lt mo mp dp lx kz mq mr lz ld ms mt mb lh mu mv md mw bi translated">我们的策略</h2><p id="9b26" class="pw-post-body-paragraph kq kr jb ks b kt mf kc kv kw mg kf ky kz mh lb lc ld mi lf lg lh mj lj lk ll ij bi translated">我们决定混合使用图网络和KS测试来识别潜在的集群。这个演示背后的想法是想象一个图形网络，其中每个节点(样本)都与其他每个节点(样本)相连。这些节点之间的顶点或链接将进行测试，换句话说，这两个节点有多近。因此，具有低KS P值的两个节点会很近，而具有高P值的两个节点会很远。这有望创建可区分的集群。</p><h2 id="c1a2" class="ml lo jb bd lp mm mn dn lt mo mp dp lx kz mq mr lz ld ms mt mb lh mu mv md mw bi translated">数据集</h2><p id="139a" class="pw-post-body-paragraph kq kr jb ks b kt mf kc kv kw mg kf ky kz mh lb lc ld mi lf lg lh mj lj lk ll ij bi translated">以下是我们的数据:</p><figure class="no np nq nr gt is gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/a6d3cb69d2f6b5224cb8f95d17ae8207.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/0*OMZ5-CNeRqIJj9aj."/></div></figure><p id="63c0" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">正如你所看到的，我们所有的样本看起来像一个标准偏差非常低的正态分布。我们已经对该设备的所有82个不同使用时段进行了采样。</p><figure class="no np nq nr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi or"><img src="../Images/0d2c6b24e22c36f0ec91391fd8686b10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oyu7pyQKm0vDBx1H."/></div></div></figure><p id="1fa5" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">从这张照片中我们可以看到不同的图案。所有的样本不具有相同的直方图分布。这是一个非常好的开端。在此之后，我们看了明显的分布集群。</p><figure class="no np nq nr gt is gh gi paragraph-image"><div class="gh gi os"><img src="../Images/109a8a2ad6c9fc68e1f1906eaed200a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/0*x4Fv8nVCz3lVpET4."/></div></figure><p id="8326" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">为了做到这一点，我们做了KS矩阵，它由每个样本分布与每隔一个样本的KS双向检验组成。快速查看KS Matrix热图并不能发现明显的结果(如您在右图中所见)。</p><p id="1e2a" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">经过这样的层次聚类，我们已经得到了一些较好的结果。(如下图所示。)</p><figure class="no np nq nr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi or"><img src="../Images/dd4f0beca11506b0bcbed1b9477793e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ko34R5kqQGdlCP7t."/></div></div></figure><p id="0f25" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">在这两个树状图可视化中，我们可以看到一些潜在的(3)集群。经过审查，这些集群是无关紧要的。</p><h2 id="0d13" class="ml lo jb bd lp mm mn dn lt mo mp dp lx kz mq mr lz ld ms mt mb lh mu mv md mw bi translated">网络图</h2><p id="9fba" class="pw-post-body-paragraph kq kr jb ks b kt mf kc kv kw mg kf ky kz mh lb lc ld mi lf lg lh mj lj lk ll ij bi translated">在不成功的树状图聚类之后，我们尝试了所提出的图方法。如前所述，这里的目标是绘制所有可能的节点和顶点。顶点长度是KS测试值。我们不得不移除自我参照(它总是0(显然你和你自己非常相似)。</p><figure class="no np nq nr gt is gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/e3896c946254c4cf5de141aaf0ae6aaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/0*NmsLgfp73tVFnys3."/></div></figure><p id="237f" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">然后我们得到了一个网络图，其中每个人都与其他人相连，这不是特别有用。</p><figure class="no np nq nr gt is gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/b328953004d17058b72947c54ca2f7b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/0*QoAyovmV296TyA20."/></div></figure><p id="1c67" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">下一步是只保留重要链接(低于某个阈值)</p><p id="9266" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">正如我们在这张图片上看到的，我们得到了一个非常令人兴奋的结果。我们可以清楚地看到两个不同的集群和三个异常值。</p><p id="5756" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">这完全符合我们的模型，大集群必须是主要用户，第二个集群可以是替代用户。</p><p id="e97f" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">在有效性验证之后，我们发现集群在集群1和集群2的使用之间发现了一些差异，但不是我们要找的那个。换句话说，它没有解决我们的问题，但它实际上找到了另一种模式，在另一种情况下可能有用。</p><h1 id="1493" class="ln lo jb bd lp lq lr ls lt lu lv lw lx kh ly ki lz kk ma kl mb kn mc ko md me bi translated">结论</h1><p id="16f6" class="pw-post-body-paragraph kq kr jb ks b kt mf kc kv kw mg kf ky kz mh lb lc ld mi lf lg lh mj lj lk ll ij bi translated">经过这项工作，我们得出结论，KS检验是自动区分不同分布的样本的一种非常有效的方法。它并没有完全解决我们的问题，但它确实表明它可以很容易地用在数据科学环境中。</p><p id="9f97" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">今天我向你展示了我们用KS测试解决的一个问题，但我们也用它来解决其他问题。KS测试真的成为我们数据科学瑞士刀里的好测试了。</p><h1 id="436a" class="ln lo jb bd lp lq lr ls lt lu lv lw lx kh ly ki lz kk ma kl mb kn mc ko md me bi translated">想要阅读更多内容</h1><p id="6a45" class="pw-post-body-paragraph kq kr jb ks b kt mf kc kv kw mg kf ky kz mh lb lc ld mi lf lg lh mj lj lk ll ij bi translated">在我的博客上关注我:<a class="ae lm" href="http://coffeeanddata.ca" rel="noopener ugc nofollow" target="_blank"> coffeeanddata.ca </a></p></div></div>    
</body>
</html>