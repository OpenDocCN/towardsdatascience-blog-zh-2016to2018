<html>
<head>
<title>Data Science Simplified Part 8: Qualitative Variables in Regression Models</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学简化版第 8 部分:回归模型中的定性变量</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-science-simplified-part-8-qualitative-variables-in-regression-models-d1817d56245c?source=collection_archive---------4-----------------------#2017-08-19">https://towardsdatascience.com/data-science-simplified-part-8-qualitative-variables-in-regression-models-d1817d56245c?source=collection_archive---------4-----------------------#2017-08-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="49a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本系列的最后几篇博文讨论了回归模型。费尔南多选择了<a class="ae kl" href="https://datascientia.blog/2017/08/09/dss-model-selection-methods/" rel="noopener ugc nofollow" target="_blank">最佳车型。他建立了一个多元回归模型。该模型采用以下形状:</a></p><blockquote class="km"><p id="4b44" class="kn ko iq bd kp kq kr ks kt ku kv kk dk translated"><em class="kw">价格= -55089.98 + 87.34 </em>发动机尺寸+ 60.93 <em class="kw">马力+ 770.42 </em>宽度</p></blockquote><p id="43dc" class="pw-post-body-paragraph jn jo iq jp b jq kx js jt ju ky jw jx jy kz ka kb kc la ke kf kg lb ki kj kk ij bi translated">该模型预测或估计价格(目标)，作为发动机尺寸、马力和宽度(预测值)的函数。该模型将所有预测值作为数值。</p><p id="2495" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果有定性变量呢？如何使用定性变量来增强模型？定性变量是如何解释的？</p><p id="1bdc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是这篇博文将要回答的几个问题。</p><p id="1315" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">费尔南多得到两个这样的定性变量:</p><ul class=""><li id="5c02" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">燃料类型:使用的燃料类型。该值可以是天然气或柴油。</li><li id="0ec0" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">驱动轮:驱动轮的类型。它有三个值 4 轮(四轮驱动)，后轮(RWD)和前轮(前轮)。</li></ul><p id="9ac8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">数据集是这样的。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lq"><img src="../Images/9157f30b9a6f16ade4f31ccc043b3bd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Cg22pxs2tkayq5x-."/></div></div></figure><p id="d650" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">费尔南多想找出这些定性变量对汽车价格的影响。</p><h1 id="0e0e" class="mc md iq bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">概念</h1><p id="634b" class="pw-post-body-paragraph jn jo iq jp b jq na js jt ju nb jw jx jy nc ka kb kc nd ke kf kg ne ki kj kk ij bi translated">定性变量是非数值变量。它将数据分类。它们也被称为<strong class="jp ir">分类变量</strong>或<strong class="jp ir">因子。</strong></p><p id="70e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因素有层次。水平只不过是特定定性变量的唯一值。</p><ul class=""><li id="3e9a" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">燃料类型有两个唯一的值。汽油还是柴油。这意味着燃料类型有两个因素。</li><li id="064f" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">驱动轮有三个独特的价值。四轮驱动，后轮驱动和前轮驱动。这意味着驱动轮有三个因素。</li></ul><p id="3ee2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当回归模型使用定性变量时，统计引擎会创建虚拟变量。虚拟变量的概念很简单。它只需要两个值 0 或 1。</p><p id="e438" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看一个例子。样本数据有 5 辆汽车，每辆汽车都有柴油或气体燃料类型。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lq"><img src="../Images/4cae542aeb4c29c6fa917689b2e8a880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OTHmIO6OHCc_AtdN."/></div></div></figure><p id="6169" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">燃料类型是一个定性变量。它有两个级别(柴油或天然气)。统计软件包创建一个虚拟变量。它创建了一个名为 fuelTypegas 的伪变量。此变量采用 0 或 1 值。如果燃料类型是气体，则虚拟变量为 1，否则为 0。</p><p id="1aa5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">数学上，它可以写成:</p><ul class=""><li id="df13" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">如果燃料类型是气体，xi = 1</li><li id="51a4" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">xi = 0 表示燃料类型为柴油</li></ul><blockquote class="km"><p id="9c7d" class="kn ko iq bd kp kq nf ng nh ni nj kk dk translated"><em class="kw">回归模型创建的虚拟变量的数量比定性变量中的数字因子值少一个。</em></p></blockquote><p id="2d33" class="pw-post-body-paragraph jn jo iq jp b jq kx js jt ju ky jw jx jy kz ka kb kc la ke kf kg lb ki kj kk ij bi translated">让我们来看看它是如何在回归模型中表现出来的。仅将价格和燃料类型作为输入的简单回归模型提供了以下系数:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lq"><img src="../Images/d403ea2ae761c7bb2427ee73db56178b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rFy0n5_7fUVOUTQx."/></div></div></figure><p id="0501" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">只有一个系数和一个截距。回归模型为定性变量(本例中为气体)的因子值创建一个虚拟变量。</p><p id="525b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面写着:</p><ul class=""><li id="7e2d" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">如果虚拟变量为 0，即汽车的燃料类型为柴油，则价格= 18348 + 0 x (-6925) = $18348</li><li id="d360" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">如果虚拟变量为 1，即汽车的燃料类型为天然气，则价格= 18348 + 1 x (-6925) = $11423</li></ul><p id="87bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">具有两个因素水平的定性变量的处理方式是清楚的。两级以上的变量呢？让我们检查另一个例子来理解它。</p><p id="89bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">驱动轮是一个有三个因素的定性变量。在这种情况下，回归模型创建了两个虚拟变量。让我们看一个例子。样本数据有 4 辆汽车。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lq"><img src="../Images/c857febe8c5edc3d12f297f5b8cec1cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RWVZ7TRcfuiM_h-l."/></div></div></figure><p id="455b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建了两个虚拟变量:</p><ul class=""><li id="489e" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">驱动轮前进:如果驱动轮类型是前进，则为 1，否则为 0</li><li id="cccc" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">如果驱动轮类型是 rwd，则为 1，否则为 0</li></ul><p id="857f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">数学上，它可以写成:</p><ul class=""><li id="975b" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">如果驱动轮向前，xi1 = 1；如果驱动轮不向前，则为 0。</li><li id="eb24" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">如果驱动轮是后轮，xi2 = 1；如果驱动轮不是后轮，则为 0。</li></ul><p id="040c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，4WD 没有虚拟变量。</p><p id="7d65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它们在回归模型中是如何体现的？回归模型处理它们的方式如下:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lq"><img src="../Images/d3ffedc5a435040fb68ff630cc6a23a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WBILZGtQXMM0EBTc."/></div></div></figure><ul class=""><li id="3d66" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">首先，它为价格估算创建了一个<strong class="jp ir"> <em class="nk">基线</em> </strong>。基线是没有创建虚拟变量的定性变量的平均价格。这是截距值。基线方程适用于 4WD。这是一辆四轮驱动汽车的平均价格。</li><li id="322b" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">对于前轮驱动:前轮驱动的平均价格估计为<strong class="jp ir">基线+1×前轮驱动系数。</strong>即价格= 7603+1×1405+0×10704 = 9008 美元。这意味着平均来说，一辆四轮驱动汽车比一辆四轮驱动汽车贵 1405 美元。</li><li id="772d" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">对于 RWD:后轮驱动(红色)的价格估计为<strong class="jp ir">基线+1 x RWD 系数。</strong>即价格= 7603+0×1405+1×10704 = 18307 美元。这意味着平均而言，一辆后轮驱动汽车比一辆四轮驱动汽车贵 10704 美元。</li></ul><p id="dea1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所有具有两个以上因子值的定性变量都以类似方式处理。</p><h1 id="33e5" class="mc md iq bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">模型结构</h1><p id="46ea" class="pw-post-body-paragraph jn jo iq jp b jq na js jt ju nb jw jx jy nc ka kb kc nd ke kf kg ne ki kj kk ij bi translated">既然定性变量的处理机制。让我们看看费尔南多是如何将其应用到他的模型中的。他最初的模型如下:</p><blockquote class="km"><p id="af66" class="kn ko iq bd kp kq kr ks kt ku kv kk dk translated"><em class="kw">价格= -55089.98 + 87.34 </em>发动机尺寸+ 60.93 <em class="kw">马力+ 770.42 </em>宽度</p></blockquote><p id="12dd" class="pw-post-body-paragraph jn jo iq jp b jq kx js jt ju ky jw jx jy kz ka kb kc la ke kf kg lb ki kj kk ij bi translated">他增加了两个定性变量。燃料类型和车轮驱动。该模型的一般形式写为:</p><blockquote class="km"><p id="a7fb" class="kn ko iq bd kp kq kr ks kt ku kv kk dk translated"><em class="kw">价格= β0 + β1 .发动机尺寸+ β2 .马力+ β3 .宽度+ β4 .燃油类型+β5 .驱动轮 fwd + β6 .驱动轮 rwd</em></p></blockquote><p id="ce39" class="pw-post-body-paragraph jn jo iq jp b jq kx js jt ju ky jw jx jy kz ka kb kc la ke kf kg lb ki kj kk ij bi translated">Fernando 在其统计包中训练该模型，并获得以下系数。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lq"><img src="../Images/9c7df7fb2daec2f75869c7143c7e1345.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HusasbuyuJn1g-87."/></div></div></figure><p id="09ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该模型的方程式为:</p><blockquote class="km"><p id="9d5b" class="kn ko iq bd kp kq kr ks kt ku kv kk dk translated"><em class="kw">价格= -76404.83 + 57.20 *发动机尺寸+ 23.72 *马力+ 1214.42 *宽度— 1381.47 *燃油类型气-344.62 *驱动轮 fwd + 2189.16 *驱动轮 rwd </em></p></blockquote><p id="5043" class="pw-post-body-paragraph jn jo iq jp b jq kx js jt ju ky jw jx jy kz ka kb kc la ke kf kg lb ki kj kk ij bi translated">这里混合了定量和定性变量。变量是相互独立的。现在让我们来解释这些系数:</p><ul class=""><li id="7400" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">β0:注意，没有为柴油汽车和 4WD 汽车创建虚拟变量。<em class="nk"> β0 代表柴油和 4WD 汽车的平均价格。</em>是负值。这意味着，如果有柴油四轮驱动，平均价格将是负值。这是不可能的。该模型可能违反了线性回归假设。</li><li id="be8b" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">β1:这种解释与多元回归的解释相同。<strong class="jp ir"> <em class="nk">发动机尺寸增加 1 个单位，解释为汽车价格平均增加。</em> </strong>发动机尺寸每增加 1 个单位，汽车价格平均增加 57 美元。</li><li id="2f09" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">β2:这种解释与多元回归的解释相同。<strong class="jp ir"> <em class="nk">马力增加 1 个单位，解释为车价平均增加。</em> </strong> <em class="nk"> </em>马力增加 1 个单位，汽车价格平均增加 23.72 美元。</li><li id="634c" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">β3:这种解释与多元回归的解释相同。<strong class="jp ir"> <em class="nk">宽度增加 1 个单位，解释为车价平均增加。</em> </strong> <em class="nk"> </em>宽度增加 1 个单位，汽车价格平均增加 1214.42 美元。</li><li id="6612" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">β4:该系数是虚拟变量(燃料型气体)的结果。<strong class="jp ir"> <em class="nk">它解释为柴油汽车和燃气汽车的平均价格差。</em> </strong> <strong class="jp ir"> <em class="nk">这意味着，平均而言，一辆燃油型汽车比一辆柴油车便宜 1381.47 美元。</em>T25】</strong></li><li id="7327" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">β5:该系数是虚拟变量(驱动轮向前)的结果。<strong class="jp ir"> <em class="nk">它解释为四轮驱动和四轮驱动汽车之间的平均价格差。这意味着平均来说，一辆四轮驱动汽车要比一辆四轮驱动汽车便宜 344.62 美元。</em> </strong></li><li id="2534" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">β6:该系数是虚拟变量(驱动轮 rwd)的结果。<strong class="jp ir"> <em class="nk">它被解释为一辆四轮驱动汽车和一辆 RWD 汽车之间的平均价格差。这意味着平均来说，一辆 RWD 轿车要比一辆四轮驱动轿车贵 2189.16 美元。</em>T41】</strong></li><li id="6dfe" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">调整后的 r 平方为 0.8183。这意味着该模型解释了训练数据中 81.83%的变异。</li><li id="c478" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">请注意，并非所有系数都很重要。<strong class="jp ir"> <em class="nk">事实上，在这种情况下，定性变量对模型表现没有意义。</em>T45】</strong></li></ul><h1 id="9b98" class="mc md iq bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">结论</h1><p id="e6cd" class="pw-post-body-paragraph jn jo iq jp b jq na js jt ju nb jw jx jy nc ka kb kc nd ke kf kg ne ki kj kk ij bi translated">这个模型并不比最初创建的模型更好。然而，它已经完成了它的工作。<strong class="jp ir"> <em class="nk">我们了解回归模型中定性变量的解释方式。</em> </strong>很明显，原来的型号配<strong class="jp ir"> <em class="nk">马力，引擎尺寸和宽度比</em> </strong>要好。然而，他想知道:马力、发动机尺寸和宽度是分开处理的。</p><blockquote class="km"><p id="7009" class="kn ko iq bd kp kq kr ks kt ku kv kk dk translated"><strong class="ak"> <em class="kw">马力、发动机尺寸、宽度有关系怎么办？这些关系可以建模吗？</em>T11】</strong></p></blockquote><p id="87ec" class="pw-post-body-paragraph jn jo iq jp b jq kx js jt ju ky jw jx jy kz ka kb kc la ke kf kg lb ki kj kk ij bi translated">本系列的下一篇博文将回答这些问题。它将解释互动的概念。</p></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><p id="31a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nk">原载于 2017 年 8 月 19 日</em><a class="ae kl" href="https://datascientia.blog/2017/08/19/dss8-qual-var/" rel="noopener ugc nofollow" target="_blank"><em class="nk">datascientia . blog</em></a><em class="nk">。</em></p></div></div>    
</body>
</html>