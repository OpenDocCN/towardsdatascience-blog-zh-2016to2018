<html>
<head>
<title>Planning the path for a Self-Driving Car on a Highway</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为高速公路上的自动驾驶汽车规划路径</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/planning-the-path-for-a-self-driving-car-on-a-highway-7134fddd8707?source=collection_archive---------5-----------------------#2017-08-09">https://towardsdatascience.com/planning-the-path-for-a-self-driving-car-on-a-highway-7134fddd8707?source=collection_archive---------5-----------------------#2017-08-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="a339" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">用数据做酷事！</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/7158a94cc0d918d13f73d7373bbd82a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*ufWDxL-5ogd22Rg_37rakw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Car deciding to make a lane change</figcaption></figure><p id="ca38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">路径规划是自动驾驶汽车的大脑。这个模块试图复制我们人类在驾驶时的思维和决策——阅读地图，分析我们的环境(其他车辆和行人)，并根据安全、速度和交通规则决定最佳行动。</p><p id="9a67" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于我在Udacity自动驾驶汽车工程师Nanodegree项目第三学期的第一个项目，我实现了一个高速公路路径规划器，以在模拟的多车道和交通的高速公路上驾驶汽车。见下面的gif和视频。模拟器为我们提供汽车和交通的当前位置和速度，然后我们将下一个x和y位置发送给模拟器，这样它就可以将汽车开到那里。目标是驾驶汽车成功地避免任何碰撞，安全地改变车道，保持低于速度限制，但不要太慢，并尽量减少对乘客的冲击。</p><p id="247a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在我的<a class="ae ky" href="https://github.com/priya-dwivedi/CarND/tree/master/Term3/CarND-Path_Planning-P1" rel="noopener ugc nofollow" target="_blank"> Github repo </a>上找到完整的代码</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi kz"><img src="../Images/e002b3408fdcf6b49755580156008910.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/1*cUw2FQFMexNiC-QAAk6_mQ.gif"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Highway Path Planning</figcaption></figure><p id="1419" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是汽车启动，改变速度和车道，避免碰撞的视频。请注意终端是如何为用户显示所有有用信息的。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="la lb l"/></div></figure><h1 id="a675" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">路径规划是怎么做的？</h1><p id="b9d1" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated"><strong class="jp ir">第一步:分析传感器融合数据，并对其进行有意义的分类</strong></p><p id="5ef4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从模拟器中，我们获得模拟器中其他车辆的数据。这些数据包括汽车id、汽车位置(x和y)、汽车速度(vx和vy)、汽车s(沿车道的距离)和汽车d(沿车道宽度的距离)..我获取了数据，并将模拟器中的所有汽车分为我自己的车道、我的左车道或我的右车道(如果这些车道存在的话)。然后，我计算出决策所需的重要指标。这些是</p><ul class=""><li id="b608" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">在我的车道上-到我前面最近的车的距离和最近的车的速度</li><li id="cc68" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">相邻车道-左侧车道前后最近车辆的距离，右侧车道也是如此</li></ul><p id="5ead" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我还确保了——如果我在最左边的车道上，那么我设置violate_left = 1来确保我不会左转。类似地，如果我在最右边的车道，那么我设置violate_right = 1。如果我的车道是空的或者任何其他车道是空的，那么最近的车距被设置为999</p><p id="026b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第二步:计算决策成本，选择成本最低的行动</strong> <br/>我想到了我的汽车在任何情况下都可能做出的4个决策:</p><p id="d36c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">1.继续在我的车道上以最大速度行驶</p><p id="73a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.继续在我的车道上行驶，但是减速到和前面的车差不多的速度</p><p id="9792" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.换到左侧车道</p><p id="4b8d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.向右转</p><p id="1e96" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我决定为所有这些不同的功能分配成本:<br/> <strong class="jp ir"> <em class="kl">成本功能—在我的车道上继续</em> </strong></p><ul class=""><li id="19a5" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">如果我的车道上没有车辆，那么成本= 0(记住，我们希望最小化成本，所以这是最好的结果)</li><li id="2144" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">如果有交通，但前面最近的汽车&gt;缓冲区(设置为距离差&gt; 50个单位)，则成本= 0</li><li id="16b3" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">如果前面最近的汽车比缓冲器更近(距离差≤ 50个单位)，则可能发生碰撞，因此成本增加到50</li></ul><p id="6703" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="kl">成本函数—变更为左车道/右车道</em> </strong></p><ul class=""><li id="5675" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">如果我们可以转弯的车道不存在，那么碰撞是可能的，因此成本增加到500</li><li id="d4d5" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">如果车道存在并且可以安全转弯，那么成本= 150(安全转弯定义为最近的汽车前方距离单位为50，最近的汽车后方距离单位为12。我通过在模拟器中玩来决定这些数字)</li><li id="9359" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">如果车道存在，但转弯不安全，则可能发生碰撞。所以成本= 500</li><li id="a657" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">我补充的一个额外条件是，如果前面最近的车是200+的距离单位(前面的车道有点空)，那么这条车道的成本稍微低一些。我这样做是为了让程序可以选择一条车道，如果两条车道都可以安全转弯的话</li></ul><p id="7de2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="kl">代价函数——慢行于我的车道</em> </strong></p><p id="154a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我设定减速的代价= 200。这样做是为了使这个动作不如变道好，但比碰撞好。</p><p id="246f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在每个实例中，计算与所有决策相关的成本，并且最优决策是具有最小成本的决策</p><p id="ad2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第3步:一旦做出决定，确定该决定的目标速度和车道</strong></p><p id="0e10" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了在模拟器中驾驶汽车，我采用了使用其d值(指示沿车道宽度的距离的参数)来决定目标车道的方法。通道1的目标差值为2，通道2的目标差值为6，通道3的目标差值为10。因此，根据决定(留在车道上，或左转或右转)，我决定了目标d值<br/>来控制模拟器中的速度，我使用了s增量(表示沿车道长度的距离的参数)..我发现s增量越小，汽车越慢，而s增量越大，汽车越快。为了以最大速度驾驶，我选择了0.415的s增量。当我需要在我的车道上刹车时，我根据我前面汽车的速度减少s增量。</p><p id="ed5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">步骤4:创建加加速度最小化轨迹</strong></p><p id="0456" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了获得平稳的驾驶体验，我们应该将加速度的导数——加加速度最小化。本质上，我们应该有更平滑的加速度增加和减少。我这样做是通过存储s和d参数的先前值，并在许多时间步长内逐渐改变它们。最后，我用样条拟合地图和目标s和d来决定next_x和next_y值。这些被发送到模拟器，汽车移动到这个位置。对参数做了一些调整后，汽车在模拟器中平稳地行驶了。</p><p id="b6a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">总的来说，这是一次奇妙的经历！</p><h1 id="5f8b" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">后续步骤</h1><p id="4d57" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我的代码大部分时间都在模拟器中工作，但仍有一些改进的机会</p><ol class=""><li id="627b" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mt ml mm mn bi translated">在程序中包含行为预测。我们可以通过观察他们相对于车道宽度的d位置来预测模拟器中其他汽车的计划吗？</li></ol><p id="b61b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个想法是，如果另一辆车正在接近其当前车道的右侧，那么它很有可能正计划右转。诸如此类。</p><p id="c19b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.有时我的车在最左边的车道，中间的车道有车辆，转弯不安全，但最右边的车道是空的。一种更好的逻辑是识别出这一点，并执行一系列快速变道，以到达最右边的车道，而不是在当前车道减速。本质上，该逻辑当前在做出决定时仅查看紧邻的通道</p><p id="f9c7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.我希望有更好的方法来设计加加速度最小化的轨迹，使用讲座中建议的一些数学方法</p><p id="c7ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">给我一个❤️，如果你喜欢这个职位:)希望你拉代码，并尝试自己。</p><p id="5012" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">其他著述</strong>:【https://medium.com/@priya.dwivedi/】T2</p><p id="4b32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">PS:我住在多伦多，我希望将职业生涯转向深度学习。如果你喜欢我的帖子，并能把我联系到任何人，我将不胜感激:)。我的电子邮件是priya.toronto3@gmail.com</p><p id="38c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">参考文献:</strong></p><p id="7e76" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae ky" href="https://www.udacity.com/" rel="noopener ugc nofollow" target="_blank">乌达城</a>无人驾驶汽车纳米学位——我感谢乌达城、巴斯蒂安·特龙、大卫·西尔弗和其他参与开发这门课程的人给我机会成为他们新的无人驾驶汽车项目的一部分。这是一次非常有趣的旅程。这里的图片和视频参考在课堂上被分享了</p></div></div>    
</body>
</html>