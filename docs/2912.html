<html>
<head>
<title>A (very) friendly introduction to Confidence Intervals</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">置信区间的(非常)友好的介绍</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-very-friendly-introduction-to-confidence-intervals-9add126e714?source=collection_archive---------2-----------------------#2018-03-20">https://towardsdatascience.com/a-very-friendly-introduction-to-confidence-intervals-9add126e714?source=collection_archive---------2-----------------------#2018-03-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/37927123c3343d52ed40c157367d73b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HsXmYjfHKoKOOzyCTPjkoA.jpeg"/></div></div></figure><p id="fe13" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">今天我想谈谈统计学中的一个基本术语——置信区间，我想以一种非常友好的方式进行讨论，只讨论一般概念，没有太多花哨的统计学术语，并且使用python！</p><p id="34e2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然这个术语非常基础，但有时很难完全理解(对我来说)到底发生了什么，为什么我们需要它，什么时候我们应该使用它。</p><p id="68bc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那我们开始吧。</p><p id="4b31" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">假设你想知道美国有百分之多少的人喜欢足球。为了得到这个问题100%正确的答案，你唯一能做的事情就是问每一个美国公民他们是否热爱足球。根据维基百科，美国有超过3.25亿人。与3.25亿人交谈并不实际，所以我们不得不考虑其他事情，我们必须通过问(少得多)的人来得到答案。</p><p id="55cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以通过在美国随机抽样(与更少的人交谈)来做到这一点，并获得样本中热爱足球的人的百分比，但我们不会100%相信这个数字是正确的，或者这个数字与真实答案有多远，所以，我们将试图实现的是获得一个区间，例如，对这个问题的一个可能的答案可能是:“我95%相信美国热爱足球的人的百分比在58%和62%之间”。这就是置信区间这个名字的由来，我们有一个区间，我们对它有一些信心。</p><p id="bbb0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">旁注:我们的样本将是随机的，这一点非常重要，我们不能只从我们居住的城市中选择1000人，因为那样就不能很好地代表整个美国人口。另一个糟糕的例子是，我们不能向1000个随机的人发送脸书消息，因为这样我们会得到一个美国脸书用户的代表，当然不是所有的美国公民都使用脸书。</p><p id="ac15" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">假设我们有一个来自美国的1000人的随机样本，我们看到在这1000人中63%的人热爱足球，我们可以对整个美国人口做出什么样的假设(推断)？</p><p id="d8de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了回答这个问题，我想让我们换个角度来看。假设我们知道(理论上)美国人的确切比例，假设是65%，随机选择1000人，只有63%的人会喜欢足球，这种可能性有多大？让我们使用python来探索这一点！</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="a5a7" class="lf lg iq lb b gy lh li l lj lk">love_soccer_prop = 0.65  # Real percentage of people who love soccer<br/>total_population = 325*10**6  # Total population in the U.S. (325M)</span><span id="ae3c" class="lf lg iq lb b gy ll li l lj lk">num_people_love_soccer = int(total_population * love_soccer_prop)</span><span id="ad03" class="lf lg iq lb b gy ll li l lj lk">num_people_dont_love_soccer = int(total_population * (1 - love_soccer_prop))</span><span id="1ad5" class="lf lg iq lb b gy ll li l lj lk">people_love_soccer = np.ones(num_of_people_who_love_soccer)</span><span id="5948" class="lf lg iq lb b gy ll li l lj lk">people_dont_love_soccer = np.zeros(num_<br/>people_dont_love_soccer)</span><span id="5b28" class="lf lg iq lb b gy ll li l lj lk">all_people = np.hstack([people_love_soccer, people_dont_love_soccer])</span><span id="ba3e" class="lf lg iq lb b gy ll li l lj lk">print np.mean(all_people)</span><span id="88c0" class="lf lg iq lb b gy ll li l lj lk"># Output = 0.65000000000000002</span></pre><p id="956d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这段代码中，我创建了一个包含3.25亿人的numpy数组，如果他们中的每个人热爱足球，我就为他们存储一个数组，否则就存储零个数组。我们可以通过计算平均值来得到数组中1的百分比，实际上是65%。</p><p id="e3aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，让我们取几个样本，看看我们得到的百分比是多少:</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="2b51" class="lf lg iq lb b gy lh li l lj lk">for i in range(10):<br/>    sample = np.random.choice(all_people, size=1000)<br/>    print 'Sample', i, ':', np.mean(sample)</span><span id="9eda" class="lf lg iq lb b gy ll li l lj lk"># Output:<br/>Sample 0 : 0.641<br/>Sample 1 : 0.647<br/>Sample 2 : 0.661<br/>Sample 3 : 0.642<br/>Sample 4 : 0.652<br/>Sample 5 : 0.647<br/>Sample 6 : 0.671<br/>Sample 7 : 0.629<br/>Sample 8 : 0.648<br/>Sample 9 : 0.627</span></pre><p id="f900" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以看到我们得到了每个样本的不同值，但是直觉(和统计理论)表明大量样本的平均值应该非常接近真实的百分比。就这么办吧！让我们取许多样本，看看会发生什么:</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="725a" class="lf lg iq lb b gy lh li l lj lk">values = []<br/>for i in range(10000):<br/>    sample = np.random.choice(all_people, size=1000)<br/>    mean = np.mean(sample)<br/>    values.append(mean)</span><span id="3d78" class="lf lg iq lb b gy ll li l lj lk">print np.mean(values)</span><span id="48b7" class="lf lg iq lb b gy ll li l lj lk"># Output = 0.64982259999999992</span></pre><p id="6bc0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们创建了10K样本，检查了每个样本中热爱足球的人的百分比，然后对他们进行平均，我们得到了64.98%，这非常接近实际值65%。让我们画出我们得到的所有值:</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lm"><img src="../Images/0faf9dca30f426c0d64b4c545f538b8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z7-LbiracyRL9EClaNHXgQ.png"/></div></div></figure><p id="c2fd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你在这里看到的是我们在所有样本中得到的所有值的直方图，这个直方图的一个非常好的特性是它非常类似于正态分布。正如我所说的，我不想在这里使用太多的统计术语，但我们可以说，如果我们多次(无限次)进行这个过程，我们将得到一个非常接近正态分布的直方图，我们可以知道这个分布的参数。更简单地说，我们将知道这个直方图的形状，所以我们将能够准确地说出有多少样本可以得到任何范围的值。</p><p id="70e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里有一个例子，我们将运行这个模拟更多次(试图达到无穷大):</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ln"><img src="../Images/40bc7b4f2607cd247131680bcfdacb3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j74fVM-J7c4GSoPyexJJFg.png"/></div></div></figure><p id="b8d7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们可以看到直方图的中心(平均值)接近65%，正如我们预期的那样，但我们可以通过查看直方图了解更多信息，例如，我们可以说一半的样本大于65%，或者，我们可以说大约25%大于67%，甚至，我们可以说(大约)只有2.5%的样本大于68%。</p><p id="13dd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这一点上，许多人可能会问两个重要的问题，“我如何获取无限数量的样本？”以及“这对我有什么帮助？”。</p><p id="b40e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们回到我们的例子，我们采取了1000人的样本，得到了63%，我们想知道，1000人的随机样本将有63%的足球爱好者的机会是什么。使用这个直方图，我们可以说有(大约)25%的机会得到小于或等于63%的值。理论告诉我们，我们实际上不需要做无限的样本，如果我们随机选择1000个人，其中只有63%的人会喜欢足球。</p><p id="f3ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">边注#2:实际上，为了所有这些(找到值范围的机会)，我们需要知道，或者至少估计，总体的标准偏差。因为我想让事情变得简单，所以我现在就离开它。</p><p id="ce2d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们回到现实和真正的问题，我不知道美国足球爱好者的实际比例。我只是拿了一个样本，得到了63%，这对我有什么帮助？</p><p id="b8de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以我们不知道美国热爱足球的人的实际比例。我们所知道的是，如果我们取无限数量的样本，它会是这样的:</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/ec6cf84d147fa4c391d2f21062fb96f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/1*txu8-J2imhlqIPDqsL3gPA.png"/></div></figure><p id="1e06" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里<em class="lp"> μ </em>是总体均值(我们例子中足球爱好者的真实百分比)，σ是总体的标准差。</p><p id="fa7c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们知道这一点(并且我们知道标准偏差),我们就可以说，大约64%的样本将落在红色区域，或者，在该图中，超过95%的样本将落在绿色区域之外:</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/d730b6042d17b30d7b2981b9c4dfbed4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*GX0Qft3_Js0O9gbd9BeCNA.png"/></div></figure><p id="eaff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们使用之前假设实际百分比为65%的图，那么95%的样本将落在62%和68%之间(±3)</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lr"><img src="../Images/90865847d688325307a2d9029827704e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HNJGj99HzbreV5eMJFt_OQ.png"/></div></div></figure><p id="5c2f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当然，距离是对称的，所以如果样本百分比在实际百分比-3和实际百分比+3之间的95%的时间内下降，那么实际百分比将是样本百分比-3和样本百分比+3之间的95%的时间。</p><p id="3c86" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们取一个样本，得到63%，我们可以说我们95%有信心，真实的百分比在60% (63 -3)到66% (63+3)之间。</p><p id="ce28" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是置信区间，区间是63+-3，置信度是95%。</p><p id="26db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望置信区间现在更有意义，就像我之前说的，这个介绍遗漏了一些技术上但很重要的部分。有很多文章确实包含这些部分，我希望现在遵循它们会容易得多。</p></div></div>    
</body>
</html>