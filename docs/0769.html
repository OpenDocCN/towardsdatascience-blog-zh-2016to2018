<html>
<head>
<title>Exploring NLP/AWS/BigData: Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索NLP/AWS/BigData:第1部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/exploring-nlp-aws-bigdata-part-1-53716f3ad671?source=collection_archive---------5-----------------------#2017-06-19">https://towardsdatascience.com/exploring-nlp-aws-bigdata-part-1-53716f3ad671?source=collection_archive---------5-----------------------#2017-06-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6c44" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我必须承认，在我探索机器学习的时候，我对<a class="ae kl" href="https://en.wikipedia.org/wiki/Natural_language_processing" rel="noopener ugc nofollow" target="_blank"> NLP </a>(自然语言处理)并不太感兴趣，实际上我把它和另一个<a class="ae kl" href="https://en.wikipedia.org/wiki/Neuro-linguistic_programming" rel="noopener ugc nofollow" target="_blank"> NLP </a>(神经语言编程)混淆了。但是当我在大会上重温我的顶点项目的材料时，我偶然发现了由<a class="ae kl" href="https://www.yelp.com/dataset_challenge" rel="noopener ugc nofollow" target="_blank"> YELP </a>提供的这个惊人的数据。数据集非常具有描述性，但是非常庞大，但是可以分为两条路线(NLP或图像识别)。</p><p id="78c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个系列中，我将使用yelp提供的数据集回顾我探索NLP技术的过程。我将探索我的陷阱和策略，并希望我能帮助揭开一些概念的神秘面纱。在本系列中，我还将回顾我使用AWS弹性计算云(<a class="ae kl" href="https://aws.amazon.com/ec2/" rel="noopener ugc nofollow" target="_blank"> E2C </a>)的经历，并用Scala语言复制python中的几种机器学习技术(我觉得这种语言<strong class="jp ir">可以完成</strong>的工作，但对于一个来自Python和C++的人来说，这是一种如此丑陋的语言)。</p><h1 id="3839" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">Yelp数据集</h1><ul class=""><li id="2578" class="lk ll iq jp b jq lm ju ln jy lo kc lp kg lq kk lr ls lt lu bi translated">图像分类通过有5千兆压缩的JPEGs。</li><li id="54a1" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">来自几个主要城市的商业/用户/评论数据库。</li></ul><blockquote class="ma mb mc"><p id="7942" class="jn jo md jp b jq jr js jt ju jv jw jx me jz ka kb mf kd ke kf mg kh ki kj kk ij bi translated">英国:爱丁堡</p><p id="fa07" class="jn jo md jp b jq jr js jt ju jv jw jx me jz ka kb mf kd ke kf mg kh ki kj kk ij bi translated">德国:卡尔斯鲁厄</p><p id="435e" class="jn jo md jp b jq jr js jt ju jv jw jx me jz ka kb mf kd ke kf mg kh ki kj kk ij bi translated">加拿大:蒙特利尔和滑铁卢</p><p id="927d" class="jn jo md jp b jq jr js jt ju jv jw jx me jz ka kb mf kd ke kf mg kh ki kj kk ij bi translated">美国:匹兹堡、夏洛特、厄巴纳-香槟、凤凰城、拉斯维加斯、麦迪逊、克利夫兰</p></blockquote><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mh"><img src="../Images/b23470f22ab9c3aa1a0ae1b1a9b60e7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rrZ3S3Q6Xr7kCz1ilgst6A.jpeg"/></div></div></figure><h1 id="d996" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">踪迹地图</h1><ol class=""><li id="9e52" class="lk ll iq jp b jq lm ju ln jy lo kc lp kg lq kk mt ls lt lu bi translated">规范化、清洗和EDA。</li><li id="225b" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk mt ls lt lu bi translated">模型选择(逻辑回归、贝叶斯、随机森林)</li><li id="5dd2" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk mt ls lt lu bi translated">使用AWS的Spark、Scala和Hadoop。</li><li id="6032" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk mt ls lt lu bi translated">Word2Vec。</li></ol><h1 id="8b1d" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">设置和库:</h1><p id="4f71" class="pw-post-body-paragraph jn jo iq jp b jq lm js jt ju ln jw jx jy mu ka kb kc mv ke kf kg mw ki kj kk ij bi translated">我用的是Python 3.5.2 |Anaconda自定义(64位)。</p><p id="5e12" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Git bash终端。</p><p id="d965" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的电脑运行的是I-7–5500 2.40 GHz和8GB RAM(我们将把它与AWS服务器进行比较，看看为什么后者是更好的选择)</p><ul class=""><li id="d5e0" class="lk ll iq jp b jq jr ju jv jy mx kc my kg mz kk lr ls lt lu bi translated"><a class="ae kl" href="https://spacy.io/" rel="noopener ugc nofollow" target="_blank">空间</a>(版本1.8.0)。安装了英语“en”型号。这在处理“停用词”时很重要。</li></ul><pre class="mi mj mk ml gt na nb nc nd aw ne bi"><span id="5539" class="nf kn iq nb b gy ng nh l ni nj">pip install spacy<br/>sudo python -m spacy download en</span></pre><ul class=""><li id="7aa2" class="lk ll iq jp b jq jr ju jv jy mx kc my kg mz kk lr ls lt lu bi translated">NLTK(3 . 2 . 1版)另一个比SpaCy更老的NLP库。</li><li id="3d78" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">gensim(版本2.1.0)是一个很棒的免费库，我用来实现Word2Vec</li><li id="af9f" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated"><a class="ae kl" href="https://docs.python.org/2/library/glob.html" rel="noopener ugc nofollow" target="_blank">全球</a>。从路径名中读取文件。</li><li id="07c7" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated"><a class="ae kl" href="https://pypi.python.org/pypi/tqdm" rel="noopener ugc nofollow" target="_blank"> tqdm </a> (4.11.2)这是可选的，但是当你想检查一个熊猫函数的进度时，这是必须的。这些文件是巨大的，当你运行所有的东西时，看到你在哪里是很棒的。</li></ul><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nk"><img src="../Images/2ddc0c33a6188513d9e31e0a3b89a0e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3OfcQiBCToT9Bcjo5xgg2w.jpeg"/></div></div></figure><h1 id="5a15" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">SpaCy对NLTK:</h1><p id="deca" class="pw-post-body-paragraph jn jo iq jp b jq lm js jt ju ln jw jx jy mu ka kb kc mv ke kf kg mw ki kj kk ij bi translated">简而言之空间就是<a class="ae kl" href="https://spacy.io/docs/api/" rel="noopener ugc nofollow" target="_blank">快</a>。在我最初的YELP草稿中，我一直与这两个库合作，并且在“标记化”和“词汇化/词干化”过程中，我使用SpaCy做了许多繁重的工作，它非常快速和健壮。</p><h1 id="a66a" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">JSON到CSV:</h1><p id="e8a7" class="pw-post-body-paragraph jn jo iq jp b jq lm js jt ju ln jw jx jy mu ka kb kc mv ke kf kg mw ki kj kk ij bi translated">Yelp提供的数据集由原始json组成。我的第一个挑战是将如此大的文件管理成可以翻译成Python pandas的东西。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/6fcdd68efbb27792ff4b461ffc00e7e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*oXtaB9uQQ6-IPGDJ-s8UdQ.jpeg"/></div><figcaption class="nm nn gj gh gi no np bd b be z dk">Do not open this with pythons.read() . You’ll regret it.</figcaption></figure><p id="f725" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我找到的解决方法是链接<a class="ae kl" href="https://gist.github.com/paulgb/5265767" rel="noopener ugc nofollow" target="_blank">这里</a>。这将需要一段时间来转换，尤其是review.json。对于Python 3用户，您可能需要将这一行代码添加到上面的链接中。</p><pre class="mi mj mk ml gt na nb nc nd aw ne bi"><span id="f6cb" class="nf kn iq nb b gy ng nh l ni nj"><strong class="nb ir">tqdm</strong>(glob('yelp_academic_dataset_checkin.json')):<br/>df = pd.DataFrame([convert(line) for line in <strong class="nb ir">open</strong>(json_filename)])<br/></span></pre><p id="8bd5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦json被转换成CSV格式，你可以用熊猫打开它，结果应该是这样的。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nq"><img src="../Images/682c4fcc017bb3924b3a3adcb12b7604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vg2cUcW9svsWcZkFG4h3Sw.jpeg"/></div></div></figure><h1 id="f206" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">约束条件:</h1><p id="39bf" class="pw-post-body-paragraph jn jo iq jp b jq lm js jt ju ln jw jx jy mu ka kb kc mv ke kf kg mw ki kj kk ij bi translated">重要的是要记住，我的最终数据集不同于YELP提供的数据集。有大量的删改工作，包括将所有评论保留在美国和英国。原始数据集包含美国境内外的德国评论，因为拉斯维加斯是一个主要的旅游目的地，所以我看到一些德国评论并不奇怪。然而，我决定消除这些类型的审查，留在美国是基于领域知识。我不认为自己非常精通英语语言学，但我理解现代口语和基本的语法结构，作为美国公民，我也能理解每个城市/州的风味和内涵。当我探索欧洲城市时，我失去了这种能力(我不能告诉你英国哪个地区以炸鱼薯条闻名，但我知道最好的Tocos总是在边境以南，胸肉在德克萨斯州是国王)。另外，我唯一知道的德语单词是“幸灾乐祸”和其他。。。脏话。</p><p id="101f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">YELP API中的<a class="ae kl" href="https://www.yelp.com/developers/documentation/v2/category_list" rel="noopener ugc nofollow" target="_blank">类别</a>是另一个挑战。问题是如何处理数据框中的嵌套数组。最后，我决定将每个类别过滤成7个主要类别和一个空角色。</p><h1 id="b0ff" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">我们来看看数据:</h1><p id="29e6" class="pw-post-body-paragraph jn jo iq jp b jq lm js jt ju ln jw jx jy mu ka kb kc mv ke kf kg mw ki kj kk ij bi translated">使用美国大约300万条评论的整个数据集。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nr"><img src="../Images/1ae13ae04f27c69246c0b94975e32ccc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CPeefUKKooi3mTnl9TiXvg.png"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk">The bulk of the reviews came from NV,AZ,NC. With only 2 reviews for VT.</figcaption></figure><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nr"><img src="../Images/9db81a8c3cb5d2fe9e225335716b5d09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NFVbjDnEskOgqWS43uvNRw.png"/></div></div></figure><h1 id="d9f4" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">可视化:</h1><p id="d0dd" class="pw-post-body-paragraph jn jo iq jp b jq lm js jt ju ln jw jx jy mu ka kb kc mv ke kf kg mw ki kj kk ij bi translated">这里有一个表格<a class="ae kl" href="https://public.tableau.com/shared/M47S89PRC?:display_count=yes" rel="noopener ugc nofollow" target="_blank">显示了Q1第四季度时间序列中平均商业得分最高的四个州。</a></p><h2 id="856c" class="nf kn iq bd ko ns nt dn ks nu nv dp kw jy nw nx la kc ny nz le kg oa ob li oc bi translated">后续步骤:</h2><p id="5d6b" class="pw-post-body-paragraph jn jo iq jp b jq lm js jt ju ln jw jx jy mu ka kb kc mv ke kf kg mw ki kj kk ij bi translated">在我的下一篇文章中，我将探索模型选择过程。(逻辑回归、多项式朴素贝叶斯、随机森林)。我将讨论每种策略的利与弊，以及幕后发生的一些事情。</p></div></div>    
</body>
</html>