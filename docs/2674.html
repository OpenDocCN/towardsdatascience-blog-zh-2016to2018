<html>
<head>
<title>Add Image Recognition to your ChatBot with CustomVision.ai and Microsoft bot Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用CustomVision.ai和Microsoft bot Framework为您的聊天机器人添加图像识别功能</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/add-image-recognition-to-your-chatbot-with-customvision-ai-and-microsoft-bot-framework-d0f8b30dba50?source=collection_archive---------6-----------------------#2018-02-19">https://towardsdatascience.com/add-image-recognition-to-your-chatbot-with-customvision-ai-and-microsoft-bot-framework-d0f8b30dba50?source=collection_archive---------6-----------------------#2018-02-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="7be5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我之前的博客文章中，我已经分享了关于<a class="ae kl" rel="noopener" target="_blank" href="/how-to-create-a-custom-image-classifier-with-customvision-ai-fe3df6fd219b">如何使用CustomVision.ai </a>创建自定义图像分类器。一旦您能够使用自定义视觉创建图像分类器，您可能会尝试将图像分类器添加到您的应用程序中，如手机、网络或聊天机器人。</p><p id="d122" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本教程中，我将向你展示如何使用你的自定义视觉图像分类器，到你的使用Node.js的聊天机器人。</p><h1 id="b648" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">设置您的聊天机器人</h1><p id="61a3" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">我们要做的第一步是使用微软机器人框架创建我们的聊天机器人。</p><ol class=""><li id="2861" class="lp lq iq jp b jq jr ju jv jy lr kc ls kg lt kk lu lv lw lx bi translated">为你的聊天机器人创建一个项目文件夹</li><li id="8c9f" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">在您的终端中执行<code class="fe md me mf mg b">npm init</code>来创建<code class="fe md me mf mg b">package.json</code></li><li id="f146" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">安装将用于项目<code class="fe md me mf mg b">npm i --save botbuilder restify</code>的节点模块</li><li id="1ff1" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">在您的项目文件夹中创建一个<code class="fe md me mf mg b">app.js</code></li></ol><p id="0af2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在你的<code class="fe md me mf mg b">app.js</code>文件中，添加我们聊天机器人工作所需的初始代码。</p><figure class="mh mi mj mk gt ml"><div class="bz fp l di"><div class="mm mn l"/></div></figure><h1 id="e464" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">获取自定义视觉的预测API端点</h1><p id="e8dd" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">下一步将是获得自定义视觉的预测API端点，我们稍后将用于我们的聊天机器人。(<em class="mo">注意:这里假设您已经在Custom Vision </em>中创建和训练了您的分类器)</p><ol class=""><li id="42e8" class="lp lq iq jp b jq jr ju jv jy lr kc ls kg lt kk lu lv lw lx bi translated">前往<a class="ae kl" href="https://www.customvision.ai" rel="noopener ugc nofollow" target="_blank">https://www . custom vision . ai</a></li><li id="fc89" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">选择您已经创建或想要使用的项目</li><li id="9454" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">转到“性能”选项卡</li><li id="bdc8" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">点击“预测URL”</li><li id="b0a7" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">记下“图像文件”端点URL和“预测关键字”</li></ol><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/e72be1bd6a028feddcafa0047245a853.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*KZn-BNSIExDEN47p8ip2AQ.png"/></div></figure><h1 id="c953" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">使用自定义视觉的预测API到我们的聊天机器人</h1><p id="35ca" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">一旦您做好了一切准备，我们现在将使用来自自定义视觉的预测API到我们的聊天机器人。</p><h2 id="70da" class="ms kn iq bd ko mt mu dn ks mv mw dp kw jy mx my la kc mz na le kg nb nc li nd bi translated">让我们的聊天机器人读取图像附件</h2><p id="dd3f" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">这里我们需要做的第一件事是通过编程使我们的聊天机器人能够读取来自用户的图像附件。</p><ol class=""><li id="e756" class="lp lq iq jp b jq jr ju jv jy lr kc ls kg lt kk lu lv lw lx bi translated">在中创建一个<code class="fe md me mf mg b">utils.js</code>文件，我们将在其中包含读取图像附件的实现</li><li id="66b3" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">运行<code class="fe md me mf mg b">npm i needle --save</code></li><li id="dcd7" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">实现<code class="fe md me mf mg b">utils.js</code>的代码</li></ol><figure class="mh mi mj mk gt ml"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="df86" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.将<code class="fe md me mf mg b">utils.js</code>代码导入<code class="fe md me mf mg b">app.js</code></p><p id="197d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5.向<code class="fe md me mf mg b">bot.dialog()</code>添加一些测试代码，看看我们的聊天机器人现在是否可以确定它是否从用户那里接收到图像附件</p><figure class="mh mi mj mk gt ml"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="4059" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在你可以在你的<a class="ae kl" href="http://emulator.botframework.com" rel="noopener ugc nofollow" target="_blank"> Bot框架模拟器</a>上测试它，它至少应该是这样的:</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi ne"><img src="../Images/1e585493afae9ccf9c8b1e3eb319d71e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BVSkMCOkE3k1hWQ6-5CSsQ.png"/></div></div></figure><h2 id="f7a2" class="ms kn iq bd ko mt mu dn ks mv mw dp kw jy mx my la kc mz na le kg nb nc li nd bi translated">创建一个使用自定义视觉预测API的服务</h2><p id="d70b" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">既然我们的聊天机器人可以确定用户是否发送了图像附件，那么下一步就是将来自用户的图像附件发送到定制的视觉预测API。</p><ol class=""><li id="9b93" class="lp lq iq jp b jq jr ju jv jy lr kc ls kg lt kk lu lv lw lx bi translated">在聊天机器人的项目文件夹中创建<code class="fe md me mf mg b">customVisionService.js</code>文件</li><li id="653c" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">运行<code class="fe md me mf mg b">npm i request-promise --save</code></li><li id="4563" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">执行<code class="fe md me mf mg b">customVisionService.js</code>的代码</li></ol><figure class="mh mi mj mk gt ml"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="78c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.导入并使用<code class="fe md me mf mg b">customVisionService.js</code>到你的<code class="fe md me mf mg b">app.js</code></p><figure class="mh mi mj mk gt ml"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="f175" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，您可以在您的bot框架模拟器上再次测试这一点，并尝试向您的Bot发送一个图像附件，看看它将如何工作。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nj"><img src="../Images/5ac80ee1956a76c428e7c0f9097e5afb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P1ep-vrQVxOGeNwdbpYKKg.png"/></div></div></figure><p id="8031" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">非常简单明了，对吗？如果想看完整个项目做参考，可以查看GitHub库<a class="ae kl" href="https://github.com/prtdomingo/BotFramework.CustomVision" rel="noopener ugc nofollow" target="_blank">这里</a>。</p></div></div>    
</body>
</html>