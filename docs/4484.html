<html>
<head>
<title>Exploratory Data Analysis with Pandas using Jupyter Notebooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Jupyter 笔记本对熊猫进行探索性数据分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/exploratory-data-analysis-with-pandas-and-jupyter-notebooks-36008090d813?source=collection_archive---------6-----------------------#2018-08-19">https://towardsdatascience.com/exploratory-data-analysis-with-pandas-and-jupyter-notebooks-36008090d813?source=collection_archive---------6-----------------------#2018-08-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2e0a6dd750425e169c0d2e895f1bd704.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t9LhUpeb0HVWmuFRcz5cqA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">A beautiful red panda doing his thing. If you look close enough at that bamboo, you can see the commas. Source: <a class="ae kc" href="https://pixabay.com/en/panda-red-panda-bear-cat-3503779/" rel="noopener ugc nofollow" target="_blank">pixabay</a></figcaption></figure><p id="3bdf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为一名数据科学家，我花了大约三分之一的时间查看数据，并试图获得有意义的见解。这些是我最常用的工具。</p><p id="9f1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你是数据科学闪亮世界的新人吗？探索性分析之类的花哨词汇会吓到你吗？别担心，我是来帮你在这个疯狂的世界里导航的。</p><p id="2175" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">今天我们将看看两个很棒的工具，紧跟我在 github 项目上上传的代码。一个是 Jupyter 笔记本，一个是 Python 框架叫 Pandas。</p><p id="bcfa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你是 Python 的新手，我建议你在阅读这篇文章之前先阅读一篇语言教程。我不会用太晦涩的东西，但也不会停下来<a class="ae kc" rel="noopener" target="_blank" href="/how-list-comprehensions-can-help-your-code-look-better-and-run-smoother-3cf8f87172ae">解释列表理解</a>。我推荐 O'Reilly 的书“<a class="ae kc" href="https://www.amazon.com/Data-Science-Scratch-Principles-Python/dp/149190142X" rel="noopener ugc nofollow" target="_blank">用 Python 从零开始的数据科学</a>”，但是任何其他教程都可以。</p><p id="f250" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先来说说 Jupyter 笔记本。如果您曾经使用过 Python 控制台，您可能已经意识到它是多么有用。通过检查输出是否符合您的预期来轻松调试功能(我不是说这是测试的良好替代品，但是谁没有这样做过呢？)，运行一次昂贵的进程，这样就可以将它们加载到内存中，然后就可以开始在它们的输出上测试其他东西，拥有一个交互式环境有很多好处。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e9f6e54d0a180b5038892c2f763e61ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zHn8RoaT0tjAASECa66Q4g.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Just picture this but, like, less round, and a bit more squarish. Rectanglish? Is that a word? Source: Pixabay</figcaption></figure><p id="255c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Jupyter 笔记本也是同样的环境，使用类固醇。这就像运行 Python 控制台工具进行读取-评估-打印循环，但是界面很可爱，并且能够记录和保存您测试的内容。这非常方便，例如，如果你正在写一篇关于 Python 工具的中型文章！</p><p id="46ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装 Jupyter，您只需运行以下 pip 命令:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="a0ab" class="lk ll iq lg b gy lm ln l lo lp">python -m pip install jupyter</span></pre><p id="522f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您在 Linux 上，您应该使用这个命令:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="8699" class="lk ll iq lg b gy lm ln l lo lp">pip3 install --user jupyter</span></pre><p id="ebf3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lq">(注意:本文之前的版本推荐使用 sudo 进行安装。一位</em> <a class="ae kc" href="https://www.reddit.com/user/Imanflow" rel="noopener ugc nofollow" target="_blank"> <em class="lq">善良的读者</em> </a> <em class="lq">告诉我这是</em> <a class="ae kc" href="https://stackoverflow.com/questions/21055859/what-are-the-risks-of-running-sudo-pip" rel="noopener ugc nofollow" target="_blank"> <em class="lq">不安全的，实际上是非常糟糕的做法</em> </a> <em class="lq">，因为它给了 setup.py 程序 sudo 特权，这通常是不好的，会允许恶意代码运行。你知道的越多！)</em></p><p id="79a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后要运行程序，打开你的终端，在你想要存储笔记本的文件夹中，然后运行</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="61e1" class="lk ll iq lg b gy lm ln l lo lp">jupyter notebook</span></pre><p id="5331" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">是的，就这么简单。该命令将初始化您计算机中的服务器，并将您最喜欢的浏览器重定向到该服务器。从那里，只需使用 GUI 创建一个新的笔记本，并打开它。使用<strong class="kf ir"> + </strong>按钮创建一个新的代码块，使用<strong class="kf ir">“剪切”</strong>按钮删除一个代码块。通过将光标放入代码块并点击<strong class="kf ir">“Shift+Enter”，每个代码块都可以独立运行(尽管不是并发的)。</strong></p><p id="210e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">既然你已经知道了如何运行 Jupyter 笔记本，那么克隆并拉动我刚刚链接的<a class="ae kc" href="https://github.com/StrikingLoo/pandas_workshop" rel="noopener ugc nofollow" target="_blank">项目</a>将是明智的。你所要做的就是点击<strong class="kf ir">克隆</strong>绿色按钮，获得链接，然后开始</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="c17c" class="lk ll iq lg b gy lm ln l lo lp">git clone *link*</span></pre><p id="96c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在有趣的部分，让我们来谈谈熊猫。Pandas 是一个开源 Python 框架，由 PyData 社区维护。它主要用于数据分析和处理，主要用于操作 CSV 文件。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lr"><img src="../Images/c7bd30426097129ab2297dd2b7cc48b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vjm1w-uem8LErnbsffAmQg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">They keep making them cuter and cuter. It’s like each hair is a commit. Source: <a class="ae kc" href="https://pixabay.com/en/panda-cub-wildlife-zoo-cute-china-649938/" rel="noopener ugc nofollow" target="_blank">pixabay</a></figcaption></figure><p id="5a12" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您不知道，CSV 只是一种将数据编码为序列(列)的文件格式，其中每个对象(行)都有一个值。文件中的每一行都是一行，每一个值都用逗号与前一个值隔开，这样就形成了逗号分隔值文件。第一行是为标题保留的，包含每一列的名称。</p><p id="9a72" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本教程中，我们将首先生成一个“员工数据”的模拟数据集，该数据集来自一家非常冷的公司，它只存储每个员工的姓名和工资。数据集将被生成为 CSV 文件，如<a class="ae kc" href="http://localhost:8888/edit/generate_people.py" rel="noopener ugc nofollow" target="_blank"> generate_people.py </a>程序所示。</p><p id="6d94" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们首先要做的是使用一些常规的 Python 来生成字典，每个字典代表一个人。如果你更熟悉 JavaScript，每个字典只是一个 JSON，有“名字”、“姓氏”和“薪水”字段。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="b15e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们生成一个 Pandas Dataframe:它们在 CSV 文件上的抽象，其中每一列都是 Pandas 系列(可通过一些矢量化运算进行迭代)。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="2117" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就是这样。如您所见，Dataframe 是作为字典列表和列名的(可选)参数生成的。将它导出到 CSV 文件就像调用<em class="lq"> to_csv </em>方法一样简单，只需将文件名作为唯一的参数。</p><p id="bd55" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，对于读取和处理部分，让我们运行“<em class="lq">分析数据集</em>”笔记本，它也在存储库中。我建议你打开它，把它放在边上阅读这篇文章，但我会添加相关的片段，以防你在手机上或只是觉得有点懒。</p><p id="13b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们首先将 CSV 文件作为数据帧导入，其中包含以下行:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="400a" class="lk ll iq lg b gy lm ln l lo lp"><strong class="lg ir">import</strong> <strong class="lg ir">pandas</strong> <strong class="lg ir">as</strong> <strong class="lg ir">pd</strong> <br/><br/>df = pd.read_csv("random_people.csv")</span></pre><p id="b6e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对一些<em class="lq"> k </em>使用 df.head( <em class="lq"> k </em>)会让我们看到数据帧的第一个<em class="lq"> k </em>行，由于 Jupyter 的魔力，这些行看起来会非常漂亮。这是了解数据的一种简单方法(也是开始处理数据时的主要调试工具)。</p><p id="bb12" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了只看到系列中的一个，我们所要做的就是将其作为字典字段进行索引:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="2456" class="lk ll iq lg b gy lm ln l lo lp">df[“*series name*”]</span></pre><p id="eb8a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以调用在任何其他数据分析工具(如 SQL)中使用的任何常用聚合作为方法。如果我想直观地了解一个系列，我最喜欢的方法是<em class="lq"> value_counts </em>方法，它显示每个值，以及它在系列中出现的次数，按照幽灵数量的降序排列。其他选项包括<em class="lq">平均值</em>、<em class="lq">总和</em>、<em class="lq">计数</em>和<em class="lq">中位数。</em></p><p id="47da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用这些方法而不是手动打开 CSV 并自己运行这些函数的实现的一个优点是，其中大多数都是矢量化的(它们使用 SIMD 指令和其他黑魔法)，这意味着它们将快大约 10 倍。这也适用于加法、减法、除法和乘积，它们可以很容易地通过一个系列进行广播。</p><p id="4116" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，有时你会想把一个功能应用到一个不那么琐碎的系列中，也许制作熊猫的人没有真正考虑过你的用例。在这种情况下，您可以定义自己的函数，并对您想要修改的系列使用<em class="lq"> apply </em>方法。这将是一个有点慢，但仍然运行简单的功能顺利。它相当于 Python 的原生<em class="lq">地图</em>，将为你的处理<em class="lq">增加大量的灵活性。</em></p><p id="70ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您想过滤数据帧，只保留保持某个属性的行，您可以这样做:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="93c8" class="lk ll iq lg b gy lm ln l lo lp">df_high = df[df["salary"]&gt;=6000]</span></pre><p id="957b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其中<em class="lq">" df[" salary "]&gt;= 6000 "</em>可以用任何返回一系列布尔值的东西来切换，或者"<em class="lq"> df["any series name"]。应用(</em><strong class="kf ir"><em class="lq">f</em></strong><em class="lq">)"</em>使得<strong class="kf ir"> f </strong>为布尔函数。但是，请确定该系列与您要过滤的系列具有相同数量的元素。</p><p id="b926" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，请记住，这些过滤后的数据帧在默认情况下是只读的，因为它们是通过引用生成的。如果你想改变它们，只需添加<em class="lq">。loc" </em>在数据帧名称之后，第一个括号之前，如下所示:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="d2c0" class="lk ll iq lg b gy lm ln l lo lp">df_low= df.loc[df["salary"]&lt;6000]</span></pre><p id="28ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您也可以将列名作为第二个参数添加到<em class="lq"> loc </em>中，以保留单个过滤序列，而不是整个数据帧。这是一个直接来自笔记本的例子。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="6138" class="lk ll iq lg b gy lm ln l lo lp">df_low= df.loc[df["salary"]&lt;6000,"salary"]</span></pre><p id="bac5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，后者是通过引用制作的切片，因此您对它们所做的任何更改也将在原始数据帧上进行。为了避免这种情况，只需在行尾调用<em class="lq"> copy </em>方法。</p><p id="e790" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就是这样，这是一些关于熊猫和笔记本的初步速成课程。我希望你会觉得它很有用，如果你觉得还有什么我应该介绍的，或者有什么你想问我的，你知道在哪里可以找到我。我也欢迎任何批评，不管是好是坏，因为这是我第一篇关于媒体的文章，我还在适应。</p><p id="ed1a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想在这方面展开，这里有一篇我写的关于<a class="ae kc" rel="noopener" target="_blank" href="/trying-out-dask-dataframes-in-python-for-fast-data-analysis-in-parallel-aa960c18a915">如何在并行</a>上做数据分析的文章。</p><p id="95a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lq">有一本 O'Reilly 的书我很喜欢，当我开始我的数据科学之旅时，我发现它非常有用。用 Python </em>  <em class="lq">从零开始叫</em> <a class="ae kc" href="https://www.bookdepository.com/book/9781491901427/?a_aid=strikingloo&amp;chan=ws" rel="noopener ugc nofollow" target="_blank"> <em class="lq">数据科学，大概也是我得到这份工作的一半原因。如果你读到这里，你可能会喜欢它！</em></a></p><p id="2534" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lq">附:关注我以获得更多的 Python 教程、技巧和诀窍，如果您发现本文有用，请</em> <a class="ae kc" href="http://buymeacoffee.com/strikingloo" rel="noopener ugc nofollow" target="_blank"> <em class="lq">支持我的写作</em> </a> <em class="lq">。</em></p></div></div>    
</body>
</html>