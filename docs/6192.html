<html>
<head>
<title>Scraping Hurricane Harvey Flood Data Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 抓取哈维飓风洪水数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/scraping-hurricane-harvey-flood-data-using-python-4e406d024f5f?source=collection_archive---------12-----------------------#2018-11-30">https://towardsdatascience.com/scraping-hurricane-harvey-flood-data-using-python-4e406d024f5f?source=collection_archive---------12-----------------------#2018-11-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/7366f68fd230a7a8fb3bf330cd98a625.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*au8iCbkODoYbRAlv7sJpug.jpeg"/></div></div></figure><div class=""/><p id="7585" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如数据科学中常说的那样，80%的工作是不那么迷人的数据获取和数据争论任务，剩下的 20%留给“性感”的分析和机器学习任务。通常，即使是这些数字也很慷慨——就我个人而言，我在这些乏味的数据争论任务上花费了过多的时间。如果你从事数据科学工作，你可能会感受到同样的痛苦。</p><p id="c0e6" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在最近的一个项目中，我需要收集我的家乡德克萨斯州休斯顿的洪水数据，所以我建立了一个网络抓取器来从哈里斯县洪水预警系统获取数据。为了帮助缓解上面提到的一些乏味的数据科学困境，我在 Github 上为其他对洪水研究感兴趣的人发布了我的代码。您可以在下面的链接中找到该回购的链接。这篇文章的其余部分将展示几个使用代码的快速例子。</p><p id="1d34" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc"> ** </strong> <a class="ae kw" href="https://github.com/dcbark01/HouFloodScraper" rel="noopener ugc nofollow" target="_blank"> <strong class="ka jc"> Github 洪水数据网页抓取器</strong> </a> <strong class="ka jc"> ** </strong></p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><p id="93ff" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">项目背景<br/>当地县应急管理部门开发了<a class="ae kw" href="https://www.harriscountyfws.org/" rel="noopener ugc nofollow" target="_blank"> <em class="le">【哈里斯县洪水预警系统(FWS)】</em></a>。</strong></p><figure class="lg lh li lj gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lf"><img src="../Images/8fa443f4dc815a0a4847d148c67ea6b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ocmkQfthDa82DQhWep0vIQ.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Stream Gage Locations on the Harris County Flood Warning System (FWS) Website</figcaption></figure><p id="98e9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">FWS 从美国地质调查局(USGS)维护的流量表中获取数据。虽然每个 stream gauge 网站都提供了以 Excel 文件形式下载数据的功能，但我需要更多的数据，所以我构建了一个 webs scraper。你可以从<a class="ae kw" href="https://github.com/dcbark01/HouFloodScraper" rel="noopener ugc nofollow" target="_blank">这个回购</a>中克隆刮刀。</p><p id="7966" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">使用<br/>T21【Scraper】克隆 repo 后，安装' requirements.txt '文件中列出的需求。使用刮刀很简单:</strong></p><figure class="lg lh li lj gt is"><div class="bz fp l di"><div class="lo lp l"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Code snippet for querying stream gauge data from the FWS website</figcaption></figure><p id="e4ae" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">数据也可以下载到 JSON 文件中:</p><figure class="lg lh li lj gt is"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="4517" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">“高程”字段包含溪流底部上方水深的记录。“深度”字段是一个计算字段，记录了高出堤岸顶部的水的高度(TOB)。如果<br/>水的深度高于 TOB，则‘above bank’键保存值‘True ’,否则为‘False’。有关更多详细信息，请参见自述文件。</p><pre class="lg lh li lj gt lq lr ls lt aw lu bi"><span id="b74d" class="lv lw jb lr b gy lx ly l lz ma">{<br/>    "sensorMetaData": {<br/>        "sensorId": "519",<br/>        "sensorType": "USGS Radar",<br/>        "installedDate": "3/27/1984",<br/>        "topOfBankFt": 32.0<br/>    },<br/>    "sensorData": [<br/>        {<br/>            "timestamp": "8/26/2017 7:31 AM",<br/>            "elevation": {<br/>                "value": 21.69,<br/>                "units": "ft"<br/>            },<br/>            "depth": {<br/>                "value": 0,<br/>                "units": "ft"<br/>            },<br/>            "aboveBank": false<br/>        },<br/>        {<br/>            "timestamp": "8/27/2017 5:43 AM",<br/>            "elevation": {<br/>                "value": 39.49,<br/>                "units": "ft"<br/>            },<br/>            "depth": {<br/>                "value": 7.490000000000002,<br/>                "units": "ft"<br/>            },<br/>            "aboveBank": true<br/>        }<br/>    ]<br/>}</span></pre><p id="d7fd" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">查询和绘图示例<br/> </strong>下面是从 475 号流量计获取数据并绘制数据的一小段代码:</p><figure class="lg lh li lj gt is"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="f0ae" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就产生了下面的情节…</p><figure class="lg lh li lj gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mb"><img src="../Images/71fffed0202ec66ca29cb7c709daabf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*17kXjswxH_MtTn64mGz6Zg.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Plotting the data using matplotlib</figcaption></figure><p id="eae6" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">…正如我们所料，这符合 FWS 的情节:</p><figure class="lg lh li lj gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mc"><img src="../Images/46b03552941d09d7b68bafffdbeafb01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_zkcaSXkRElsj6WyplYhDA.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Data as shown at <a class="ae kw" href="https://www.harriscountyfws.org" rel="noopener ugc nofollow" target="_blank">https://www.harriscountyfws.org</a></figcaption></figure><p id="abed" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">最后总结<br/> </strong>希望这个刮刀对其他有抱负的洪水研究者有用。如果您在使用代码时有任何疑问或问题，请随时联系我们！</p></div></div>    
</body>
</html>