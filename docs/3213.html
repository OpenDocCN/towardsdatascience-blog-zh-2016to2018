<html>
<head>
<title>Deep learning in your browser: A brisk guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">浏览器中的深度学习:简明指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deep-learning-in-your-browser-a-brisk-guide-ca06c2198846?source=collection_archive---------3-----------------------#2018-04-20">https://towardsdatascience.com/deep-learning-in-your-browser-a-brisk-guide-ca06c2198846?source=collection_archive---------3-----------------------#2018-04-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="212f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用网络摄像头和 Tensorflow.js 实时检测物体。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f11028efd652a7a0ea17b092952f2042.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JmfSG0YqReUOjyGH."/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://pixabay.com/en/cat-animal-kitten-domestic-cat-2720778/" rel="noopener ugc nofollow" target="_blank">Original Image</a></figcaption></figure><p id="9894" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://js.tensorflow.org/" rel="noopener ugc nofollow" target="_blank"> Tensorflow.js </a>是一个新的深度学习库，可以在你的浏览器中运行。作为一名机器学习和 Javascript 爱好者，我在 Tensorflow.js 发布后立即开始使用它进行对象检测库的工作。</p><p id="631d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，我将走过我是如何开始的，并分解<a class="ae kv" href="https://github.com/ModelDepot/tfjs-yolo-tiny" rel="noopener ugc nofollow" target="_blank"> tfjs-yolo-tiny </a>的不同点。你可以<a class="ae kv" href="https://modeldepot.github.io/tfjs-yolo-tiny-demo/" rel="noopener ugc nofollow" target="_blank">点击这里</a>查看现场演示。</p><p id="89a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将涉及提取原始的微型 YOLO 暗网模型，将其转换为 Keras，将其转换为 Tensorflow.js，进行一些预测，在 Tensorflow.js 中编写时捕获数据，以及轻松使用网络摄像头/图像进行预测。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/5ee993aed70ab377f0f1b1f1a4a904aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*53DWTAosj8aLnbqe."/></div></div></figure><h1 id="a448" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">更好、更快、更强</h1><p id="0e2b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">是的那是认真的<a class="ae kv" href="https://arxiv.org/abs/1612.08242" rel="noopener ugc nofollow" target="_blank">原论文题目</a>。我们将使用<a class="ae kv" href="https://pjreddie.com/darknet/yolo/" rel="noopener ugc nofollow" target="_blank">微型 YOLO </a>，一种可以以 200 FPS 运行的快速对象检测模型。我们将使用小 YOLO 而不是完整的 YOLOv2。为什么？首先，YOLOv2 在一个强大的桌面上“只能”以 40 fps 的速度运行，大多数用户都无法访问。该模型文件也比微型 YOLO 大 5 倍左右，从网上下载要花很长时间。最后，YOLOv2 有一个<a class="ae kv" href="https://github.com/pjreddie/darknet/blob/master/cfg/yolov2.cfg#L219" rel="noopener ugc nofollow" target="_blank"> reorg 层</a>，它还不支持作为原生 Tensorflow.js 层。我们将在下一步中获取微小 YOLO 的网络配置(神经网络结构)和权重(幻数)。</p><h1 id="85a6" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">YAD2K:又一个 Darknet 2 Keras(转换器)</h1><p id="3a8d" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">你可能已经注意到 YOLO 是用暗网写的，暗网听起来不像张量流。所以我们的第一站是将我们的 YOLO 模型转换成更张量流的东西，在我们的例子中，就是<a class="ae kv" href="https://keras.io" rel="noopener ugc nofollow" target="_blank"> Keras </a>！Keras 是一个更高级的深度学习框架。这是将您的权重转换为 Tensorflow.js 格式的<a class="ae kv" href="https://js.tensorflow.org/tutorials/import-keras.html" rel="noopener ugc nofollow" target="_blank">推荐格式</a>。</p><p id="08ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用<a class="ae kv" href="https://github.com/allanzelener/YAD2K" rel="noopener ugc nofollow" target="_blank"> YAD2K </a>将暗网模型转换为 Keras。继续按照这里的<a class="ae kv" href="https://github.com/allanzelener/YAD2K#installation" rel="noopener ugc nofollow" target="_blank">说明</a>安装 YAD2K，我等着。</p><p id="82e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好吧，你也可以假装是你做的，并使用我已经发布的<a class="ae kv" href="https://modeldepot.io/mikeshi/tiny-yolo-in-javascript" rel="noopener ugc nofollow" target="_blank">最终重量文件</a>，但这不会那么有趣！</p><p id="a39b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们必须修复 YAD2K 中的一个错误，以正确加载微小的 YOLO。</p><p id="82a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在您最喜欢的文本编辑器中打开<a class="ae kv" href="https://github.com/allanzelener/YAD2K/blob/master/yad2k.py#L83" rel="noopener ugc nofollow" target="_blank"> yad2k.py </a>，在第 83 行，将<code class="fe mq mr ms mt b">buffer=weights_file.read(16)</code>改为<code class="fe mq mr ms mt b">buffer=weights_file.read(20)</code>。为什么？不知道。</p><p id="3e3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在在您的终端中运行以下命令。它将下载微小的 YOLO 重量和配置，以及输出转换后的模型文件到<code class="fe mq mr ms mt b">model_data/yolov2-tiny.h5</code></p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="0d3c" class="my lu iq mt b gy mz na l nb nc">wget <a class="ae kv" href="https://pjreddie.com/media/files/yolov2-tiny.weights" rel="noopener ugc nofollow" target="_blank">https://pjreddie.com/media/files/yolov2-tiny.weights</a><br/>wget <a class="ae kv" href="https://raw.githubusercontent.com/pjreddie/darknet/master/cfg/yolov2-tiny.cfg" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/pjreddie/darknet/master/cfg/yolov2-tiny.cfg</a></span><span id="a957" class="my lu iq mt b gy nd na l nb nc">./yad2k.py yolov2-tiny.cfg yolov2-tiny.weights model_data/yolov2-tiny.h5</span></pre><p id="10f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们要确保我们的新模型实际可行！有趣的事实:我忘记这样做了，我花了一整天的时间想知道 Tensorflow.js 为什么是 b0rk。</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="7ed9" class="my lu iq mt b gy mz na l nb nc">./test_yolo.py model_data/yolov2-tiny.h5</span></pre><p id="a31c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该模型应该输出一些预测。如果没有，欢迎在下面评论我！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/6fbfd01812dfb927f761a5e423edb80a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B9U3cpC81DyWaVzX."/></div></div></figure><h1 id="a3ae" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">Tensorflow.js 转换器:我们最后的重量转换</h1><p id="e81c" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这一步更简单，我保证！看官方指南<a class="ae kv" href="https://js.tensorflow.org/tutorials/import-keras.html" rel="noopener ugc nofollow" target="_blank">这里</a>。同样，如果这看起来太多了，我已经完成了所有困难的工作，所以你可以直接跳过:)</p><p id="c284" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要安装官方的转换工具。在你的终端中运行<code class="fe mq mr ms mt b">pip install tensorflowjs</code>来安装转换器。</p><p id="61a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在再次使用终端来转换我们的模型！</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="5854" class="my lu iq mt b gy mz na l nb nc">tensorflowjs_converter --input_format keras \<br/>    model_data/yolov2-tiny.h5 \<br/>    tfjs_model_data</span></pre><p id="09ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们终于在<code class="fe mq mr ms mt b">tfjs_model_data</code>有了我们所有的模型文件！注意，该文件夹包含一个<code class="fe mq mr ms mt b">model.json</code>以及一堆其他碎片文件。<code class="fe mq mr ms mt b">model.json</code>告诉 Tensorflow.js 神经网络的结构是什么，哪些碎片文件对应什么权重。碎片文件包含模型的权重。确保碎片文件位于<code class="fe mq mr ms mt b">model.json</code>的同一个目录中，否则您的模型将无法正确加载。</p><h1 id="f067" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">Tensorflow.js 时间</h1><p id="b497" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">现在，有趣的部分。(每一部分都是好玩的部分。)ML 和 JS 代码同时！</p><p id="ab23" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将从导入一些 Tensorflow 并加载模型开始。</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="4e4a" class="my lu iq mt b gy mz na l nb nc">import * as tf from ‘@tensorflow/tfjs’;</span><span id="a8e8" class="my lu iq mt b gy nd na l nb nc">const model = await tf.loadModel(url);</span></pre><p id="e299" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">等等，什么是“网址”?您可以在这里使用托管模型文件<a class="ae kv" href="https://raw.githubusercontent.com/MikeShi42/yolo-tiny-tfjs/master/model2.json" rel="noopener ugc nofollow" target="_blank">或者提供您转换的文件的路径。在这里了解更多</a><a class="ae kv" href="https://js.tensorflow.org/api/0.9.0/#loadModel" rel="noopener ugc nofollow" target="_blank"/>！</p><p id="c1e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">太棒了，现在我们可以做一些真正的<strong class="ky ir">深度学习</strong>:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="4d1a" class="my lu iq mt b gy mz na l nb nc">function yolo (input) {<br/>   return model.predict(input);<br/>}</span></pre><p id="34fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">哼。这似乎很平常。哦等等。我们忘记了将输出转换成边界框、类标签和概率！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/ba4a1cd850f5211d2e7996f24dda91ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NKSYO6xd0M_-cAdJ."/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The numbers Mason, what do they mean?? <a class="ae kv" href="https://pixabay.com/en/matrix-technology-tech-data-3109378/" rel="noopener ugc nofollow" target="_blank">Original Image</a></figcaption></figure><h1 id="be91" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">把数字变成盒子和数字</h1><p id="9eb5" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我不打算深入探讨这个问题，因为 YOLO 的后期处理可以是他们自己的几篇博文。相反，我将强调我在将<a class="ae kv" href="https://github.com/allanzelener/YAD2K/blob/master/yad2k/models/keras_yolo.py" rel="noopener ugc nofollow" target="_blank"> Python </a>版本转换为<a class="ae kv" href="https://github.com/ModelDepot/tfjs-yolo-tiny/blob/master/src/postprocess.js" rel="noopener ugc nofollow" target="_blank"> Javascript </a>时所面临的挑战。</p><p id="3042" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">某些张量运算不可用</strong></p><p id="e4e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Tensorflow.js 还很年轻，因此有些东西还不可用，如<a class="ae kv" href="https://www.tensorflow.org/api_docs/python/tf/boolean_mask" rel="noopener ugc nofollow" target="_blank">布尔遮罩</a>或<a class="ae kv" href="https://www.tensorflow.org/api_docs/python/tf/image/non_max_suppression" rel="noopener ugc nofollow" target="_blank"> NMS </a>。您也可能遇到这个问题，但幸运的是，您可以通过使用</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="f200" class="my lu iq mt b gy mz na l nb nc">const expected_shape = tensor.shape;<br/>const data = await tensor.data(); // Async transfer from GPU to CPU<br/>// Note: data is a flattened TypedArray of the original tensor<br/>//... data manipulation in JS on CPU<br/>tf.tensor1d(data).reshape(expected_shape); // Shape it back into where we were before</span></pre><p id="6e12" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意:这样做可能会成为应用程序的瓶颈，但是<a class="ae kv" href="https://github.com/ModelDepot/tfjs-yolo-tiny/blob/master/src/postprocess.js#L24" rel="noopener ugc nofollow" target="_blank">有时候</a>这是<a class="ae kv" href="https://github.com/ModelDepot/tfjs-yolo-tiny/blob/master/src/index.js#L57-L59" rel="noopener ugc nofollow" target="_blank">不可避免的</a>。</p><p id="4f21" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">不能像 Python 一样使用-1 索引</strong></p><p id="756d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在 python 中，你可以使用-1 作为“最后一个元素”。不幸的是，在 Tensorflow.js 中，如果你在<code class="fe mq mr ms mt b">tf.slice</code>上尝试这样做，它会无声地失败。相反，你必须明确地指定尺寸<a class="ae kv" href="https://github.com/ModelDepot/tfjs-yolo-tiny/blob/master/src/postprocess.js#L144" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="4991" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">不能用 5d 张量</strong></p><p id="7edf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当心 Tensorflow.js 的 WebGL 后端不支持 5d 张量。如果我连 5 维都想象不出来，为什么还要用它们？在 YOLO，我们将产出重塑为<code class="fe mq mr ms mt b">[batch_size, xy, wh, box_confidence, box_class_pred]</code>。这明明是 5d。幸运的是，为了避免这样的痛苦和折磨，我简单地删除了 batch_size 维度。一种替代方法是不整形为 5d 张量。需要警惕的事情。</p><p id="7ff7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除此之外，我的经历是流动的。我只需要在 CPU(传统 JS)中重新实现 Tensorflow 通常开箱即用的<a class="ae kv" href="https://github.com/ModelDepot/tfjs-yolo-tiny/blob/master/src/postprocess.js#L12" rel="noopener ugc nofollow" target="_blank">两个</a> <a class="ae kv" href="https://github.com/ModelDepot/tfjs-yolo-tiny/blob/master/src/postprocess.js#L79" rel="noopener ugc nofollow" target="_blank">算法</a>。</p><h1 id="0d6c" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">NPM 装置</h1><p id="0a6e" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">让我们把我们的<strong class="ky ir">深度学习</strong>放到一个应用程序中吧！</p><p id="8224" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">幸运的是，一个可怜的家伙已经写好了代码，所以只需在你的终端上运行一个 NPM 安装程序:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="8493" class="my lu iq mt b gy mz na l nb nc">npm i tfjs-yolo-tiny</span></pre><p id="5d76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们将挥舞一下我们的 Javascript 魔杖</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="278e" class="my lu iq mt b gy mz na l nb nc">import yolo, { downloadModel } from ‘tfjs-yolo-tiny’;</span><span id="1538" class="my lu iq mt b gy nd na l nb nc">const model = await downloadModel();<br/>const inputImage = webcam.capture();</span><span id="47f4" class="my lu iq mt b gy nd na l nb nc">const boxes = await yolo(inputImage, model);</span></pre><p id="bfbd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">哇哇，你说的这个<code class="fe mq mr ms mt b">webcam.capture()</code>是什么？</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/849e1d9e1168d047a5c10cb0b3b464d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_WW3oZ2SWP1UfKrw9f1cdg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Original Traffic Image: <a class="ae kv" href="https://pxhere.com/en/photo/423261" rel="noopener ugc nofollow" target="_blank">https://pxhere.com/en/photo/423261</a></figcaption></figure><h1 id="d255" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">也许比 NPM 装置多一点…</h1><p id="aaf1" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">你可能已经注意到，我们还没有触及我们的 YOLO 到底在喂什么。而这是 Tensorflow.js 最酷的<em class="nh">部分之一。</em></p><p id="0180" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以从文档(DOM)中取出一个视频或图像，并将其转换为张量！</p><p id="eb88" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以用 JavaScript 写这样的东西:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="7ae2" class="my lu iq mt b gy mz na l nb nc">/* Pretend we had the following element in index.html. Always use alt tags for accessibility!<br/>&lt;img id=”image” src=”/test_input.jpg” alt=”YOLO Model Test Image”&gt;<br/>*/</span><span id="68e9" class="my lu iq mt b gy nd na l nb nc">const image = document.getElementById(‘image’);<br/>const input = tf.fromPixels(image);</span></pre><p id="ffbf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">嘭！输入现在有图像作为张量！要从图像切换到网络摄像头，你只需将它指向正确的元素。这对我来说是相当✨的魔法。</p><p id="e130" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这之后，我们必须做一些预处理。在这种情况下，将其裁剪为正方形，大小调整为 416x416，然后除以 255 以获得范围从 0 到 1 的像素值。为什么？因为老板是这么说的(我们就是这样训练 YOLO 的)。</p><h1 id="17c7" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">最后的想法</h1><p id="db7a" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们已经演练了如何将模型转换为 Tensorflow.js 格式。我们可以加载一个模型并用它来预测。然后我们探索了在 Tensorflow.js 中编写后处理代码的一些痛点，但是我们占了上风。我们现在还知道如何通过静态图像或网络摄像头获取数据。现在我们可以将大多数 ML 模型从 Python 转换为 Tensorflow.js，并在您的浏览器中运行它们。</p><p id="c3f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">想看看所有的行动吗？查看现场演示。想在您的应用程序中轻松使用它吗？检查一下<a class="ae kv" href="https://github.com/ModelDepot/tfjs-yolo-tiny" rel="noopener ugc nofollow" target="_blank"> NPM 包</a>。查看 Github repo 的演示<a class="ae kv" href="https://github.com/ModelDepot/tfjs-yolo-tiny-demo" rel="noopener ugc nofollow" target="_blank">来看看所有这些代码的运行以及如何使用 NPM 包。</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://modeldepot.io"><div class="gh gi ni"><img src="../Images/4458da124c8bbbeb2dccff73ee472649.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3m5DiBUiAnuQBKeMIjfNGA.png"/></div></a></figure><p id="bfa9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">欢迎加入<a class="ae kv" href="https://modeldepot.io/mikeshi/tiny-yolo-in-javascript" rel="noopener ugc nofollow" target="_blank"> ModelDepot </a>的讨论，或者在<a class="ae kv" href="https://gitter.im/ModelDepot/Lobby" rel="noopener ugc nofollow" target="_blank"> Gitter Chat </a>上找到我们！或者甚至为您的项目浏览下一个机器学习模型！</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="ceec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nh">特别感谢 HS、KZ、VP 和 JS 润色我的字母汤</em></p></div></div>    
</body>
</html>