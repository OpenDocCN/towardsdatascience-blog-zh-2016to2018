<html>
<head>
<title>Using Integer Linear Programming to Solve Sudoku Puzzles</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用整数线性规划解决数独难题</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/using-integer-linear-programming-to-solve-sudoku-puzzles-15e9d2a70baa?source=collection_archive---------1-----------------------#2017-12-29">https://towardsdatascience.com/using-integer-linear-programming-to-solve-sudoku-puzzles-15e9d2a70baa?source=collection_archive---------1-----------------------#2017-12-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f16e7dedf60e99d76b54e81b30ed1e1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eogFpsVgNzXQLCVgFzT_-A.jpeg"/></div></div></figure><p id="7ccc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你更擅长线性编程，而不是用传统的方法解决数独难题，那么这篇博文就是为你准备的！</p><p id="e1a4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我刚刚结束了研究生院的第三个学期，我想写一篇关于我在算法课程中学到的一些东西的短文。我最喜欢的话题是线性编程，事实证明同样的原理也适用于解决数独难题。</p><p id="53ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你可以用一个线性<strong class="ka ir">目标函数</strong>和线性<strong class="ka ir">不等式约束</strong>，<a class="ae kw" href="https://en.wikipedia.org/wiki/Linear_programming" rel="noopener ugc nofollow" target="_blank">线性规划</a> (LP)来表述一个问题，那么它就是寻找其最优解的有力工具。换句话说，如果你能把一个问题写成:</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/c19a4ac147657e13a7fdfcb12bb58c61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AYlRs24mw58x4IuCKaDsew@2x.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk">Primal (left) and dual (right) formulations of linear programming problems — maximize or minimize an objective function, subject to inequality constraints where b, c, x and y are vectors and A is a matrix.</figcaption></figure><p id="0bbc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以找到最优参数<em class="lg"> x </em>或者<em class="lg"> y. </em>(比如LP可以用来<a class="ae kw" href="https://www.math.ucla.edu/~tom/LP.pdf" rel="noopener ugc nofollow" target="_blank">分配工作，最小化运输成本</a>，或者创造<a class="ae kw" href="https://jeremykun.com/2014/06/02/linear-programming-and-the-most-affordable-healthy-diet-part-1/" rel="noopener ugc nofollow" target="_blank">健康饮食</a>。)LP的一种特殊类型是<a class="ae kw" href="https://en.wikipedia.org/wiki/Integer_programming" rel="noopener ugc nofollow" target="_blank">整数线性规划</a> (ILP)，由此我们将参数<em class="lg"> x </em>或<em class="lg"> y </em>限制为整数<em class="lg">。</em></p><p id="47af" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这篇文章中，我想研究ILP的一个特殊应用:解决数独。(感谢西南航空机组提供我的拼图和零食！)</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lh"><img src="../Images/4143f2457f394adc7cd8d39c00eafaa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H_KZFHyVJaftPQRoiDJvXw.jpeg"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk">Courtesy of the December 2017 issue of <a class="ae kw" href="https://www.southwestmag.com" rel="noopener ugc nofollow" target="_blank">Southwest Magazine</a>. I will show how to solve “Hard 1” using LP.</figcaption></figure><h2 id="65fa" class="li lj iq bd lk ll lm dn ln lo lp dp lq kj lr ls lt kn lu lv lw kr lx ly lz ma bi translated">目标函数</h2><p id="ebf5" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">与典型的LP或ILP问题不同，数独没有比另一个更好的解决方案。在我们的例子中，我们希望找到任何可行的解决方案——一个满足我们的约束的方案。因此，我们可以指定一个任意的目标函数。</p><h2 id="5180" class="li lj iq bd lk ll lm dn ln lo lp dp lq kj lr ls lt kn lu lv lw kr lx ly lz ma bi translated">线性约束</h2><p id="edd2" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">一个难题包括填充一个9×9的网格，这样每一行、每一列和每一个3×3的子网格只包含一个整数值。换句话说，你不能在左下方的第一行、第一列或第一个子格子中输入另一个数字。</p><p id="b584" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因为每个框可以填充九个值，并且我们被约束在九行九列中的每一行，所以我们有9 = 729个参数。下面我们将用<em class="lg"> v </em>(值)<em class="lg"> r </em>(行)<em class="lg"> c </em>(列)<em class="lg">来索引<em class="lg"> x </em>中的这些值。</em></p><p id="0568" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">更具体地，我们可以将我们的目标函数和线性约束公式化如下:</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mg"><img src="../Images/cb752eb15145b7c2156cb6d0e8c8fd1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DvDxo0HQ0XkP7tmIiYOIGQ@2x.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk">Primal formulation for solving a generic sudoku problem. Note the arbitrary objective function mentioned earlier. Most of the heavy lifting occurs within the four constraints above. Adapted from <a class="ae kw" href="http://profs.sci.univr.it/~rrizzi/classes/PLS2015/sudoku/doc/497_Olszowy_Wiktor_Sudoku.pdf" rel="noopener ugc nofollow" target="_blank">http://profs.sci.univr.it/~rrizzi/classes/PLS2015/sudoku/doc/497_Olszowy_Wiktor_Sudoku.pdf</a>.</figcaption></figure><p id="628b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第一个约束要求每个单元格(由其行和列表示)包含一个值。第二个和第三个约束保持列和行中分别只包含一个值。最后一个约束确定了在每个子网格中只能找到一个值。</p><p id="6a2d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当您试图解决任何特定的数独时，甚至需要指定更多的约束，即每个非空单元格的初始状态。</p><h2 id="cd99" class="li lj iq bd lk ll lm dn ln lo lp dp lq kj lr ls lt kn lu lv lw kr lx ly lz ma bi translated">解开谜题</h2><p id="287a" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">我使用名为<a class="ae kw" href="https://github.com/coin-or/pulp" rel="noopener ugc nofollow" target="_blank"> PuLP </a>的用于解决LP问题的Python包来解决上面的“困难1”数独。纸浆有一些很好的<a class="ae kw" href="https://www.coin-or.org/PuLP/CaseStudies/a_sudoku_problem.html" rel="noopener ugc nofollow" target="_blank">现有文档</a>关于如何使用它的软件来解决这个问题。这是用LP解决数独难题的又一个<a class="ae kw" href="https://diego.assencio.com/?index=25ea1e49ca59de51b4ef6885dcc3ee3b" rel="noopener ugc nofollow" target="_blank">详解</a>，附带<a class="ae kw" href="https://github.com/dassencio/sudoku" rel="noopener ugc nofollow" target="_blank">补充码</a>。</p><p id="57ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我改编的<a class="ae kw" href="https://github.com/coin-or/pulp/blob/master/examples/Sudoku1.py" rel="noopener ugc nofollow" target="_blank">纸浆的数独例子</a>可以在这里找到<a class="ae kw" href="https://gist.github.com/allisonmorgan/c2f831cb01532fe51834f471634f4d58" rel="noopener ugc nofollow" target="_blank">。请注意，我的</a><a class="ae kw" href="https://gist.github.com/allisonmorgan/c2f831cb01532fe51834f471634f4d58#file-sudoku-py-L52-L79" rel="noopener ugc nofollow" target="_blank">编辑约束</a>只是满足我的特定谜题的起始状态。</p><p id="c247" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望你喜欢我解决数独难题的乐趣。说到捣乱，请注意:<strong class="ka ir">以下是我的谜题解答。</strong></p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mh"><img src="../Images/fad3de2fbc3133813f7da9b0594ebdb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HxlVHXaCGGa2xxhuZQ5QVQ@2x.png"/></div></div></figure><h2 id="4152" class="li lj iq bd lk ll lm dn ln lo lp dp lq kj lr ls lt kn lu lv lw kr lx ly lz ma bi translated">相关阅读</h2><ul class=""><li id="5ecf" class="mi mj iq ka b kb mb kf mc kj mk kn ml kr mm kv mn mo mp mq bi translated"><a class="ae kw" href="https://www.amazon.com/Algorithms-Sanjoy-Dasgupta/dp/0073523402" rel="noopener ugc nofollow" target="_blank">达斯古普塔、帕帕迪米特里奥和瓦齐拉尼的算法</a>，第7章</li><li id="76d7" class="mi mj iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated"><a class="ae kw" href="https://en.wikipedia.org/wiki/Introduction_to_Algorithms" rel="noopener ugc nofollow" target="_blank"> CLRS </a>，第29章</li></ul></div></div>    
</body>
</html>