<html>
<head>
<title>Chatbots that get smarter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">变得更聪明的聊天机器人</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/chatbots-that-get-smarter-8491f8cd65e6?source=collection_archive---------4-----------------------#2017-05-23">https://towardsdatascience.com/chatbots-that-get-smarter-8491f8cd65e6?source=collection_archive---------4-----------------------#2017-05-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0163" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">写一个不会说话的聊天机器人很容易。编写一个智能的程序，对你问它的任何事情都做出明智的反应，要难得多。一些著名的例子:如果一个人提到哈里森·福特，他们可能不是在谈论汽车。</p><p id="0a4d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有三种不同的聊天机器人，它们都越来越难编写。</p><ol class=""><li id="1ea5" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">最简单的聊天机器人只是一个方便的命令行界面:在 Slack 或 Hipchat 中，通常会有“斜杠”命令。开发人员将设置一个程序，当它进入一个从 git 中提取最新源代码、编译它并显示单元测试输出的房间时，它将唤醒“/build”。因为这是一个非常狭窄的领域，所以很容易做对，而且因为这对程序员有利，所以花一些程序员的时间来改进任何不好的东西总是划算的。</li><li id="2e67" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">下一个最简单的是订购机器人，它们通过不让用户偏离批准的对话路径来控制对话。如果你正在订购比萨饼，机器人可以问你关于配料和大小的问题，直到它得到它需要的一切。本质上，这只是一个带有某些字段的 web 表单的替代品，但在某些市场(如中国)，有近乎通用的聊天平台，这可能非常方便。</li><li id="74d0" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">最难的是无法控制对话的机器人，用户可能会问任何问题。</li></ol><p id="c4e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">支持机器人是最后一种类型的例子:用户可以向服务台询问任何事情，支持机器人需要智能地响应。</p><p id="887b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我做了一个快速调查，发现至少有 50 家初创公司试图编写各种各样的帮助台机器人。这是一个有利可图的市场，因为如果你能把 10%的服务台电话变成与机器人聊天，这意味着巨大的员工成本节约。我有一个客户，其服务台有 150 多名全职员工，可以节省数百万美元。</p><p id="0115" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不幸的是，我见过的几乎每一家初创公司都完全没有达到他们的目标，对他们在聊天机器人上的投资感到满意的客户实际上非常少。</p><p id="f7d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我见过三个陷阱:</p><ul class=""><li id="4716" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kz kr ks kt bi translated">一些创业公司缺乏相信自己开发者的勇气。人们相信，微软、脸书、亚马逊、IBM 和谷歌拥有所有的答案，如果我们利用 api.ai 或 wit.ai 或 lex 或 Watson 或他们本月推出的任何东西，只需简单的“服务台知识和个性”就可以放在上面，就像蛋糕上的糖衣。从根本上来说，这是行不通的:出于非常合理的商业原因，大玩家正在研究取代网页表单的机器人技术，这种偏见带来了许多限制性假设。</li><li id="582b" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kz kr ks kt bi translated">许多初创公司(以及更大的公司)认为，如果你从内部网搜集到足够多的数据——例如分析 Confluence 中的每一篇文章——你就能够为用户提供完全正确的答案。其他人更进一步，试图刮公共论坛。这不起作用，因为首先，用户通常不能很好地解释他们的问题，所以没有足够的信息来理解用户想要什么；其次…你真的读过 IT 人员放入他们知识库的内容吗？</li><li id="cf0c" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kz kr ks kt bi translated">有很多不同的事情可能出错，也有很多不同的方法来解决问题。如果你试图让你的支持聊天机器人完全自主，能够回答任何问题，你会花很多钱来处理可能永远不会再发生的奇怪的小案件。</li></ul><p id="bc30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我见过的最有希望的方法是我去年年底合作的一家初创公司采用的方法。当他们决定转向另一个方向时，我从他们那里买回了源代码。</p><p id="e7ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">关键的想法是这样的:如果我们的支持聊天机器人不能回答每一个问题——事实上它永远不会回答——那么聊天机器人必须有一种方法让人类来回答。如果一个人做出了回应，那么聊天机器人应该知道这是它应该做出的回应。如果聊天机器人可以学习，那么我们根本不需要做任何前期编程，我们可以让聊天机器人从过去的对话中学习。或者甚至让聊天机器人在刚打开的时候完全幼稚。</p><p id="b99f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">挑战在于，在支持聊天室中，通常很难理清支持团队的每个答案指的是什么。我已经实现了一些技术(例如，基于时间接近度的解开、@提及等等)。一种保守的方法是有一个单独的机器人培训室，只有准备干净的对话发生。采取这种方法意味着我们用昂贵的高薪程序员来代替编写代码来处理对话，用一个实习生来编写一些文本聊天。</p><p id="8539" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">找一个只想整天泡在聊天室的实习生其实并不难。</p><p id="762e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">无论您采用哪种方法，您最终都会得到一个对话集:大量用户提问、从支持部门获得响应、阐明他们想要什么，然后获得答案的例子。</p><p id="5953" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">预测接下来要说的合适的话变成了一个机器学习问题:给定一个新的，否则看不见的数据 blob，预测它属于哪个类别。数据块是到目前为止在对话中说过的所有事情，类别是人工支持服务台代理最有可能作为响应说过的任何事情。</p><p id="2cba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">关于如何用自然语言文本来处理机器学习问题，有大量的研究文章和许多广为人知的最佳实践。在支持向量机、深度神经网络的 LTSM 架构、句子的 word2vec 嵌入中已经找到了好的解决方案。</p><p id="b0cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">事实证明，20 世纪 60 年代的技术非常有效，你可以在几个小时内编写出一个解决方案。我使用了一个词袋模型结合逻辑回归，我得到了相当令人满意的结果。(在这一点上，几乎任何严肃的数据科学家或人工智能大师都应该在后台窃笑，但请原谅我。)</p><p id="f7db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">单词袋模型认为，当用户提问时，你可以忽略他们所写内容的结构和语法，只关注关键词。如果用户提到“密码”，你可能甚至不需要知道这句话的其余部分:你知道这是哪种支持电话。如果他们提到“Windows”，下一个可能的回答几乎总是“你试过重启吗？”</p><p id="ade7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你说的语言有 70，000 个不同的单词(包括缩写词在内的所有变体)，那么你在聊天中键入的每条消息都会变成一个由 70，000 个元素组成的数组，其中大部分是零，有几个 1 对应于你在该消息中碰巧使用的单词。</p><p id="cac8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">支持代理说的第一句话很少是问题的完整解决方案。所以我为用户和代理添加了一个“记忆”。用户在说最后一句话之前说了什么？我通过指数衰减实现了这一点。如果你的“记忆”向量是 x，你最后说的是 y，那么当你说 z 的时候，我会把记忆向量更新为(x/2 + y/2)。那么你下一条消息之后，就会变成(x/4 + y/4 + z/2)。在预测接下来会发生什么时，你刚才说的事情渐渐变得不那么重要了。</p><p id="aa1d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将此与逻辑回归相结合，本质上，你为每个单词在每个上下文中的强度分配一个分数作为预测值。在你的上一封邮件中出现的单词“password”在密码重置的回复中得分很高，但是单词“Windows”在密码重置的回复中的预测能力很弱。即使在你的历史中看到“Linux”这个词，对“你试过重启它了吗”来说也是一个负面的强度预测，因为人类很少会给出这样的回答。</p><p id="0986" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你在现有的数据语料库上训练逻辑回归器，它会计算强度矩阵。这是一个大矩阵:四个不同地方的 70，000 个单词(用户说的最后一句话，支持代理说的最后一句话，用户的记忆，支持代理的记忆)给你 280，000 列，你训练它的每个对话(可能是上千个对话)的每一步都是一行。</p><p id="faec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但没关系，这是一个非常稀疏的矩阵，现代计算机可以在千兆字节的数据上训练逻辑回归器，而不需要任何特殊的硬件。这个问题至少从 20 世纪 70 年代就已经被很好地研究过了，并且有大量的图书馆来有效地实现它。</p><p id="8b42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是你所要做的，来制造一个惊人成功的聊天机器人。你可以调整聊天机器人在说话之前需要有多自信(例如，不要说话，除非你有 95%的信心你会像支持代理那样回应)。你可以列出优势矩阵，看看为什么聊天机器人在出错时选择给出答案。如果它需要学习更多的东西或者犯了错误，你可以给它另一个例子。</p><p id="4b25" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这种方法比雇佣一个开发人员和数据科学家团队要便宜得多，比依赖任何今天在这里，明天就过去的人工智能初创公司要安全得多，比调用由知名供应商运行的 web APIs 的系统更容易支持。</p><p id="b7a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在巴塞罗那的阿特拉斯营地做过这个演讲，希望今年晚些时候我能在圣何塞重复这个演讲。这是视频:<a class="ae la" href="https://youtu.be/YMW27HjJPAw" rel="noopener ugc nofollow" target="_blank">https://youtu.be/YMW27HjJPAw</a></p></div></div>    
</body>
</html>