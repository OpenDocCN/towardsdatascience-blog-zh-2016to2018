<html>
<head>
<title>Tensor Flow Object Detection over Telegram Bot, my breakfast, fruits and an interactive conversation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">电报机器人、我的早餐、水果和交互式对话上的张量流对象检测</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tensor-flow-object-detection-over-telegram-bot-my-breakfast-fruits-and-an-interactive-e54acdd6869a?source=collection_archive---------6-----------------------#2017-08-19">https://towardsdatascience.com/tensor-flow-object-detection-over-telegram-bot-my-breakfast-fruits-and-an-interactive-e54acdd6869a?source=collection_archive---------6-----------------------#2017-08-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="30ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将探索一个案例，其中我们使用<a class="ae kl" href="https://www.tensorflow.org/" rel="noopener ugc nofollow" target="_blank">张量流</a>(对象检测API)将图像中的对象检测与通过bot架构(电报平台)的交互相结合。</p><p id="b6db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">面临的挑战是创造一个能够在对话中使用图像进行交互的机器人，以告知用户早餐中包含的水果。利用这些信息，这款软件可以在未来提供许多不同的分析，目前还只是一个概念证明。</p><p id="5bd9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将提出一个<a class="ae kl" href="https://github.com/nbortolotti/TensorPhotoXRay" rel="noopener ugc nofollow" target="_blank"> TensorPhotoXRay </a>(我们的图像检测解决方案，<a class="ae kl" href="https://medium.com/towards-data-science/tensorflow-photo-x-ray-object-detection-with-app-engine-7de9dd8f63f5" rel="noopener">以前的文章</a>)的集成，以检测图像中的水果，我们将创建一个与电报机器人的集成(项目<a class="ae kl" href="https://github.com/nbortolotti/appengine-telegram-bot" rel="noopener ugc nofollow" target="_blank"> appengine-telegram-bot </a>)。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/f620df43467931d46a857a924f45800d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*Z2BxvZBvEMox4ryS7iUqyQ.png"/></div></figure><p id="8d8a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是已经完成并正在运行的解决方案:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ku"><img src="../Images/9ac24057c22788914cfd05ca4eb45905.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lHLEn8oIYe7ilrUt99bE4g.gif"/></div></div></figure><p id="3cb4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们描述一下使用这个架构的基本元素。</p><p id="ab51" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">电报中机器人的创建</strong>:你可以通过这个<a class="ae kl" href="https://telegram.org/blog/bot-revolution" rel="noopener ugc nofollow" target="_blank">官方链接</a>探索更多关于这个选项的信息。*此步骤的重要元素，获取<em class="kz">令牌</em>以连接电报平台。</p><p id="7a44" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">创建bot电报解决方案</strong>:让我们创建一个基于App Engine的bot。(项目<a class="ae kl" href="https://github.com/nbortolotti/appengine-telegram-bot" rel="noopener ugc nofollow" target="_blank"> appengine-telegram-bot </a>)。*这是对来自电报的消息进行分析的方法，以及对图像检测方法的调用。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="8c84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">*我们使用超过50%的置信度来显示标签。<a class="ae kl" href="https://github.com/nbortolotti/appengine-telegram-bot" rel="noopener ugc nofollow" target="_blank">在这里</a>您将找到要部署的完整项目。</p><p id="622b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">部署Telegram Bot解决方案</strong>:在本例中，该解决方案是为<a class="ae kl" href="https://cloud.google.com/appengine/docs/python/" rel="noopener ugc nofollow" target="_blank"> Google App Engine传统环境</a>设计的。您应该特别注意这些要素:</p><ul class=""><li id="0bf9" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated"><strong class="jp ir">电报令牌</strong>:要获得这些信息并在电报平台上创建机器人，你应该与<a class="ae kl" href="https://telegram.me/botfather" rel="noopener ugc nofollow" target="_blank">机器人父亲</a>对话。<a class="ae kl" href="https://core.telegram.org/bots" rel="noopener ugc nofollow" target="_blank">在这里</a>你有所有的官方指示。</li><li id="5003" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated"><strong class="jp ir">与TensorPhotoXRay的url集成</strong>:一旦部署了解决方案，您将需要Url来执行分析。记住你有一个<em class="kz">新方法</em>，格式如下:</li></ul><blockquote class="lq lr ls"><p id="ad08" class="jn jo kz jp b jq jr js jt ju jv jw jx lt jz ka kb lu kd ke kf lv kh ki kj kk ij bi translated">root URL/<strong class="jp ir">photobot</strong>/photourl</p></blockquote><ul class=""><li id="834b" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated"><strong class="jp ir"> rooturl </strong> : app引擎url。</li><li id="17b1" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated"><strong class="jp ir"> photourl </strong>:要分析的照片的url。</li></ul><p id="e6fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">电报钩子配置</strong>:您需要在App Engine上部署解决方案。完成此操作后，您将获得以下URL格式。</p><blockquote class="lq lr ls"><p id="309c" class="jn jo kz jp b jq jr js jt ju jv jw jx lt jz ka kb lu kd ke kf lv kh ki kj kk ij bi translated">rooturl/ <strong class="jp ir">水果_分析</strong></p></blockquote><p id="9d3d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">*rooturl:应用程序引擎url</p><p id="0a3c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">部署TensorPhotoXRay解决方案</strong>:该活动可按照以下说明进行。请记住，该解决方案使用<a class="ae kl" href="https://cloud.google.com/appengine/docs/flexible/python/" rel="noopener ugc nofollow" target="_blank">应用引擎灵活环境</a>。<br/>*我在原项目上做了修改，增加了一个新方法，在图像检测上只返回一个<em class="kz">标签数组</em>。</p><p id="643a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是新方法:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="88b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">最后一步，将电报与我们开发的机器人</strong> <br/>连接起来。现在让乐趣开始吧…</p><ul class=""><li id="1f95" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">对于与我们的应用引擎解决方案的bot链接，我们必须设置挂钩。(仅访问此链接并验证<em class="kz"> web_hook配置正常</em>)</li></ul><blockquote class="lq lr ls"><p id="5623" class="jn jo kz jp b jq jr js jt ju jv jw jx lt jz ka kb lu kd ke kf lv kh ki kj kk ij bi translated">rooturl/set_webhook</p></blockquote><ul class=""><li id="750b" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">rooturl:应用程序引擎url</li></ul><p id="39aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们可以与一个组件交互，让我们在食物选择方面进行合作，在未来以一种非常灵活的方式建议和学习。</p><p id="32cc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有几个要素需要发展和改进，但这个简单的解决方案展示了一条有趣的道路，在与用户的交互中充满了新的机会。</p></div></div>    
</body>
</html>