<html>
<head>
<title>How to run Unity on Amazon Cloud or without Monitor</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在亚马逊云上或没有监视器的情况下运行 Unity</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-run-unity-on-amazon-cloud-or-without-monitor-3c10ce022639?source=collection_archive---------1-----------------------#2017-05-10">https://towardsdatascience.com/how-to-run-unity-on-amazon-cloud-or-without-monitor-3c10ce022639?source=collection_archive---------1-----------------------#2017-05-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="b72b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经过几天的咒骂和诅咒，我设法让我的 Unity 应用程序在一台“无头”Linux 机器上运行和渲染，这台机器没有物理显示器。最终甚至在亚马逊云上！</p><p id="2732" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，所有的问题都是由于 Unity 的<em class="kl">而不是</em>，而是配置操作系统和驱动程序的问题。一旦我设法让 OpenGL 样本<strong class="jp ir"> glxgears </strong>在没有监视器的情况下运行，Unity 也能运行。</p><p id="16ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">TL；DR: </strong> <a class="ae km" href="https://console.aws.amazon.com/ec2/v2/home?region=us-west-1#LaunchInstanceWizard:ami=ami-921c40f2" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">给我准备好使用使用 GPU 的亚马逊磁盘镜像。</strong>T9】</a></p><h2 id="eed6" class="kn ko iq bd kp kq kr dn ks kt ku dp kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">为什么有人想在没有显示器的情况下运行 Unity 应用程序？</h2><p id="b593" class="pw-post-body-paragraph jn jo iq jp b jq lg js jt ju lh jw jx jy li ka kb kc lj ke kf kg lk ki kj kk ij bi translated">如果你正在与机器学习合作— <a class="ae km" href="https://chatbotslife.com/reinforcement-learning-or-evolutionary-strategies-nature-has-a-solution-both-8bc80db539b3" rel="noopener ugc nofollow" target="_blank">教学代理</a>通过查看像素来玩 Unity 游戏或在<a class="ae km" href="https://medium.com/towards-data-science/introduction-to-udacity-self-driving-car-simulator-4d78198d301d" rel="noopener"> Udacity 自动驾驶汽车模拟器</a>中驾驶。如果你用合成图像来扩充训练集，或者简单地为你的电影渲染大量的帧，你可能想要在远程服务器上运行，在云中运行，或者至少在你自己的桌面上隐藏烦人的窗口。</p><p id="b61c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你仍然需要渲染循环运行和 GPU 工作，所以通常的方法来运行 Unity 作为一个服务器是行不通的。</p><p id="d14d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Linux 来拯救我们了！</p><h2 id="a984" class="kn ko iq bd kp kq kr dn ks kt ku dp kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">在没有显示器的服务器上运行带有图形的 Unity 应用程序</h2><p id="75e2" class="pw-post-body-paragraph jn jo iq jp b jq lg js jt ju lh jw jx jy li ka kb kc lj ke kf kg lk ki kj kk ij bi translated">假设你有 Linux box(我在<strong class="jp ir"> Ubuntu14.04) </strong>上测试过)并且已经安装了 NVIDIA 驱动程序并且可以工作。</p><p id="22bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">剩下的工作非常简单——配置虚拟显示器，运行 X 服务器，并确保在与 X 相同的显示器上启动应用程序:</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="lq lr l"/></div></figure><h2 id="bc5a" class="kn ko iq bd kp kq kr dn ks kt ku dp kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">在本地机器上运行 Unity 应用程序</h2><p id="e17c" class="pw-post-body-paragraph jn jo iq jp b jq lg js jt ju lh jw jx jy li ka kb kc lj ke kf kg lk ki kj kk ij bi translated">当您的 DeepQ 代理正在学习时，隐藏烦人的窗口很有用。</p><p id="7714" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装<a class="ae km" href="https://xpra.org/trac/wiki/Xdummy" rel="noopener ugc nofollow" target="_blank">虚拟</a>和<a class="ae km" href="http://www.virtualgl.org" rel="noopener ugc nofollow" target="_blank">虚拟</a>。xduminum 将在屏幕外创建新的虚拟显示，VirtualGL 将捕获传入的 OpenGL 调用，并在真实的 GPU 上执行它们。参见说明:</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="lq lr l"/></div></figure><h2 id="3bdd" class="kn ko iq bd kp kq kr dn ks kt ku dp kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">在亚马逊云上运行带有图形的 Unity 应用程序！</h2><p id="0c0e" class="pw-post-body-paragraph jn jo iq jp b jq lg js jt ju lh jw jx jy li ka kb kc lj ke kf kg lk ki kj kk ij bi translated">现在最有趣和最有价值的部分——在<a class="ae km" href="https://aws.amazon.com/ec2/" rel="noopener ugc nofollow" target="_blank">亚马逊弹性计算云(亚马逊 EC2) </a>上运行 Unity。</p><p id="b6c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">亚马逊提供了几个 GPU 选项:旧的<strong class="jp ir"> g2 </strong>实例和更快的<strong class="jp ir"> p2 </strong>实例。到目前为止，我在使用<strong class="jp ir"> Ubuntu 14.04 </strong>的<strong class="jp ir"> g2.2xlarge </strong>单 GPU 实例上测试了以下内容。</p><p id="a860" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最复杂的部分是找到正确的 NVIDIA 驱动程序，可以支持云上的 GPU。到目前为止，我发现<strong class="jp ir"> 367.57 </strong>和<strong class="jp ir"> 340.46 </strong>正在使用位于<strong class="jp ir"> g2 </strong>实例内部的<a class="ae km" href="https://www.techpowerup.com/gpudb/2312/grid-k520" rel="noopener ugc nofollow" target="_blank"> GRID K520 </a> GPU。然而，安装程序有一个问题——它忘记将总线 ID 添加到配置中——需要手动修补文件。</p><p id="58ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你需要禁用 Ubuntu 自带的新驱动程序。他们对可怜的 K520 没有任何好处。</p><p id="c575" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">除此之外——构建并安装 X 服务器，设置虚拟显示并启动 X。</p><p id="adc1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您的应用程序应该准备好在与 x 相同的显示器上启动。</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="9676" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你想知道更多关于 NVIDIA 驱动安装的细节，请关注:<a class="ae km" href="https://askubuntu.com/questions/429596/how-to-choose-the-vga-when-setting-up-the-x-server/534622#534622" rel="noopener ugc nofollow" target="_blank">https://askubuntu . com/questions/429596/how-to-choose-the-VGA-when-setting-the-x-server/534622 # 534622</a></p><h1 id="5941" class="ls ko iq bd kp lt lu lv ks lw lx ly kv lz ma mb ky mc md me lb mf mg mh le mi bi translated">准备使用亚马逊启动映像</h1><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/833ca6fb9cb1c158c9ce01035d77f5b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ikjVj1N41-a86-bZ72z4w.png"/></div></div></figure><p id="27f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你不能被上面的步骤所困扰，那也没关系。我为你创建了可以在 Amazon 上运行 Unity 或任何其他 OpenGL 应用程序的引导磁盘映像(AMI)。</p><p id="aaff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">图片包含 Ubuntu 14.04，NVIDIA 驱动 367.57。在启动时，它用虚拟显示器启动 X 服务器。当然，所有的 OpenGL 调用都将在 GPU 上执行。</p><p id="6891" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">图像名为:<strong class="jp ir"> Ubuntu 14.04，带有针对 GPU 加速 OpenGL </strong>的虚拟显示设置，可在以下位置获得:<strong class="jp ir"> us-west-1 </strong>、<strong class="jp ir"> us-west-2 </strong>和<strong class="jp ir"> us-east </strong>。</p><p id="8482" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要在亚马逊云上找到它，只需在 AMI 搜索栏中键入“<strong class="jp ir"> Ubuntu GPU </strong>”或使用链接:<a class="ae km" href="https://console.aws.amazon.com/ec2/v2/home?region=us-west-1#LaunchInstanceWizard:ami=ami-921c40f2" rel="noopener ugc nofollow" target="_blank">https://console.aws.amazon.com/ec2/v2/home?region = us-west-1 # LaunchInstanceWizard:ami = ami-921 C40 f 2</a></p><p id="b487" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="kl"> PS: </em> </strong> <em class="kl">出于测试目的，你可以下载我的小 Unity app，它会渲染一些盒子，抓取截图并写入磁盘:</em><a class="ae km" href="https://www.dropbox.com/s/abycjktjzmkrmb4/auto.zip?dl=0" rel="noopener ugc nofollow" target="_blank"><em class="kl">【https://www.dropbox.com/s/abycjktjzmkrmb4/auto.zip?dl=0】</em></a></p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mq"><img src="../Images/a38f584819e792590ea6f46151155b00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GURMoHxg1KAgX95ouCluqg.png"/></div></div></figure></div></div>    
</body>
</html>