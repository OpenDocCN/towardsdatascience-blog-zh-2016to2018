<html>
<head>
<title>Get Trading Data with Pandas Library 🐼</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过熊猫图书馆获取交易数据🐼</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/collect-trading-data-with-pandas-library-8904659f2122?source=collection_archive---------4-----------------------#2018-04-29">https://towardsdatascience.com/collect-trading-data-with-pandas-library-8904659f2122?source=collection_archive---------4-----------------------#2018-04-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/98ddd3943676ab3ebf977bb5f7b42d81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iiNQh8ilguT_7nle."/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">“A street sign pointing to Wall Street in black and white” by <a class="ae kf" href="https://unsplash.com/@chrisli?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Chris Li</a> on <a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl kg kh hx ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="im in io ip iq"><p id="d7d4" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">(我的<a class="ae kf" href="https://kylelix7.github.io/collecting-trading-data-with-pandas/" rel="noopener ugc nofollow" target="_blank">博客</a>里也有这个帖子)</p><p id="ee83" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><a class="ae kf" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> <em class="ll"> Pandas </em> </a>是一个开源库，为<a class="ae kf" href="https://www.python.org/" rel="noopener ugc nofollow" target="_blank"> Python </a>编程语言提供高性能、易于使用的数据结构和数据分析工具。Pandas 是最受欢迎的交易策略开发工具之一，因为 Pandas 有各种各样的数据收集、操作和分析工具。</p><p id="d475" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">对于相信交易的定量分析师，他们需要访问股票价格和交易量，以便计算技术指标的组合(例如，SMA、BBP、MACD 等)。)进行策略。幸运的是，这些数据可以通过 REST APIs 在许多平台上获得(例如<a class="ae kf" href="https://iextrading.com/developer/" rel="noopener ugc nofollow" target="_blank"> IEX </a>、<a class="ae kf" href="https://www.quandl.com/" rel="noopener ugc nofollow" target="_blank"> Quandl </a>)。更幸运的是，pandas_datareader 为您从这些平台收集数据提供了一致的简单 API。在这个故事中，我将介绍如何用熊猫收集股票数据。</p><p id="5fe9" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">先决条件:Python 3</p><p id="f8cc" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">步骤 1:环境设置(虚拟环境)</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="7679" class="lv lw it lr b gy lx ly l lz ma">python3 -m venv tutorial-env<br/>source ~/tutorial-env/bin/activate<br/>pip install panda<br/>pip install pandas_datareader<br/>pip install matplotlib<br/>pip install scipy</span></pre><p id="380e" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">(不要忘记激活环境“source ~/tutorial-env/bin/activate”或选择 IDE 中的虚拟 env)</p><p id="db6f" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">步骤 2:代码(获取数据并转储到 csv 文件)</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="d01b" class="lv lw it lr b gy lx ly l lz ma"><strong class="lr iu">import </strong>matplotlib.pyplot <strong class="lr iu">as </strong>plt<br/><strong class="lr iu">import </strong>pandas_datareader.data <strong class="lr iu">as </strong>web<br/># collect data for Amazon from 2017-04-22 to 2018-04-22<br/>start = <strong class="lr iu">'2017-04-22'<br/></strong>end = <strong class="lr iu">'2018-04-22'<br/></strong>df = web.DataReader(name=<strong class="lr iu">'AMZN'</strong>, data_source=<strong class="lr iu">'iex'</strong>, start=start, end=end)<br/>print(df)<br/>df.to_csv(<strong class="lr iu">"~/workspace/{}.csv"</strong>.format(symbol))</span></pre><p id="f266" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">数据帧的输出</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="4685" class="lv lw it lr b gy lx ly l lz ma">open       high        low    close    volume<br/>date                                                         <br/>2017-04-24   908.680   909.9900   903.8200   907.41   3122893<br/>2017-04-25   907.040   909.4800   903.0000   907.62   3380639<br/>2017-04-26   910.300   915.7490   907.5600   909.29   2608948<br/>2017-04-27   914.390   921.8600   912.1100   918.38   5305543<br/>2017-04-28   948.830   949.5900   924.3335   924.99   7364681<br/>2017-05-01   927.800   954.4000   927.8000   948.23   5466544<br/>2017-05-02   946.645   950.1000   941.4130   946.94   3848835<br/>2017-05-03   946.000   946.0000   935.9000   941.03   3582686<br/>2017-05-04   944.750   945.0000   934.2150   937.53   2418381<br/>...</span></pre><p id="786c" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在本例中，相应的 csv 文件保存在输出目录(~/workspace/AMZN.csv)中。</p><p id="68a3" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">步骤 3:可视化用 matplotlib 收集的内容</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="6b7a" class="lv lw it lr b gy lx ly l lz ma"><em class="ll"># select only close column<br/></em>close = df[[<strong class="lr iu">'close'</strong>]]<br/><em class="ll"># rename the column with symbole name<br/></em>close = close.rename(columns={<strong class="lr iu">'close'</strong>: symbol})<br/>ax = close.plot(title=<strong class="lr iu">'Amazon'</strong>)<br/>ax.set_xlabel(<strong class="lr iu">'date'</strong>)<br/>ax.set_ylabel(<strong class="lr iu">'close price'</strong>)<br/>ax.grid()<br/>plt.show()</span></pre><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/79086386b7770b639dc61df601963e4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*-NmkCDiCu2J1PUziNXhptQ.png"/></div></figure><p id="f4fd" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">就是这样！现在您已经下载了用于分析的股票数据。</p><p id="0f48" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">整个例子</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="90e7" class="lv lw it lr b gy lx ly l lz ma"><strong class="lr iu">import </strong>pandas_datareader.data <strong class="lr iu">as </strong>web<br/><strong class="lr iu">import </strong>matplotlib.pyplot <strong class="lr iu">as </strong>plt<br/><br/><em class="ll"># collect data for Amazon from 2017-04-22 to 2018-04-22<br/></em>start = <strong class="lr iu">'2017-04-22'<br/></strong>end = <strong class="lr iu">'2018-04-22'<br/></strong>symbol=<strong class="lr iu">'AMZN'<br/></strong>df = web.DataReader(name=symbol, data_source=<strong class="lr iu">'iex'</strong>, start=start, end=end)<br/>df.index = df.index.to_datetime()<br/>print(df)<br/>df.to_csv(<strong class="lr iu">"~/workspace/{}.csv"</strong>.format(symbol))<br/><em class="ll"># select only close column<br/></em>close = df[[<strong class="lr iu">'close'</strong>]]<br/><em class="ll"># rename the column with symbole name<br/></em>close = close.rename(columns={<strong class="lr iu">'close'</strong>: symbol})<br/>ax = close.plot(title=<strong class="lr iu">'Amazon'</strong>)<br/>ax.set_xlabel(<strong class="lr iu">'date'</strong>)<br/>ax.set_ylabel(<strong class="lr iu">'close price'</strong>)<br/>ax.grid()<br/>plt.show()</span></pre><p id="fca3" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">如果你想了解更多关于机器学习的知识，educative.io 中有一系列<a class="ae kf" href="https://www.educative.io/profile/view/6083138522447872?aff=VEzk" rel="noopener ugc nofollow" target="_blank">有用的课程。这些课程包括像基本的 ML，NLP，图像识别等主题。</a></p><p id="0905" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">最后一句话，如果你觉得用 Excel 更舒服，并且有兴趣轻松地分析股票，<a class="mc md ep" href="https://medium.com/u/4619b91648bc?source=post_page-----8904659f2122--------------------------------" rel="noopener" target="_blank">广墨</a>有一个关于用<a class="ae kf" href="http://docs.intrinio.com/excel-addin#getting-your-access-key" rel="noopener ugc nofollow" target="_blank"> Intrinio </a> Excel addin 收集数据的<a class="ae kf" href="https://medium.com/@guangmo/a-simple-approach-to-data-driven-stock-analysis-152d4ad3c72c" rel="noopener">帖子</a>。</p></div><div class="ab cl kg kh hx ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="im in io ip iq"><p id="edc1" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">推荐阅读:</p><p id="394e" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><a class="ae kf" href="https://www.amazon.com/gp/product/1492032646/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1492032646&amp;linkCode=as2&amp;tag=blog023b-20&amp;linkId=e6994d31d10e7ac4d35d9889cfe5622e" rel="noopener ugc nofollow" target="_blank">动手机器学习</a></p><p id="b268" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><a class="ae kf" href="https://www.amazon.com/gp/product/1491957662/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1491957662&amp;linkCode=as2&amp;tag=blog023b-20&amp;linkId=be0bbd6ab4fd578397d9c14facc76911" rel="noopener ugc nofollow" target="_blank">用于数据分析的 Python:与熊猫、NumPy 和 IPython 的数据角力</a></p><p id="d2f2" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><a class="ae kf" href="https://www.amazon.com/gp/product/1631570897/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1631570897&amp;linkCode=as2&amp;tag=blog023b-20&amp;linkId=d7bb68173b008df1b500073e3a8d054e" rel="noopener ugc nofollow" target="_blank">对冲基金真正在做什么</a></p></div><div class="ab cl kg kh hx ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="im in io ip iq"><p id="f754" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我的帖子:</p><p id="c77b" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><a class="ae kf" href="https://medium.com/@fin.techology/my-posts-about-finance-and-tech-7b7e6b2e57f4?source=your_stories_page---------------------------" rel="noopener">我关于金融和科技的帖子</a></p><p id="8411" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><a class="ae kf" href="https://bit.ly/3bBOjtJ" rel="noopener ugc nofollow" target="_blank">我的 YouTube 频道</a></p><p id="3360" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><a class="ae kf" href="https://medium.com/@fin.techology/my-posts-about-faang-interview-20e529c5f13f?source=your_stories_page---------------------------" rel="noopener">我关于 FAANG 访谈的帖子</a></p><p id="45a3" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><a class="ae kf" href="https://medium.com/@fin.techology/from-crud-app-dev-to-sde-in-voice-assistant-my-ongoing-journey-to-ml-4ea11ec4966e?" rel="noopener">从 CRUD web 应用开发到语音助手中的 SDE——我正在进行的机器学习之旅</a></p><p id="08c1" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><a class="ae kf" rel="noopener" target="_blank" href="/full-stack-development-tutorial-integrate-aws-lambda-serverless-service-into-angular-spa-abb70bcf417f">全栈开发教程:将 AWS Lambda 无服务器服务集成到 Angular SPA 中</a></p><p id="56ff" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><a class="ae kf" rel="noopener" target="_blank" href="/full-stack-development-tutorial-serverless-rest-api-running-on-aws-lambda-a9a501f54405">全栈开发教程:用运行在 AWS Lambda 上的无服务器 REST API 提供交易数据</a></p><p id="79ae" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><a class="ae kf" rel="noopener" target="_blank" href="/full-stack-development-tutorial-visualize-trading-data-on-angular-spa-7ec2a5749a38">全栈开发教程:在 Angular SPA 上可视化交易数据(1) </a></p><p id="c984" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><a class="ae kf" href="https://medium.com/@kyle.jinhai.li/reinforcement-learning-introduction-to-q-learning-444c951e292c" rel="noopener">强化学习:Q 学习简介</a></p></div></div>    
</body>
</html>