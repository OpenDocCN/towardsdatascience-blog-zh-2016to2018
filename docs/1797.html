<html>
<head>
<title>Generating product usage data with Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用熊猫生成产品使用数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/generating-product-usage-data-from-scratch-with-pandas-319487590c6d?source=collection_archive---------3-----------------------#2017-10-24">https://towardsdatascience.com/generating-product-usage-data-from-scratch-with-pandas-319487590c6d?source=collection_archive---------3-----------------------#2017-10-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a89c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我们如何近似高级用户行为？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3fd0aba0b5d543bf68b420b418b9a306.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OY9aPYoGyyiv-vojeP8_sA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source: Pixabay</figcaption></figure><p id="b2b1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">洞察我们产品的行为使用是至关重要的，因为它不仅表明我们如何获得用户，而且还能留住他们。这是一种确定<strong class="kx ir">问题答案的方法，有多少用户真正在使用我们的产品？</strong>它通常被称为重要指标(OMTM)，帮助我们抵制使用虚荣指标来量化业务增长的诱惑。更多关于OMTM和产品成长的<a class="ae lr" href="https://medium.com/@joshelman/the-only-metric-that-matters-ab24a585b5ea/" rel="noopener">在这里</a>和<a class="ae lr" href="https://www.amazon.com/Lean-Analytics-Better-Startup-Faster/dp/1449335675" rel="noopener ugc nofollow" target="_blank">在这里</a>。</p><p id="6220" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虽然我通常更喜欢探索现有的数据集，但这次我采用了一种不同的方法，试图从头开始逼近一个真实的数据集。</p><p id="4353" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有两个主要原因:</p><ul class=""><li id="3bdc" class="ls lt iq kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated"><strong class="kx ir">对行为数据的更深入理解</strong>。正如从头开始编写一个算法来理解它的运动部分是有价值的一样，我相信数据集也是如此。这是在回答<strong class="kx ir">的问题“我如何才能估算出产品的使用情况？”我们的行为模型中肯定会有一些简化但必要的假设。</strong></li><li id="f0c2" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">探索熊猫，了解如何更好地建立数据模型，因为<strong class="kx ir">有效的数据操作可以大大加快数据科学工作流程</strong>以更深入地了解您想要探索的数据。</li></ul></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="b651" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们的目标是为1000个用户生成一个数据集，其中每个用户都存储有一个可能使用20个月的设备uuid。正如我们将在后面看到的，模拟数据很好地收敛到预期值。我们添加了两个过程来更接近真实数据集:</p><ul class=""><li id="b519" class="ls lt iq kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated"><strong class="kx ir">定义用户群组(用户首次使用产品时)</strong></li><li id="7b37" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir">定义用户流失(用户上次使用产品的时间)</strong></li></ul><p id="3849" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这使我们能够更准确地表示我们可能在公司工作的数据集。</p><h1 id="f8fb" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">决赛成绩</h1><p id="a693" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">我们希望最终数据集包括设备所有月份的活动数据:</p><ul class=""><li id="c38e" class="ls lt iq kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated"><strong class="kx ir">数字(使用)特性</strong>:用户在那个月使用了多少特性(当用户不活跃时，我们删除条目)</li><li id="c52e" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir">分类特征</strong>:根据设备定义(如平台、国家)</li></ul><p id="e746" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了简化模型，每个设备的数据仅针对使用特征而变化，而对于分类特征而言是静态的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/f5910e248a23a3d3d7797d9a7ed555eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xM4OLdsJ10kIlFqyQtrSWw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Preview of the final dataset</figcaption></figure><p id="24dc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最终数据集看起来像是我们从两个表中查询我们业务的关系数据库(例如MySQL、PostgreSQL)得到的东西，一个包含用户的表(包含分类特征)，另一个包含所有事件(包含使用特征)。然后，我们将在device_uuid(两个表中的主键)上连接两个表，并得出如下所示的结果。每个公司的数据基础设施明显不同，但这是我们可能达到这一点的方式之一。</p><p id="3966" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">本文将只关注生成数据，但稍后我们可以使用它来产生群组分析，例如，用户保留曲线，这在本文中没有涉及，但将在接下来的文章中探讨:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/4b1db07b3e2456c15c25fd6ac7972e2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D6JZQXWzCqiEqf5gNY4vNQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">User retention plot based on the final data frame</figcaption></figure><p id="2368" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们什么时候会失去大部分用户？在上一个产品版本中，我们的入职流程的变化是否提高了员工保留率？我们不同细分用户的留存有区别吗？通过这种分析，我们可以回答不同类型的问题，从而更好地了解我们的用户如何使用产品。</p><p id="8c2c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你可以在这里找到本帖<a class="ae lr" href="https://github.com/josolnik/behavioral-data-playground-projects/blob/master/Generating%20product%20usage%20data%20from%20scratch%20with%20Pandas/Generating%20product%20usage%20data%20from%20scratch%20with%20Pandas.ipynb" rel="noopener ugc nofollow" target="_blank">中使用的所有代码的笔记本。</a></p><h1 id="f345" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated"><strong class="ak"> 1。定义主要参数</strong></h1><p id="db32" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">我们首先导入所有必要的依赖项，并定义上面提到的主要参数(1000台设备，20个月，从2016年1月开始)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Importing the dependencies</figcaption></figure><h1 id="ca8e" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">2.生成设备uuids并将其与日期时间数据相结合</h1><p id="1fe9" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated"><strong class="kx ir">生成设备uuid</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Generating device uuids</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/d6f60c22653a2dbbe336124ad0ca7bba.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*Dpe2nCKTlKefa3JtRzouYQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">An example oof two device uuids</figcaption></figure><p id="0c0f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">设备uuids是用户使用的每个设备的唯一标识符。</p><p id="1cc4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">生成日期时间</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Generating datetime</figcaption></figure><p id="0d95" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">输出:</em></p><p id="119b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">(' 2016–01–01 00:00:00 '，' 2017–08–01 00:00:00 ')</em></p><p id="d55b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以看到，使用指定的参数(起始月，月数)，我们将生成2016年1月到2017年8月的数据。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Adding datetime</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/15154c7b40c9e1cac5eeec028c9fc463.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*YpA--Bjrp33o2VQ5_aNe7A.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Adding datetime data</figcaption></figure><p id="94fa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们得到一个包含两列的数据帧，device_uuid和date。有1000 * 20行(设备uuids数*周期数)。</p><h1 id="a893" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">3.生成使用特征</h1><p id="e285" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">在我们的数据帧包括设备uuid和日期时间数据之后，我们接下来生成描述产品用途的特性。</p><p id="6314" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们要做的第一件事是定义:</p><ul class=""><li id="9b2e" class="ls lt iq kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated"><strong class="kx ir">我们希望生成的使用特征数量</strong></li><li id="06e0" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir">用户使用每项功能的频率相对于其他功能的比率</strong></li></ul><p id="ba08" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虽然特性的数量是不言自明的，但是特性比率需要一些进一步的解释。</p><p id="71a2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将特征的数量设置为3，比率为0.8，这意味着第一个特征将采用随机生成的数字并乘以1(保持不变)。这就是比例的来源。<strong class="kx ir">第二个特征是第一个特征的0.8倍。第三个特征的使用是第二个特征的0.8倍。</strong></p><p id="9593" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这意味着如果第一个特性被使用10次，第二个特性被使用8次，第三个特性被使用6次。这只是一种简单的方法，可以避免所有的使用特性都被用在相同的程度上。在这种情况下，特征1对应于产品的核心特征。这当然是完全任意选择的。</p><p id="814d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这种调整产生了以类似方式一致使用的特性，就像真实产品一样。这里有一个很强的假设，即<strong class="kx ir">的使用是同质的，因此所有用户都以相同的比例使用特性</strong>，这对我们的使用来说已经足够了。</p><h1 id="7ebb" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated"><strong class="ak"> 3.1。计算特征比率</strong></h1><p id="6dbb" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">然后我们应用上面定义的比率。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Calculate feature ratios</figcaption></figure><p id="7b49" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">输出:</em></p><p id="d514" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">每个特征的比率:{ '特征1': 1.0，'特征2': 0.8，'特征3': 0.6} </em></p><h1 id="f638" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated"><strong class="ak"> 3。2.将群组分配给设备</strong></h1><p id="3ed5" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">现在，我们选择任意数量的群组，并将每个设备分配给特定群组。每个群组对应于用户开始使用产品的日期时间(在我们的例子中是月)。<strong class="kx ir">在我们的数据</strong>中，群组的数量等于所有月数的一半。在这种情况下，它是20 / 2 = 10个群组。1000个用户意味着每个群组大约有100个用户。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Assigning cohort groups to devices</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/bf5d7aa20a5326a2df1a7d35d4a57221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*_R32zu2oYj6puBrEqEPYpg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Cohort per device uuid</figcaption></figure><h1 id="10c6" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">3.3.添加群组数据</h1><p id="13e3" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">首先，我们定义一个函数，将一系列数据帧连接成一个数据帧。我们将在获得一系列数据帧的输出时使用它，每个数据帧代表特定设备的数据:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Concatenate series of dataframes into one dataframe</figcaption></figure><p id="137d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，我们定义一个函数，并将指定的群组添加到主数据框架中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Adding cohorts to the main dataframe</figcaption></figure><p id="36fb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我们使用两个函数来添加群组:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Applying both functions to all devices</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/24e7ca634b6d14e35f09d4616a2ef631.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*_ebY5nWKAlEKjzlkD9n9dQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Adding cohort data</figcaption></figure><p id="cabd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">正如我们在上面第一个用户的例子中看到的，我们将他们的群组定义为2016年4月，因此他们是在那时开始使用产品的。</strong>我们删除了他们前3个月的数据来模拟这种情况。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">An average number of months per device</figcaption></figure><p id="2261" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">输出:</em></p><p id="96ab" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np"> 15 </em></p><p id="177f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因为我们给用户分配了群组，所以在这个过程中我们删除了相当多的行。我们可以看到，现在每个用户的平均使用时间从20个月下降到了15个月。</p><h1 id="089c" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">3.4.生成使用数据</h1><p id="32e2" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">这里我们为功能1的使用生成一个随机数(0到14)。然后，我们根据为功能1生成的数量，使用功能比率来计算功能2和功能3的使用率。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Generating usage data</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/0722bf0ae0265baf685bca96a8c00385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*07gYupTqi9Hur5TfDlxKVQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Generating usage data</figcaption></figure><h1 id="3b79" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">3.5.产生流失行为</h1><p id="3eae" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated"><strong class="kx ir">虽然我们通过分配群组定义了使用时间段的下限，但我们将使用流失率定义上限</strong>。当用户停止使用产品时，就会发生流失。</p><p id="7737" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一般来说，我们有两个简化原则，在此基础上，我们决定用户如何使用产品:</p><ul class=""><li id="7fdf" class="ls lt iq kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated"><strong class="kx ir">搅拌器仍是搅拌器(一个月不使用后，用户不再使用该产品)</strong></li><li id="244d" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir"> 50%的用户在第一个月流失(大约50%的用户有1个月的数据，50%有更多，因此使用时间更长)</strong></li></ul><p id="d5fc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">第一个是为了简化模拟，第二个是为了更准确地模拟现实生活中的数据，因为大多数用户通常在尝试产品后就再也不会回来了。</p><p id="de3f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们定义了模拟流失的函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Simulating churn</figcaption></figure><p id="56d0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将它应用于我们的数据框架:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Applying the simulating _churn function to all devices</figcaption></figure><p id="b486" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们有与上一个相同的数据帧结构。现在唯一的区别是，我们删除了模拟用户流失的额外行</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">An average number of months per device</figcaption></figure><p id="7d09" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">输出:</em></p><p id="a06e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi">5</p><p id="a279" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以看到，我们现在有大约25%的月份是最初为每个用户生成的(5 / 20)。</p><h1 id="0dff" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">4.生成分类特征</h1><p id="5b76" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">在使用特征之后，我们将定义一些分类特征来丰富我们的数据集。然后，我们将能够根据用户的平台、国家或他们是否注册来细分用户，并尝试找到一些模式。</p><p id="84cd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">注册用户和未注册用户使用产品的方式有所不同吗(如果有，如何使用)?特定国家的用户呢？我们的大部分超级用户位于哪里，他们有什么共同点？</strong></p><p id="7bc7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">像这样的洞察力的有益影响可以帮助我们的营销努力瞄准对我们的业务最有利可图的用户(最高LTV)。更多关于那个<a class="ae lr" href="https://www.shopify.com/blog/customer-lifetime-value" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Defining categorical features</figcaption></figure><p id="3ff4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">输出:</em></p><p id="9af8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np"> { '国家':['NL '，' AU '，' FR']，'平台':['iOS '，' Android']，' user_registered':[False，True]} </em></p><h1 id="5587" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">4.1.生成分类特征权重</h1><p id="8bf2" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">为与单个用户相关联的分类特征出现的可能性定义权重。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Defining weights for categorical features</figcaption></figure><p id="5586" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果分类变量中有两个可能的变量(例如“Android”和“iOS”)，那么我们预计生成的数据将包含第一个变量的70%和第二个变量的30%。</p><p id="b96b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果分类变量中有三个可能的变量(例如“NL”、“AU”、“FR”)，那么我们期望生成的数据包含第一个变量的60%、第二个变量的30%和第三个变量的10%。</p><h1 id="235d" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">4.2.应用分类特征权重</h1><p id="1193" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">我们创建一个函数来根据定义的参数产生分类特征。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Generating categorical features</figcaption></figure><p id="1152" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我们应用函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Applying the generation of categorical features to all devices</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/39f8851668a2cfbe0cb57dc98783883d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SXfjNWLcbbP0gFixJTOWxA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Applying categorical feature weights</figcaption></figure><p id="4292" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">每个设备都有自己对应的国家、平台以及是否注册。</p><h1 id="2eae" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">5.将所有特征合并到最终数据帧中</h1><p id="5cd9" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">我们现在有两个数据帧，一个包含日期时间数据和使用特性，另一个包含分类特性。接下来，我们将它们合并成最终的数据帧。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Merging categorical and usage features</figcaption></figure><p id="6001" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，我们将该功能应用于所有设备:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/a8ce18b901ee462b9a23033104cb577e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7surSkmzrmCyjOUxraA_LA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Merging all features</figcaption></figure><p id="9e68" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以看到第一台设备(da5e 3464-d356–4572-b962-f2b 57e 730732)于2016年5月开始使用该产品，使用了三个月，然后被搅动。他们来自荷兰，使用Android手机，还没有注册该产品。</p><h1 id="dedf" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">6.检查最终数据帧中的模拟输出</h1><p id="fecf" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">我们可以检查我们设置的参数是否也体现在最终的数据帧中。</p><p id="b4e4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们是否生成了我们想要的数据？为什么我们能够做到这一点？因为大数定律:从大量试验中得到的结果的平均值应该接近期望值，并且随着更多试验的进行，将趋向于变得更接近)。更多关于大数定律<a class="ae lr" href="https://en.wikipedia.org/wiki/Law_of_large_numbers" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><h1 id="5893" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">6.1.检查使用功能模拟</h1><p id="a83f" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">每项功能的平均使用情况:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/1e0f224611dff55cb4c7169376de78ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*xKgP1wO_3sw1WtVAa5MsXg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Checking simulating of usage features</figcaption></figure><p id="bd6d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注册用户和未注册用户的平均值大致相同。</p><p id="3c82" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后我们检查使用特性的比例(每个特性是前一个特性的80%)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Checking proportion feature 1 / feature 2</figcaption></figure><p id="9cbe" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">输出:</em></p><p id="e335" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">功能1 /功能2: 79%(预期值为80%) </em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Checking proportion feature 2/ feature 3</figcaption></figure><p id="5e83" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">输出:</em></p><p id="b80e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">功能2 /功能3: 75%(预期值为80%) </em></p><p id="fabf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如我们在上面的输出中看到的，比例很好地收敛到了期望值。如果我们增加设备的数量，数字会更接近。</p><h1 id="959d" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">6.2.检查分类特征模拟</h1><p id="91f5" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">我们用两个可能的变量来检查分类特征的比例。我们已经将具有2个可能变量的特征的权重设置为[0.7，0.3]并将user_registered设置为[False，True]，因此它具有2个可能变量。</p><p id="6e7c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">检查注册用户:</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Checking the proportion for user_registered</figcaption></figure><p id="bfc6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">输出:</em></p><p id="c0d6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np"> 32%的用户注册(预期值为30%) </em></p><p id="8a19" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">检查国家:</strong></p><p id="0da9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们用三种可能的变量来检查分类特征的比例。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Plotting proportion of rows per country</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/f107c40f64c0e44d98ab6fb968f1327f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*7ZeegcsU7yfFLEPRKMxzPA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Checking the simulation of the country feature</figcaption></figure><p id="5d30" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以在上面的图表中看到每个国家所有事件的百分比。比例接近定义的参数([0.6，0.3，0.1])</p><h1 id="81fc" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">6.3.检查流失模拟</h1><p id="2fbc" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">第一个月有多少流失用户，有多少继续使用产品更长时间？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="c99c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">输出:</em></p><p id="64b6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">m1搅拌器数量/非m1搅拌器数量:489 / 455 </em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="bb57" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">输出:</em></p><p id="6d00" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np"> 48%的用户在第一个月流失(预期值为50%) </em></p><p id="a8bb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如预期的那样，大约50%的用户在第一个月的使用中流失，另外50%的用户使用产品的时间更长。</p><h1 id="d945" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">7.后续步骤</h1><p id="5734" class="pw-post-body-paragraph kv kw iq kx b ky nf jr la lb ng ju ld le nh lg lh li ni lk ll lm nj lo lp lq ij bi translated">接下来要做的是进一步<strong class="kx ir">处理最终的数据框架，以便更清楚地了解产品中用户的行为模式</strong>。我们可以制作可视化图，如上面的保留曲线<strong class="kx ir"> </strong>来回答一些最关键的业务问题:我们在发展业务方面有多成功？</p></div></div>    
</body>
</html>