<html>
<head>
<title>Machine Learning Platform for Data Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于数据分析的机器学习平台</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/machine-learning-platform-for-data-analysis-b7603dc3049?source=collection_archive---------3-----------------------#2018-03-30">https://towardsdatascience.com/machine-learning-platform-for-data-analysis-b7603dc3049?source=collection_archive---------3-----------------------#2018-03-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6442" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Akvelon的机器学习项目</h2></div><h1 id="995c" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">问题陈述</h1><p id="af0c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如今，快速发展的机器学习技术让我们能够解决越来越多的现实生活问题。在这种情况下，可以通过创建一个系统来减少例行操作，该系统允许算法开发人员专注于他们的任务，而不是提供执行环境。我们创建了这样一个平台，并在一个最有趣的问题——市场价值预测上进行测试。为了让事情变得更有趣，我们使用比特币价格变化作为数据源。</p><blockquote class="lt lu lv"><p id="4658" class="kx ky lw kz b la lx jr lc ld ly ju lf lz ma li lj mb mc lm ln md me lq lr ls ij bi translated">如果你在2012年12月购买了一枚比特币作为圣诞礼物，那么你的13美元今天将价值8000美元左右。</p></blockquote><p id="4ffc" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">你可以从世界各地的人们那里听到许多类似的故事。没有人确切知道比特币或任何其他加密货币在未来一小时、一天、一周、一月等的价格会是多少。，但有可能根据新闻进行预测。</p><p id="23eb" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">新闻通常是市场的<strong class="kz ir">驱动力，它们的缺乏或低水平的重要性可能导致市场可以简单地静止不动。</strong></p><p id="6209" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">这篇文章旨在展示如何使用<strong class="kz ir">大数据</strong>技术建立一个<strong class="kz ir">机器学习平台</strong>，该平台可以帮助<strong class="kz ir">根据来自世界各地的新闻预测特定市场的价值。</strong></p><h1 id="0188" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">数据源</h1><p id="6976" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">为了使我们能够进行任何分析，我们必须获得这项任务所需的数据集。我们至少需要两个数据源:一个是比特币的市场价值，另一个是与比特币相关的大众媒体提及的信息。</p><p id="63ce" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">寻找比特币市场价值的数据源是一件相对简单的事情。周围有各种各样的选择，我们只需要选择其中之一。我们的选择在这里并不重要，所以我们不要太关注这个。我们使用了<a class="ae mf" href="https://finance.yahoo.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz ir">雅虎财经</strong> </a>，因为它是免费的，可靠的，并且有多个程序库可以使用。</p><p id="c6e8" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">处理来自大众媒体的信息要复杂得多。为了获得客观的信息，我们应该从各种渠道收集信息。在把这样的新闻来源罗列出来之后，我们肯定会面临一系列的困难，比如不同的语言，数据源的稳定性，信息的存储。但事实上，与主要挑战相比，所有这些问题都不是什么大问题——通过一组参数估计新闻效果。这个挑战是计算机科学和人工智能的一部分，称为自然语言处理。如今，它是一个快速发展的领域，重点是机器学习。</p><p id="86ef" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">幸运的是，<a class="ae mf" href="https://www.gdeltproject.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz ir"> GDELT项目</strong> </a>可以帮助我们获得新闻数据来源。GDELT是一个事件、语言和语调的全球数据库；由谷歌拼图支持。引用自官方网站:<em class="lw">“GDELT项目以100多种语言监测来自每个国家几乎每个角落的广播、印刷和网络新闻，并识别每天每一秒推动我们全球社会的人、地点、组织、主题、来源、情感、计数、引用、图像和事件”</em>。这正是我们正在寻找的。现在我们已经有了开始工作所需的一切。</p><h1 id="e6aa" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">解决方案设计</h1><p id="f3f0" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">使用上面列出的数据源，我们可以讨论我们的解决方案设计。首先，让我们创建一个我们希望在解决方案中看到的功能列表，并解释我们如何支持这些功能:</p><ol class=""><li id="a906" class="mg mh iq kz b la lx ld ly lg mi lk mj lo mk ls ml mm mn mo bi translated"><strong class="kz ir"> <em class="lw">易于运行的算法执行</em>。</strong>在寻找最佳算法的过程中，开发人员应该能够通过多次迭代轻松访问数据、源代码和以前的尝试，而无需关心除算法本身之外的任何事情。这由应用程序模板支持，该模板封装了数据访问和执行的所有逻辑。叫做<em class="lw"> ml-template </em>。</li><li id="673d" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated"><strong class="kz ir"> <em class="lw">有效数据处理</em>。</strong>为了高效地处理大量数据，我们将使用Apache Spark，它通过Spark ML提供了强大的机器学习算法实现工具。</li><li id="420b" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated"><strong class="kz ir"> <em class="lw">添加新数据源的能力</em> </strong>可以通过单独的微服务进行数据管理来实现。<em class="lw">数据服务</em>将负责下载带有相关股市数据(雅虎财经)的新闻(GDELT数据)并保存到数据库中。</li><li id="ba6f" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated"><strong class="kz ir"> <em class="lw">使用不同编程语言进行算法开发</em> </strong>的能力由<em class="lw"> Executor Service </em>提供——一种用于下载和编译算法源、模型训练、在Spark集群上运行算法的微服务。它不依赖于特定的技术，可以运行任何可以从命令行执行的东西。</li><li id="a165" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated"><strong class="kz ir"> <em class="lw">结果比较</em>。</strong>还有另一个名为<em class="lw">结果评估服务</em>的微服务，用于接收来自ml模板的结果，并为每个算法执行结果计算分数。</li><li id="da45" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated"><strong class="kz ir"> <em class="lw">执行管理的网络界面。</em> </strong>用户界面将使用WebSocket与我们的微服务进行通信。</li></ol><p id="a257" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">点睛之笔——这个项目选择了名称<strong class="kz ir"> Midas </strong>。神话中的迈达斯国王把东西变成了金子，我们的系统就是为了把数据变成“金子”而设计的。</p><h1 id="d52c" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">解决方案的基础设施</h1><p id="9ffe" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">为了获得完整且可用的产品，我们应该确定要使用的基础设施。由于我们需要在解决方案中使用多个节点(微服务、数据存储、Spark节点)，因此合理的做法是为每个节点使用<a class="ae mf" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank">映像，而不是真实或虚拟机。</a></p><p id="54c0" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">作为容器管理平台，我们将使用<a class="ae mf" href="https://rancher.com/" rel="noopener ugc nofollow" target="_blank">牧场主</a>。这个平台包括<a class="ae mf" href="https://rancher.com/rancher-os/" rel="noopener ugc nofollow" target="_blank">RancherOS</a>——专门为容器管理准备的简化Linux发行版。出于容器编排的目的，它默认使用<a class="ae mf" href="https://github.com/rancher/cattle" rel="noopener ugc nofollow" target="_blank">牛</a>，但也允许使用其他工具，如Docker Swarm或Kubernetes。</p><p id="0ee0" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">对于Apache Spark集群管理，我们将使用<a class="ae mf" href="http://mesos.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Mesos </a>。这是一个强大的资源共享工具，专为Spark等基于集群的程序解决方案而设计。你可以在加州大学的这篇文章中了解更多关于我们选择的福利的信息。</p><p id="1334" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">此外，我们将需要一些日志处理的程序解决方案。为此，管道将由3个工具组成:<a class="ae mf" href="https://www.fluentd.org/" rel="noopener ugc nofollow" target="_blank">fluent和</a>用于日志收集；<a class="ae mf" href="https://www.elastic.co/" rel="noopener ugc nofollow" target="_blank">弹性搜索</a>用于存储和搜索；<a class="ae mf" href="https://www.elastic.co/products/kibana" rel="noopener ugc nofollow" target="_blank">基巴纳</a>用于可视化。</p><p id="49b6" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">我们基础架构的最后一个组件是持续交付工具。为此，我们使用了最流行的工具之一——詹金斯。</p><figure class="mv mw mx my gt mz gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi mu"><img src="../Images/1c4f0f667e110167d1b89da7960cb37a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SBQyqAQ7An-34_vx."/></div></div><figcaption class="ng nh gj gh gi ni nj bd b be z dk">Infrastructure diagram</figcaption></figure><h1 id="3fa7" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">工作流程</h1><figure class="mv mw mx my gt mz gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi nk"><img src="../Images/006dfe43abac315b5096021a268aeb2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tS3Il1sVYvHcJtnl."/></div></div><figcaption class="ng nh gj gh gi ni nj bd b be z dk">Workflow diagram</figcaption></figure><p id="a538" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">标准工作流程如上图所示。图表上的数字具有以下含义:</p><ol class=""><li id="39f9" class="mg mh iq kz b la lx ld ly lg mi lk mj lo mk ls ml mm mn mo bi translated">用户访问前端(web应用程序，又名<em class="lw"> Midas Eyes </em>)以获取关于现有模型和先前执行的信息。此外，用户可以创建和训练新模型，或者通过UI应用现有模型作为新的输入数据。</li><li id="3edf" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated">前端通过WebSocket从Executor服务请求有关执行和模型的信息。</li><li id="4c07" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated">模型和执行的元数据存储在PostgreSQL数据库中。</li><li id="f7fa" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated">前端通过WebSocket向结果评估服务请求结果及其评估。</li><li id="25e1" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated">结果和估计值存储在PostgreSQL数据库中。</li><li id="3500" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated">当“train”执行开始时，Executor服务从GitLab下载源代码。对于“应用”执行，它们已经被存储并可以立即运行。然后，Executor服务使用某种算法运行开发人员扩展的ml模板。</li><li id="48c4" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated">在Spark集群上启动一个作业之前，ml-template通过REST API检查数据服务中是否存在用户指定的输入数据。</li><li id="f6df" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated">如果执行所需的数据丢失，数据服务将从外部资源下载数据——在我们的例子中，是GDELT和Yahoo。</li><li id="0489" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated">数据服务将下载的数据存储在Mongo数据库中。</li><li id="271e" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated">当数据准备好时，ml-template将任务提交给Spark集群。</li><li id="5110" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated">在执行过程中，Spark从Mongo数据库中请求必要的数据。</li><li id="1680" class="mg mh iq kz b la mp ld mq lg mr lk ms lo mt ls ml mm mn mo bi translated">当执行完成时，结果被提交给结果评估服务。该服务进行必要的评估，包括与地面实况的比较(火花术语的“标签”)。</li></ol><p id="3fb6" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">另外，关于微服务的技术堆栈说几句话。数据、执行和结果评估服务由Java、Spring Boot、Hibernate和Gradle提供支持。ml-template是使用Scala编写的，但也可以在Python、R或Java上创建。前端基于React.js和Bootstrap。</p><h1 id="2de3" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">算法应用示例</h1><p id="406d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">作为热身，让我们试试线性回归算法。我们最初的假设是，从新闻的平均基调来看，比特币价格和衍生品之间的相关性。平均语气是事件被提及次数的衡量标准。它的范围在-100到+100之间，其中0是中间值。这个参数是一个很大的值数组，通常大约有几千个数字。但是根据数量和正/负值的分布，它可以变成几个权重。经过简单的计算，我们得到平均色调和总量。</p><p id="2099" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">关于新闻和市场数据之间的线性相关性的假设非常天真，但这是一个很好的起点。使用它，我们可以检查一切都按计划进行。正如所料，在这一点上的结果并不令人鼓舞，如下图所示。</p><figure class="mv mw mx my gt mz gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi nl"><img src="../Images/4a290f70b7dfc775a9d7555b1d388440.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WW0CnvL7IBLIcUTG."/></div></div></figure><p id="ab1a" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">这只是许多尝试中的一个，没有一个能产生好于数百美元的平均偏差。更相关的算法，如梯度推进树回归，也显示出不可靠的结果。</p><figure class="mv mw mx my gt mz gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi nm"><img src="../Images/9609babb1255e9416ec2c1875e245651.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M9jlhjC9WJnPrSah."/></div></div></figure><p id="4d35" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">这意味着我们需要使用诸如<a class="ae mf" href="https://en.wikipedia.org/wiki/Cross-validation_(statistics)" rel="noopener ugc nofollow" target="_blank">交叉验证</a>之类的技术来改进当前的算法，或者尝试新的算法。例如，将深度学习(尤其是深度神经网络)与Apache Spark结合使用是一种有趣的方法。此外，我们可能需要更改我们的输入参数集。这样，我们就有了广泛的可能改进方向。</p><h1 id="fb7d" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">结论</h1><p id="6d56" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们在这个项目上的工作仍在进行中。开发人员正在开发他们的算法版本，试图获得更好的结果。在开发这个系统的过程中，许多想法出现在我们的脑海中，我们也在努力让它们活跃起来。</p><p id="5f15" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">货币预测不是唯一可能的应用领域。例如，让它在市场股票上工作也很容易。这类股票有更多的新闻参数可以操作，因为它们与特定的国家或公司相关，并取决于与这些国家和公司相关的事件。</p><p id="3dda" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">我们在这个项目中使用的技术都是开源的。在本文中，我们向您展示了如何轻松构建复杂的机器学习解决方案，而不是使用市场上现有的解决方案。我们希望我们的经验能激励你去做自己感兴趣的项目。</p><h1 id="0e05" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">关于我们</h1><p id="0ad4" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们在<a class="ae mf" href="http://akvelon.com/" rel="noopener ugc nofollow" target="_blank"><strong class="kz ir">Akvelon Inc .</strong></a><strong class="kz ir"/>爱<strong class="kz ir"> </strong>等前沿技术，如区块链、大数据、机器学习、人工智能、计算机视觉等等。这是我们在<strong class="kz ir"> Office战略实验室</strong>开发的众多项目之一。</p><figure class="mv mw mx my gt mz gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/125413d0aa665366d8102ee41ceed8b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*gdqsaxbAhkxx8D_hk591FQ.png"/></div><figcaption class="ng nh gj gh gi ni nj bd b be z dk">Akvelon company official logo</figcaption></figure><p id="26dd" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated">如果你有兴趣<strong class="kz ir"> </strong>为一个项目做贡献，或者有一个有趣的想法——<a class="ae mf" href="http://akvelon.com/company/contact-us/" rel="noopener ugc nofollow" target="_blank"><strong class="kz ir">联系我们</strong> </a>。或者如果你想和我们<strong class="kz ir">强大的Akvelon团队</strong>——请<a class="ae mf" href="http://akvelon.com/careers/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz ir">查看我们的空缺职位</strong> </a>。</p><p id="65a6" class="pw-post-body-paragraph kx ky iq kz b la lx jr lc ld ly ju lf lg ma li lj lk mc lm ln lo me lq lr ls ij bi translated"><em class="lw">与</em> <a class="no np ep" href="https://medium.com/u/befa2014b260?source=post_page-----b7603dc3049--------------------------------" rel="noopener" target="_blank"> <em class="lw">阿图尔</em> </a>合著</p></div></div>    
</body>
</html>