<html>
<head>
<title>Finding the Percent of Colleges in the US University Ranks 2017 at the Command-line (Part II — grep and wc)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在命令行中查找2017年美国大学排名中的学院百分比(第二部分grep和wc)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/finding-the-percent-of-colleges-in-the-us-university-ranks-2017-at-the-command-line-part-ii-grep-5db6d59f76a1?source=collection_archive---------5-----------------------#2017-08-26">https://towardsdatascience.com/finding-the-percent-of-colleges-in-the-us-university-ranks-2017-at-the-command-line-part-ii-grep-5db6d59f76a1?source=collection_archive---------5-----------------------#2017-08-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/56b7b18d1c6532245042242282409e50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c4a1R6LmiptaVTw71yhB3Q.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Image adopted from the <a class="ae kc" href="https://unsplash.com/search/photos/building?photo=ulhxvMjzI_4" rel="noopener ugc nofollow" target="_blank">unsplash.com</a></figcaption></figure><p id="0394" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">各位编码员好！欢迎回到我的系列课程<strong class="kf ir">数据科学@ Bash Shell </strong>。在<a class="ae kc" href="https://medium.com/towards-data-science/how-to-analyze-us-university-ranks-2017-with-bash-part-i-data-preview-e39b8f2ffee9" rel="noopener">上一课</a>中，我们学习了如何预览数据集(<a class="ae kc" href="http://educative.io/udata/4Wyl0VOx0b0/unirank.csv" rel="noopener ugc nofollow" target="_blank"> unirank.csv </a>)。您应该从下面的网页下载数据，因为我们已经稍微简化了数据，让我们将数据保存为:<code class="fe lb lc ld le b">unirank.csv</code></p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="52c5" class="ln lo iq le b gy lp lq l lr ls">wget https://www.scientificprogramming.io/datasets/unirank.csv</span></pre><p id="1689" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">数据集预览</strong></p><p id="daf8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们进行我们的第一个分析:要列出数据文件中包含短语<strong class="kf ir">“college”</strong>的所有行，我们需要向您介绍命令<code class="fe lb lc ld le b">grep</code>(全局正则表达式打印)。简而言之，<code class="fe lb lc ld le b">grep</code>允许您浏览文件中的所有行，但只输出那些匹配模式的行。在我们的例子中，我们希望找到数据集中包含“college”的所有行。</p><p id="3193" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们是这样做的:</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="faea" class="ln lo iq le b gy lp lq l lr ls">$ grep -i "college" unirank.csv | csvlook</span></pre><p id="a4fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里，grep命令有两个命令行参数:第一个是模式，第二个是我们要在其中搜索该模式的文件。如果运行此命令，您应该会看到一些包含字符串“college”的行:</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lt"><img src="../Images/fe26cd0ccd0679ac763967f8536d98da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pQcqFDyme1jpUAtYguE9Uw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Institutes containing “colleges” in the unirank.csv data set</figcaption></figure><p id="dd7a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，我们已经设置了<code class="fe lb lc ld le b">-i</code>选项，使匹配案例变得不敏感。还有，发现逻辑误将两所大学认定为学院！因为他们的名字包含字符串(“学院”)。因此，在数据分析中使用<code class="fe lb lc ld le b">grep</code>时，尤其是在做出决定之前，你需要小心谨慎！</p><h1 id="838b" class="lu lo iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">找到大学的百分比</h1><p id="58d9" class="pw-post-body-paragraph kd ke iq kf b kg mr ki kj kk ms km kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">对于这一步，我们需要引入管道的概念，这是Bash shell中最强大的特性之一。管道用竖线符号(<code class="fe lb lc ld le b">|</code>)表示。本质上，管道允许您将一个命令的输出转发到另一个命令的输入，而不必将中间输出保存到文件中。</p><p id="9418" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们想把<code class="fe lb lc ld le b">grep</code>的输出给另一个命令，它可以告诉我们这个输出有多少行。事实证明，有一个命令可以让我们做到这一点:<code class="fe lb lc ld le b">wc</code>代表单词计数，用于计算给定输入中有多少单词，但最常用的是与<code class="fe lb lc ld le b">-l</code>选项一起使用，它将计算输入中的行数。所以让我们从计算<code class="fe lb lc ld le b">unirank.csv</code>文件中总共有多少行开始:</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="d8a3" class="ln lo iq le b gy lp lq l lr ls">$ wc -l unirank.csv</span><span id="0ee4" class="ln lo iq le b gy mw lq l lr ls">232 unirank.csv</span></pre><p id="d902" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们来数一下学院的数量，让我们用管道把我们所学的东西集合起来:</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="ec41" class="ln lo iq le b gy lp lq l lr ls">$ grep -i "college" unirank.csv | wc -l</span><span id="27ed" class="ln lo iq le b gy mw lq l lr ls">8</span></pre><p id="1134" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">grep的输出——文件中包含“<strong class="kf ir">学院</strong>”的行——被传递给<code class="fe lb lc ld le b">wc -l</code>，它将计算文件中的行数。注意，我们没有在<code class="fe lb lc ld le b">wc -l</code>命令中指定文件名；我们不需要这么做，因为我们通过管道将数据传输到<code class="fe lb lc ld le b">wc -l</code>，所以它不需要从文件中读取数据。</p><p id="9b4a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以在这个数据集中，<code class="fe lb lc ld le b">((8-2)/232) x 100% = 2.5%</code> institutes来自美国高校。我们仔细地扣除了两个错误识别的学院。<a class="ae kc" href="https://medium.com/@asarefin/the-us-university-ranks-2017-at-the-command-line-part-iii-cut-sort-and-uniq-1a81dc0279c2" rel="noopener"> <strong class="kf ir">下集再见</strong> </a> <a class="ae kc" href="https://apps.timwhitlock.info/emoji/tables/unicode#emoji-modal" rel="noopener ugc nofollow" target="_blank">⏰</a>！</p><p id="ebff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">阅读<a class="ae kc" href="https://medium.com/towards-data-science/how-to-analyze-us-university-ranks-2017-with-bash-part-i-data-preview-e39b8f2ffee9" rel="noopener"> <strong class="kf ir">上一课(第一部分)</strong> </a>。<a class="ae kc" href="https://apps.timwhitlock.info/emoji/tables/unicode#emoji-modal" rel="noopener ugc nofollow" target="_blank">🚶</a></p><p id="180c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[这个项目是‘学习Bash Shell和Linux中的数据’课程的一部分。]</p><div class="mx my gp gr mz na"><a href="https://school.scientificprogramming.io/course/learn-practical-data-science-with-bash-shell/2?/learn-bash/" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">使用Bash Shell学习实用的数据科学</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">描述Bash可能不是处理所有类型数据的最佳方式，但是经常会出现这样的情况</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">科学编程</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no jw na"/></div></div></a></div></div></div>    
</body>
</html>