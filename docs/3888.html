<html>
<head>
<title>The Simplest &amp; Cleanest Method for Tracking a For Loop’s Progress and Expected Run Time in Python Notebooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Python 笔记本中跟踪 for 循环的进度和预期运行时间的最简单、最干净的方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-simplest-cleanest-method-for-tracking-a-for-loops-progress-and-expected-run-time-in-python-972675392b3?source=collection_archive---------6-----------------------#2018-06-28">https://towardsdatascience.com/the-simplest-cleanest-method-for-tracking-a-for-loops-progress-and-expected-run-time-in-python-972675392b3?source=collection_archive---------6-----------------------#2018-06-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/364edae1017f405d3f2bccfef48d925b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zbIbzg0c2gnZSqhMj0Sf-A.jpeg"/></div></div></figure><p id="ae7d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一段时间以来，当谈到我在笔记本上的代码单元的进展时，我经常感到被遗忘在黑暗中。因此，我想找到一种简单明了的方法来跟踪 for 循环进行到什么程度。</p><p id="d68f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最终输出应该告诉我当前的进度、当前的运行时间和预期的运行时间，如第一幅图所示:</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kw"><img src="../Images/b46cb05476b5ba95a1e1385b491412a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gka1UD1A9O0oFeZXemJA7Q.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Final Output Example</figcaption></figure><p id="3894" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然使用 IPython 小部件可能有更好看的解决方案，但下面的方法是我发现的最简单的实现方法。在过去，我倾向于简单地打印当前的循环进度，但是这样做意味着我们将有一个很长的循环每个阶段的列表，如下所示。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/fe3ec8632aebda25416eace1e4c20781.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*a5-qvfOicVE8JUiaweg2Xg.png"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Previous Method used for Tracking Progress</figcaption></figure><p id="0ae0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">相反，我希望进度输出在同一行中。我们可以通过三个简单的步骤实现这一目标:</p><p id="ff48" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">1)从 IPython.display 导入“clear_output”函数</p><p id="a371" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2)在每个循环结束时，打印当前进度</p><p id="ac33" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3)在下一循环步骤开始时删除当前进度</p><p id="57cd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这意味着我们本质上是在循环的每个阶段替换文本，也意味着我们没有一个长列表，否则我们可能会有。这显示在下面的代码示例中，其中突出显示了提到的三个部分。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lg"><img src="../Images/45a5bb35bae62df229daac1593a140d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xNmGxDKUk6tQnH2C_FrgfQ.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Print Replacement Method for Cell Output</figcaption></figure><p id="571c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以通过估计预期的总运行时间来进一步改进这个输出。这可以通过交叉引用当前花费了多长时间和进展了多远来实现。当然，这是一个非常粗略的计算，并且假设花费的时间是线性的，但是它至少给出了大概需要多长时间。在下面的代码中突出显示了新的计算方法，我们还免除了前 5%的预期时间计算，以避免不准确。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lh"><img src="../Images/8d52bd1949e31d9fefe57823b7bb86c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e8B7x0QImEBgZtDN_RRlPg.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Print Replacement Further Improved</figcaption></figure><p id="9596" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望你觉得这是有趣和有用的，如果你有任何问题，请让我知道。</p><p id="3b94" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">谢谢</p><p id="2c2c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">哲学（philosophy 的缩写）</p></div></div>    
</body>
</html>