<html>
<head>
<title>Homicide in Chicago: Data Storytelling Part Two</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">芝加哥凶杀案:数据故事第二部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/homicide-in-chicago-data-stroytelling-part-two-e8748602daca?source=collection_archive---------10-----------------------#2018-08-21">https://towardsdatascience.com/homicide-in-chicago-data-stroytelling-part-two-e8748602daca?source=collection_archive---------10-----------------------#2018-08-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/26ca9f2d5d1fd6d801e9290b014b9fe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bBCu34hfDd9ZxbQYaskAJw.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Image via <a class="ae jd" href="https://commons.wikimedia.org/wiki/File:Chicago_police_pan.jpg" rel="noopener ugc nofollow" target="_blank">Wikipedia</a></figcaption></figure><div class=""/><div class=""><h2 id="932d" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">数据探索和可视化</h2></div><p id="f4d7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是关于芝加哥凶杀案的数据故事的第二部分，这是最近的一个热门话题，包括特朗普总统在 2017 年竞选时提到的。作为芝加哥人，每次我遇到来自其他州的人，他们都会情不自禁地和我谈论这个城市的谋杀率，但很少有人从数据意识的角度提起这个话题。</p><p id="5ed7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本系列的第一部分中，我清理了犯罪数据，但现在我将尝试从这些数据中提取一些见解。在这一节中，我将使用前一节中新创建的熊猫数据帧来描绘芝加哥市的凶杀案。</p><blockquote class="lr"><p id="983e" class="ls lt jg bd lu lv lw lx ly lz ma lq dk translated">芝加哥最危险的地方是街道上，在夏天，周末，晚上 11 点到凌晨 2 点。</p></blockquote><h2 id="bb23" class="mb mc jg bd md me mf dn mg mh mi dp mj le mk ml mm li mn mo mp lm mq mr ms mt bi translated">整个城市的犯罪分布</h2><p id="a564" class="pw-post-body-paragraph kv kw jg kx b ky mu kh la lb mv kk ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">我们首先想看到的是按警区分组的整个城市的凶杀犯罪分布。</p><p id="50eb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为此，我们将使用<a class="ae jd" href="http://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Seaborn </a>。我们将从第一部分中早期的散点图中获得灵感，按地区可视化 2001 年至 2018 年 2 月的所有凶杀案。下面是代码和结果图。</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="d51f" class="mb mc jg ne b gy ni nj l nk nl"><em class="nm"># plot all homicides in dataset by location per District</em></span><span id="1a42" class="mb mc jg ne b gy nn nj l nk nl">df_homicide = df_homicide.loc[(df_homicide['X Coordinate']!=0)]</span><span id="93d6" class="mb mc jg ne b gy nn nj l nk nl">sns.lmplot('X Coordinate',<br/>           'Y Coordinate',<br/>           data=df_homicide[:],<br/>           fit_reg=<strong class="ne jh">False</strong>, <br/>           hue="District", <br/>           palette='Dark2',<br/>           size=12,<br/>           ci=2,<br/>           scatter_kws={"marker": "D", <br/>                        "s": 10}) <br/>ax = plt.gca()<br/>ax.set_title("All Homicides (2001-2018) per District")</span></pre><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi no"><img src="../Images/f953126cc575545966644dd8314f3f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j-6f6NbN8E1btC7WUr8Ngg.png"/></div></div></figure><p id="a446" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从上图中，我们可以观察到以下情况:</p><ul class=""><li id="6734" class="np nq jg kx b ky kz lb lc le nr li ns lm nt lq nu nv nw nx bi translated">高凶杀率聚集在散点图的左上方和中下方。</li><li id="79ae" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">右上角和中间一些区域的凶杀率更为分散。</li></ul><p id="4597" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">由于每个区都是不同的颜色，我们可以从这张图表中获得的重要见解是，有很多点聚集在一起的区比没有聚集在一起的区有更多的凶杀率。所以现在，在某种程度上，我们对空间维度的凶杀有了一个概念，但我也想从时间维度了解这些凶杀率。</p><p id="36fb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面我创建了一些凶杀案与时间的可视化，并对之后的观察做了笔记。</p><h2 id="3422" class="mb mc jg bd md me od dn mg mh oe dp mj le of ml mm li og mo mp lm oh mr ms mt bi translated">年度凶杀率:</h2><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="d6c3" class="mb mc jg ne b gy ni nj l nk nl"><em class="nm"># plot bar chart of homicide rates for all years</em></span><span id="0493" class="mb mc jg ne b gy nn nj l nk nl">plt.figure(figsize=(12,6))<br/>sns.barplot(x='Year',<br/>            y='HOMICIDE',<br/>            data=df_homicide.groupby(['Year'])['Primary Type'].value_counts().\<br/>                 unstack().reset_index(),<br/>            color='steelblue').\<br/>            set_title("CHICAGO MURDER RATES: 2001 - 2018")</span></pre><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oi"><img src="../Images/50c56eb066a47ebe57c54c9955f03156.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L_3cKRjLaZ_u7g7SUjqRWg.png"/></div></div></figure><p id="70c8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从上面的柱状图可视化中，我们可以得出以下结论:</p><ul class=""><li id="142b" class="np nq jg kx b ky kz lb lc le nr li ns lm nt lq nu nv nw nx bi translated">在现有的数据范围内，芝加哥的凶杀案从 2001 年到 2003 年有一个短暂的上升趋势，从 460 起上升到 586 起。</li><li id="55bc" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">接下来是一个良好的下降到 400 的范围，并保持了四年，直到 2008 年。</li><li id="07a5" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">在 2016 年之前的七年里，凶杀率立即回落到 400。</li><li id="ecd9" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">然而，谋杀率在 2016 年急剧上升，从 2015 年的 467 起上升到 749，282 起，创历史新高。</li><li id="bf03" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">2017 年也出现了持续的高凶杀率，尽管下降了 90 至 659 起。</li><li id="76b6" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">我们可以说，2016 年和 2017 年芝加哥的凶杀率显著上升。</li><li id="a28d" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">我想我们可以开始理解为什么有那么多关于风城谋杀案的新闻了。</li><li id="f01f" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">根据我们对数据集中过去两年的观察，我想记住这一点，并在探索其余数据的过程中进行更深入的研究。</li></ul><h2 id="7e3f" class="mb mc jg bd md me od dn mg mh oe dp mj le of ml mm li og mo mp lm oh mr ms mt bi translated">每月凶杀率:</h2><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="8156" class="mb mc jg ne b gy ni nj l nk nl"><em class="nm"># plot homicides sorted by month</em></span><span id="4704" class="mb mc jg ne b gy nn nj l nk nl">fig, ax = plt.subplots(figsize=(14,6))<br/>month_nms = ['January','February','March','April','May','June','July','August'\<br/>             ,'September','October','November','December']    <br/>fig = sns.barplot(x='Month',<br/>                  y='HOMICIDE',<br/>                  data=df_homicide.groupby(['Year','Month'])['Primary Type'].\<br/>                  value_counts().unstack().reset_index(),<br/>                  color='#808080')<br/>ax.set_xticklabels(month_nms)<br/>plt.title("CHICAGO MURDER RATES by MONTH -- All Years")</span><span id="d920" class="mb mc jg ne b gy nn nj l nk nl"><em class="nm"># -------------------------------------------</em></span><span id="858f" class="mb mc jg ne b gy nn nj l nk nl"><em class="nm"># plot average monthly temps in Chicago</em><br/><em class="nm"># source of data:  ncdc.noaa.gov</em></span><span id="ccaf" class="mb mc jg ne b gy nn nj l nk nl">mntemp = [26.5,31,39.5,49.5,59.5,70,76,75.5,68,56,44,32]<br/>df_temps = pd.DataFrame(list(zip(month_nms,mntemp)),<br/>                       columns=['Month','AVERAGE TEMPERATURE'])<br/>fig, ax = plt.subplots(figsize=(14,6))<br/>sns.barplot(x='Month', y='AVERAGE TEMPERATURE', data=df_temps,color='steelblue')</span></pre><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oj"><img src="../Images/14875a2f726f957c400c4cc2f0201978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FoC_moS3VwMmSIGOqjeZcw.png"/></div></div></figure><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oj"><img src="../Images/1537a257976724c8bbb49b1b32cfb265.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*07oFqgutyhMXn7mTxeRfOA.png"/></div></div></figure><ul class=""><li id="3982" class="np nq jg kx b ky kz lb lc le nr li ns lm nt lq nu nv nw nx bi translated">从逐月凶杀率来看，我们看到平均凶杀案在 3 月份开始稳步上升，在 7 月份达到高峰。</li><li id="7cc8" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">一月份略高于二月份，但这似乎是十二月份的延续。</li><li id="e2ca" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">这种周期性趋势有很多原因，但最好的解释似乎与月平均气温和总体天气有关。</li><li id="b37e" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">芝加哥的冬天往往很冷，这使得大多数人不到万不得已不出门。</li><li id="2836" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">这种周期性趋势的另一个可能原因是，学校在夏季放假，因此更多的年轻人有时间去惹更多的麻烦。考虑到风险最大的年龄组在 15 至 30 岁之间。(来源:<a class="ae jd" href="http://homicides.redeyechicago.com/ages/" rel="noopener ugc nofollow" target="_blank">芝加哥论坛报</a>)</li></ul><h2 id="82ea" class="mb mc jg bd md me od dn mg mh oe dp mj le of ml mm li og mo mp lm oh mr ms mt bi translated">一周中的凶杀率:</h2><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="7049" class="mb mc jg ne b gy ni nj l nk nl"><em class="nm"># plot homicide rates vs. day of the week</em></span><span id="336e" class="mb mc jg ne b gy nn nj l nk nl">fig, ax = plt.subplots(figsize=(14,6))<br/>week_days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday']    <br/>fig = sns.barplot(x='Weekday',<br/>                  y='HOMICIDE',<br/>                  data=df_homicide.groupby(['Year','Weekday'])['Primary Type'].\<br/>                       value_counts().unstack().reset_index(),<br/>                  color='steelblue')<br/>ax.set_xticklabels(week_days)<br/>plt.title('HOMICIDE BY DAY OF THE WEEK -- All Years')</span></pre><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ok"><img src="../Images/1b5ff7cc3b35555dc91f60e776d3dd34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m9byYmi587MONXhXGouewQ.png"/></div></div></figure><p id="b3f0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我们深入挖掘从每月到每周的时间框架，以获得更精细的外观。</p><ul class=""><li id="e045" class="np nq jg kx b ky kz lb lc le nr li ns lm nt lq nu nv nw nx bi translated">在这个水平上，周一和周二的谋杀率最低，平均每天约 60 起。</li><li id="0809" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">周三略有上升，周四又略有上升。这种微小的变化几乎不明显，但考虑到这是 18 年的平均值，我们可以假设这种上升在某些周比其他周更明显。</li><li id="9969" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">本周早些时候出现的这种小幅上升趋势从平均每天 61 起凶杀案跃升至每天 81 起凶杀案，增幅达 25%。我们必须记住，这些平均值并没有根据这些杀戮的季节性进行调整。所以实际上，在温暖的月份，这个数字要高得多，而在寒冷的月份，这个数字要低得多。</li><li id="2bfa" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">周六出现了持续的高利率，但仅比周五略有上升。</li><li id="4325" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">周日的谋杀率确实从 80 年代下降到 60 年代，并持续下降到周一，并在每周循环再次重复之前稳定在 50 年代以上。</li><li id="16ca" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">我们不知道是什么导致了这种循环，但我们可以假设，它们与离开学校或工作的时间有关，更多的人倾向于在这段时间参与毒品和帮派活动以及其他犯罪。</li></ul><h2 id="92f7" class="mb mc jg bd md me od dn mg mh oe dp mj le of ml mm li og mo mp lm oh mr ms mt bi translated">一天中的小时凶杀率:</h2><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="14f2" class="mb mc jg ne b gy ni nj l nk nl"><em class="nm"># use seaborn barplot to plot homicides vs. hour of the day </em></span><span id="b138" class="mb mc jg ne b gy nn nj l nk nl">fig, ax = plt.subplots(figsize=(14,6))<br/>fig = sns.barplot(x='HourOfDay',<br/>                  y='HOMICIDE',<br/>                  data=df_homicide.groupby(['Year','HourOfDay'])['Primary Type'].\<br/>                       value_counts().unstack().reset_index(),<br/>                  color='steelblue',<br/>                  alpha=.75)<br/>plt.title('HOMICIDE BY HOUR OF THE DAY -- All Years')</span></pre><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oj"><img src="../Images/0d85dfe4b82d614dcd4b3f94aee24520.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mpkwEigpKpsSyVnUyNjZew.png"/></div></div></figure><p id="fb0d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">继续时间框架分析，从一天中的某个时间来看芝加哥的凶杀率是有意义的。我认为很容易假设谋杀发生在晚上比白天多，但这充其量只是一种猜测，所以不管我们认为结论有多明显，看看这些数字是明智的。</p><p id="7b43" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">看待上述情节的一种方式是从一个正常的工作日或学校日的角度。</p><ul class=""><li id="cc5e" class="np nq jg kx b ky kz lb lc le nr li ns lm nt lq nu nv nw nx bi translated">上午 7 点的凶杀案数量最少，约为 9 起，但随着时间的推移，我们看到凶杀案的数量稳步上升。</li><li id="dd67" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">下午 2 点，我们穿过 15 关口，这为另一个稳定的上涨让路，有一点波动，其中下午 6 点飙升，下午 7 点下降，但不足以抹去之前的利率收益。</li><li id="ec37" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">晚上 9 点是事情开始变得令人担忧的时候。平均值有时可能无法给出清晰的图像，但它们确实报告了一个简单的指标，即所有观察值的总和除以观察值的数量。考虑到这一点，每小时 25 起谋杀案是相当高的。</li><li id="169a" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">从晚上 9 点到凌晨 12 点的高峰，我们看到这些数字持续上升。凌晨 12 点和 1 点的谋杀率保持在每小时 30 起以上，只有在凌晨 2 点我们才看到低于 30 起，然后迅速下降，直到早上 7 点回到低于 10 起。</li><li id="f997" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">下降的一个可能原因可能是因为每个人都倾向于在深夜睡觉。即使是毒贩子和黑帮成员也有睡着的时候。</li><li id="308f" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">我想从上面的图表中得出的最后一个观察结果是，通过每个小时的误差棒线，夜间的时间比白天的时间有更多的变化，这表明夜间的凶杀活动更加活跃。</li></ul><h2 id="d04e" class="mb mc jg bd md me od dn mg mh oe dp mj le of ml mm li og mo mp lm oh mr ms mt bi translated">按家庭成员分列的年度凶杀率:</h2><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="f665" class="mb mc jg ne b gy ni nj l nk nl"><em class="nm"># plot domestic variable vs. homicide variable</em></span><span id="581d" class="mb mc jg ne b gy nn nj l nk nl">fig, ax = plt.subplots(figsize=(14,6))<br/>df_arrest = df_homicide[['Year','Domestic']]<br/>ax = sns.countplot(x="Year",<br/>                   hue='Domestic',<br/>                   data=df_arrest,<br/>                   palette="Blues_d")<br/>plt.title('HOMICIDE - DOMESTIC STATS BY YEAR')</span></pre><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ok"><img src="../Images/42dbf05f647cd69d402a58430553035c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qywlKSTtKJONwKX5-FTuUQ.png"/></div></div></figure><ul class=""><li id="1f48" class="np nq jg kx b ky kz lb lc le nr li ns lm nt lq nu nv nw nx bi translated">在整个数据范围内，家庭参与的程度似乎对凶杀率没有任何明显的影响。2016 年至 2017 年谋杀案的激增与国内数字没有任何明显的相关性。</li><li id="85c5" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">考虑到原始数据集包含 40 多种犯罪类型，包括纵火、性侵犯、家庭暴力、跟踪等，因此将该变量包含在数据集中是有意义的，但它对我们涉及杀人的特定案例没有用处，尽管它在家庭暴力中肯定有权重。</li></ul><h2 id="78ec" class="mb mc jg bd md me od dn mg mh oe dp mj le of ml mm li og mo mp lm oh mr ms mt bi translated">按犯罪现场分列的凶杀率:</h2><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="88a8" class="mb mc jg ne b gy ni nj l nk nl"><em class="nm"># visualize the "scene of the crime" vs. number of occurences at such scene</em></span><span id="9ba0" class="mb mc jg ne b gy nn nj l nk nl">crime_scene = df_homicide['Primary Type'].\<br/>            groupby(df_homicide['Location Description']).\<br/>            value_counts().\<br/>            unstack().\<br/>            sort_values('HOMICIDE',ascending=<strong class="ne jh">False</strong>).\<br/>            reset_index()<br/>    <br/><em class="nm"># Top Homicide Crime Scene Locations</em><br/>crime_scene.head(10)</span></pre><figure class="mz na nb nc gt is gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/66a2a7a857606f374c00ad67c20fc174.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/1*3FDyu8Vho2FAR5CpGyfxJw.png"/></div></figure><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="6782" class="mb mc jg ne b gy ni nj l nk nl"><em class="nm"># create a count plot for all crime scene locations</em></span><span id="2b15" class="mb mc jg ne b gy nn nj l nk nl">g = sns.factorplot(x='Location Description',<br/>                   y='HOMICIDE',<br/>                   data=crime_scene,<br/>                   kind='bar',<br/>                   size=10,<br/>                   color='steelblue', <br/>                   saturation=10)</span><span id="edc3" class="mb mc jg ne b gy nn nj l nk nl">g.fig.set_size_inches(15,5)<br/>g.set_xticklabels(rotation=90)<br/>plt.title('CRIME SCENE BY LOCATION FREQUENCY')</span></pre><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi om"><img src="../Images/22cbca8087e159ce1db95e51a31f00e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vr_Hm9zBxVrZXSnk8QbmvQ.png"/></div></div></figure><ul class=""><li id="053e" class="np nq jg kx b ky kz lb lc le nr li ns lm nt lq nu nv nw nx bi translated">从上面的 Seaborn FactorPlot，我们可以观察到大多数谋杀(超过 60%)发生在街上。</li><li id="26b6" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">第二个最常见的地方是汽车，然后依次是公寓、小巷、房子、门廊、院子和停车场。</li><li id="63d8" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">其余位置的含量非常低，具有显著的统计影响。然而，更深入地研究数据采集方法是值得的，因为其他一些位置(尽管标注可能很专业)可能会在更大的一般化标注(如街道)之后进行标注。</li><li id="cd14" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">到目前为止，从所有上述观察到目前为止，我们可以开始看到一个画面出现；芝加哥最危险的地方是街道上，在夏天，周末，晚上 11 点到凌晨 2 点。</li><li id="9676" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">然而，我们想知道这是否适用于芝加哥的所有地区。我经常被外地的朋友问住在芝加哥是否安全，我告诉他们，只要你不去错误的地方，这是安全的。接下来，我将展示我的探索，看看这是否是真的。</li></ul><h2 id="7748" class="mb mc jg bd md me od dn mg mh oe dp mj le of ml mm li og mo mp lm oh mr ms mt bi translated">热图—每个警区的凶杀率:</h2><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="a633" class="mb mc jg ne b gy ni nj l nk nl"><em class="nm"># create a heatmap showing crime by district by year</em></span><span id="3c32" class="mb mc jg ne b gy nn nj l nk nl">corr = df_homicide.groupby(['District','Year']).count().Date.unstack()<br/>fig, ax = plt.subplots(figsize=(15,13))<br/>sns.set(font_scale=1.0)<br/>sns.heatmap(corr.dropna(axis=1),<br/>            annot=<strong class="ne jh">True</strong>,<br/>           linewidths=0.2,<br/>           cmap='Blues',<br/>            robust=<strong class="ne jh">True</strong>,<br/>           cbar_kws={'label': 'HOMICIDES'})<br/>plt.title('HOMICIDE vs DISTRICT vs YEAR')</span></pre><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi on"><img src="../Images/5be06c672bdef67422db9e39cd8ba74e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MdXM1hVA1PjjoNznvWwiBw.png"/></div></div></figure><p id="1713" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">上面我创建了一个热图，比较了 2001 年至 2017 年芝加哥所有警区与每个警区的凶杀案数量。</p><ul class=""><li id="e2b6" class="np nq jg kx b ky kz lb lc le nr li ns lm nt lq nu nv nw nx bi translated">正如热图所示，谋杀案在各地区的分布并不均匀。较暗区域对应较高的谋杀率。</li><li id="2b65" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">热图上的区域越暗，该地区相应年份的谋杀案就越多。</li><li id="dd08" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">在数据集中的所有年份中，第 1、16 和 20 区的凶杀率较低，每年为<strong class="kx jh"> 10 起或更少</strong>。</li><li id="6f1c" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">第 17、18、19 和 24 区的谋杀率都在每年 20 起或更少(T3)的水平，尽管有些年份低于 10 起。</li><li id="5e68" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">第 2、12、14 和 22 区每年有 30 起或更少的谋杀案发生在 T4。</li><li id="77fc" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">其余的地区每年有超过 30 起谋杀案，有些地区的谋杀率甚至超过了 50 起。</li><li id="9aa4" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">第 7 区和第 11 区在 17 年的数据集中一直保持较高的数字。我们甚至可以宣布它们为芝加哥凶杀案最致命的警区。</li><li id="6939" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">整个数据集的最高谋杀率<strong class="kx jh">是在 2016 年的第 11 区，有 92 起谋杀案。</strong></li><li id="43c4" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">2016 年是数据集中凶杀案最糟糕的一年<strong class="kx jh">，有 6 个区的凶杀案超过 50 起。</strong></li><li id="88f2" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">热图使这些数据变得生动，是我们数据探索工具包中的一个非常好的工具。</li></ul><h2 id="ff55" class="mb mc jg bd md me od dn mg mh oe dp mj le of ml mm li og mo mp lm oh mr ms mt bi translated">最危险和最不危险的警区</h2><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="ba22" class="mb mc jg ne b gy ni nj l nk nl"><strong class="ne jh">with</strong> sns.plotting_context('notebook',font_scale=1.5):<br/>    sorted_homicides = df_homicide[df_homicide['Year']&gt;=2016].groupby(['District']).count()\<br/>                    .Arrest.reset_index().sort_values('Arrest',ascending=<strong class="ne jh">False</strong>)<br/>    fig, ax = plt.subplots(figsize=(14,6))<br/>    sns.barplot(x='District',<br/>                y='Arrest',<br/>                data=sorted_homicides,<br/>                color='steelblue',<br/>                order = list(sorted_homicides['District']),<br/>                label='big')<br/>    plt.title('HOMICIDES PER DISTRICT (2016-2017) - Highest to Lowest')</span></pre><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oo"><img src="../Images/0702aae932998a9d29cd0db83b089d69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YTReKfrVNOPqt69U9YGq1w.png"/></div></div></figure><p id="b564" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如我们之前从热图中观察到的，有些地区比其他地区更危险，但现在我们可以更仔细地观察这一现象。从我们创造的各种可视化来看，我们至少可以得出结论，2016 年和 2017 年是芝加哥凶杀案最活跃的年份。</p><ul class=""><li id="f0d0" class="np nq jg kx b ky kz lb lc le nr li ns lm nt lq nu nv nw nx bi translated">在上面的柱状图中，我将每个地区在这两年中最多和最少的谋杀案可视化，以了解它们之间的关系。</li><li id="76cc" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">在这两年中，排名前 10 的地区都发生了 90 起以上的凶杀案。</li><li id="1896" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">11 区比名单上的下一组多了 30 起谋杀案。</li><li id="0967" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">22 个群体中的前 5 个群体占了该市所有凶杀案的 50%以上。</li><li id="c982" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">前 10 个群体占芝加哥所有凶杀案的 80%以上。</li><li id="79a5" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">25 个区中有 8 个区的凶杀率非常低或相对较低。</li></ul><h2 id="1885" class="mb mc jg bd md me od dn mg mh oe dp mj le of ml mm li og mo mp lm oh mr ms mt bi translated">杀人罪的逮捕与不逮捕:</h2><p id="7ab7" class="pw-post-body-paragraph kv kw jg kx b ky mu kh la lb mv kk ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">接下来，我通过绘制下面的一些关系来看逮捕和杀人之间的关系。</p><blockquote class="lr"><p id="4371" class="ls lt jg bd lu lv lw lx ly lz ma lq dk translated">看起来你可以在芝加哥逃脱谋杀。</p></blockquote><pre class="op oq or os ot nd ne nf ng aw nh bi"><span id="af4f" class="mb mc jg ne b gy ni nj l nk nl"><em class="nm"># create seaborn countplots  for whole dataset</em></span><span id="f184" class="mb mc jg ne b gy nn nj l nk nl">fig, ax = plt.subplots(figsize=(14,6))<br/>df_arrest = df_homicide[['Year','Arrest']]<br/>ax = sns.countplot(x="Year",<br/>                   hue='Arrest',<br/>                   data=df_arrest,<br/>                   palette="PuBuGn_d")<br/>plt.title('HOMICIDE - ARRESTS STATS BY YEAR')</span></pre><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ok"><img src="../Images/2a0774cf12d279ca991c73dd02848f68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*33tEnv5DNAoohXfU04PIVw.png"/></div></div></figure><p id="c58e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">上图比较了 17 年来数据集中所有凶杀案的逮捕与不逮捕情况。</p><ul class=""><li id="6040" class="np nq jg kx b ky kz lb lc le nr li ns lm nt lq nu nv nw nx bi translated">在 21 世纪初，警方逮捕的人比没有逮捕的人多。</li><li id="bdeb" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">从 2001 年到 2008 年，警方逮捕了超过一半的凶杀案。</li><li id="b907" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">从 2009 年至今，警方逮捕了不到一半的人。</li><li id="71e4" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">事实上，这种趋势看起来像是警察逮捕人数的下降趋势，可能始于 2004 年左右。</li><li id="44f4" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">2016 年和 2017 年，逮捕率不到 30%。</li></ul><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="4ea1" class="mb mc jg ne b gy ni nj l nk nl"><em class="nm"># create seaborn countplots for 2016 and 2017 -- high crime rate spike years</em></span><span id="78f5" class="mb mc jg ne b gy nn nj l nk nl">fig, ax = plt.subplots(figsize=(14,6))<br/>ax = sns.countplot(x="Month",<br/>                   hue='Arrest',<br/>                   data=df_homicide[df_homicide['Year']&gt;=2016][['Month','Arrest']],<br/>                   palette="PuBuGn_d")<br/>month_nms = ['January','February','March','April','May','June','July',\<br/>             'August','September','October','November','December']    <br/>ax.set_xticklabels(month_nms)<br/>plt.title('HOMICIDE - ARRESTS STATS BY MONTH -- (2016-2018)')</span></pre><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ok"><img src="../Images/128950545b58cd754aaba9273b41af98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kZsxkT5qMdw7BJYJyC3law.png"/></div></div></figure><ul class=""><li id="91d0" class="np nq jg kx b ky kz lb lc le nr li ns lm nt lq nu nv nw nx bi translated">真正让我惊讶的是，即使在 2016 年和 2107 年犯罪激增后，警方逮捕的谋杀事件仍在继续下降。上图试图观察月份特征，但只是证实了我们之前的观察。</li><li id="f58e" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">我还没有发现这种下降的好原因，但经过一点点挖掘，我发现媒体报道了芝加哥警察局的政策变化，减少了对逮捕低级别罪犯的关注，更多地关注犯罪规模方面的大鱼。这就引出了一个问题，谋杀难道不是一种高调的犯罪吗？</li><li id="bd42" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">2016 年发生的另一件有趣的事情是公众关注警察对有色人种的枪击事件，这让我想知道这是否在警察逮捕时不太积极方面发挥了重要作用。大多数高犯罪率地区都是以少数族裔为主的社区，2016 年，一名法官下令发布一段视频，显示芝加哥警察枪杀了一名黑人社区成员。</li></ul><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="d996" class="mb mc jg ne b gy ni nj l nk nl"><em class="nm"># create seaborn lmplot to compare arrest rates for different districts</em></span><span id="7cdc" class="mb mc jg ne b gy nn nj l nk nl">dfx = df_homicide[df_homicide['District'].\<br/>                isin(list(sorted_homicides.head(10)['District']))].\<br/>                groupby(['District','Year','Month','Arrest'])['Primary Type'].\<br/>                value_counts().unstack().reset_index()</span><span id="d3de" class="mb mc jg ne b gy nn nj l nk nl"><strong class="ne jh">with</strong> sns.plotting_context('notebook',font_scale=1.25):<br/>    sns.set_context("notebook", font_scale=1.15)</span><span id="4de7" class="mb mc jg ne b gy nn nj l nk nl">    g = sns.lmplot('Year','HOMICIDE',<br/>                   col='District',<br/>                   col_wrap=5,<br/>                   size=5,<br/>                   aspect=0.5,<br/>                   sharex=<strong class="ne jh">False</strong>,<br/>                   data=dfx[:],<br/>                   fit_reg=<strong class="ne jh">True</strong>,<br/>                   hue="Arrest", <br/>                   palette=sns.color_palette("seismic_r", 2),<br/>                   scatter_kws={"marker": "o",<br/>                            "s": 7},<br/>                   line_kws={"lw":0.7})</span></pre><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ou"><img src="../Images/b71f3944eec73c45afd297a83d00eff7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AAIVN4cBmVtdd3Dxfjn7MA.png"/></div></div></figure><p id="5fb0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">进一步细分地区一级的逮捕与不逮捕，仅是高凶杀率地区，为我之前观察到的数据集中逮捕数量逐年下降提供了更多依据。上图显示了前 10 个最危险地区在同一轴上的逮捕和未逮捕回归线。</p><p id="554b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">2006 年以前，警察逮捕的人数就开始比前一年少，到 2010 年，所有地区逮捕的杀人案不到一半。</p><p id="d175" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">很可能因杀人被捕的几率不到一半。如果你是住在高犯罪率地区的罪犯，这种可能性会大得多。</p><p id="af9a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我用 python 可视化相册“叶子”创建了一些地图，展示了我的一些发现，并在下面做了笔记。<a class="ae jd" href="http://nbviewer.jupyter.org/github/RonKG/machine-learning-portfolio-projects.......in-progress/blob/master/2.%20data_storytelling_project/homicide.data.cityofchicago.org.ipynb#" rel="noopener ugc nofollow" target="_blank">原始代码</a>上的地图是用户响应的，所以你可以放大、缩小和移动它们。</p><h2 id="ef91" class="mb mc jg bd md me od dn mg mh oe dp mj le of ml mm li og mo mp lm oh mr ms mt bi translated">凶杀案与地区的对比图</h2><h2 id="64e3" class="mb mc jg bd md me od dn mg mh oe dp mj le of ml mm li og mo mp lm oh mr ms mt bi">(2001–2017)</h2><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="bd8c" class="mb mc jg ne b gy ni nj l nk nl"><em class="nm"># plot chloropleth maps 2001 - 2017<br/></em><strong class="ne jh">def</strong> toString(x):<br/>    <strong class="ne jh">return</strong> str(int(x))</span><span id="e43f" class="mb mc jg ne b gy nn nj l nk nl">df_homicide_allyears = df_homicide.groupby(['District']).count().Arrest.reset_index()<br/>df_homicide_allyears['District'] = df_homicide_allyears['District'].apply(toString)</span><span id="0974" class="mb mc jg ne b gy nn nj l nk nl"><em class="nm"># ______________________________________________________#</em></span><span id="46ea" class="mb mc jg ne b gy nn nj l nk nl">chicago = location=[41.85, -87.68]<br/>m = folium.Map(chicago,<br/>               zoom_start=10)</span><span id="8a35" class="mb mc jg ne b gy nn nj l nk nl">plugins.Fullscreen(<br/>    position='topright',<br/>    title='Expand me',<br/>    title_cancel='Exit me',<br/>    force_separate_button=<strong class="ne jh">True</strong>).add_to(m)</span><span id="d49b" class="mb mc jg ne b gy nn nj l nk nl">m.choropleth(<br/>    geo_data='chicago_police_districts.geojson',<br/>    name='choropleth',<br/>    data=df_homicide_allyears,<br/>    columns=['District', 'Arrest'],<br/>    key_on='feature.properties.dist_num',<br/>    fill_color='YlOrRd', <br/>    fill_opacity=0.4, <br/>    line_opacity=0.2,<br/>    legend_name='Choropleth of Homicide per Police District : 2001-2017',<br/>    highlight=<strong class="ne jh">True</strong><br/>    )<br/>folium.TileLayer('openstreetmap').add_to(m)<br/>folium.TileLayer('cartodbpositron').add_to(m)<br/>folium.LayerControl().add_to(m)<br/>m.save("map1.html") <br/>IFrame('map1.html', width=990, height=700)</span><span id="1c7c" class="mb mc jg ne b gy nn nj l nk nl"><em class="nm"># plot 2016-2018 chloropleth map</em></span><span id="98dc" class="mb mc jg ne b gy nn nj l nk nl"># code for <em class="nm">second map </em>is available on github</span></pre><div class="mz na nb nc gt ab cb"><figure class="ov is ow ox oy oz pa paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/808d9587a47eadfe8f1017eb23db5aba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*KyTMpfAQzf6kTpm02jiAYA.png"/></div></figure><figure class="ov is pb ox oy oz pa paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/b74c9a6610e52b9a6587405479dbfe1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*Obg8UDTiv3Bmcn8lRWJJeQ.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk pc di pd pe">2001–2017 vs 2018</figcaption></figure></div><ul class=""><li id="72c6" class="np nq jg kx b ky kz lb lc le nr li ns lm nt lq nu nv nw nx bi translated">我为两个不同的时间段制作了两张 choropleth 地图。一个针对整个数据集，另一个针对 2016-2017 年期间，我们看到了谋杀案的激增。</li><li id="8f3a" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">这些地图很好地展示了不同警区的凶杀犯罪情况。</li><li id="80c8" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">从这两张地图上，我们可以看到犯罪集中在城市西边和南边的警区周围。</li><li id="b74b" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">有两个地区特别突出。这是 11 区和 7 区。</li><li id="8063" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">此外，犯罪率较高的地区在地理上是相连的/会传染的。</li></ul><h2 id="d55e" class="mb mc jg bd md me od dn mg mh oe dp mj le of ml mm li og mo mp lm oh mr ms mt bi translated">凶杀案 vs 地区热图—(2016–2017)</h2><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="f24d" class="mb mc jg ne b gy ni nj l nk nl"><em class="nm"># plot heatmap all districts -- (2016-2018)</em></span><span id="8204" class="mb mc jg ne b gy nn nj l nk nl">after_2015_geo = []<br/><strong class="ne jh">for</strong> index, row <strong class="ne jh">in</strong> df_homicide[df_homicide['Year']&gt;=2016][['Latitude','Longitude','District']].dropna().iterrows():<br/>    after_2015_geo.append([row["Latitude"], row["Longitude"],row['District']])<br/><em class="nm"># ___________________________________________________________________</em><br/>chicago = location=[41.85, -87.68]<br/>m = folium.Map(chicago, zoom_start=9.5,control_scale = <strong class="ne jh">False</strong>)</span><span id="1eea" class="mb mc jg ne b gy nn nj l nk nl">plugins.Fullscreen(<br/>    position='topright',<br/>    title='Expand me',<br/>    title_cancel='Exit me',<br/>    force_separate_button=<strong class="ne jh">True</strong>).add_to(m)</span><span id="7ea6" class="mb mc jg ne b gy nn nj l nk nl">m.choropleth(<br/>    geo_data='chicago_police_districts.geojson',<br/>    name='choropleth',<br/>    data=df_homicide_after_2015,<br/>    columns=['District', 'Arrest'],<br/>    key_on='feature.properties.dist_num',<br/>    fill_color='YlOrRd', <br/>    fill_opacity=0.4, <br/>    line_opacity=0.2,<br/>    legend_name='HeatMap Homicides : 2016-2017',<br/>    highlight=<strong class="ne jh">True</strong><br/>    )<br/>m.add_child(plugins.HeatMap(after_2015_geo,<br/>                            name='all_homicides_2016_to_2017',<br/>                            radius=5,<br/>                            max_zoom=1,<br/>                            blur=10, <br/>                            max_val=3.0))<br/>folium.TileLayer('openstreetmap').add_to(m)<br/>folium.TileLayer('cartodbpositron').add_to(m)<br/>folium.LayerControl().add_to(m)<br/>m.save("map3.html") <br/>IFrame('map3.html', width=990, height=700)</span></pre><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pf"><img src="../Images/8c5719c9087c46cff94e8458ddc55c41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5bzVRKOHgQm7p6H2whH6ww.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Chicago Homicide Heat Map</figcaption></figure><ul class=""><li id="4121" class="np nq jg kx b ky kz lb lc le nr li ns lm nt lq nu nv nw nx bi translated">上面的热图可视化是用 python<a class="ae jd" href="https://folium.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">follow</a>可视化库创建的，它可以很好地控制在<em class="nm">笔记本</em>上绘制动态地图。</li><li id="61cd" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">该热图适用于 2016-2017 年时间框架。这个时间段的各个犯罪现场位置被绘制在城市的画布上，并用颜色表示。</li><li id="5ab1" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">热图可以帮助我们在地图上直观地显示犯罪发生频率高或低的大致位置。深橙色代表犯罪率高的区域，断开的浅黄色/绿色阴影显示地图上犯罪率低的位置。</li><li id="2433" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">给人的第一印象是芝加哥西区和南区的凶杀率较高。我们可以放大每个区域的更多细节，每次放大都会显示该子区域中的更多集群。</li></ul><p id="38e9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nm">注:我还创建了更具交互性的时移热图和聚类图，可以在这里</em>  <em class="nm">和在</em><a class="ae jd" href="https://github.com/RonKG/machine-learning-portfolio-projects.......in-progress/tree/master/2.%20data_storytelling_project" rel="noopener ugc nofollow" target="_blank"><em class="nm">github</em></a><em class="nm">上</em><em class="nm">查看。</em></p><p id="44a4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，我创建了显示谋杀地点的聚类地图。在<a class="ae jd" href="http://nbviewer.jupyter.org/github/RonKG/machine-learning-portfolio-projects.......in-progress/blob/master/2.%20data_storytelling_project/homicide.data.cityofchicago.org.ipynb#" rel="noopener ugc nofollow" target="_blank"> nbviewer </a>上渲染的现场互动笔记本就位于这里。</p><div class="mz na nb nc gt ab cb"><figure class="ov is pg ox oy oz pa paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/3492ae7b304ab05a3fd56138dcfecc02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*-VBsUdcp3KrbQxopuYeN5g.png"/></div></figure><figure class="ov is ph ox oy oz pa paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/6a60b6ed19eb99abebbbd4fd75bb4380.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*69-PIEakkERx6p9-hVT1KQ.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk pc di pd pe">(2001–2017) vs 2018</figcaption></figure></div><p id="e64f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这些地图描绘了各个犯罪现场，这或多或少类似于热图，只是没有给这些地理位置添加颜色。其中一张地图是 2016-2017 年期间的，另一张地图是 2018 年的两个月数据(1 月和 2 月)。</p><p id="e1af" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">1 月和 2 月的地图特别有趣，因为它显示了 2018 年初犯罪已经开始大量出现的地方。可悲的是，凶杀案遵循与前几年相同的模式，绝大多数犯罪发生在同一地区。</p><p id="7624" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于在正确领域中试图确定哪些问题点需要更多资源的任何人来说，该地图将是一个很好的工具。这些地图也是一个很好的工具，可以直观地检查社区中的个人犯罪地点，结合他们对该地区的了解，可以带来新的见解，可以探索并采取行动，使社区更加安全。例如，社区成员可以确定问题点，并为儿童建立安全的上下学通道。这张地图将有助于他们识别不太危险的街区。</p><h1 id="a699" class="pi mc jg bd md pj pk pl mg pm pn po mj km pp kn mm kp pq kq mp ks pr kt ms ps bi translated">结论</h1><p id="398c" class="pw-post-body-paragraph kv kw jg kx b ky mu kh la lb mv kk ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">在这本笔记本中，我使用了芝加哥警察局收集的数据，从中提取了一些关于芝加哥凶杀案的见解。虽然这里进行的数据分析缺乏国家视角，但我的主要发现可以归纳为以下几个要点:</p><ul class=""><li id="3674" class="np nq jg kx b ky kz lb lc le nr li ns lm nt lq nu nv nw nx bi translated">各警区的凶杀犯罪数量差异很大。数字高的地区似乎年复一年都有高的数字，反之亦然。</li><li id="f52f" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">从 2004 年到 2015 年，凶杀案数量基本未变，每年分别为 400 起和 500 起。这些数字在 2016 年突然跃升至每年 700 起凶杀案。</li><li id="5573" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">这个新数字一直保持到 2017 年，每年超过 650 起凶杀案。</li><li id="11cb" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">天气温度和每月凶杀案数量之间有关联。越是温暖的月份，杀人犯罪就越多。</li><li id="3f64" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">一周中的某一天也会影响谋杀案的数量，周末的谋杀案数量会更多。</li><li id="4565" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">一天中的时间也会影响杀人案件的数量，晚上 9 点到凌晨 2 点最危险，早上 7 点到下午 1 点最安全。</li><li id="2744" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">第 11 区、第 7 区和第 15 区在 2016-2017 年期间发生的凶杀案最多，同一时期各发生了 120 多起凶杀案。</li><li id="56c6" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">绝大多数凶杀案发生在街头，占所有凶杀犯罪现场的 60%以上。</li><li id="fd56" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">2016-2017 年期间，第 20、16、18、1、19、17、24 和 14 区的凶杀案都不到 20 起，这使它们成为芝加哥最安全的<em class="nm">警区。</em></li><li id="d55b" class="np nq jg kx b ky ny lb nz le oa li ob lm oc lq nu nv nw nx bi translated">自 2003 年以来，因杀人罪而被逮捕的人数一直在下降，2008 年，谋杀案的数量超过了因谋杀而被逮捕的人数。截至 2018 年，每 10 起凶杀案中有不到 3 起被逮捕。</li></ul><p id="8220" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虽然这些观察结果很有启发性，但我应该指出，它们并没有描绘出全貌，应该与国家或其他可比数据进行比较，以提供更多的视角。例如，虽然每年的凶杀案数量看起来很高，但我们不知道这是在全国平均水平以内还是太高了。这种比较将有助于我们在讲述数据故事时建立更有说服力的论据，用它们来支持我们的本地发现。</p><p id="080b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">话虽如此，我们的发现仍然与当地决策者密切相关，因为他们非常清楚何时何地，但不是为什么。</p></div></div>    
</body>
</html>