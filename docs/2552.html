<html>
<head>
<title>TensorFlow on Mobile: Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">手机上的TensorFlow:教程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tensorflow-on-mobile-tutorial-1-744703297267?source=collection_archive---------3-----------------------#2018-02-06">https://towardsdatascience.com/tensorflow-on-mobile-tutorial-1-744703297267?source=collection_archive---------3-----------------------#2018-02-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cb41" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><strong class="ak">在安卓和iOS上</strong></h2></div><p id="392b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">TensorFlow通常用于从大量数据中训练巨大的模型，但没有人能忽视智能手机的新兴市场以及让我们的未来“人工智能”的需要。而那些对未来迫不及待、热爱机器学习的人，正在通过制造工具来推动边界，这些工具瞄准了数万亿美元的市场。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/7bf968872901e7effa5fd16d7075824d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2CESY9SXnEXSa-n2kf8aBg.jpeg"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk"><a class="ae lr" href="https://mossandfog.com/2017/10/06/design-verdict-iphone-x-vs-google-pixel-2-vs-samsung-galaxy-s8/" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><p id="e319" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你是这个数万亿美元市场的一部分，因为你现在可能正在你的Android或iOS上阅读这篇文章，或者你的口袋里有一个，无论是哪种情况，你都知道移动设备上面向未来的机器学习是多么重要…</p><p id="3b57" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我将写2个不同的教程，关于如何在你的Android和iOS设备上运行你的机器学习模型。</p><h2 id="16e6" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">这是第一个教程。</h2><p id="53f9" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">本教程使用了更稳定的tensorflow版本，即TensorFlow Mobile，因此请按照步骤来实现您的模型，并使它们<strong class="kh ir">针对移动设备</strong>进行优化。</p></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><p id="ebba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将通过重新训练Inception-v3模型的最后(瓶颈)层来制作一个<em class="mx">图像分类器，然后为您的智能设备优化该模型。</em></p><p id="b10c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本教程仅包含5-6个步骤:</p><h2 id="4142" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">第一步:用TensorFlow创建你的模型</h2><p id="d4d6" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">我很确定你已经知道这一步，因为你正在学习在智能手机上运行相同的模型。</p><p id="dea2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另外，为了使本教程严格集中在智能手机的<em class="mx">实现模型上，</em>我推荐这个快速教程🔹<a class="ae lr" rel="noopener" target="_blank" href="/training-inception-with-tensorflow-on-custom-images-using-cpu-8ecd91595f26">利用CPU上的自定义图像进行列车启动</a>🔹这样我们就能达成一致了📄你可以用一个新训练的模型在一个新的目录中开始这些东西。</p><p id="2b80" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">仅供参考:</strong> <em class="mx">数据</em>📗<em class="mx">模型被训练的地方包含郁金香的种类</em>🌷<em class="mx">、雏菊、向日葵</em>🌻<em class="mx">、蒲公英和玫瑰</em>🌹</p><p id="2fe7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这之后，你应该有这两个文件:</p><pre class="lc ld le lf gt my mz na nb aw nc bi"><span id="ed0f" class="ls lt iq mz b gy nd ne l nf ng">tf_files/retrained_graph.pb </span></pre><p id="1bd8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其中包含所选网络的一个版本，以及根据您的类别重新训练的最终层。</p><p id="cd46" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和</p><pre class="lc ld le lf gt my mz na nb aw nc bi"><span id="3e09" class="ls lt iq mz b gy nd ne l nf ng"> tf_files/retrained_labels.txt</span></pre><p id="c8b9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一个文本文件📝包含标签。</p><h2 id="bd58" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">步骤2:创建一个优化的模型😎</h2><p id="1f0c" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">运行以下命令提示符(保持路径正确)</p><pre class="lc ld le lf gt my mz na nb aw nc bi"><span id="6a43" class="ls lt iq mz b gy nd ne l nf ng">python -m tensorflow.python.tools.optimize_for_inference \<br/>  --input=tf_files/retrained_graph.pb \<br/>  --output=tf_files/optimized_graph.pb \<br/>  --input_names="input" \<br/>  --output_names="final_result"</span></pre><p id="4561" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它将创建一个新的优化模型文件<code class="fe nh ni nj mz b">tf_files/optimized_graph.pb</code></p><blockquote class="nk nl nm"><p id="9d50" class="kf kg mx kh b ki kj jr kk kl km ju kn nn kp kq kr no kt ku kv np kx ky kz la ij bi translated"><strong class="kh ir">注意:</strong>如果出现错误<strong class="kh ir"> </strong> <code class="fe nh ni nj mz b">KeyError: “The following input nodes were not found: {‘input’}\n” </code>，则将“输入”改为“Mul”。</p></blockquote><p id="dddf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">取舍😇</strong></p><p id="8d95" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了减少应用的预处理，同时减少库的大小，tensorflow只支持推理过程中常用的操作子集。不支持的操作有<a class="ae lr" href="https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/makefile/tf_op_files.txt" rel="noopener ugc nofollow" target="_blank">tensor flow/contrib/makefile/TF _ op _ files . txt</a></p><p id="fc24" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，为了确保我们刚刚创建的任何图形文件都包括支持的操作，如下所示…</p><h2 id="a488" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">验证✔️</h2><p id="21a4" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">确保新的优化图正在运行，并且<strong class="kh ir"> optimize_for_inference </strong>文件删除了一组给定输入和输出不需要的所有节点，并且没有改变网络的输出。</p><p id="4ade" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用图形<strong class="kh ir">retained _ graph . Pb</strong>和<strong class="kh ir"> optimized_graph.pb </strong>上的<strong class="kh ir"> label_file </strong>比较同一<em class="mx">图像</em>的输出</p><p id="692a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用<strong class="kh ir">retained _ graph . Pb</strong></p><pre class="lc ld le lf gt my mz na nb aw nc bi"><span id="43eb" class="ls lt iq mz b gy nd ne l nf ng">python -m scripts.label_image \<br/>  --graph=tf_files/retrained_graph.pb \<br/>  --image=tf_files/flower_photos/daisy/3475870145_685a19116d.jpg</span></pre><p id="abf7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用<strong class="kh ir"> optimized_graph.pb </strong></p><pre class="lc ld le lf gt my mz na nb aw nc bi"><span id="0f86" class="ls lt iq mz b gy nd ne l nf ng">python -m scripts/label_image \<br/>    --graph=tf_files/optimized_graph.pb \<br/>    --image=tf_files/flower_photos/daisy/3475870145_685a19116d.jpg</span></pre><p id="8c5d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">逐一运行这些命令，如果两个输出相同，这意味着<strong class="kh ir"> optimized_graph.pb </strong>已完美创建🎉</p><h2 id="912f" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">第三步:量化模型，然后压缩</h2><p id="1d84" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">问题仍然是模型的尺寸仍然很大，肯定不适合手机。因为，图中所占的大部分空间是由权重占据的，权重是大块的浮点数。每个权重的浮点值略有不同，规律性很小。</p><p id="de0e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是压缩通过利用数据中的规律性来工作，这解释了这里的失败。</p><p id="1a6a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过对网络的权重进行量化，量化有助于通过因子来减小神经网络的大小。这在图形中给出了更多的重复，并且对之后的压缩有很大的帮助。</p><p id="ebcd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在使用<strong class="kh ir"> quantize_graph </strong>脚本将更改应用到图形:</p><pre class="lc ld le lf gt my mz na nb aw nc bi"><span id="3a26" class="ls lt iq mz b gy nd ne l nf ng">python -m scripts.quantize_graph \<br/>  --input=tf_files/optimized_graph.pb \<br/>  --output=tf_files/rounded_graph.pb \<br/>  --output_node_names=final_result \<br/>  --mode=weights_rounded</span></pre><p id="2e23" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在压缩模型:</p><pre class="lc ld le lf gt my mz na nb aw nc bi"><span id="bf5a" class="ls lt iq mz b gy nd ne l nf ng">gzip -c tf_files/rounded_graph.pb &gt; tf_files/rounded_graph.pb.gz<br/><br/>gzip -l tf_files/rounded_graph.pb.gz</span></pre><p id="f14e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将创建一个<strong class="kh ir"> rounded_graph.pb </strong>文件。</p><p id="05ca" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您应该会看到压缩方面的一些显著改进。</p><blockquote class="nk nl nm"><p id="8a9e" class="kf kg mx kh b ki kj jr kk kl km ju kn nn kp kq kr no kt ku kv np kx ky kz la ij bi translated"><strong class="kh ir">注意:</strong>如果您在运行<strong class="kh ir"> quantize_graph </strong>时遇到任何错误，请下载该文件并将其粘贴到tensorflow库(安装TensorFlow的位置)中的<em class="iq">tools/quantization/quantize _ graph . py</em>中。</p></blockquote></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><blockquote class="nq"><p id="aa99" class="nr ns iq bd nt nu nv nw nx ny nz la dk translated">从这里开始，教程分为两个部分Android和iOS。</p></blockquote></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h1 id="3504" class="oa lt iq bd lu ob oc od lx oe of og ma jw oh jx md jz oi ka mg kc oj kd mj ok bi translated">🍎ios📱</h1><h2 id="71b3" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">第四步:添加tensor flow-实验舱</h2><p id="77c4" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">将TensorFlow-experimental pod添加到您的pod文件中，这将安装一个通用二进制框架。这是在iOS上运行tensorflow最简单的方法。</p><h2 id="1cba" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">步骤5:创建你的应用程序</h2><p id="c4d2" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">🔹创建您自己的应用程序或在XCode中载入您已经创建的应用程序。</p><p id="90e4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">🔹在项目根目录下添加一个名为Podfile的文件，内容如下:</p><pre class="lc ld le lf gt my mz na nb aw nc bi"><span id="59ed" class="ls lt iq mz b gy nd ne l nf ng">target 'YourProjectName'<br/>pod 'TensorFlow-experimental'</span></pre><p id="fe3a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">🔹运行<code class="fe nh ni nj mz b">pod install</code>下载&amp;安装<code class="fe nh ni nj mz b">TensorFlow-experimental</code> pod。</p><p id="e0c7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">🔹打开<code class="fe nh ni nj mz b">YourProjectName.xcworkspace</code>，添加你的代码。</p><p id="cc10" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">🔹在你的应用的<strong class="kh ir">构建设置</strong>中，确保将<code class="fe nh ni nj mz b">$(inherited)</code>添加到<strong class="kh ir">其他链接器标志</strong>和<strong class="kh ir">头搜索路径</strong>部分。</p><h2 id="8017" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">步骤6:运行样品</h2><p id="b15d" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">您需要Xcode 7.3或更高版本来运行我们的iOS示例。</p><p id="c575" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简单、基准和相机中有三个例子。可以克隆<a class="ae lr" href="https://github.com/tensorflow/tensorflow/tree/master/tensorflow/examples/ios#building-the-tensorflow-ios-libraries-from-source" rel="noopener ugc nofollow" target="_blank">代码</a>。</p><p id="63ac" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，从tensorflow的根目录下载<a class="ae lr" href="https://storage.googleapis.com/download.tensorflow.org/models/inception5h.zip" rel="noopener ugc nofollow" target="_blank"> Inception v1 </a>，并使用以下步骤将标签和图形文件提取到简单示例和相机示例中的数据文件夹中:</p><pre class="lc ld le lf gt my mz na nb aw nc bi"><span id="72c0" class="ls lt iq mz b gy nd ne l nf ng">mkdir -p ~/graphs<br/>curl -o ~/graphs/inception5h.zip \<br/> https://storage.googleapis.com/download.tensorflow.org/models/inception5h.zip \<br/> &amp;&amp; unzip ~/graphs/inception5h.zip -d ~/graphs/inception5h<br/>cp ~/graphs/inception5h/* tensorflow/examples/ios/benchmark/data/<br/>cp ~/graphs/inception5h/* tensorflow/examples/ios/camera/data/<br/>cp ~/graphs/inception5h/* tensorflow/examples/ios/simple/data/</span></pre><p id="f429" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">切换到其中一个示例目录，下载<a class="ae lr" href="https://cocoapods.org/pods/TensorFlow-experimental" rel="noopener ugc nofollow" target="_blank">tensor flow-experimental</a>pod，并打开Xcode工作区。请注意，安装pod可能需要很长时间，因为它很大(约450MB)。如果您想运行这个简单的示例，那么:</p><pre class="lc ld le lf gt my mz na nb aw nc bi"><span id="c014" class="ls lt iq mz b gy nd ne l nf ng">cd tensorflow/examples/ios/simple<br/>pod install<br/>open tf_simple_example.xcworkspace #note .xcworkspace,not .xcodeproj<br/>                                     </span></pre><p id="cb0c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在XCode模拟器中运行简单的应用程序。您应该会看到一个带有<strong class="kh ir">运行模式</strong>按钮的单屏幕应用程序。点击它，你会看到一个格蕾丝·赫柏的图像。一旦你建立并运行它，你应该得到一个实时的摄像机视图，你可以指向物体以获得实时的识别结果。</p><blockquote class="nk nl nm"><p id="c8b0" class="kf kg mx kh b ki kj jr kk kl km ju kn nn kp kq kr no kt ku kv np kx ky kz la ij bi translated"><strong class="kh ir">注意:</strong>我很确定我犯了一些错误或者在iOS部分留下了一些东西。请浏览下面的官方链接，如果你有任何错误，请在下面评论，社区会帮助你。</p></blockquote><h2 id="ddee" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">现在，你可以跳过这篇文章的Android部分。</h2><p id="220f" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated"><a class="ae lr" href="https://github.com/tensorflow/tensorflow/tree/master/tensorflow/examples/ios#building-the-tensorflow-ios-libraries-from-source" rel="noopener ugc nofollow" target="_blank">https://github . com/tensor flow/tensor flow/tree/master/tensor flow/examples/IOs # building-the-tensor flow-IOs-libraries-from-source</a></p><div class="ol om gp gr on oo"><a href="https://www.tensorflow.org/mobile/ios_build" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd ir gy z fp ot fr fs ou fu fw ip bi translated">在iOS | TensorFlow上构建TensorFlow</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">TensorFlow-experimental pod目前大约为450MB。它如此之大的原因是因为我们捆绑了多个…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">www.tensorflow.org</p></div></div></div></a></div></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h1 id="d515" class="oa lt iq bd lu ob oc od lx oe of og ma jw oh jx md jz oi ka mg kc oj kd mj ok bi translated">🍭 🍦机器人🍞🐝 🍩</h1><h2 id="90de" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">步骤4:安装Android Studio并测试运行</h2><p id="dcb5" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">有两种方法可以做到这一点:Android Studio和Bazel。我将使用AS，因为更多的人熟悉它。</p><p id="0b33" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您还没有安装它，请到这里安装它</p><div class="ol om gp gr on oo"><a href="https://developer.android.com/studio/index.html" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd ir gy z fp ot fr fs ou fu fw ip bi translated">下载Android Studio和SDK工具| Android Studio</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">下载官方Android IDE和开发工具，为Android手机、平板电脑、可穿戴设备、电视和…构建应用</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">developer.android.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc ll oo"/></div></div></a></div><h2 id="3d87" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">试运转🏃</h2><p id="f14c" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">为了检查Android Studio中的一切是否正常，让我们进行一次测试。</p><p id="0662" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">🔸打开Android Studio，选择“📁打开一个现有的Android Studio项目”。</p><p id="9639" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">🔸进入<strong class="kh ir">tensor flow-for-poets-2/Android/TF mobile</strong>目录。</p><p id="d2df" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">🔸打开<strong class="kh ir"> Build.gradle </strong>文件，同步<strong class="kh ir"> Gradle。</strong>如果一切正常，点击<strong class="kh ir">构建&gt;构建APK </strong>按钮。</p><blockquote class="nk nl nm"><p id="b22e" class="kf kg mx kh b ki kj jr kk kl km ju kn nn kp kq kr no kt ku kv np kx ky kz la ij bi translated"><strong class="kh ir">注意:</strong>如果你和我一样是Android Studio的新手，并且有一些问题，请在下面评论。</p></blockquote><p id="9b06" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在应该有一个文件夹，里面有<strong class="kh ir"> app.apk </strong>文件，复制到手机里安装。另外，记住打开手机中的<strong class="kh ir">开发者模式</strong>。</p><h2 id="ab19" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">第五步:运行定制的应用程序👏 👏 👏</h2><p id="35f5" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">如果到现在为止一切正常，从现在开始就是小菜一碟。</p><p id="6251" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">默认应用程序是一个分类图像应用程序，有来自<a class="ae lr" href="http://www.image-net.org/" rel="noopener ugc nofollow" target="_blank"> Imagenet </a>的1000个类别。</p><p id="f54a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，要运行我们定制的应用程序，请执行以下两个步骤:</p><h2 id="d8b5" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">将模型文件添加到项目中</h2><p id="7201" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">现在，演示应用程序正在查看出现在<strong class="kh ir"><em class="mx">Android/TF mobile/assets</em></strong>中的<strong class="kh ir"> graph.pb </strong>文件和<strong class="kh ir"> label.txt </strong>文件，而不是您的<strong class="kh ir"> rounded_graph.pb </strong>和<strong class="kh ir">retained _ labels . txt</strong></p><p id="5431" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，用下面的命令替换这些文件，或者也可以手动替换。</p><pre class="lc ld le lf gt my mz na nb aw nc bi"><span id="ba8b" class="ls lt iq mz b gy nd ne l nf ng">cp tf_files/rounded_graph.pb android/tfmobile/assets/graph.pb<br/>cp tf_files/retrained_labels.txt android/tfmobile/assets/labels.txt</span></pre><h2 id="2d68" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">更改<code class="fe nh ni nj mz b">ClassifierActivity.java file</code>中的<code class="fe nh ni nj mz b">output_name"</code></h2><p id="b170" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">我们模型的输出节点有一个不同的名字:<code class="fe nh ni nj mz b">"final_result"</code>。打开<code class="fe nh ni nj mz b">ClassifierActivity.java</code>，更新<code class="fe nh ni nj mz b">OUTPUT_NAME</code>变量，如下所示:</p><pre class="lc ld le lf gt my mz na nb aw nc bi"><span id="0d45" class="ls lt iq mz b gy nd ne l nf ng">private static final String INPUT_NAME = "input";<br/>private static final String OUTPUT_NAME = "final_result";</span></pre><h2 id="1af4" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">👏 👏 👏再次运行，事情应该工作了。👏 👏 👏</h2><blockquote class="nk nl nm"><p id="d66b" class="kf kg mx kh b ki kj jr kk kl km ju kn nn kp kq kr no kt ku kv np kx ky kz la ij bi translated"><strong class="kh ir">注意:</strong>如果你出现任何错误或者打中了下面任何一个墙评论。</p></blockquote></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/b42e0e7fafdf3abd4e6cf4edb511b8c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/1*B_EOC2l6EIKmgQRKJ4g_lg.gif"/></div></figure><p id="2b98" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">️I试图让这篇文章尽可能准确易懂。有任何意见、建议或疑问，请写在评论里。</p><p id="97e0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有关如何在移动应用程序中使用<strong class="kh ir">tensor flow</strong>的更多教程，请关注我的<a class="ae lr" href="https://medium.com/@sagarsharma4244" rel="noopener"> <strong class="kh ir">中的</strong> </a>、<a class="ae lr" href="https://www.facebook.com/profile.php?id=100003188718299" rel="noopener ugc nofollow" target="_blank">脸书</a>、<a class="ae lr" href="https://twitter.com/SagarSharma4244" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae lr" href="https://www.linkedin.com/in/sagar-sharma-232a06148/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>、<a class="ae lr" href="https://plus.google.com/u/0/+SAGARSHARMA4244" rel="noopener ugc nofollow" target="_blank"> Google+ </a>、<a class="ae lr" href="https://www.quora.com/profile/Sagar-Sharma-71" rel="noopener ugc nofollow" target="_blank"> Quora </a>以查看类似的帖子。</p><p id="9b4a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">鼓掌吧！分享一下！跟我来。</strong></p><p id="5390" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">乐意帮忙。荣誉……..</p></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h1 id="93df" class="oa lt iq bd lu ob oc od lx oe of og ma jw oh jx md jz oi ka mg kc oj kd mj ok bi translated">你会喜欢的以前的故事:</h1><ol class=""><li id="2649" class="pe pf iq kh b ki ml kl mm ko pg ks ph kw pi la pj pk pl pm bi translated"><a class="ae lr" rel="noopener" target="_blank" href="/tensorflow-on-mobile-tensorflow-lite-a5303eef77eb">手机上的tensor flow:tensor flow Lite</a></li></ol><p id="e873" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2.<a class="ae lr" rel="noopener" target="_blank" href="/epoch-vs-iterations-vs-batch-size-4dfb9c7ce9c9">纪元vs批量vs迭代</a></p><p id="23f8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">3.<a class="ae lr" rel="noopener" target="_blank" href="/tensorflow-image-recognition-python-api-e35f7d412a70"> TensorFlow图像识别Python API教程CPU上</a></p><p id="0e83" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">4.<a class="ae lr" href="https://medium.com/towards-data-science/activation-functions-neural-networks-1cbd9f8d91d6" rel="noopener">激活函数解释:神经网络</a></p><div class="ol om gp gr on oo"><a href="https://medium.com/@sagarsharma4244/how-to-send-emails-using-python-4293dacc57d9" rel="noopener follow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd ir gy z fp ot fr fs ou fu fw ip bi translated">如何使用Python发送电子邮件</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">使用Flask设计专业邮件！</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">medium.com</p></div></div><div class="ox l"><div class="pn l oz pa pb ox pc ll oo"/></div></div></a></div></div></div>    
</body>
</html>