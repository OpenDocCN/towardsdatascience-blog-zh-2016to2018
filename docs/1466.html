<html>
<head>
<title>Running Jupyter Notebook on Google Cloud Platform in 15 min</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 15 分钟内在谷歌云平台上运行 Jupyter 笔记本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/running-jupyter-notebook-in-google-cloud-platform-in-15-min-61e16da34d52?source=collection_archive---------0-----------------------#2017-09-08">https://towardsdatascience.com/running-jupyter-notebook-in-google-cloud-platform-in-15-min-61e16da34d52?source=collection_archive---------0-----------------------#2017-09-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ced38929f86c37ecb6368d775a80216f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D_U4KwdLRPZbIOGc1I6-_A.png"/></div></div></figure><p id="292a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最近，当我使用卷积神经网络做计算机视觉的研究项目时，我发现我的 8GB RAM 笔记本电脑毫无用处。我花了一个小时才从一个时代学会。因此，我没有花 1500 美元买一台新的基于 GPU 的笔记本电脑，而是在谷歌云上免费完成了这项工作。(谷歌云提供 300 美元信用，我有 3 个 gmail 账户和 3 张信用卡:D)</p><p id="a218" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以，让我们不要再浪费时间，直接在 GCP 运行 jupyter 笔记本。</p><h2 id="730f" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">第一步:在谷歌云中创建一个 300 美元的免费账户</h2><p id="82e4" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">在这一步，你必须输入你的支付信息并验证你的账户。这是最简单的一步。如果这一步你失败了，合上你的笔记本电脑，想想你的人生将走向何方。</p><h2 id="192d" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">步骤 2:创建新项目</h2><p id="c98e" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">点击下图中的三个点，然后点击+号创建一个新项目。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lu"><img src="../Images/dcc852ae8dbb92524be81cb974db5809.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SbaYPKE5_MmARsRlHU0qkg.png"/></div></div></figure><h2 id="4c56" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">步骤 3:创建一个虚拟机实例</h2><p id="c1e0" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">单击左上角的三行，然后在计算选项中，单击“计算引擎”</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/93f53873e7609a67574263276865fb08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Z7XbsnxB0Cb3g6UEAVuKw.png"/></div></div></figure><p id="944f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，单击“创建新实例”。命名您的实例，选择 zone 为“us-west1-b”。选择您的“机器类型”。(我选的是 8v CPUs)。</p><p id="e1d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">选择您的启动磁盘为“Ubuntu 16.04 LTS”。在防火墙选项下勾选“http”和“https”(非常重要)。然后，选择磁盘选项卡，取消选中“删除实例时删除引导磁盘”。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/ffb04b95912e548e8324dfb7f25afa66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*fg1j6JOFABOxflvcfXQ7Cw.png"/></div></figure><p id="283f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您点击“自定义”，您将能够找到使用 GPU 的选项。您可以在 2 个 NVIDIA GPUs 之间进行选择。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mb"><img src="../Images/7ed87a91217b46e75e6e47a5f9b0a7b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*LMBZwYTq9Ivk6fW4a2bqOw.png"/></div></div></figure><p id="78be" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一些防火墙设置:-</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/b245e1d9a4aa81321e113f9d3c11f7b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*gQURWhpn4s3bHDwUfErztg.png"/></div></figure><p id="a871" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在点击“创建”,您的实例就准备好了！</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi md"><img src="../Images/67806be92ff564a6583019809636ff20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fxFUT_XW-xRvTLB6uPl07g.png"/></div></div></figure><p id="6e01" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您的新 VM 实例应该看起来像这样。记下外部 IP。</p><p id="faf2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">重要提示:完成后，不要忘记通过点击上图中的三个点并选择停止来停止 GPU 实例。否则 GCP 会继续按小时收费。</strong></p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/ef09f7359fa2202888dde6fb95873089.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eb1aMVZCc085W1qi7gtpLg.png"/></div></div></figure><h2 id="63f7" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">步骤 4:将外部 IP 地址设为静态</h2><p id="f72c" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">默认情况下，外部 IP 地址是动态的，我们需要使它成为静态的，以使我们的生活更容易。单击左上方的三条水平线，然后在“网络”下，单击“VPC 网络”,然后单击“外部 IP 地址”。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/b269b1d1d55550e755fd6079aae302a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*5K6zNphpR1cUtxIryfaxkw.png"/></div></figure><p id="fb6b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将类型从短暂更改为静态。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mg"><img src="../Images/45e1d8b9b43864e5e52f9c6e626afb02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pwRPSLksp-pm1m4wyWWpVw.png"/></div></div></figure><h2 id="95ed" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">步骤 5:更改防火墙设置</h2><p id="1b67" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">现在，点击“网络”下的“防火墙规则”设置。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/b269b1d1d55550e755fd6079aae302a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*5K6zNphpR1cUtxIryfaxkw.png"/></div></figure><p id="165f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">点击“创建防火墙规则”并参考下图:</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mh"><img src="../Images/d656ea01f1005f10d633d52a73934319.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R3jRo09kec4ygt1fUcZ_uA.png"/></div></div></figure><p id="37da" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在协议和端口下，您可以选择任何端口。我选择了 tcp:5000 作为我的端口号。现在点击保存按钮。</p><h2 id="86b3" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">步骤 6:启动您的虚拟机实例</h2><p id="e509" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">现在启动您的虚拟机实例。当您看到绿色勾号时，单击 SSH。这将打开一个命令窗口，现在你在虚拟机内。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mi"><img src="../Images/e9cd90913a6df3abb6406f2dc67dc61a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J1iV3ZeGc_SgfuRQHzWBnQ.png"/></div></div></figure><h2 id="ff8d" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">第七步:安装 Jupyter 笔记本和其他软件包</h2><p id="d156" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">在 SSH 终端中，输入:</p><pre class="lv lw lx ly gt mj mk ml mm aw mn bi"><span id="d43e" class="kw kx iq mk b gy mo mp l mq mr">wget <a class="ae ms" href="http://repo.continuum.io/archive/Anaconda3-4.0.0-Linux-x86_64.sh" rel="noopener ugc nofollow" target="_blank">http://repo.continuum.io/archive/Anaconda3-4.0.0-Linux-x86_64.sh</a><br/>bash Anaconda3-4.0.0-Linux-x86_64.sh</span></pre><p id="6bcb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并按照屏幕上的说明进行操作。默认设置通常很好，但是对于最后一个关于将安装位置添加到 PATH 的问题，回答是:</p><pre class="lv lw lx ly gt mj mk ml mm aw mn bi"><span id="0c61" class="kw kx iq mk b gy mo mp l mq mr">Do you wish the installer to prepend the <br/>Anaconda3 install location to PATH <br/>in your /home/haroldsoh/.bashrc ? <br/>[yes|no][no] &gt;&gt;&gt; yes</span></pre><p id="6c2e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要立即使用 Anaconda，请使用您的 bashrc:</p><pre class="lv lw lx ly gt mj mk ml mm aw mn bi"><span id="54e3" class="kw kx iq mk b gy mo mp l mq mr">source ~/.bashrc</span></pre><p id="98f8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，安装其他软件:</p><pre class="lv lw lx ly gt mj mk ml mm aw mn bi"><span id="f49c" class="kw kx iq mk b gy mo mp l mq mr">pip install tensorflow</span><span id="5d4b" class="kw kx iq mk b gy mt mp l mq mr">pip install keras</span></pre><h2 id="5c05" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">步骤 8:设置虚拟机服务器</h2><p id="fb35" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">打开到您的虚拟机的 SSH 会话。检查您是否有 Jupyter 配置文件:</p><pre class="lv lw lx ly gt mj mk ml mm aw mn bi"><span id="7be8" class="kw kx iq mk b gy mo mp l mq mr">ls ~/.jupyter/jupyter_notebook_config.py</span></pre><p id="15eb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果不存在，请创建一个:</p><pre class="lv lw lx ly gt mj mk ml mm aw mn bi"><span id="c2a3" class="kw kx iq mk b gy mo mp l mq mr">jupyter notebook --generate-config</span></pre><p id="5792" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将在您的 Jupyter 配置文件中添加几行内容；该文件是纯文本的，所以您可以通过您喜欢的编辑器(例如，vim、emacs)来完成。确保将端口号替换为您在步骤 5 中允许防火墙访问的端口号。</p><pre class="lv lw lx ly gt mj mk ml mm aw mn bi"><span id="7b99" class="kw kx iq mk b gy mo mp l mq mr">c = get_config()<br/>c.NotebookApp.ip = '*'<br/>c.NotebookApp.open_browser = False<br/>c.NotebookApp.port = &lt;Port Number&gt;</span></pre><p id="38a9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它应该是这样的:</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/7c7c65cb887725f5bea85cc86834695f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SwFnrGUO0gWSdO6z8oly_A.png"/></div></div></figure><h2 id="abc1" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">步骤 9:启动 Jupyter 笔记本</h2><p id="90c6" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">要运行 jupyter 笔记本，只需在您所在的 ssh 窗口中键入以下命令:</p><pre class="lv lw lx ly gt mj mk ml mm aw mn bi"><span id="2674" class="kw kx iq mk b gy mo mp l mq mr">jupyter-notebook --no-browser --port=&lt;PORT-NUMBER&gt;</span></pre><p id="fe39" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦运行该命令，它应该会显示如下内容:</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/655b98994a86b17962be0eeeff3c69d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dEi_LCzhpsRy7cDRppVE-A.png"/></div></div></figure><p id="7c58" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，要启动您的 jupyter 笔记本，只需在浏览器中键入以下内容:</p><pre class="lv lw lx ly gt mj mk ml mm aw mn bi"><span id="b633" class="kw kx iq mk b gy mo mp l mq mr">http://&lt;External Static IP Address&gt;:&lt;Port Number&gt;</span></pre><p id="b410" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其中，外部 ip 地址是我们设置为静态的 ip 地址，端口号是我们允许防火墙访问的地址。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/c25edb3ab923f45cd2253ea2f166d3c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ELRH-iVecVLtFo66jduxQ.png"/></div></div></figure><p id="4f72" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">恭喜你！您成功地在 GCP 上安装了 jupyter 笔记本！</p><p id="23e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们连线:<a class="ae ms" href="https://www.linkedin.com/in/aankul" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/aankul</a></p><p id="90c0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在媒体上跟随我:【https://medium.com/@aankul.a T2】</p><h2 id="0907" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">注意——看在上帝的份上！不要忘记停止虚拟机实例！！</h2><blockquote class="mx my mz"><p id="472d" class="jy jz na ka b kb kc kd ke kf kg kh ki nb kk kl km nc ko kp kq nd ks kt ku kv ij bi translated"><strong class="ka ir">编辑:<br/>所有面临'</strong><a class="ae ms" href="https://medium.com/@krishmahajan/at-the-last-step-after-putting-the-desired-static-ip-and-port-number-i-am-not-able-to-connect-4e31826a6012?source=responses---------6----------------" rel="noopener"><strong class="ka ir">ERR _ CONNECTION _ TIMED _ OUT</strong></a><strong class="ka ir">'错误的人。请在评论中尝试</strong> <a class="ae ms" href="https://medium.com/@basteloq?source=responses---------8----------------" rel="noopener">庸碌口才</a>的解决方案。</p></blockquote></div></div>    
</body>
</html>