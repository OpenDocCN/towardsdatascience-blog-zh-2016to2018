<html>
<head>
<title>Machine Learning: Predicting Customer Churn</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">机器学习:预测客户流失</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/machine-learning-predicting-customer-churn-dd38a42774cf?source=collection_archive---------0-----------------------#2016-10-03">https://towardsdatascience.com/machine-learning-predicting-customer-churn-dd38a42774cf?source=collection_archive---------0-----------------------#2016-10-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="46f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个模型的数据就是从这里得到的。这是一家身份不明的电信公司的客户数据。</p><p id="8a3f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用于预测流失的模型是K近邻。总体准确率为90%。根据该模型预测会留下的10个客户中有9个最终留下，而根据该模型预测会流失的10个客户中有9个最终流失。</p><h2 id="012e" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">模型</h2><p id="1a60" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">KNN是一个简单的算法。当出现新客户时，算法会在数据库中查找与目标客户最相似的客户。然后，它会根据那些相似的客户是否会流失来预测客户是否会流失。</p><p id="7954" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">其中包括一家电信公司的976名客户。其中125人被解雇，851人留下。</p><p id="3a57" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了制作模型，我将数据分成两部分。70%被放入训练集并用于创建模型。然后，该模型被用来预测另外30%的人是否搅拌。</p><p id="0440" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用于预测客户是否可获得的变量有:</p><ol class=""><li id="ad7d" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk lo lp lq lr bi translated">状态</li><li id="2497" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">账户长度</li><li id="ccdc" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">电话地区号</li><li id="f5b3" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">电话</li><li id="b9ea" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">国际计划</li><li id="5744" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">Vmail计划</li><li id="62a0" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">邮件信息</li><li id="bfae" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">日分钟</li><li id="bc0e" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">日间通话</li><li id="7fea" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">日间费用</li><li id="e0c5" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">前夕分钟前夕电话</li><li id="1673" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">前夕费用</li><li id="c37e" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">夜晚分钟</li><li id="3b66" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">夜间通话</li><li id="1728" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">夜间收费</li><li id="7f64" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">国际分钟</li><li id="907d" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">国际呼叫</li><li id="1bec" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">国际收费</li><li id="1ffc" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">客户服务器调用</li></ol><p id="6f22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">KNN只处理数字变量，所以对于这个模型，我将删除所有非数字变量。(有一些使用分类变量的技术，比如一键编码，但是我们在这里忽略它们)。</p><p id="5375" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">模特表现如何？结果如下:</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/c3d0f58a6d6386b27b57770970b1330e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*mKO0Fr4maEpwkKnGs5IaYQ.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk">Accuracy = 89%</figcaption></figure><h2 id="f8b6" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">优化模型</h2><p id="f9b1" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">89%的初始准确性是不错的，但是如果我们仔细选择k值和用于进行预测的变量，模型可以变得更准确。</p><p id="4147" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我最初用的是三的K。这意味着该模型将寻找三个最相似的客户，并使用它们来预测客户是否会流失。</p><p id="6e4e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果K太小，模型会“过拟合”。这意味着该模型将在您用来创建它的数据上表现良好，但当它遇到新的观察结果时，它将表现不佳。如果K太高，模型的表现也会很差。K的最佳值是通过选择一个不太高也不太低的值来选择的。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/fe49921b21fc96f5498c5f65ee2dce2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*0Vv5WkIuKORzNtOmiqNZ4A.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk">The Accuracy is highest when k = 5</figcaption></figure><p id="fa25" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如上图所示，模型精度稳步增加，直到在5处达到峰值，然后开始下降。因此，k的最佳值为5。</p><p id="14d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用k = 5后，模型性能提高到90%</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mk"><img src="../Images/c9e6fca95bbdd131592e9c2a3e8be721.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*aD_iknaKHgChISdmtYdnbQ.png"/></div></div></figure><h2 id="d9ef" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">变量选择</h2><p id="e266" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">并非所有变量都有助于预测客户是否会流失。例如，客户的电话号码在预测中完全没有用，因为它对每个客户都是唯一的。</p><p id="4a93" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一种被称为信息增益的技术被用来观察哪些变量在预测客户流失方面最重要。Information gains单独查看每个变量，并询问“如果我们单独按该变量分割数据集，预测结果会容易多少”。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mp"><img src="../Images/2b9c73d5047b1dd97d05f6354950dc96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ihRIlRSinsyyNXjfZyMPw.png"/></div></div></figure><p id="280c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这表明客户服务呼叫、呼叫分钟数和使用的信用是最能提供信息的变量。这是可以理解的，一个经常给客服打电话的客户可能对服务不满意，所以更有可能流失。而打很多电话的人可能对服务很满意，因此不太可能流失。所以这三个变量告诉我们很多关于客户流失的可能性。</p><h2 id="35da" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">概率阈值</h2><p id="134a" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">KNN给出了特定客户流失的概率。默认情况下，阈值通常设置为0.5。这意味着任何概率超过0.5的人都有可能流失。如果你降低概率阈值，更多的人将被预测流失，这给你更多的“风险客户”的目标。然而，这增加了没有风险的客户通过门槛并被预测为流失的可能性。</p><p id="52e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">概率阈值的选择将基于业务环境，如果公司想要以大量客户为目标，则将设置低阈值。然而，如果公司想更有效地支出，就要设定更高的门槛，以更少的顾客为目标。</p><h2 id="064a" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">业务影响。</h2><p id="4915" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">有了这个模型，人们可以预测哪些客户有流失的风险。然后，公司可以采取措施留住这些客户，例如:</p><ol class=""><li id="8f5d" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk lo lp lq lr bi translated">客户满意度调查可以发送给“风险客户”,以了解他们对公司的看法以及可能的投诉。</li><li id="55e8" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">可以向有风险的客户提供折扣或其他激励措施，以试图留住他们。</li><li id="7976" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">保留营销:处于风险中的客户可以被特别添加到保留营销列表中，以便谷歌广告、脸书、Twitter或电子邮件活动可以专门针对他们。</li><li id="96eb" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">客户流失的可能性低，可以从重新定位名单中删除，这可以节省营销成本。</li></ol><p id="4033" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果公司对其客户进行了细分，并了解具有最高终身价值的客户类型。那么最有价值的处于风险中的客户就可以用上述技术来专门锁定。</p><h2 id="e3ae" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">结论。</h2><p id="42bb" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">信息很多，但洞察力很少。一个收集数据并知道如何从这些数据中获得洞察力的公司可以更深入地了解客户。</p><p id="99ec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">公司的生死取决于他们的客户，真正以客户为中心意味着了解你的客户，并以独特的方式对待每一个客户，尤其是最有价值的客户。关于你的客户的大量可用数据。没有理由以一刀切的方式对待所有顾客。</p><p id="38a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你在经营一家新公司，你想更多地了解你的客户。了解你最有价值的客户的特征，找出你的风险客户，或者学习如何正确地收集和分析关于你的客户的数据。在sayhello@techinnover.com打电话给我，或者在这里拜访我们 <a class="ae mr" href="http://www.techinnover.com" rel="noopener ugc nofollow" target="_blank"> <em class="mq">。</em> </a></p><p id="e873" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mq"> P.p.s模型是在R中构建的，如果你想要一个包含所有代码的脚本，你可以在twitter上DM我</em> <a class="ms mt ep" href="https://medium.com/u/dc19a11f6084?source=post_page-----dd38a42774cf--------------------------------" rel="noopener" target="_blank"> <em class="mq">德林·阿德巴约</em> </a></p></div></div>    
</body>
</html>