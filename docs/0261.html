<html>
<head>
<title>Python Environment Management with Conda (Python 2 + 3, Using Multiple Versions of Python)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Conda 的 Python 环境管理(Python 2 + 3，使用多个版本的 Python)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/environment-management-with-conda-python-2-3-b9961a8a5097?source=collection_archive---------0-----------------------#2017-04-07">https://towardsdatascience.com/environment-management-with-conda-python-2-3-b9961a8a5097?source=collection_archive---------0-----------------------#2017-04-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jn jo jp jq"><div class="bz fp l di"><div class="jr js l"/></div><figcaption class="jt ju gj gh gi jv jw bd b be z dk">Environment Management with Conda (Python + Configuring Ipython/Jupyter)</figcaption></figure><p id="3d8b" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">遇到类似下图中的 ImportError 可能会很烦人。</p><figure class="kw kx ky kz gt jq gh gi paragraph-image"><div class="gh gi kv"><img src="../Images/2aa34aa9bf2df9ef3d4679e396c0ffb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/format:webp/1*PmR7gtxmwEAxnz9AeTH1vA.png"/></div></figure><p id="8184" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">幸运的是，Anaconda 使得用 conda 的包管理器功能安装包变得很容易。如果您需要复习，软件包管理器是一个自动安装、更新和删除软件包的工具。虽然 conda 是一个包和环境管理器，但让我们首先回顾一下 Conda 的包管理器功能，然后重点介绍环境管理器功能。</p><h2 id="e5f5" class="lc ld iq bd le lf lg dn lh li lj dp lk ki ll lm ln km lo lp lq kq lr ls lt lu bi translated"><strong class="ak">安装包</strong></h2><p id="5580" class="pw-post-body-paragraph jx jy iq jz b ka lv kc kd ke lw kg kh ki lx kk kl km ly ko kp kq lz ks kt ku ij bi translated">打开命令提示符/anaconda 提示符(windows)或终端(mac/linux)并运行下面的命令。你可以用<code class="fe ma mb mc md b">numpy</code>替换任何你想安装的包。</p><pre class="kw kx ky kz gt me md mf mg aw mh bi"><span id="a03d" class="lc ld iq md b gy mi mj l mk ml">conda install numpy</span></pre><h2 id="c968" class="lc ld iq bd le lf lg dn lh li lj dp lk ki ll lm ln km lo lp lq kq lr ls lt lu bi translated">卸载软件包</h2><p id="97eb" class="pw-post-body-paragraph jx jy iq jz b ka lv kc kd ke lw kg kh ki lx kk kl km ly ko kp kq lz ks kt ku ij bi translated">运行以下命令卸载软件包。您可以用<code class="fe ma mb mc md b">numpy</code>替换您想要卸载的任何包。</p><pre class="kw kx ky kz gt me md mf mg aw mh bi"><span id="bc21" class="lc ld iq md b gy mi mj l mk ml">conda uninstall numpy</span></pre><h2 id="59bc" class="lc ld iq bd le lf lg dn lh li lj dp lk ki ll lm ln km lo lp lq kq lr ls lt lu bi translated">更新包</h2><p id="d908" class="pw-post-body-paragraph jx jy iq jz b ka lv kc kd ke lw kg kh ki lx kk kl km ly ko kp kq lz ks kt ku ij bi translated">运行下面的命令来更新包。你可以用<code class="fe ma mb mc md b">scikit-learn</code>替换任何你想更新的包。</p><pre class="kw kx ky kz gt me md mf mg aw mh bi"><span id="83ee" class="lc ld iq md b gy mi mj l mk ml">conda update scikit-learn</span></pre><h2 id="de89" class="lc ld iq bd le lf lg dn lh li lj dp lk ki ll lm ln km lo lp lq kq lr ls lt lu bi translated">康达 vs 皮普</h2><p id="5bd4" class="pw-post-body-paragraph jx jy iq jz b ka lv kc kd ke lw kg kh ki lx kk kl km ly ko kp kq lz ks kt ku ij bi translated">Pip 是一个 Python 包管理器，代表“Pip 安装包”，通常与<a class="ae mm" href="https://virtualenv.pypa.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> <strong class="jz ir"> virtualenv </strong> </a>(一个用于创建隔离环境的工具)结合使用。</p><p id="b311" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">大多数时候(除了一些例外),通过 conda 或通过 pip 安装包没有太大的区别。这是因为 pip 包也可以安装到 Conda 环境中。</p><pre class="kw kx ky kz gt me md mf mg aw mh bi"><span id="589a" class="lc ld iq md b gy mi mj l mk ml">conda install numpy<br/>pip install numpy</span></pre><p id="4c96" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">这不是一个关于 conda 与 pip 的讨论，因为 Jake VanderPlas 已经非常广泛地讨论了这个问题，而是为什么你可以通过 pip 或者 conda 来安装软件包。</p><h2 id="3faa" class="lc ld iq bd le lf lg dn lh li lj dp lk ki ll lm ln km lo lp lq kq lr ls lt lu bi translated">为什么需要多个 Conda/Python 环境。</h2><p id="51ed" class="pw-post-body-paragraph jx jy iq jz b ka lv kc kd ke lw kg kh ki lx kk kl km ly ko kp kq lz ks kt ku ij bi translated">假设你有多个项目，它们都依赖于一个库(Pandas，Numpy 等)。如果您升级一个包，它可能会破坏依赖旧版本包的其他项目，因为旧项目的语法可能会被否决或过时。你该怎么办？建立一个虚拟环境。它允许你从一个项目到另一个项目中分离出将要使用的包、依赖项和版本。</p><p id="d557" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">对于 python 用户来说，虚拟环境的一个常见用途是拥有独立的 Python 2 和 3 环境。例如，我在加州大学圣地亚哥分校的几个同学最近开设了一门机器学习课，其中一位教授用 Python 3 来布置作业。不过另一个班有个教授在 Python 2 里布置作业。因此，他们不得不在不同的类项目中频繁地在 python 2 和 3 之间切换。至此，让我们进入 conda 环境命令。我建议您在单独的标签中打开<a class="ae mm" href="https://www.youtube.com/watch?v=rFCBiP9Gkoo" rel="noopener ugc nofollow" target="_blank">视频，观看命令的运行。</a></p><p id="5cf4" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated"><strong class="jz ir">创建新环境</strong></p><p id="31d7" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">下面的命令在 python 版中创建了一个名为<code class="fe ma mb mc md b">subscribe</code>的 conda 环境。您可以用<code class="fe ma mb mc md b">subscribe</code>来代替您想要命名的环境。</p><pre class="kw kx ky kz gt me md mf mg aw mh bi"><span id="9443" class="lc ld iq md b gy mi mj l mk ml">conda create --name subscribe python=3.6</span></pre><p id="3638" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">请记住，一旦激活(进入)该环境，您将需要在该环境中安装额外的软件包。您在根环境中拥有的包不一定就是您将在新环境中拥有的包，除非您安装它们。</p><p id="1971" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">您还可以创建一个包含多个包的环境。这也让您可以选择在以后需要时安装额外的软件包。</p><pre class="kw kx ky kz gt me md mf mg aw mh bi"><span id="ff90" class="lc ld iq md b gy mi mj l mk ml">conda create --name chooseAnotherName python=3.6 numpy pandas scipy</span></pre><p id="68cf" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated"><strong class="jz ir">进入环境</strong></p><p id="8f7d" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">如果您的环境名称不是<code class="fe ma mb mc md b">subscribe</code>，您将需要用<code class="fe ma mb mc md b">subscribe</code>替换您的环境名称。</p><p id="85b1" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">窗口:</p><pre class="kw kx ky kz gt me md mf mg aw mh bi"><span id="2095" class="lc ld iq md b gy mi mj l mk ml">activate subscribe</span></pre><p id="a674" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">Mac:</p><pre class="kw kx ky kz gt me md mf mg aw mh bi"><span id="b75c" class="lc ld iq md b gy mi mj l mk ml">source activate subscribe</span></pre><p id="3b3d" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated"><strong class="jz ir">离开一个环境</strong></p><p id="edba" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">如果您的环境名称不是<code class="fe ma mb mc md b">subscribe</code>，您将需要用<code class="fe ma mb mc md b">subscribe</code>替换您的环境名称。</p><p id="0b20" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">窗口:</p><pre class="kw kx ky kz gt me md mf mg aw mh bi"><span id="8fd4" class="lc ld iq md b gy mi mj l mk ml">deactivate subscribe</span></pre><p id="48e0" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">Mac:</p><pre class="kw kx ky kz gt me md mf mg aw mh bi"><span id="6021" class="lc ld iq md b gy mi mj l mk ml">source deactivate subscribe</span></pre><p id="c60b" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated"><strong class="jz ir">列出您的环境</strong></p><p id="78a4" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">这个命令向您展示了所有这是一个非常有用的命令，可以查看您有什么样的环境，也可以查看您处于什么样的 conda 环境中。</p><pre class="kw kx ky kz gt me md mf mg aw mh bi"><span id="9521" class="lc ld iq md b gy mi mj l mk ml">conda env list</span></pre><figure class="kw kx ky kz gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mn"><img src="../Images/c17b1e892c4924534ef9ee9c74300963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E1q3_I_hr_fLBTDdOopjfw.png"/></div></div></figure><p id="9f18" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated"><strong class="jz ir">移除一个环境</strong></p><p id="2a5a" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">如果您想要删除的环境名称不是<code class="fe ma mb mc md b">subscribe</code>，您需要用<code class="fe ma mb mc md b">subscribe</code>替换您想要删除的环境名称。</p><pre class="kw kx ky kz gt me md mf mg aw mh bi"><span id="59da" class="lc ld iq md b gy mi mj l mk ml">conda env remove --name subscribe</span></pre><p id="24c8" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">如果你对这部分有疑问，请参考<a class="ae mm" href="https://conda.io/docs/using/envs.html" rel="noopener ugc nofollow" target="_blank">文档</a>，留下评论或者参考上面的视频。</p><h2 id="91f9" class="lc ld iq bd le lf lg dn lh li lj dp lk ki ll lm ln km lo lp lq kq lr ls lt lu bi translated"><strong class="ak">在 IPython 笔记本中同时使用 Python 2.x 和 Python 3.x 环境</strong></h2><p id="7bb1" class="pw-post-body-paragraph jx jy iq jz b ka lv kc kd ke lw kg kh ki lx kk kl km ly ko kp kq lz ks kt ku ij bi translated">虽然这篇文章的这一部分很大程度上是从<a class="ae mm" href="http://stackoverflow.com/questions/30492623/using-both-python-2-x-and-python-3-x-in-ipython-notebook/30492913#30492913" rel="noopener ugc nofollow" target="_blank"> stackoverflow </a>中截取和改进的，但我觉得回顾一下人们遇到的一些技术问题是很重要的。主要思想是拥有多个 ipython 内核。包<strong class="jz ir"> nb_conda_kernels </strong>会自动检测笔记本内核的不同 conda 环境，并自动注册。</p><ol class=""><li id="55c4" class="ms mt iq jz b ka kb ke kf ki mu km mv kq mw ku mx my mz na bi translated">确保您安装了 anaconda 4.1.0 或更高版本。打开一个新的终端，通过键入以下命令检查您的 conda 版本</li></ol><figure class="kw kx ky kz gt jq gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/f4d597813def4c3f2e6b34ac5dd38f1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:424/format:webp/1*WHZf8_R9KLe1o8TzuSnKKg.png"/></div><figcaption class="jt ju gj gh gi jv jw bd b be z dk">checking conda version</figcaption></figure><p id="4b9b" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">如果你低于 anaconda 4.1.0，输入<strong class="jz ir"> conda update conda </strong></p><p id="8274" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">2.接下来，我们通过键入以下命令来检查是否有库<strong class="jz ir"> nb_conda_kernels </strong></p><figure class="kw kx ky kz gt jq gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/d9fcbba687483e0ea9cc234cd960e9e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:284/format:webp/1*jMz0BG6X-zJaFQ4nVFim5A.png"/></div><figcaption class="jt ju gj gh gi jv jw bd b be z dk">Checking if we have nb_conda_kernels</figcaption></figure><p id="f111" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">3.如果没有看到<strong class="jz ir"> nb_conda_kernels </strong>类型</p><figure class="kw kx ky kz gt jq gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/5446bd6b77634b241e4c494f26c61947.png" data-original-src="https://miro.medium.com/v2/resize:fit:844/format:webp/1*UfZsLdaUTbXR1eIUmcP-8w.png"/></div><figcaption class="jt ju gj gh gi jv jw bd b be z dk">Installing nb_conda_kernels</figcaption></figure><p id="54a6" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">4.如果您正在使用 Python 2 并且想要一个单独的 Python 3 环境，请键入以下内容</p><figure class="kw kx ky kz gt jq gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/7874360cf7a3baef1e043db9b8616044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*qvdni8fqKvstPJ1sLd5kYQ.png"/></div><figcaption class="jt ju gj gh gi jv jw bd b be z dk">py36 is the name of the environment. You could literally name it anything you want.</figcaption></figure><p id="1fdd" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">如果您正在使用 Python 3 并且想要一个单独的 Python 2 环境，您可以键入以下内容。</p><figure class="kw kx ky kz gt jq gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/a308d009e54d712373efd1c59f7d0c66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*-735jhYQvGzxNlboVDtDuQ.png"/></div><figcaption class="jt ju gj gh gi jv jw bd b be z dk">py27 is the name of the environment. It uses python 2.7.</figcaption></figure><p id="b813" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">5.关闭您的终端并打开一个新的终端。jupyter 型笔记本</p><p id="3428" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">6.单击 new，您将看到列出了您的虚拟环境。</p><figure class="kw kx ky kz gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi ng"><img src="../Images/5911eb43f2cad3ab246d72a8541de353.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MIvLNYgwHRInyRh_67tQEw.png"/></div></div></figure><p id="cdf7" class="pw-post-body-paragraph jx jy iq jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku ij bi translated">如果你有任何问题，请在这里或者在<a class="ae mm" href="https://www.youtube.com/watch?v=rFCBiP9Gkoo" rel="noopener ugc nofollow" target="_blank"> youtube 视频</a>评论中告诉我！</p></div></div>    
</body>
</html>