<html>
<head>
<title>Using Moving Averages to determine Batsmen Form in game of Cricket</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用移动平均法确定板球比赛中击球手的状态</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/https-medium-com-satnalikamayank12-using-moving-averages-to-determine-batsmen-form-d165c08be809?source=collection_archive---------0-----------------------#2016-12-06">https://towardsdatascience.com/https-medium-com-satnalikamayank12-using-moving-averages-to-determine-batsmen-form-d165c08be809?source=collection_archive---------0-----------------------#2016-12-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/0c294f68127965c629fd49c4c0162d25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CaEQKMvzuBpzACyxQK8FZA.jpeg"/></div></div></figure><div class=""/><p id="a797" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">尝试在板球领域使用简单的算法交易策略来确定击球手的当前形式。</p><p id="e20a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">滚动平均值:</strong>它是从数据值的连续段中得到的一系列平均值，或者更简单地说，平均值是通过取一些前几天的值计算出来的，比如说过去10天(对于短期移动平均值)或者过去50天(对于长期移动平均值)。第二天的移动平均值通过排除第一天的值并包括今天或当前日期的最新值来计算。10日均线是通过找出前10天的收盘价作为第一个数据点。下一个数据点将删除最早的价格，添加第11天的价格，然后取平均值。MAs最常见的应用是识别趋势方向，即价值是上升还是下降。</p><p id="e3e2" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">股票交易中的交叉策略:</strong>投资者使用移动平均线作为指标来检测股票价格的运动，即它是上涨还是下跌。涉及均线的一个基本策略是交叉技术。</p><p id="83f4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">取2 MA的一个长期(比如50天)和一个短期(比如10天)。交叉点是曲线相交的点，即短期移动平均线高于长期移动平均线的点，反之亦然。</p><p id="5b21" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当短期移动平均线越过长期移动平均线(短期移动平均线&gt;长期移动平均线)时，买入信号被触发，这表明股价开始上涨。同样，当短期均线穿过长期均线下方时，就会触发卖出信号(短期&lt; Long Term MA) indicating prices are starting to go down and the investor should steer clear from the stock and sell the stocks if any.</p><p id="c21d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">将其应用于击球手</strong>:击球手通常被称为状态良好(表现良好)或状态不佳(表现不佳)。可以用股票市场和板球生态系统来进行类比，玩家类似于股票公司，他们的得分类似于股票价格。在板球比赛中使用的策略没有什么不同。我们计算2个MAs:一个短期(比如4局)和一个长期(比如15局)。我们用击球手在特定局中的得分来代替价格。</p><p id="b613" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果有一个交叉，其中短期移动平均线变得高于长期移动平均线，这表明击球手将处于良好状态，并将在接下来的几局中取得好成绩，并将处于良好状态。类似地，如果出现交叉，短期移动平均线变得低于长期移动平均线，击球手在接下来的几场比赛中表现不佳。</p><p id="dfdd" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">导入所需的模块</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="14e5" class="lf lg jb lb b gy lh li l lj lk">import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>%matplotlib inline</span></pre><p id="c3d9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">读取记录并计算15局(长)和4局(短)的移动平均值。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="db90" class="lf lg jb lb b gy lh li l lj lk">df1 = pd.read_csv("51880batting.csv")<br/>#player 51880 from statsguru is Chris Gayle<br/>maLong  = df1['runs'].rolling(window = 15, center = False).mean()<br/>maShort = df1['runs'].rolling(window = 4, center = False).mean()</span></pre><p id="d2ea" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">绘图:</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="6e76" class="lf lg jb lb b gy lh li l lj lk">plt.plot(df1['runs'].rolling(window=15,center=False).mean(),color = 'k')<br/>plt.plot(df1['runs'].rolling(window=4,center=False).mean(), color= 'g')<br/>plt.show()</span></pre><figure class="kw kx ky kz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ll"><img src="../Images/95f15d0cbd6ff5417464fb163cc1d9fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qcJbUg60VUAInx90iFx1Xg.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">Long Term and Short Term MAs for Chris Gayle (WI Batsman)</figcaption></figure><figure class="kw kx ky kz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lq"><img src="../Images/97d50120e152078bd262a490566cd34e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MzkHc9-7dT2ZWXllRnp2vA.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">Long Term and Short Term MAs for Virat Kohli (IND Batsman)</figcaption></figure><p id="5746" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果短期均线大于长期均线(相当于买入信号)，找出交叉点，计算接下来3局的平均值。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="20fb" class="lf lg jb lb b gy lh li l lj lk">sp = 0 <br/>snp = 0<br/>playCnt = 0<br/>noplayCnt = 0<br/>x = 15               #long term averages begin from index 15<br/>while( x &lt;= 260):    #number of innings is 263 <br/> if(maLong[x] &lt; maShort[x]):<br/>  if(maLong[x+1] &gt; maShort[x+1]):   #crossover detected<br/>    print ‘no play at’ , x<br/>    snp= snp +df1[‘runs’][x+1] + df1[‘runs’][x+2] + df1[‘runs’][x+3]<br/>    noplayCnt = noplayCnt+3<br/> <br/> if(maLong[x] &gt; maShort[x]):<br/>  if(maLong[x+1] &lt; maShort[x+1]):   #crossover detected<br/>   print ‘play at’ ,x<br/>   sp = sp + df1[‘runs’][x+1] + df1[‘runs’][x+2] + df1[‘runs’][x+3] <br/>   playCnt = playCnt+3<br/> x = x+1</span></pre><p id="1a2c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">计算和显示平均值:</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="1a3f" class="lf lg jb lb b gy lh li l lj lk">#overall career average<br/>overallAvg = df1[‘runs’].mean()</span><span id="b41c" class="lf lg jb lb b gy lr li l lj lk">#average over the next 3 innings after positive or 'BUY' signal<br/>playAvg = sp/playCnt</span><span id="6b58" class="lf lg jb lb b gy lr li l lj lk">#average over the next 3 innings after negative or 'SELL' signal noPlayAvg = snp/noplayCnt <br/>     </span><span id="6e15" class="lf lg jb lb b gy lr li l lj lk">print 'Career average: ', overallAvg<br/>print 'Positive Signal average: ', playAvg<br/>print 'Negative Signal average: ', noPlayAvg<br/></span></pre><p id="f7f8" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">克里斯·盖尔的结果</p><blockquote class="ls lt lu"><p id="5282" class="jy jz lv ka b kb kc kd ke kf kg kh ki lw kk kl km lx ko kp kq ly ks kt ku kv ij bi translated">职业生涯平均:34.928030303 <br/>正信号平均:48 <br/>负信号平均:32</p></blockquote><p id="dbe3" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Virat Kohli的结果:</p><blockquote class="ls lt lu"><p id="799a" class="jy jz lv ka b kb kc kd ke kf kg kh ki lw kk kl km lx ko kp kq ly ks kt ku kv ij bi translated">职业平均:45.0595238095 <br/>正信号平均:59 <br/>负信号平均:30</p></blockquote><p id="22a4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在击球手状态良好的比赛中，平均得分(48分和59分)分别比职业生涯平均得分(35分和45分)高得多。这可能会进一步发展使用WMA(加权移动平均)，其中最近几局被赋予更高的权重年龄，同时计算平均值，我相信会给出更好的结果。</p><p id="322a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完整的代码和数据集，请访问我的<a class="ae lz" href="https://github.com/mayanksatnalika" rel="noopener ugc nofollow" target="_blank"> Github简介</a>。</p><p id="4926" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所用数据来源于<a class="ae lz" href="http://stats.espncricinfo.com/ci/engine/stats/index.html" rel="noopener ugc nofollow" target="_blank">criinfo stats guru</a>。</p><p id="25c0" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要进一步了解移动平均线和交叉策略，请访问Investopedia 上的<a class="ae lz" href="http://www.investopedia.com/university/movingaverage/movingaverages4.asp" rel="noopener ugc nofollow" target="_blank">链接。</a></p><p id="c508" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你喜欢这篇文章，请点击下面的小心形按钮。</p></div></div>    
</body>
</html>