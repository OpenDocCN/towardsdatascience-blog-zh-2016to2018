# 线性回归:当你想在爱荷华州开一家新的酒店时该怎么做

> 原文：<https://towardsdatascience.com/linear-regressions-or-what-to-do-when-you-want-to-open-a-new-liquor-store-in-iowa-25fa619331b9?source=collection_archive---------0----------------------->

你是说爱荷华州的一家酒店？多好的主意啊！你说你不知道你想在哪里打开它？好吧，让我帮你缩小范围！

你看，爱荷华州碰巧在 data.Iowa.gov 时间[发布了他们所有的酒类销售数据。它实际上足够详细，我可以告诉你，托莱多的 Twin Town Liquor 在 2015 年购买了 16 瓶 Dekuyper Sour Apple Pucker Traveler，州政府从这笔交易中获得了 50.40 美元。](http://data.Iowa.gov)

让我们来看看爱荷华州有多少钱在流动:

![](img/9b4847eb6b22cca9576469222a3b07e1.png)

[https://public.tableau.com/views/IowaLiquorSales2015/Sheet1?:embed=y&:display_count=yes&publish=yes](https://public.tableau.com/views/IowaLiquorSales2015/Sheet1?:embed=y&:display_count=yes&publish=yes)

从技术上讲，我们谈论的是一个月内所有产品支付给州政府(爱荷华州唯一的酒类经销商)的成本。我们将不得不用这个来代表利润。我的目标是查看给定城市中每家商店的平均购买量，以及如果再增加一家商店会是什么样子。一旦你找到了价值最高的产品，你就必须做更多的市场调查，找出竞争对手，估计零售价格(利润率)，并准确地计算出放在哪里。我们只关注第一部分:找到我们的目标城市。

游戏的名字叫“线性回归”。基本上，这是一种获取多种输入并预测一种结果的方法。需要大量的假设来确保这是正确的模型。我们将跳过这一步，讨论如何用 Python 实现它。

直接进入主题，我们可以看看清理后的数据是什么样的，以及我们必须处理哪些列。

Some of the features I narrowed down to. Let’s test them out.

上面你可以看到我的精炼数据集，我缩小到每月每个商店的购买总量。使用由 https://www.census.gov/[愉快地提供的一些额外的人口信息，我添加了每个商店人口的列。我们将按城市对每月信息进行平均，以找到我们最好看的位置。首先，我们从数据和我们希望能够用于预测的特征中创建我们的目标。特征是变量，如人口、数量或前几个月的销售额，或我们认为可能预测年度总销售额的任何其他因素。我已经有了一些想法，但最终决定使用每家商店的人口，一个城市中有多少家商店进行竞争，以及一月、二月和三月的数据，尝试看看使用这三个月是否可以预测全年。](https://www.census.gov/)

很好，现在有了我们的预测变量(特性)，让我们建立模型，看看我们是否可以计算出我们的目标平均年商店销售额。

对我们有好处。我们的模型解释了平均年商店销售额变化的 91%!但是，我们还希望确保我们的误差尽可能低(这里显示的是均方根误差)，这意味着我们需要确保我们用来预测的一切实际上都有助于模型。让我们引入套索正则化来告诉我们哪些变量是重要的。

好吧。看起来销量不如销量有预测性。它们实际上应该是相互作用的变量，因为它们关系非常密切(唯一的区别是单位体积的价格)。我们会去掉这些，还有城市中的平均商店，只保留每个商店的销售额和人口。

好东西！我们使用套索正则化来去除一些实际上损害我们模型的变量。精确度提高了，我们的误差降低了。但这还不是正式的。这些都是我们用来建立模型的数据。现在我们需要在模型从未见过的数据上测试它。

不错！干得好，先生们。剩下唯一要做的就是做我们 2016 年的预测！为此，您只需重新训练完整数据集上的数据(不要将其分为测试和训练)，然后对 2016 年的变量使用 lm.predict(X_2016)。您应该会得到一个类似这样的列表:

![](img/c6c36a05440a4daa425a57fb4c79093f.png)

我们开个酒铺吧！

你可以在这里查看我的代码:[https://github.com/dale-wahl/Iowa_liquor_sales](https://github.com/dale-wahl/Iowa_liquor_sales)我建议坚持写博客要点文件夹中的代码，但是如果你有点虐待狂，整本书都在那里。