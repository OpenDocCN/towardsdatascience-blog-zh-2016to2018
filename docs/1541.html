<html>
<head>
<title>How Did We Build Book Recommender Systems in an Hour Part 1 — The Fundamentals</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们如何在一小时内建立图书推荐系统第一部分——基础</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-did-we-build-book-recommender-systems-in-an-hour-the-fundamentals-dfee054f978e?source=collection_archive---------3-----------------------#2017-09-17">https://towardsdatascience.com/how-did-we-build-book-recommender-systems-in-an-hour-the-fundamentals-dfee054f978e?source=collection_archive---------3-----------------------#2017-09-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a9fe570a4594cb5c6ac4308a057a7a39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BE61Ks1IZdXMv2MnIKSH1g.png"/></div></div></figure><p id="cfbf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">几乎每个人都有过这样的网上体验:网站为了未来的销售或持续的流量而提供个性化的推荐。亚马逊告诉你“买了这个商品的顾客也买了”，Udemy告诉你“看过这个课程的学生也看过”。2009年，网飞向一个开发团队颁发了100万美元的奖金，奖励其将公司推荐系统的准确率提高了10%的算法。</p><p id="c7d0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如今，构建推荐系统需要分析、机器学习和软件工程方面的专业知识，学习新的技能和工具既困难又耗时。在这篇文章中，我们将从头开始，讲述Python中的一些基本技术和实现。在以后的文章中，我们将介绍更复杂的方法，如基于内容的过滤和基于协作的过滤。</p><p id="abd6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以，如果你想从头开始学习如何构建推荐系统，那就开始吧。</p><h2 id="edf4" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">数据</h2><p id="306f" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated"><a class="ae lu" href="http://www2.informatik.uni-freiburg.de/~cziegler/BX/" rel="noopener ugc nofollow" target="_blank"> Book-Crossings </a>是由蔡-尼古拉斯·齐格勒编制的图书评分数据集。它包含90，000个用户对270，000本书的110万个评级。等级从1到10。</p><p id="f590" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该数据由三个表组成:评级、图书信息和用户信息。我从<a class="ae lu" href="http://www2.informatik.uni-freiburg.de/~cziegler/BX/" rel="noopener ugc nofollow" target="_blank">这里</a>下载了这三张表。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="fb44" class="kw kx iq ma b gy me mf l mg mh">import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt</span><span id="f11a" class="kw kx iq ma b gy mi mf l mg mh">books = pd.read_csv('BX-Books.csv', sep=';', error_bad_lines=False, encoding="latin-1")<br/>books.columns = ['ISBN', 'bookTitle', 'bookAuthor', 'yearOfPublication', 'publisher', 'imageUrlS', 'imageUrlM', 'imageUrlL']<br/>users = pd.read_csv('BX-Users.csv', sep=';', error_bad_lines=False, encoding="latin-1")<br/>users.columns = ['userID', 'Location', 'Age']<br/>ratings = pd.read_csv('BX-Book-Ratings.csv', sep=';', error_bad_lines=False, encoding="latin-1")<br/>ratings.columns = ['userID', 'ISBN', 'bookRating']</span></pre><h2 id="6ea7" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">评级数据</h2><p id="c8a2" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">评级数据集提供了用户对图书的评级列表。它包括1，149，780条记录和3个字段:userID、ISBN和图书评级。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mj"><img src="../Images/fd9b0bcf3079b3239576c5303a44836a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-JY1qQZSEiVLSY6oqGK8Fw.png"/></div></div></figure><h2 id="e124" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">收视率分布</h2><p id="6a5f" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">收视率分布很不均匀，绝大多数收视率都是0。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/8e03ac6d931aa6f8a4ade8223e05bd4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TP8n6pkFgxyBTqWHXoppcQ.png"/></div></div></figure><h2 id="c489" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">书籍数据</h2><p id="d61a" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">图书数据集提供了图书的详细信息。它包括271，360条记录和8个字段:ISBN、书名、图书作者、出版商等。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ml"><img src="../Images/e51943e8dd5312e235e91dc2eceba82a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WySwO6eBIYxxYAgdnFeaNg.png"/></div></div></figure><h2 id="0998" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">用户数据</h2><p id="cf52" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">该数据集提供用户人口统计信息。它包括278，858条记录和3个字段:用户id、位置和年龄。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/7a68e902e6e9695bbea1ca83154a911a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*ASmSa5RhOn1frsJxeSVCfQ.png"/></div></figure><h2 id="0813" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">年龄分布</h2><p id="add2" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">最活跃的用户是那些20-30岁的人。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/e3a17e9720ca5540284bfd0543925721.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*PNgJzeOTYyTnnoTkrtVcXA.png"/></div></div></figure><h2 id="269b" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">基于评级计数的建议</h2><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/81840b2da8ffd80e97a692b5c2079c0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5KCFF46X1_mcbwjOWR0Rfw.png"/></div></div></figure><p id="3177" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ISBN为“0971880107”的书获得了最多的评分。我们来看看是什么书，前5都有哪些书。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mp"><img src="../Images/03f0d401140c0a3aa675f8efb3185260.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GYQakjLj1ayz453fATm2XQ.png"/></div></div></figure><p id="aa0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这个数据集中获得最多评分的书是里奇·沙佩罗的《野性的阿尼姆斯》。这五本书有一个共同点，那就是它们都是小说。这位推荐者认为小说很受欢迎，可能会获得更高的收视率。而如果有人喜欢《可爱的骨头:一部小说》，我们大概也应该向他(或她)推荐《野阿尼姆斯》。</p><h2 id="4da8" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">基于相关性的建议</h2><p id="6c62" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">我们使用皮尔逊相关系数来衡量两个变量之间的线性相关性，在我们的例子中，两本书的评级。</p><p id="ae19" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们需要找出平均评分，以及每本书获得的评分数。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/fa7f79f21783b0dd1b79b7a2c859389f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I88iTWAr7VhK0IcQN5TlYA.png"/></div></div></figure><p id="f102" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">观察结果</strong>:</p><p id="aec4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这个数据集中，获得最多评价的书根本没有得到很高的评价。因此，如果我们使用基于评分的推荐，我们肯定会犯错误。所以，我们需要一个更好的系统。</p><h2 id="fe28" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">为确保统计显著性，评级低于200的用户和评级低于100的图书被排除在外。</h2><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mr"><img src="../Images/1fbed890076350e59b65367125f3f520.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rcVExMAnM9IDb8lDohKT2w.png"/></div></div></figure><h2 id="246f" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">评级矩阵</h2><p id="5fd2" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">我们将评级表转换成2D矩阵。这个矩阵将是稀疏的，因为不是每个用户都对每本书进行评级。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/65879ac99936c6b1011f9d8eb9c89a2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lt5fXZPF_B6tQjkKsm2NEw.png"/></div></div></figure><p id="3f4c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们来看看哪些书与排名第二的书《可爱的骨头:一部小说》相关。</p><p id="7339" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">引用<a class="ae lu" href="https://en.wikipedia.org/wiki/The_Lovely_Bones" rel="noopener ugc nofollow" target="_blank">维基百科</a>的话:“这是一个十几岁的女孩在被强奸和谋杀后，在她的个人天堂看着她的家人和朋友努力继续他们的生活，同时她接受了自己的死亡”。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/569dd33537c6a5be8dd03b2c3d7c9fad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P-y_Q3xBc_5PZ2z1Gcf9Qg.png"/></div></div></figure><p id="47fd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们获得了图书的ISBNs，但是我们需要找出书名，看看它们是否有意义。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/e04654a5ca4b08aa007a7a0a795e9712.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JIZDeJWRy2Ur8Dq5kfPJFA.png"/></div></div></figure><p id="b179" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们从上面高度相关的列表中选择三本书来考察:《保姆日记:一部小说》、《飞行员的妻子:一部小说》和《心在哪里》。</p><p id="0af1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">《保姆日记</strong>》讽刺了曼哈顿上层社会在照看孩子的人眼中的形象。</p><p id="9834" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">《可爱的骨头》的作者是同一个人，《飞行员的妻子》是Shreve非正式三部曲中的第三部小说，故事发生在新罕布什尔州海岸的一座大型海滨别墅里，这里曾是一座修道院。</p><p id="0cf3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">《心在何处》详细描述了美国低收入家庭和寄养儿童的苦难。</p><p id="7999" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这三本书听起来会与《可爱的骨头》高度相关。看来我们的关联推荐系统正在发挥作用。</p><h2 id="7c81" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">摘要</h2><p id="5861" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">在这篇文章中，我们学习了如何设计简单的推荐系统，你可以在一个小时内实现并测试它。这篇博文的Jupyter笔记本版本可以在<a class="ae lu" href="https://github.com/susanli2016/Machine-Learning-with-Python/blob/master/Recommender%20Systems%20-%20The%20Fundamentals.ipynb" rel="noopener ugc nofollow" target="_blank">这里</a>找到。如果你想了解更多，Xavier Amatriain的讲座是一个很好的起点。</p><p id="8a02" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在未来的帖子中，我们将介绍更复杂的方法，如基于内容的过滤、<a class="ae lu" href="https://medium.com/towards-data-science/how-did-we-build-book-recommender-systems-in-an-hour-part-2-k-nearest-neighbors-and-matrix-c04b3c2ef55c" rel="noopener">k-最近邻</a>、协作过滤，以及如何提供推荐和如何测试推荐系统。在此之前，享受推荐！</p></div></div>    
</body>
</html>