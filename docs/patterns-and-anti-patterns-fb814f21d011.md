# 模式和反模式

> 原文：<https://towardsdatascience.com/patterns-and-anti-patterns-fb814f21d011?source=collection_archive---------6----------------------->

“数据科学”的标志是，它继承了其父母统计学和计算机科学，是一门致力于识别数据中发现的模式的艺术。然而(我很可能在这个人物塑造方面相当不公平，我要提前承认)，在我看来，它也是一种艺术，它把它揭示的模式看得太重，低估了它是什么的“艺术”方面的程度。

我们可以从一些看似琐碎的问题开始:什么是“模式”？《牛津英语词典》的第一个定义，“一个*重复的*装饰性设计”提供了一个有用的起点:我们可能不关心“装饰性设计”的方面，但我们认为某样东西是一种“模式”(即《牛津英语词典》的第三个定义，“一种在某件事情发生或完成的方式中可辨别的规则和可理解的形式或序列”)，因为我们看到它“重复”发生但是多少重复算“重复”呢？两次？三次？在这一点上，人类和统计数据有些不一致——但这种不一致比人们想象的要微妙一些。

假设我们看到掷硬币连续三次产生“正面”。关于这枚硬币，它告诉了我们什么，并且暗示了下一次抛硬币的结果？对(一些)人类来说，三个可能就足够了，或者(对其他人来说)不够。经典统计学会给出相反的建议:*如果你从假设硬币是公平的*开始，你会以 1/2 = 1/8 的概率连续得到 3 个头像，这可能不足以宣布观察到足够的模式。后者通过使用数字和概率逻辑，似乎比前者更符合逻辑和科学:至少，它产生了每个人都能同意的东西，不管他们先前的信仰如何，这是一件好事。但它也滑入了一些非常可疑的东西:这个断言本身，是从一个关于硬币真实性质的先验开始的:硬币一开始就是公平的，除了方便的假设之外，没有其他证据。

换句话说，我们想知道 P(coin|observations)。我们计算了 P(观测值|硬币)，我们断言它对 P(硬币|观测值)有一些见解——坦白地说，这是假的。我们仍然不知道我们是否真的看到了一个模式——只是它不是一个模式，*如果基于一些我们同意的先验，先验地，是合理的*。如果我们拒绝假设的先验事实上是合理的前提，那么观察到的事件没有任何意义，至少在建立是否存在一个模式方面，独立于一个人的主观信念——尽管它确实确定地建立了这一点，但它不是一个模式，前提是真实的 P(头)是 1/2，1/8 不足以建立一个模式。请注意，这重复了最近在某些学术研究领域对 p 值的争议:p 值正是后者。我们有一些理论，X >为 0，如果，事实上，X = 0，我们会看到我们观察到的只有很小的概率。如果我一开始就不相信这个理论，我就没有理由认真对待 p 值。混淆 P(A|B)和 P(B|A)是一个非常常见的统计谬误，我们总是在概率和统计课程中花时间讲述它，但是，通过合适的框架，它显然不是人类一直掌握的东西！

前面的内容暗示了构成“模式”的稍微不同的定义模式是一种重复的现象，它证实了观察者所期望的规律性。对于那些认为硬币以很高的概率“正面”落地的人来说，连续三个正面就足够了。有些矛盾的是，同样的情况也发生在那些认为硬币以很高的概率落在“尾巴”上的人身上，即使是在相反的方向上。对于那些认为硬币总是“反面”落地的人来说，即使是一个“正面”也足以打破这个模式。它当然排除了 P(T) = 9/10 和 P=0.01 足以打破模式的信念——因为 P(HHH|P(T) = 9/10) = 1/1000。

这些都把我们带回了统计学的基本问题:我们想知道真相，却只知道数据；除了我们从数据中推断的以外，我们不知道真相。此外，不管我们喜欢与否，我们从数据中推断出的东西至少部分取决于我们现有的信念。HHH 的观察与许多关于 P(头)的真实值可能是什么以及什么算作“模式”的信念是一致的如果观察仅限于连续三个头，没有人能够说服相信 P(H) = 1 的人相信其他观点——因为这足以符合他对“模式”应该是什么的想法。然而，对于那些相信 P(T)非常高的人来说，这足以打破先验——对他们来说，这是反模式的，与他们预期的想法不相容。换句话说，反模式通过强制改变先验知识来提供信息。模式不会。

那么，当我们(认为我们)通过任何分析方法看到数据中的模式时，我们应该怎么做呢？我们希望至少考虑所有的可能性:如果 P(H) = 1，P(HHH) = 1，如果 P(H) = 0.9，P(HHH) = 0.73，等等。如果我们能合理地给每一个可能的偶然性分配概率:P(P(H)= 1 = 0.01，P(P(H)= 0.9 = 0.05，等等，我们也许能在估算 P(H)方面做得更好。，并计算期望值(例如，德国坦克问题)，但做好这项工作可能涉及更多的数据工作，以及获得对产生掷硬币结果的过程的实质性(或特定领域，对你们数据人来说)理解，如果“客户”只是想知道 P(H ),这似乎是不合理的。

当密歇根大学的政治心理学家开始他们关于投票行为的开创性工作时，他们注意到了两种模式(是的，我过于简单化了),他们认为足以引起注意:大多数人投票给政党，农民投票给农业。其中，前者最受关注——我认为它本不该如此。它给出了 P(A|B 或 C 或 D 或 E 或 F) =高的表象，只是因为 F 是 B、C、D、E 和 F 的并集的一个很小的子集。当子集 F 被单独检查时，P(A|F) =低，并且因为差别明显很大。分别考察 P(A|C)或 P(A|E)的概率是怎样的，特别是当子集变小时？(例如 1960 年的天主教徒？或者，如果天主教徒是意大利人，即使在 1960 年——在某些城市，例如纽黑文，他们的政治精英不太喜欢爱尔兰政客——或者来自共产主义的波兰难民——他们可能更喜欢尼克松的反共产主义声誉——缺乏足够的数据使得这种精细的分析在数据收集昂贵的日子里很难——所以我们只能确定一个明显的模式，即使在数据有限的情况下也能显示出来。原则上，大数据允许我们观察隐藏在大数据中的小数据，但前提是我们观察并捕捉到足够多的我们感兴趣的小数据。但是，这样做值得吗？这是一个好问题。

N.N .塔勒布一直试图推广“抗脆弱性”的理念“反模式”思维的概念已经在统计和 cs 人员中流行起来，至少在某些领域是这样。当然，保险行业很久以来就一直在这一理念上开展业务。但是正如我所描述的，他们的工作是基于能够清楚地、量化地识别模式和反模式之间的界限。确信硬币总是正面落地的人没有理由为可能出现的反面做准备。如果没有应急计划，他可能会更“划算”，因为他不会浪费时间为那些永远不会发生的事情做准备。而且，与上面的卡通例子不同，这甚至可能是合理的:如果 P(Head)确实是 0.9999999，为尾部的微小意外做准备的成本可能确实是巨大的，而潜在的收益很小，如果只是因为事件的罕见性——但是你怎么知道 P(Head)是否真的那么大呢？(提示:你不知道，也不能知道——除了你能从数据中推断出来的以外，为此，你需要做出通常不是基于“事实”的假设)罕见灾难的证据往往是灾难本身，越是罕见，它就越不可能被数据捕捉到，即使是大数据，足够清晰地突破稳健性的要求。换句话说，试图产生一种“抗脆弱”算法，就变成了一个保险问题:你是否愿意以增加一层复杂性甚至金钱成本为代价，购买保险来抵御一些看似不寻常的东西？你买了太阳从西边出来的保险吗？对抗俄克拉荷马州的地震？对抗 1929 年 10 月 24 日的股市崩盘？如果你在事情发生前是对的，那么在事情发生后，你会被视为天才。如果没有，你会被视为一个浪费了很多时间来防范不明飞行物的傻瓜。很有可能，你会被视为两者兼而有之——在事情发生前几秒钟还是个傻瓜，几秒钟后又是个天才。

这和数据科学有什么关系？一切。不管理论上的思考如何，实际应用中的数据科学寻求以清晰和可靠的方式识别模式，因此，有一种制度偏见:它建立在噪音是废物，是需要消除的敌人的假设上。数据科学推销自己的前提是，如果你有正确的算法和大量的数据，你可以高度可靠地预测各种各样的事情——不管细微差别，这是“客户”期望数据科学提供的东西，并将在这个前提下运作——数据科学给了他们可以作为“事实”依赖的“好”答案。在一个完美的数据科学宇宙中，一切都是可靠可预测的。没有噪音。另一方面，您购买了针对噪音的保险，针对打破您通常预期的模式的事情，因为您不“知道”这些反模式，即使您“知道”它们会发生。换句话说，因为你知道你不知道——这与数据科学所追求的正好相反。我认为这种状态永远不会达到:现实到数据的转换是不完整的；通过算法识别数据中的模式，尤其是微妙的模式，永远不会是完整的——特别是因为统计方法在设计上偏向于发现大的鲁棒模式，而不是高度条件化的微妙的小模式(人类更擅长后者)。我确实认为，我们可以达成这样的理解，即数据科学乌托邦是不可实现的，甚至在逻辑上是不可能的，无论是简单的方式还是困难的方式:我们可以诚实坦率地对待数据科学的潜在限制，并花时间探索它们——不是作为无条件的限制，而是作为一套工程条件和权衡，它们确实是这样——或者我们可以处理一些巨大的灾难以及由膨胀的期望引起的相关反弹。