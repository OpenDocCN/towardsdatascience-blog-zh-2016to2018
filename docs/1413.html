<html>
<head>
<title>Scalable Web Development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可伸缩的 Web 开发</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/scalable-web-development-d57a46a7f349?source=collection_archive---------1-----------------------#2017-09-02">https://towardsdatascience.com/scalable-web-development-d57a46a7f349?source=collection_archive---------1-----------------------#2017-09-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="465a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">开发一个简单的具有可伸缩性的 web 应用程序</h2></div><p id="e945" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如今，随着移动接入的增加和电子商务的发展，web 服务变得越来越流行。任何想出一个网站的人肯定会希望它能吸引越来越多的访问者。</p><p id="506d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，首先，我们是否要使用整个服务器场来预期 100 万用户？，这可能是 5 年后的目标。答案是否定的。但是我们要完全忽略我们真诚的期望，建立一个静态的网页吗？。又一个大不了！！！。让我们看看我们能做些什么。</p><h1 id="b1c8" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">首先要考虑的事项…</h1><p id="3e4d" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">简单来说，让我们继续使用 5W 框架，这是一种公认的收集信息和解决问题的方法。让我们在应用框架时考虑到可伸缩性，并在此基础上进行开发。</p><h2 id="027b" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">什么？</h2><p id="a028" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">对于我们的场景，这是一个 web 应用程序。但是首先要问的问题应该是它是一个 web 应用程序吗？可能不是。目前是这样。</p><h2 id="40db" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">为什么？</h2><p id="ae95" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">web 应用程序的目的。以下是目前常见的一些常见用例。</p><ul class=""><li id="7702" class="mk ml iq kh b ki kj kl km ko mm ks mn kw mo la mp mq mr ms bi translated">电子商务—需要安全、SSL 和其他认证。</li><li id="8809" class="mk ml iq kh b ki mt kl mu ko mv ks mw kw mx la mp mq mr ms bi translated">交互式应用—社交网络、教育、博客，其中有大量用户同时访问和流式传输内容。</li><li id="64ad" class="mk ml iq kh b ki mt kl mu ko mv ks mw kw mx la mp mq mr ms bi translated">信息显示——只是展示内容，没有太多的严肃计算。</li><li id="7f01" class="mk ml iq kh b ki mt kl mu ko mv ks mw kw mx la mp mq mr ms bi translated">分析平台——异步/同步接受请求和服务器。基于发布/订阅的处理(PubSub)。提供接口来执行功能的 API。很少有昂贵的处理会运行更长的时间。</li></ul><h2 id="5bd1" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">什么时候？</h2><p id="cf4b" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">我们什么时候部署产品。时间就像<strong class="kh ir"> <em class="my">【时间就是金钱】</em> </strong>一样至关重要。我们花费的时间越多，我们为软件过程支付的费用就越多。随着现代敏捷实践的发展，人们更加关注<strong class="kh ir"> <em class="my">编码</em> </strong>而不是文档。因此，必须遵循清晰的架构，并定期进行沟通。否则会发生这种事。</p><figure class="na nb nc nd gt ne gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/4553f36dfaaa9a820f26dbcf343311d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*vO11dx_o3cJ_Vi6sONc8Cw.jpeg"/></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk">Failed Design: <a class="ae nl" href="http://www.veryfunnypics.com/pics/view/name/failed%20bridge/cat/Miscellaneous/sort/recent" rel="noopener ugc nofollow" target="_blank">source</a></figcaption></figure><p id="246c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从高度可扩展的解决方案开始，从设计阶段开始，肯定会花费更多的时间。开始太简单会增加返工的额外压力。因此，在实际开发之前，必须达成折衷方案。我们将看到如何…</p><h2 id="4986" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">在哪里？</h2><p id="ce04" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated"><strong class="kh ir"> <em class="my">其中</em> </strong>有几种形式。</p><ul class=""><li id="7a0e" class="mk ml iq kh b ki kj kl km ko mm ks mn kw mo la mp mq mr ms bi translated">我们的目标市场在哪里？</li><li id="4901" class="mk ml iq kh b ki mt kl mu ko mv ks mw kw mx la mp mq mr ms bi translated">我们在哪里？</li><li id="2c78" class="mk ml iq kh b ki mt kl mu ko mv ks mw kw mx la mp mq mr ms bi translated">我们将在哪里部署产品/项目？</li></ul><p id="df99" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些问题主要通过业务分析来解决。然而，作为工程师，由于延迟、安全性和负载平衡的原因，我们更喜欢将服务部署在离目标客户/用户群更近的地方。</p><h2 id="1619" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">谁啊。</h2><p id="ba7f" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">我们的目标是谁。他们的访问模式是什么。时区等等，都在这一节中。这是因为，此类信息直接显示了一段时间内工作负载分布的性质。在两个时区工作有时会使发布变得容易，因为我们可以预期在开发中心的工作时间会有较低的工作量。或者，我们可能需要在维护期间提供冗余服务器来满足请求，以获得更好的 QOS(服务质量)。</p><h1 id="64ab" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">可扩展的解决方案</h1><p id="e2b0" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">现在让我们考虑构建可伸缩解决方案的 web 应用程序场景。提前考虑总是好的，但不能超出可预见的未来。</p><h2 id="2794" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">可维护性和可扩展性</h2><p id="5bda" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">我们所做的任何事情都必须是可持续的。否则在版本的每个发布中都会有大量的返工。因此，适当的<strong class="kh ir"> <em class="my">关注点分离</em> </strong>必须在整个项目中实施。</p><figure class="na nb nc nd gt ne gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/f3c25d5ff0482406cb2842ef4a7604b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*WI4k9CtzQpabtbfnbimaYA.png"/></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk">Layering</figcaption></figure><p id="5bfd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该图显示了两个数据库实例的内容分层。负载平衡用于同时使用两个实例或一次使用一个实例作为故障保护模式。</p><h2 id="ce49" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">连接组件</h2><p id="8376" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">它总是有单独的组件，并传递消息进行通信。这将增加沟通，但这可以很好地扩展，也很容易维护。下图显示了实施中组件的组织。这与上图不同。这并没有演示信息的实际流动，而是用技术术语演示了组件的分离。</p><figure class="na nb nc nd gt ne gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi nn"><img src="../Images/7768c59c7f3fe4553eefab4216010307.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ixDwb1KmgGhViwNGIx_VvA.png"/></div></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk">Arrangement of components in actual implementation</figcaption></figure><p id="8565" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通常使用<a class="ae nl" href="http://nginx.com/" rel="noopener ugc nofollow" target="_blank"> NGINX </a>(过去使用<a class="ae nl" href="https://httpd.apache.org" rel="noopener ugc nofollow" target="_blank"> Apache </a>，微软有<a class="ae nl" href="https://www.iis.net" rel="noopener ugc nofollow" target="_blank"> IIS </a>和<a class="ae nl" href="https://www.phusionpassenger.com" rel="noopener ugc nofollow" target="_blank"> Passenger </a>用于 Python 和 Ruby)路由请求。容器通常运行在不同的端口，但是我们通常只向外界公开端口 80(出于安全原因)，这样就没有外部的人可以连接到我们的数据库。</p><h2 id="3088" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">样品流</h2><ul class=""><li id="48de" class="mk ml iq kh b ki lt kl lu ko ns ks nt kw nu la mp mq mr ms bi translated">用户请求<code class="fe nv nw nx ny b">www.mydomain.com</code>，这个请求将被路由到 HTML 静态内容。</li><li id="1cec" class="mk ml iq kh b ki mt kl mu ko mv ks mw kw mx la mp mq mr ms bi translated">静态内容将被加载到用户浏览器中。这主要是一个角度或反应的应用。这是因为，不像过去我们使用 PHP、JSP、JADE、Twig 或 Blade 来制作模板，我们不再那样做了。它使我们的应用程序与 API 和请求控制器保持耦合。</li><li id="4d84" class="mk ml iq kh b ki mt kl mu ko mv ks mw kw mx la mp mq mr ms bi translated">一旦内容被加载，所有其他工作通常通过调用 web API 来完成。例如，登录请求如下所示。</li></ul><pre class="na nb nc nd gt nz ny oa ob aw oc bi"><span id="9aa9" class="ly lc iq ny b gy od oe l of og">"method": "POST",<br/>"body": {<br/>    "username": "anuradha",<br/>    "password": "password1234"<br/>},<br/>"headers": {<br/>    "content-type": "application-json"<br/>}</span></pre><ul class=""><li id="c687" class="mk ml iq kh b ki kj kl km ko mm ks mn kw mo la mp mq mr ms bi translated">这些请求作为一个<code class="fe nv nw nx ny b">post</code>请求被发送到 url <code class="fe nv nw nx ny b">www.mydomain.com/login</code>。这些将被 NGINX 定向到认证服务器。成功后，将为 web 应用程序提供一个令牌。这些被称为 JWT (JSON Web 令牌)。这些将用于以后验证用户。</li><li id="1dde" class="mk ml iq kh b ki mt kl mu ko mv ks mw kw mx la mp mq mr ms bi translated">所有到来的请求都将被发送到<code class="fe nv nw nx ny b">www.mydomain.com/api/somepath.</code>，NGINX 将把<code class="fe nv nw nx ny b">/api/</code>请求路由到 API 容器。JWT 必须作为标题以<code class="fe nv nw nx ny b">authorization: bearer &lt;token&gt;</code>的形式发送。显然，为了防止有人劫持您的令牌，必须使用一个<code class="fe nv nw nx ny b">https</code>连接。</li></ul><h2 id="e778" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">为什么是集装箱</h2><p id="da85" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">容器是轻量级的虚拟化层，主要运行 linux 内核。使用它们是因为它们可以比虚拟机启动和终止得更快。此外，它们不会像虚拟机那样消耗大量资源。</p><p id="64b5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，该容器支持内容的安全部署。举例来说，供应商可以在为特定环境进行配置后为 API 提供 Docker 映像，而不必发送代码库。</p><blockquote class="oh oi oj"><p id="a319" class="kf kg my kh b ki kj jr kk kl km ju kn ok kp kq kr ol kt ku kv om kx ky kz la ij bi translated">在某些情况下，NGINX 本身是一个容器，用来处理大量请求并路由到大量其他容器。<a class="ae nl" href="https://hub.docker.com/_/nginx/" rel="noopener ugc nofollow" target="_blank">点击</a>看看！</p></blockquote><h2 id="214a" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">弹性豆茎一瞥</h2><figure class="na nb nc nd gt ne gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi on"><img src="../Images/c6435a3a063ee081c3934e1d4dab1568.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a96dh5kNx9M4xzB2EiRjuQ.png"/></div></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk">Elastic Beanstalk</figcaption></figure><p id="1cca" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一个提供许多 web 服务器的平台，这些服务器可以随着负载的增加而扩展。他们监视资源利用率，并不断自动添加资源，并相应地收费。由于易于部署，这已经变得流行起来。用他们自己的话说就是，</p><blockquote class="oo"><p id="6b85" class="op oq iq bd or os ot ou ov ow ox la dk translated">Elastic Beanstalk 不收取额外费用——您只需为存储和运行应用程序所需的 AWS 资源付费。</p></blockquote><blockquote class="oh oi oj"><p id="d890" class="kf kg my kh b ki oy jr kk kl oz ju kn ok pa kq kr ol pb ku kv om pc ky kz la ij bi translated">优势<br/> *简单<br/> *自动扩展<br/> *资源监控<br/> *提供所需的所有基础架构组件<br/> *安全</p></blockquote></div></div>    
</body>
</html>