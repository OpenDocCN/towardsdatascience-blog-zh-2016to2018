<html>
<head>
<title>Tracking pedestrians for self driving cars</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动驾驶汽车跟踪行人</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tracking-pedestrians-for-self-driving-cars-ccf588acd170?source=collection_archive---------1-----------------------#2017-04-13">https://towardsdatascience.com/tracking-pedestrians-for-self-driving-cars-ccf588acd170?source=collection_archive---------1-----------------------#2017-04-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="b00b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">第四章:用数据做酷事！</em></p><p id="a0c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">自动驾驶汽车在行驶时需要周围的世界地图。它必须能够连续跟踪路上的行人、汽车、自行车和其他移动物体。在这篇文章中，我将通过一种称为扩展卡尔曼滤波器的技术进行讨论，谷歌自动驾驶汽车正在使用这种技术来跟踪道路上的移动物体。</p><p id="46a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是一个汽车在模拟器中跟踪行人的视频。激光雷达测量值为红色圆圈，雷达测量值为蓝色圆圈，估算标记为绿色三角形。有趣的是，与雷达相比，激光雷达的精确度有多高。经过一些试验，卡尔曼滤波器的精度可以提高到0.09的均方根误差。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="kr ks l"/></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk">Kalman Filter in action</figcaption></figure><p id="1c1c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">链接到我的<a class="ae kx" href="https://github.com/priya-dwivedi/CarND/tree/master/Term%202/CarND-Extended-Kalman-Filter-P1" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> GitHub </strong> </a>用C++实现上述视频的完整代码。</p><p id="8426" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在讨论卡尔曼滤波器之前，我想先谈谈汽车中使用的三种主要传感器——摄像头(前后)、激光雷达和雷达。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ky"><img src="../Images/4f8f6494aa742368424c2882bc2ec42a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*_F8ZU7PyY8DIbIh3oe-2vw.png"/></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk">Car Sensors — Camera, LIDAR and RADAR</figcaption></figure><p id="78cc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">激光雷达使用激光进行测量，并生成周围世界的点云，为汽车提供相当准确的x位置和y位置值。它能够以非常高的精度探测汽车附近(20-40米)的物体。然而，激光雷达在恶劣的天气条件下或传感器变脏时不是很准确。激光雷达云看起来像:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/81692338cddfdfa610ae7ae4408d399b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*xCwDS0QN5_wgqc0vqhvBsA.jpeg"/></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk">LIDAR point cloud</figcaption></figure><p id="dbd3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">另一方面，雷达不太精确，但是能够提供对物体的位置和速度的估计。速度是使用多普勒效应估计的，如下图所示。雷达能够探测到离汽车200米远的物体。它也不易受天气条件的影响。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/b7b4925854d60bb4add7443d1da3bd91.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*ZTgeJYQAikWv_U5HeeIW7A.jpeg"/></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk">RADAR estimating velocity of a car using Doppler effect</figcaption></figure><p id="193c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">卡尔曼滤波器是一种算法，可用于跟踪一段时间内移动行人的位置和速度，并测量与之相关的不确定性。它有两个主要步骤——一个<strong class="jp ir">预测步骤</strong>,预测行人在下一个时间步可能在哪里，假设他们以恒定的速度移动；一个<strong class="jp ir">更新步骤</strong>,使用传感器数据(激光雷达和雷达)更新我们的估计。并且这两个步骤无休止地重复。</p><p id="a11d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们更详细地讨论一下这个问题:</p><p id="9230" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们将行人的状态指定为一个四维向量，表示-位置x，位置y，速度x，速度y。以下是卡尔曼滤波器的主要步骤:</p><ol class=""><li id="4f22" class="ld le iq jp b jq jr ju jv jy lf kc lg kg lh kk li lj lk ll bi translated">初始化t=0时行人的状态。我们通过读取传感器的第一个测量值来估计我们的位置和速度</li><li id="db67" class="ld le iq jp b jq lm ju ln jy lo kc lp kg lq kk li lj lk ll bi translated">预测步骤——在t=1时，我们使用简单的物理方程来估计物体在恒定运动(固定速度，无加速度)下的可能位置</li></ol><blockquote class="lr ls lt"><p id="b824" class="jn jo kl jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated">px(t+1时)= px(t时)+ vx* dt(时间差)</p><p id="5c66" class="jn jo kl jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated">vx(在t+1时)= vx(在t时)</p></blockquote><p id="ce32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">类似地，我们可以更新我们的y位置和速度估计</p><p id="2ed4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.测量值更新步骤-现在我们从雷达和激光雷达读取测量值，并使用它来更新我们在步骤2中计算的行人状态估计值。测量步骤后的新状态用于下一个预测步骤。</p><p id="18d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如下图所示，此过程不断重复以更新当前状态:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/70b4a36bc39913e8638666f449388d65.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/0*UkHt0mXqy2QQDB3i."/></div></figure><p id="4783" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">另一件要注意的事情是，在卡尔曼滤波器中，行人的状态被估计为具有均值和协方差的高斯(钟形曲线)。这是1D和2D·高斯的长相:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/e49e538d56dee4fae38d1e9c3730a264.png" data-original-src="https://miro.medium.com/v2/resize:fit:408/format:webp/1*ybTy2PnRMqL0zT1WewQuXg.png"/></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk">1 D Gaussian</figcaption></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/fc18a2db82afa085ff3155db8581de8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*7xrrtFYXoLHRzOj_b-JVBg.png"/></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk">2D Gaussian</figcaption></figure><p id="a33c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里有个有趣的问题？—如果我们有传感器测量，为什么还需要进行预测？用传感器(激光雷达/雷达)测量来更新状态不是最好的吗？这些应该很准确。对吗？</p><p id="799c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不尽然！测量也可能有不确定性。设备制造商提供了传感器测量噪声的信息。此外，像雨/雾这样的局部环境条件会使传感器不太精确。</p><p id="006e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不要盲目相信测量结果，这是一个很好的做法。通过组合信息，用于预测和测量的高斯函数成倍增加，当这种情况发生时，最令人惊奇的事情发生了，由此产生的不确定性降低了，如下所示。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/0b7e5f9e7016b95230b3ed8ee6822428.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*4c5_L0iLq3EK4cDgWXiYGw.png"/></div></figure><p id="91e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">卡尔曼滤波方程有点复杂，你可以在维基百科上查看</p><p id="59cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我还构建了一个无味卡尔曼滤波器，它能够适应非线性运动，并且在预测行人的状态时更加准确。我的<a class="ae kx" href="https://github.com/priya-dwivedi/CarND/tree/master/Term%202/CarND-Unscented-Kalman-Filter-P2" rel="noopener ugc nofollow" target="_blank"> Github </a>也有C++内置的无味卡尔曼滤波器。</p><p id="b5a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">总的来说，构建我的第一个卡尔曼滤波器并使用它跟踪物体是一次很棒的经历，我对结果非常满意。</p><p id="b13a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">其他著述</strong>:<a class="ae kx" href="https://medium.com/@priya.dwivedi/" rel="noopener">https://medium.com/@priya.dwivedi/</a></p><p id="4b32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">PS:我住在多伦多，我希望将职业生涯转向深度学习。如果你喜欢我的帖子，并能把我联系到任何人，我将不胜感激:)。我的电子邮件是priya.toronto3@gmail.com</p><p id="38c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">参考文献:</strong></p><p id="375a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kx" href="https://www.udacity.com/" rel="noopener ugc nofollow" target="_blank"> Udacity </a>无人驾驶汽车Nano Degree——我感谢Udacity给我机会成为他们新的无人驾驶汽车项目的一部分。这是一次非常有趣的旅程。我使用的大部分代码都是在课堂讲课中建议的。</p></div></div>    
</body>
</html>