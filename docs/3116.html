<html>
<head>
<title>Meet your new friend “GULP”</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">见见你的新朋友“大口”</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/meet-your-new-friend-gulp-b1f991a95616?source=collection_archive---------6-----------------------#2018-04-10">https://towardsdatascience.com/meet-your-new-friend-gulp-b1f991a95616?source=collection_archive---------6-----------------------#2018-04-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/91500464bd0fb325289b64717028bcbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mI7rlIw_VWsS-r981xXe2w.png"/></div></div></figure><h1 id="7e5e" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">什么是吞咽？</h1><p id="8324" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi lu translated">在开发应用程序时，你是否厌倦了重复做同样的事情？当我刚接触 JavaScript 框架的时候，我不得不做的最烦人的事情就是当一个改变完成时，一次又一次地重启服务器。后来我顺便找到了<strong class="ky ir">【Nodemon】</strong>；)</p><p id="7f0f" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">嗯，吞咽是解决这个问题的方法。不仅仅是因为这个。一饮而尽解决<strong class="ky ir">的重复问题。</strong>开发人员需要反复做的大多数任务都可以通过自动化来简化。因此，Gulp 可以被认为是一个 JavaScript 任务运行器，它可以让开发人员自动完成某些任务。</p><blockquote class="mi mj mk"><p id="4f1f" class="kw kx ml ky b kz md lb lc ld me lf lg mm mf lj lk mn mg ln lo mo mh lr ls lt ij bi translated">GULP 是一个工具包，用于自动化开发工作流程中痛苦或耗时的任务</p></blockquote><p id="c7dc" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">示例任务:</p><ol class=""><li id="dd1f" class="mp mq iq ky b kz md ld me lh mr ll ms lp mt lt mu mv mw mx bi translated">更改文件时刷新浏览器</li><li id="6174" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated">缩小 JavaScript</li><li id="b3ea" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated">将 SASS/LESS 编译成 CSS</li><li id="2e0c" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated">单元测试</li><li id="044d" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated">将源代码部署到输出目录(例如:dist 文件夹)</li></ol><p id="f76c" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">Gulp 非常容易学习，使用它很有趣。你需要知道 Gulp API 中的 4 个基本函数。</p><ul class=""><li id="675f" class="mp mq iq ky b kz md ld me lh mr ll ms lp mt lt nd mv mw mx bi translated"><strong class="ky ir"> gulp.task — </strong>用于定义一个新的 gulp 任务</li><li id="e050" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt nd mv mw mx bi translated"><strong class="ky ir"> gulp.src — </strong>用于指向任务的输入文件所在的位置</li><li id="4de5" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt nd mv mw mx bi translated"><strong class="ky ir"> gulp.dest — </strong>用于指出输出文件需要写入的位置</li><li id="cbdb" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt nd mv mw mx bi translated"><strong class="ky ir"> gulp.watch — </strong>用于制作 gulp 来观察文件的变化</li></ul><p id="a454" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">不要对这些感到困惑。我会引导你了解每一个人，最终你会完全理解他们。</p><p id="3ce7" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">你需要明白的另一件事是<strong class="ky ir">管</strong>在大口喝。有时候你需要在一项任务中做不止一件事。例如，您可能需要将几个 JavaScript 文件连接成一个文件并缩小它。在这种情况下，管道就派上了用场。使用管道，您可以通过利用流来链接多个任务。在上面的例子中，你需要链接连接和缩小。这些你在玩的时候会更清楚。</p><p id="b32d" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">让我们动手做一些简单的例子来理解 Gulp 是如何工作的。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="5080" class="jy jz iq bd ka kb nl kd ke kf nm kh ki kj nn kl km kn no kp kq kr np kt ku kv bi translated">简单的吞咽例子</h1><h2 id="72d7" class="nq jz iq bd ka nr ns dn ke nt nu dp ki lh nv nw km ll nx ny kq lp nz oa ku ob bi translated">1.设置环境</h2><p id="a428" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">首先，你需要在你的电脑上安装<strong class="ky ir"> node.js </strong>，如果你没有，从<a class="ae oc" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">这里</a>安装。</p><p id="4f16" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">这些例子将是完全跨平台的，你不需要担心你的平台。</p><p id="159b" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">准备好之后，使用命令全局安装 Gulp，</p><figure class="oe of og oh gt jr gh gi paragraph-image"><div class="gh gi od"><img src="../Images/fe7cc8027ee6994bb0dbc01db445932e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*szETSFLRtS4276a2uLpknA.png"/></div></figure><p id="6962" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">然后通过运行常规命令<strong class="ky ir"> npm init </strong>初始化一个节点项目</p><p id="c94f" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">导航到您的项目目录，并作为开发依赖项在本地安装 gulp</p><figure class="oe of og oh gt jr gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/250703a429a51688c6778a3d569ee43b.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*Yhajg3wRIEJBy9b5kJcG7w.png"/></div></figure><h2 id="206d" class="nq jz iq bd ka nr ns dn ke nt nu dp ki lh nv nw km ll nx ny kq lp nz oa ku ob bi translated">2.你的第一个任务是吞咽</h2><p id="54a2" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">现在在项目的根级别创建<code class="fe oj ok ol om b">gulpfile.js</code>。我们需要运行的所有任务都将包含在这个文件中。</p><p id="2e99" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">注意，这个名字<strong class="ky ir">“gulpfile . js”</strong>是必不可少的，因为这个名字是用来检测文件的。否则，您将得到一个错误，指示 gulpfile 未找到。</p><p id="4351" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">现在让我们创建我们的第一个吞咽任务。在此任务中，我们将简单地创建一个控制台日志。</p><figure class="oe of og oh gt jr gh gi paragraph-image"><div class="gh gi on"><img src="../Images/757018e851f04e3830190c698d4c5283.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*K7xXoen6BhNggrNXjRaHSg.png"/></div></figure><p id="b4cd" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">如果您熟悉 node.js，这里的一切都应该很清楚，因为它是不言自明的。首先，我们导入 gulp，因为我们正在创建一个新任务，所以使用了 gulp.task 函数。这里我们需要传递两个参数。首先是任务的名称，然后是定义任务的函数，包括应该执行什么。</p><p id="8a2d" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">要执行任务，在终端运行<strong class="ky ir">大口控制台</strong>。在命令中，需要执行的任务名称应该跟在 gulp 后面。</p><p id="f0a8" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">如果你的任务名是<strong class="ky ir">‘default’</strong>，只要在终端执行 gulp 就可以运行。这被称为大口执行<strong class="ky ir">默认任务</strong>。</p><h2 id="5a26" class="nq jz iq bd ka nr ns dn ke nt nu dp ki lh nv nw km ll nx ny kq lp nz oa ku ob bi translated">3.将源文件复制到输出文件夹</h2><p id="6afe" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">现在让我们做一点更有用的工作。在将应用程序部署到服务器之前，我们需要将所有内容复制到输出目录中。</p><p id="7e04" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">让我们创建一个<strong class="ky ir"> src </strong>目录，并在那里添加一个基本的 HTML 文件。在部署我们非常简单的应用程序之前，我们需要将其复制到 dist 文件夹中。让我们用吞咽来做它。</p><figure class="oe of og oh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oo"><img src="../Images/1022172baaa5b4e9ce14e5238c2658fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*S0T-ExD-MkeGbMdDQndSjw.png"/></div></div></figure><p id="cbed" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">在这个新任务中，我们需要告诉 gulp 输入文件的位置和复制位置。为了做到这一点，我们使用了<strong class="ky ir"> gulp.src </strong>和<strong class="ky ir"> gulp.dest. </strong>这里我们指向 src 目录中的所有 HTML 文件。</p><p id="12db" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">注意，我们在这里使用管道，因为我们处理从输入源读取和写入目的地。</p><p id="a574" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">像我们之前使用命令<strong class="ky ir"> gulp copyToDist </strong>一样运行任务。您会注意到，将创建一个 dist 文件夹，其中包含 src 目录中的 HTML 文件。</p><h2 id="5df3" class="nq jz iq bd ka nr ns dn ke nt nu dp ki lh nv nw km ll nx ny kq lp nz oa ku ob bi translated">4.缩小 JavaScript 文件</h2><p id="5874" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">当缩小一个 JavaScript 文件时，所有的空格都将被删除，包括注释，以使文件更轻量级。</p><p id="0dda" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">要做到这一点，我们需要安装另一个叫做“吞咽丑陋”的依赖项。首先，使用下面的命令安装它。</p><figure class="oe of og oh gt jr gh gi paragraph-image"><div class="gh gi op"><img src="../Images/9d22dd9d36f21fad947367cc3305077f.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*bulUP-B8p9hA-Zb7MUKRCQ.png"/></div></figure><p id="e915" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">然后，在<strong class="ky ir"> src </strong>目录下创建一个<strong class="ky ir"> js </strong>目录，并添加一个包含一些控制台日志命令的 JavaScript 文件，这些命令由空格和一些注释分隔。现在让我们缩小它，并将其添加到 js 下的 dist 目录中。</p><figure class="oe of og oh gt jr gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/fe92fe7ef9fef2f718ae6731a7f9f0fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*gcrtxFWwN29Aj7aks22BaQ.png"/></div></figure><p id="8a69" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">这里的一切应该是不言自明的。<strong class="ky ir"> uglify() </strong>函数来自我们的新依赖项。您将看到 dist 目录中的新 JavaScript 文件通过删除所有空格和注释而被缩小。</p><h2 id="3283" class="nq jz iq bd ka nr ns dn ke nt nu dp ki lh nv nw km ll nx ny kq lp nz oa ku ob bi translated">5.将 SASS 编译为 CSS</h2><p id="a138" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">允许你使用 CSS 中不存在的特性，比如变量、嵌套、继承等等。我们可以使用 gulp 将 SASS 编译成 CSS，方法是安装另一个依赖项，就像我们在前面的任务中所做的那样。</p><p id="203c" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">这次是<strong class="ky ir">【大口-萨斯】</strong>。首先从下面的命令安装它。</p><figure class="oe of og oh gt jr gh gi paragraph-image"><div class="gh gi or"><img src="../Images/b6a10f2d85bc3abbd8e456031fc5c783.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*_oOthl8uPkFKOl19emKRAw.png"/></div></figure><p id="801e" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">与前面类似，在包含 sass 文件的<strong class="ky ir"> src </strong>目录中创建一个<strong class="ky ir"> sass </strong>目录。让我们编译它并添加到<strong class="ky ir"> dist 中的<strong class="ky ir"> css </strong>目录中。</strong></p><figure class="oe of og oh gt jr gh gi paragraph-image"><div class="gh gi os"><img src="../Images/9f223e4f48451507f874bee0801c925a.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*zSIm_1l8oMwnO0aGKiWwrA.png"/></div></figure><p id="92ec" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">你看，这里没有什么神奇的。我们使用管道，因为我们需要链接所有的东西。<strong class="ky ir"> sass() </strong>函数会将 sass 编译成 css，并添加了以下部分来处理错误。如果您感到困惑，请遵循 gulp-sass 文档<a class="ae oc" href="https://www.npmjs.com/package/gulp-sass" rel="noopener ugc nofollow" target="_blank">这里的</a>。</p><h2 id="c9c4" class="nq jz iq bd ka nr ns dn ke nt nu dp ki lh nv nw km ll nx ny kq lp nz oa ku ob bi translated">6.将所有内容合并到一个命令中</h2><p id="6da1" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">起初，我告诉你 gulp 是为了简化重复。但是如果我们使用单独的命令一个任务接一个任务地运行，那就没有意义了，对吗？</p><p id="1e52" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">Gulp 允许我们使用一个命令运行多个任务来解决这个问题。我们只需要用需要执行的任务数组替换任务中的函数。</p><figure class="oe of og oh gt jr gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/efb7945b4ecc5023bfa68662fd5a1812.png" data-original-src="https://miro.medium.com/v2/resize:fit:486/format:webp/1*gJ2SJ5XM11Ls5vtW_RE9Jg.png"/></div></figure><p id="cce8" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">你可以看到我在这里使用的是<strong class="ky ir">大口默认任务</strong>。因此，我们只需要在终端运行<strong class="ky ir"> gulp </strong>。首先，删除项目中当前的<strong class="ky ir"> dist </strong>文件夹，并运行上面的命令。您将看到我们指定的所有任务都完美地执行了，并像以前一样在 dist 目录中构建。</p><p id="dd7c" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">现在你可能明白这个简单工具的威力了。我们可以通过让它在我们更改<strong class="ky ir"> src </strong>文件时自动执行来让它更有价值。</p><h2 id="4806" class="nq jz iq bd ka nr ns dn ke nt nu dp ki lh nv nw km ll nx ny kq lp nz oa ku ob bi translated">7.监视文件</h2><p id="4e0e" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">现在让我们使用我在开始提到的 Gulp API 中的最后一个基本函数(<strong class="ky ir"> gulp.watch) </strong>来自动检测并构建对 dist 文件夹的新更改。</p><figure class="oe of og oh gt jr gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/149d0791b11b6bba542bbd831c787f6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*ZpG0VpI8F1L-wKLdZP-2Yg.png"/></div></figure><p id="f882" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">在<strong class="ky ir"> gulp.watch </strong>中，我们需要指定在哪里观察，以及当变化发生时应该执行什么任务。例如，需要监视所有的 JavaScript 文件，当其中任何一个文件发生变化时，就会执行 minifyJS 任务。</p><p id="22c6" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">运行<strong class="ky ir"> gulp watch 命令后，</strong> gulp 将对指定的文件进行监视，必要的任务将在改变时触发。</p><p id="1d46" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">现在你应该对 Gulp 和如何使用它有了清晰的概念。它让开发者的生活更加轻松有趣。像我们在这里所做的那样，通过添加第三方依赖项可以完成更多的任务。</p><p id="f6ad" class="pw-post-body-paragraph kw kx iq ky b kz md lb lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt ij bi translated">希望你喜欢这篇文章。继续读，加油！:)</p></div></div>    
</body>
</html>