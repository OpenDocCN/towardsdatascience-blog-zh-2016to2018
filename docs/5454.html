<html>
<head>
<title>How to Setup Your JupyterLab Project Environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何设置 JupyterLab 项目环境</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-setup-your-jupyterlab-project-environment-74909dade29b?source=collection_archive---------1-----------------------#2018-10-19">https://towardsdatascience.com/how-to-setup-your-jupyterlab-project-environment-74909dade29b?source=collection_archive---------1-----------------------#2018-10-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="760f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在一分钟内创建和定制您的容器化和脚本控制的 JupyterLab 项目环境。</p><p id="434c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文是本书的一部分:<a class="ae kl" href="https://www.pyqml.com/page?ref=medium_jupyterlab&amp;dest=/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">用 Python 实践量子机器学习。</strong> </a></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/646ec25d94c18f79b48a3614144ed9b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*9Ojk37AuS2pCZDr8CNGVUQ.png"/></div></figure><p id="d02b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里免费获得前三章<a class="ae kl" href="https://www.pyqml.com/page?ref=medium_jupyterlab&amp;dest=/" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="07c6" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">TL；博士:</h1><p id="664d" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated"><a class="ae kl" href="https://github.com/frankzickert/jupyterlab-configuration" rel="noopener ugc nofollow" target="_blank"> JupyterLab-Configuration </a>让您轻松创建您的<strong class="jp ir"> JupyterLab 配置</strong>，它在<strong class="jp ir">容器</strong>中运行 JupyterLab，并使用<strong class="jp ir">脚本</strong>自动完成整个设置。容器是一个独立的环境，它封装了您在其中安装的库，而不会影响您的主机。脚本自动执行您通常需要手动运行的所有命令。因为您可以查看和编辑脚本，所以您可以随时完全控制您的配置。</p><p id="484c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本帖中，您将看到这个 JupyterLab 配置是如何工作的，以及如何定制它来满足您的需求。</p><h1 id="7b2c" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">我是一名数据科学家，不是 DevOps 工程师</h1><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi lx"><img src="../Images/5b3f3a71e99417613f0c5e7a6c61f120.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mq2ISzHP3W2a1_VeBXuatQ.jpeg"/></div></div></figure><blockquote class="mc"><p id="26f9" class="md me iq bd mf mg mh mi mj mk ml kk dk translated">该死的吉姆。我是数据科学家，不是 DevOps 工程师</p></blockquote><p id="0329" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">数据科学家的要求清单非常长。它包含数学和统计，编程和数据库，通信和可视化，领域知识，等等。</p><p id="05c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mr">“求求你，不要把 DevOps 加到名单里，”</em>你觉得呢？好吧！你觉得这些过程怎么样？</p><p id="fce6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">创建您的 JupyterLab 配置:</strong></p><ol class=""><li id="e222" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk mx my mz na bi translated">JupyterLab-Configuration 让你轻松创建你的定制配置</li><li id="72a9" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">下载并解压缩您的配置</li><li id="e9d6" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">根据您的需求进行定制(可选)</li></ol><p id="7bb1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下图显示了运行中的 JupyterLab 配置。<strong class="jp ir">通过两个简单的步骤使用它</strong>:</p><ol class=""><li id="cbdc" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk mx my mz na bi translated">执行<code class="fe ng nh ni nj b">sh {path_to_your_project}/run.sh</code></li><li id="b208" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">在浏览器中打开<code class="fe ng nh ni nj b">localhost:8888</code></li></ol><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi nk"><img src="../Images/3b82578272a7b1bd0c349a3f31c0f575.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2f3HOznZ7tkoy5w1C2RZHw.png"/></div></div><figcaption class="nl nm gj gh gi nn no bd b be z dk">Using the JupyterLab configuration</figcaption></figure><h1 id="18ff" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">如果我对这种配置的工作原理感兴趣呢？解释它需要多少时间？</h1><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi np"><img src="../Images/3ab24d7c71d304c84270e8556f13fbbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yQlphH3ujG3Pon_T7hk7Jg.jpeg"/></div></figure><blockquote class="mc"><p id="a22c" class="md me iq bd mf mg mh mi mj mk ml kk dk translated">当然，几个小时，先生。但是你没有几个小时，所以我会在几分钟内为你做。</p></blockquote><p id="e2a4" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">这篇文章的剩余部分从概念上给你一个 JupyterLab 配置如何工作的概述。它解释了构造块，并使您能够根据自己的需求定制配置，例如</p><ul class=""><li id="88e6" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk nq my mz na bi translated">添加软件包</li><li id="7cea" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">添加您自己的 Python 模块</li><li id="9b31" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">定制 Jupyter 笔记本服务器</li></ul><h1 id="26c4" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">我为什么需要一个 JupyterLab 配置？</h1><p id="9fd4" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">2018 年，Project Jupyter 推出了 JupyterLab——一个用于处理笔记本、代码和数据的交互式开发环境。JupyterLab 完全支持 Jupyter 笔记本，使您能够在选项卡式工作区中与笔记本一起使用文本编辑器、终端、数据文件查看器和其他自定义组件。</p><p id="face" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您运行的是基于 Unix 的操作系统(macOS 或 Linux)，那么您可以使用两个简单的命令来安装和启动 JupyterLab:</p><pre class="kn ko kp kq gt nr nj ns nt aw nu bi"><span id="2f67" class="nv kv iq nj b gy nw nx l ny nz">python -m pip install jupyterlab<br/>jupyter lab</span></pre><p id="b235" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">但是等等！</strong>JupyterLab 的手动设置如此简单，乍看之下可能无法满足您在数据科学项目中需要做的所有事情。您可能还需要:</p><ul class=""><li id="b510" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk nq my mz na bi translated">Jupyter 内核(例如 bash、Javascript、R 等等)</li><li id="3c48" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">文件转换器(如 Pandoc、Markdown 等)</li><li id="398a" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">库(例如 NumPy、SciPy、TensorFlow、PyTorch 等)</li><li id="d7b3" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">支持软件(Git、NbSphinx 等)</li></ul><p id="de8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将这些依赖项直接安装在您的计算机上并不是一个好主意，因为您将很难确保保持您的计算机干净。</p><ul class=""><li id="ed44" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk nq my mz na bi translated"><em class="mr">如果您有不同的项目需要不同版本的库会怎样？你会在每次切换项目时卸载旧版本并安装正确的版本吗？</em></li><li id="ee79" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">如果你不再需要一个库，该怎么办？如果你发现你还需要它，你会马上把它移除并重新安装吗？或者您会等到忘记删除这个库吗？</li></ul><p id="5792" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">手动安装这些依赖项也不是一个好主意。你将无法控制你安装的所有东西。</p><ul class=""><li id="b674" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk nq my mz na bi translated">如果你想在另一台电脑上完成这个项目，该怎么办？重新建立项目需要多少时间和工作量？</li><li id="b947" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">如果有人问你要你正在使用的所有第三方库怎么办？在您安装在主机上的所有库当中，您如何识别您在本项目中使用的库？</li></ul><h1 id="350f" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">集装箱式结构</h1><p id="a966" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">容器是独立于主机的虚拟环境。它创建了自己的运行时环境，可以适应您特定的项目需求。它只以特定的方式与宿主互动。对容器的任何更改都不会影响您的主机，反之亦然。<a class="ae kl" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>是用于项目环境虚拟化的最著名和最广泛使用的平台之一。</p><p id="419a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下图描述了包含两个步骤的 Docker 过程:(1)从 Docker 文件构建一个映像，以及(2)在容器中运行该映像。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi oa"><img src="../Images/f6f761c57bc11ffc0accafada8766528.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DTmT3cd8zsXlXb3ckITOqQ.png"/></div></div><figcaption class="nl nm gj gh gi nn no bd b be z dk">The Docker process</figcaption></figure><p id="7236" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的配置在<code class="fe ng nh ni nj b">run.sh</code>-脚本中自动化了这个过程。这是一个运行在主机上的 shell 脚本(<code class="fe ng nh ni nj b">sh</code>或<code class="fe ng nh ni nj b">bash</code>)。同样，这个脚本是您开始 JupyterLab 项目的切入点。只需打开一个终端并运行:</p><pre class="kn ko kp kq gt nr nj ns nt aw nu bi"><span id="6667" class="nv kv iq nj b gy nw nx l ny nz">sh {path_to_your_project}/run.sh</span></pre><p id="d61e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Docker 文件是告诉 Docker 如何在容器内配置系统的脚本。在<code class="fe ng nh ni nj b">docker build</code>步骤中，Docker 创建了该系统的映像。映像是一个可执行包，其中包含运行应用程序所需的一切—代码、运行时环境、库、环境变量和配置文件。</p><p id="9669" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然 Docker 支持从头开始构建系统，但最佳实践是从现有映像开始，例如包含操作系统甚至完整配置的映像。</p><p id="7475" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">配置从一个<a class="ae kl" href="https://hub.docker.com/r/leandatascience/jupyterlabconfiguration/" rel="noopener ugc nofollow" target="_blank">现有图像</a>开始。你可以在这个<a class="ae kl" href="https://github.com/lean-data-science/jupyterlab-configuration" rel="noopener ugc nofollow" target="_blank"> GitHub-Repository </a>中找到相应的 Dockerfile。此映像包含以下软件和库:</p><ul class=""><li id="2f4b" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk nq my mz na bi translated">Ubuntu 18.04</li><li id="6867" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">Python 3.7.0</li><li id="e6f0" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">点</li><li id="b604" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">朱庇特和朱庇特实验室</li><li id="69fa" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">Bash 和 Jupyter Bash-Kernel</li><li id="4a9b" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">文档(pdf)工具(<code class="fe ng nh ni nj b">pandoc</code>、<code class="fe ng nh ni nj b">texlive-xetex</code>)</li><li id="8c93" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">构建工具(例如，<code class="fe ng nh ni nj b">build-essential</code>、<code class="fe ng nh ni nj b">python3-setuptools</code>、<code class="fe ng nh ni nj b">checkinstall</code>)</li><li id="9694" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">通讯工具(<code class="fe ng nh ni nj b">openssl</code>、<code class="fe ng nh ni nj b">wget</code>、<code class="fe ng nh ni nj b">requests</code>、<code class="fe ng nh ni nj b">curl</code>)</li><li id="a445" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">各种 Python 开发库</li></ul><p id="58dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你需要更多的软件库，那么<strong class="jp ir"> Dockerfile </strong>就是你要去的地方。只需在<code class="fe ng nh ni nj b">FROM</code>语句后添加一个新行。这一新行需要以<code class="fe ng nh ni nj b">RUN</code>开始，并包含您可能想要执行的任何 shell 命令，通常类似于<code class="fe ng nh ni nj b">apt-get install</code>或<code class="fe ng nh ni nj b">pip install</code>。例如，您可以使用以下语句使用<code class="fe ng nh ni nj b">pip</code>安装一些主要的数据科学包:</p><pre class="kn ko kp kq gt nr nj ns nt aw nu bi"><span id="8557" class="nv kv iq nj b gy nw nx l ny nz">RUN pip install numpy<br/>RUN pip install scipy<br/>RUN pip install pandas</span></pre><p id="0e9b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Dockerfile 中的更改在<code class="fe ng nh ni nj b">build</code>步骤中生效。如果您已经启动了容器，您需要停止它(例如在您的终端中使用 ctrl+c)并重新启动它(<code class="fe ng nh ni nj b">sh {path_to_your_project}/run.sh</code>)。编辑 docker 文件时，<code class="fe ng nh ni nj b">build</code>步骤可能需要一些时间。Docker 试图重用现有的图像，当你没有改变任何东西时，它在随后的启动中非常快。</p><p id="849e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您从 Docker 文件中删除命令并重新运行<code class="fe ng nh ni nj b">run.sh</code>-脚本，Docker 会创建一个新的系统映像。您不需要从系统中卸载任何东西。因为被删除的命令从来就不是这个结果系统的一部分。这使您的配置始终保持干净。您可以实验性地安装库，而不必担心。如果你不需要它们，就去掉它们。您将得到一个从未安装它们的系统映像。</p><p id="a0a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下图描述了 Dockerfile 如何配置系统:它按照其<code class="fe ng nh ni nj b">RUN</code>-命令中指定的方式安装软件。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi ob"><img src="../Images/f54e3dc83f19b24353171a471f939348.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JdkSX4HNn7UaKIfGfxE3KQ.png"/></div></div><figcaption class="nl nm gj gh gi nn no bd b be z dk">The Dockerfile specifies the configuration of the system</figcaption></figure><p id="f11b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">命令在一个容器中执行这个图像。此外，它定义了在容器内运行的系统如何连接到外部世界，即主机。</p><p id="de8d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有两种主要的连接类型:卷和端口。<strong class="jp ir">卷</strong>是主机上的目录和容器中的目录之间的链接。这些目录是同步的，即主机目录中的任何变化都会影响容器中的目录，反之亦然。<strong class="jp ir">端口映射</strong>让 Docker 将对主机端口的任何请求(例如 HTTP 请求)转发到容器的映射端口。</p><p id="56f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下图描述了我们到目前为止的配置。<code class="fe ng nh ni nj b">run.sh</code>-脚本负责 Docker <code class="fe ng nh ni nj b">build</code>和<code class="fe ng nh ni nj b">run</code>步骤。一旦您执行该脚本，它将创建一个运行容器，通过文件系统卷和端口映射与您的主机连接。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi oc"><img src="../Images/d04bb248e48e42eb26b38fcf83340694.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mzE5-eODSmx9IMMRVoR6cw.png"/></div></div><figcaption class="nl nm gj gh gi nn no bd b be z dk">The run.sh script automates the Docker process</figcaption></figure><h1 id="826e" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">文件系统</h1><p id="a35b" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">当您从<a class="ae kl" href="https://github.com/frankzickert/jupyterlab-configuration" rel="noopener ugc nofollow" target="_blank"> Git-Hub-Repository </a>下载文件时，您将在<code class="fe ng nh ni nj b">.zip</code>文件中获得以下文件结构:</p><pre class="kn ko kp kq gt nr nj ns nt aw nu bi"><span id="58b1" class="nv kv iq nj b gy nw nx l ny nz">{path_to_your_project}/<br/>├─ config/<br/>│ ├─ {projectname}.Dockerfile<br/>│ ├─ jupyter_notebook_configuration.py<br/>│ └─ run_jupyter.sh<br/>├─ libs/<br/>│ └─ nbimport.py<br/>├─ notebooks/<br/>│ └─ …<br/>└─ run.sh</span></pre><ul class=""><li id="6b1a" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk nq my mz na bi translated">文件夹包含 JupyterLab 项目的配置文件。这些文件配置 Docker 容器，安装软件包，并配置 JupyterLab 环境。</li><li id="436b" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated"><code class="fe ng nh ni nj b">libs</code>-文件夹包含软件库，这些软件库不是作为软件包安装的，而是作为文件添加的，例如您在其他项目中自己编写的 Python 模块。</li><li id="6ed3" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">文件夹是我们放笔记本的目录。</li></ul><p id="d3f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在 Dockerfile 文件中，我们设置指向这些目录的环境变量。因为配置中的脚本使用了这些环境变量，所以如果愿意，您可以编辑它们。只要确保变量中的路径与实际路径匹配即可。</p><pre class="kn ko kp kq gt nr nj ns nt aw nu bi"><span id="5a73" class="nv kv iq nj b gy nw nx l ny nz">ENV MAIN_PATH=/usr/local/bin/{projectname}<br/>ENV LIBS_PATH=${MAIN_PATH}/libs<br/>ENV CONFIG_PATH=${MAIN_PATH}/config<br/>ENV NOTEBOOK_PATH=${MAIN_PATH}/notebooks</span></pre><p id="9bb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在配置中，我们将当前工作目录(<code class="fe ng nh ni nj b">{path_to_your_project}</code>)映射到容器中的<code class="fe ng nh ni nj b">${MAIN_PATH}</code>-文件夹。因此，您放入该目录的任何文件在您的 JupyterLab 项目中都是可用的。反之亦然，您在 JupyterLab 中添加或更改的任何文件(例如 Jupyter 笔记本)都会出现在您的主机上。</p><p id="ebf9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，在 Dockerfile 的<code class="fe ng nh ni nj b">EXPOSE</code>命令中，我们指定配置提供 JupyterLab 端口<code class="fe ng nh ni nj b">8888</code>。容器内的这个端口被映射到您的主机计算机的端口。</p><p id="cfba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下图描述了容器如何将其文件系统和端口连接到主机。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi od"><img src="../Images/0bafaed8c4fb8027d9bc639146dea821.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4vuRtKkp_tZAYb5l7utLHA.png"/></div></div><figcaption class="nl nm gj gh gi nn no bd b be z dk">Connect the file system and the port</figcaption></figure><h1 id="0601" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">特定于 JupyterLab 的配置</h1><p id="3101" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">我们 docker 文件中的最后一个命令是<code class="fe ng nh ni nj b">CMD</code>-命令。它告诉 Docker 无论何时启动容器都要执行这条指令。在配置中，我们执行<code class="fe ng nh ni nj b">run_jupyter.sh</code>-脚本。这个脚本允许我们做一些最后的准备，比如:</p><ul class=""><li id="978d" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk nq my mz na bi translated">将<code class="fe ng nh ni nj b">jupyter_notebook_configuration.py</code>文件放在 JupyterLab 期望的位置</li><li id="8243" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">配置一个定制的 Jupyter-Kernel 来自动加载<code class="fe ng nh ni nj b">nbimport.py</code> Python 模块</li></ul><p id="4d26" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ng nh ni nj b">jupyter_notebook_configuration.py</code>可让您配置 Jupyter 笔记本电脑服务器，例如设置用于网络认证的密码。可用选项列表可在<a class="ae kl" href="https://jupyter-notebook.readthedocs.io/en/stable/config.html" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="2e8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">定制 Python 内核将<code class="fe ng nh ni nj b">${LIBS_PATH}</code>添加到您的 Python <code class="fe ng nh ni nj b">sys.path</code>中。这允许您从<code class="fe ng nh ni nj b">${LIBS_PATH}</code>-文件夹中导入任何 Python 模块，例如<code class="fe ng nh ni nj b">import libs.nbimport</code>。此<code class="fe ng nh ni nj b">nbimport.py</code>-模块进一步使您能够导入位于<code class="fe ng nh ni nj b">${NOTEBOOK_PATH}</code>-文件夹中的笔记本。每当你用 Python 内核启动 Jupyter 笔记本时，系统会自动为你做这些事情。</p><p id="7197" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，<code class="fe ng nh ni nj b">run_jupyter.sh</code>-脚本启动 JupyterLab。您现在可以在浏览器中打开<code class="fe ng nh ni nj b">localhost:8888</code>，其中<code class="fe ng nh ni nj b">8888</code>是您指定的端口。</p><p id="9ac3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下图描述了完整的 JupyterLab 配置。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi oe"><img src="../Images/5f3cebd1717ce65c0ac6e5a32b1ce5e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oZCK6yMowP8TTRhSivhPqQ.png"/></div></div><figcaption class="nl nm gj gh gi nn no bd b be z dk">The complete JupyterLab configuration</figcaption></figure><h1 id="6349" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">摘要</h1><p id="46d9" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">JupyterLab-Configurator 可让您轻松创建自定义配置。这个<strong class="jp ir"> JupyterLab-Configuration </strong>在<strong class="jp ir">容器</strong>中运行 JupyterLab。它将 JupyterLab 运行的环境与主机环境分开。因此，您可以更改 JupyterLab 环境(例如，卸载/安装软件包),而不会影响您的主机或任何其他项目。</p><p id="6c65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个<strong class="jp ir">JupyterLab-Configuration</strong>使用<strong class="jp ir">脚本</strong>自动完成整个设置。这些脚本:</p><ul class=""><li id="4882" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk nq my mz na bi translated">使您能够使用<strong class="jp ir">单个命令</strong>(例如<code class="fe ng nh ni nj b">sh run.sh</code>)运行 JupyterLab</li><li id="9508" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">使您的项目可移植:只需将目录移动或复制到另一台主机上</li><li id="acbd" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">揭示您的配置的一部分，并允许您查看和编辑您的配置</li><li id="fc2a" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk nq my mz na bi translated">让您的配置成为您的源代码的一部分。您可以像对代码进行版本控制一样对它们进行版本控制</li></ul><p id="a5d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">GitHub-repository<a class="ae kl" href="https://github.com/frankzickert/jupyterlab-configuration" rel="noopener ugc nofollow" target="_blank">提供了完整的源代码。</a></p><p id="43e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用 JupyterLab 配置非常简单:</p><ol class=""><li id="5b04" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk mx my mz na bi translated">执行<code class="fe ng nh ni nj b">sh {path_to_your_project}/run.sh</code></li><li id="4927" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">在浏览器中打开<code class="fe ng nh ni nj b">localhost:8888</code></li></ol><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi nk"><img src="../Images/3b82578272a7b1bd0c349a3f31c0f575.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2f3HOznZ7tkoy5w1C2RZHw.png"/></div></div><figcaption class="nl nm gj gh gi nn no bd b be z dk">Using the JupyterLab configuration</figcaption></figure><p id="f548" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="mr">注</em> </strong>:运行 Docker 容器的能力是这个 JupyterLab-Configuration 对主机的唯一要求。Docker 在 Windows 上可用，并且最近获得了运行基于 Linux 的容器的能力。因此，Jupyterlab 没有理由不在 Windows 上运行。如果你想尝试一下，你需要运行 Docker，并将<code class="fe ng nh ni nj b">run.sh</code>的<code class="fe ng nh ni nj b">docker build</code>和<code class="fe ng nh ni nj b">docker run</code>命令移动到一个可以在 Windows 上执行的<code class="fe ng nh ni nj b">.cmd</code>文件中。</p></div></div>    
</body>
</html>