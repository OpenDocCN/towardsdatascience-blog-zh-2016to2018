<html>
<head>
<title>A Quick Introduction to the “Pandas” Python Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">“熊猫”Python库快速介绍</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-quick-introduction-to-the-pandas-python-library-f1b678f34673?source=collection_archive---------0-----------------------#2017-04-18">https://towardsdatascience.com/a-quick-introduction-to-the-pandas-python-library-f1b678f34673?source=collection_archive---------0-----------------------#2017-04-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/995a801902903809fc2a5dbb35077bd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*9IU5fBzJisilYjRAi-f55Q.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk">Pandas are cute, but it’s a different kind of panda :)</figcaption></figure><h1 id="8f1a" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">一些背景</h1><p id="3eb5" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">大家好！今天我想写关于<a class="ae lx" href="http://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">熊猫图书馆</a>(链接到网站)。Pandas代表“Python数据分析库”。根据维基百科关于熊猫的页面，“这个名字来源于术语“<a class="ae lx" href="https://en.wikipedia.org/wiki/Panel_data" rel="noopener ugc nofollow" target="_blank">面板数据</a>”，<a class="ae lx" href="https://en.wikipedia.org/wiki/Econometrics" rel="noopener ugc nofollow" target="_blank">计量经济学术语</a>多维结构化数据集。”但我觉得这只是一个超级有用的Python库的可爱名字！</p><p id="f199" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">当谈到用Python分析数据时，Pandas是一个相当大的游戏改变者，它是数据管理/争论中最受欢迎和广泛使用的工具之一。Pandas是开源的，可以免费使用(在BSD许可下),它最初是由<a class="ae lx" href="https://en.wikipedia.org/wiki/Wes_McKinney" rel="noopener ugc nofollow" target="_blank"> Wes McKinney </a>编写的(这里有他的<a class="ae lx" href="https://github.com/wesm" rel="noopener ugc nofollow" target="_blank"> GitHub页面</a>的链接)。</p><p id="394b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">Pandas的酷之处在于它获取数据(如CSV或TSV文件，或SQL数据库)并创建一个包含行和列的Python对象，称为数据框，它看起来非常类似于统计软件中的表格(例如Excel或SPSS)。熟悉R的人也会看到R的相似之处)。与通过for循环或列表理解来使用列表和/或字典相比，这要容易得多(请随意查看我以前的一篇关于使用Python进行非常基本的数据分析的博客文章<a class="ae lx" href="https://medium.com/@adi.bronshtein/the-first-week-of-general-assembly-dsi-and-some-basic-python-6148099be7c0" rel="noopener">。用熊猫做我在那里做的事情会容易得多！).</a></p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="2774" class="kb kc it bd kd ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku mo kw kx ky bi translated">安装和入门</h1><p id="0abf" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">为了“得到”熊猫，你需要安装它。您还需要Python 3.5.3及更高版本。作为安装的先决条件(将与Python 3.6、3.7或3.8一起工作)，它还依赖于其他库(如<a class="ae lx" href="http://www.numpy.org/" rel="noopener ugc nofollow" target="_blank"> NumPy </a>)并具有可选的依赖项(如用于绘图的Matplotlib)。因此，我认为安装Pandas最简单的方法是通过一个包来安装它，比如<a class="ae lx" href="https://www.continuum.io/downloads" rel="noopener ugc nofollow" target="_blank"> Anaconda发行版</a>，“一个用于数据分析和科学计算的跨平台发行版”你可以在那里下载Windows、OS X和Linux版本。如果您想以不同的方式安装，这些是<a class="ae lx" href="http://pandas.pydata.org/pandas-docs/stable/install.html" rel="noopener ugc nofollow" target="_blank">的完整安装说明</a>。</p><p id="6e4b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">为了在您的Python IDE ( <a class="ae lx" href="https://en.wikipedia.org/wiki/Integrated_development_environment" rel="noopener ugc nofollow" target="_blank">集成开发环境</a>)中使用Pandas，如<a class="ae lx" href="http://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> Jupyter Notebook </a>或<a class="ae lx" href="https://pythonhosted.org/spyder/" rel="noopener ugc nofollow" target="_blank"> Spyder </a>(两者都默认带有Anaconda)，您需要首先<em class="mp">导入</em>Pandas库。导入一个库意味着把它加载到内存中，然后你就可以使用它了。为了导入Pandas，您只需运行以下代码:</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="f87d" class="mz kc it mv b gy na nb l nc nd">import pandas as pd <br/>import numpy as np </span></pre><p id="cf69" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">通常你会添加第二部分(' as pd ')，这样你就可以用' pd.command '来访问Pandas，而不是每次需要使用它的时候都要写' pandas.command '。此外，您也可以导入numpy，因为它对于使用Python进行科学计算是非常有用的库。现在熊猫可以使用了！请记住，您需要在每次启动新的Jupyter笔记本、Spyder文件等时执行此操作。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/c28fe9685da1ab135111f90d38af54ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*93CVLqnQESmvfOhzvYUgQw.png"/></div></figure></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="54cf" class="kb kc it bd kd ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku mo kw kx ky bi translated">和熊猫一起工作</h1><h2 id="d279" class="mz kc it bd kd nf ng dn kh nh ni dp kl lk nj nk kp lo nl nm kt ls nn no kx np bi translated">用Pandas加载和保存数据</h2><p id="a7cb" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">当您想要使用Pandas进行数据分析时，您通常会以三种不同的方式使用它:</p><ul class=""><li id="4506" class="nq nr it lb b lc ly lg lz lk ns lo nt ls nu lw nv nw nx ny bi translated">将Python的列表、字典或Numpy数组转换为Pandas数据框</li><li id="a33e" class="nq nr it lb b lc nz lg oa lk ob lo oc ls od lw nv nw nx ny bi translated">使用熊猫打开一个本地文件，通常是一个CSV文件，但也可以是一个分隔文本文件(如TSV)，Excel等</li><li id="9adf" class="nq nr it lb b lc nz lg oa lk ob lo oc ls od lw nv nw nx ny bi translated">通过URL打开网站上的远程文件或数据库，如CSV或JSONon，或者从SQL表/数据库中读取</li></ul><p id="6fa2" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">每个选项都有不同的命令，但是当您打开一个文件时，它们看起来像这样:</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="1156" class="mz kc it mv b gy na nb l nc nd">pd.read_filetype()</span></pre><p id="a8fd" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">正如我之前提到的，熊猫可以处理不同的文件类型，所以你可以用实际的文件类型(比如CSV)替换“文件类型”。你应该在括号内给出路径、文件名等。在括号内，您还可以传递与如何打开文件相关的不同参数。有许多参数，为了了解它们，您必须阅读文档(例如，pd.read_csv() 的<a class="ae lx" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html" rel="noopener ugc nofollow" target="_blank">文档将包含您可以在这个Pandas命令中传递的所有参数)。</a></p><p id="02d3" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">为了转换某个Python对象(字典、列表等),基本命令是:</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="7802" class="mz kc it mv b gy na nb l nc nd">pd.DataFrame()</span></pre><p id="585b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在括号内，您可以指定创建数据框的对象。该命令也有<a class="ae lx" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html" rel="noopener ugc nofollow" target="_blank">不同的参数</a>(可点击链接)。</p><p id="3b4e" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">您还可以将正在处理的数据框保存到不同类型的文件中(如CSV、Excel、JSON和SQL表)。一般的代码是:</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="e773" class="mz kc it mv b gy na nb l nc nd">df.to_filetype(filename)</span></pre><h2 id="14c9" class="mz kc it bd kd nf ng dn kh nh ni dp kl lk nj nk kp lo nl nm kt ls nn no kx np bi translated">查看和检查数据</h2><p id="fabf" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">现在您已经加载了数据，是时候看一看了。数据框看起来怎么样？运行数据框的名称会得到整个表，但是您也可以用<code class="fe oe of og mv b">df.head(n)</code>得到前n行，或者用<code class="fe oe of og mv b">df.tail(n)</code>得到后n行。<code class="fe oe of og mv b">df.shape</code>会给你行数和列数。<code class="fe oe of og mv b">df.info()</code>会给你索引、数据类型和内存信息。命令<code class="fe oe of og mv b">s.value_counts(dropna=False)</code>将允许您查看一个系列(比如一列或几列)的唯一值和计数。一个非常有用的命令是<code class="fe oe of og mv b">df.describe()</code>，它输入数字列的汇总统计数据。也可以获得整个数据帧或一系列(一列等)的<strong class="lb iu">统计数据</strong>:</p><ul class=""><li id="e804" class="nq nr it lb b lc ly lg lz lk ns lo nt ls nu lw nv nw nx ny bi translated"><code class="fe oe of og mv b">df.mean()</code>返回所有列的平均值</li><li id="dd70" class="nq nr it lb b lc nz lg oa lk ob lo oc ls od lw nv nw nx ny bi translated"><code class="fe oe of og mv b">df.corr()</code>返回数据帧中各列之间的相关性</li><li id="3657" class="nq nr it lb b lc nz lg oa lk ob lo oc ls od lw nv nw nx ny bi translated"><code class="fe oe of og mv b">df.count()</code>返回每个数据框列中非空值的数量</li><li id="db1b" class="nq nr it lb b lc nz lg oa lk ob lo oc ls od lw nv nw nx ny bi translated"><code class="fe oe of og mv b">df.max()</code>返回每列中的最大值</li><li id="6d8d" class="nq nr it lb b lc nz lg oa lk ob lo oc ls od lw nv nw nx ny bi translated"><code class="fe oe of og mv b">df.min()</code>返回每列中的最小值</li><li id="a9c6" class="nq nr it lb b lc nz lg oa lk ob lo oc ls od lw nv nw nx ny bi translated"><code class="fe oe of og mv b">df.median()</code>返回每列的中值</li><li id="0462" class="nq nr it lb b lc nz lg oa lk ob lo oc ls od lw nv nw nx ny bi translated"><code class="fe oe of og mv b">df.std()</code>返回每列的标准偏差</li></ul><h2 id="3dc9" class="mz kc it bd kd nf ng dn kh nh ni dp kl lk nj nk kp lo nl nm kt ls nn no kx np bi translated">数据选择</h2><p id="fc0c" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">与从列表或字典中选择值相比，在Pandas中选择您想要的数据要容易得多。您可以选择一列(<code class="fe oe of og mv b">df[col]</code>)并将带有标签col的列作为系列返回，或者选择几列(<code class="fe oe of og mv b">df[[col1, col2]]</code>)并将列作为新的DataFrame返回。您可以按位置(<code class="fe oe of og mv b">s.iloc[0]</code>)或按索引(<code class="fe oe of og mv b">s.loc['index_one']</code>)进行选择。为了选择第一行，可以使用<code class="fe oe of og mv b">df.iloc[0,:]</code>，为了选择第一列的第一个元素，可以运行<code class="fe oe of og mv b">df.iloc[0,0]</code>。这些也可以用在不同的组合中，所以我希望它能给你一个不同的选择和索引的概念。</p><h2 id="b38c" class="mz kc it bd kd nf ng dn kh nh ni dp kl lk nj nk kp lo nl nm kt ls nn no kx np bi translated">筛选、排序和分组依据</h2><p id="3c73" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">您可以使用不同的条件来筛选列。例如，<code class="fe oe of og mv b">df[df[year] &gt; 1984]</code>将只给出大于1984年的列。您可以使用&amp; (and)或| (or)向您的过滤添加不同的条件。这也被称为<em class="mp">布尔过滤</em>。</p><p id="bc9d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">可以使用<code class="fe oe of og mv b">df.sort_values(col1)</code>对某一列中的值进行升序排序；并且还使用<code class="fe oe of og mv b">df.sort_values(col2,ascending=False)</code>以降序排列。此外，可以使用<code class="fe oe of og mv b">df.sort_values([col1,col2],ascending=[True,False])</code>按升序对值进行排序，然后按降序对值进行排序。</p><p id="5f8f" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">本节中的最后一个命令是groupby。它包括根据某些标准将数据分组，独立地对每个组应用一个函数，并将结果组合成一个数据结构。<code class="fe oe of og mv b">df.groupby(col) </code>返回一列值的groupby对象，而<code class="fe oe of og mv b">df.groupby([col1,col2]) </code>返回多列值的groupby对象。</p><h2 id="6ff5" class="mz kc it bd kd nf ng dn kh nh ni dp kl lk nj nk kp lo nl nm kt ls nn no kx np bi translated">数据清理</h2><p id="1b5c" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">数据清洗是数据分析中非常重要的一步。例如，我们总是通过运行检查空值的<code class="fe oe of og mv b">pd.isnull()</code>来检查数据中的缺失值，并返回一个布尔数组(缺失值的数组为<em class="mp">真</em>，非缺失值的数组为<em class="mp">假</em>)。为了获得空值/缺失值的总和，运行<code class="fe oe of og mv b">pd.isnull().sum()</code>。<code class="fe oe of og mv b">pd.notnull() </code>与<code class="fe oe of og mv b">pd.isnull()</code>相反。在你得到缺失值的列表后，你可以去掉它们，或者通过使用<code class="fe oe of og mv b">df.dropna()</code>删除行或者<code class="fe oe of og mv b">df.dropna(axis=1)</code>删除列来删除它们。另一种不同的方法是用其他值填充缺失值，方法是使用<code class="fe oe of og mv b">df.fillna(x)</code>用x填充缺失值(您可以随意放置),或者使用<code class="fe oe of og mv b">s.fillna(s.mean())</code>用平均值替换所有空值(平均值可以用统计部分的几乎任何函数替换)。</p><p id="8807" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">有时需要用不同的值替换值。例如，<code class="fe oe of og mv b">s.replace(1,'one') </code>将用<code class="fe oe of og mv b">'one'</code>替换所有等于<code class="fe oe of og mv b">1</code>的值。对于多个值也可以这样做:<code class="fe oe of og mv b">s.replace([1,3],['one','three']) </code>将用<code class="fe oe of og mv b">'one'</code>替换所有的1，用<code class="fe oe of og mv b">'three'</code>替换<code class="fe oe of og mv b">3</code>。您还可以通过运行:<code class="fe oe of og mv b">df.rename(columns={'old_name': 'new_ name'})</code>来重命名特定的列，或者使用<code class="fe oe of og mv b">df.set_index('column_one')</code>来更改数据框的索引。</p><h2 id="a168" class="mz kc it bd kd nf ng dn kh nh ni dp kl lk nj nk kp lo nl nm kt ls nn no kx np bi translated">加入/合并</h2><p id="4a7e" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">最后一组基本Pandas命令用于连接或组合数据帧或行/列。这三个命令是:</p><ul class=""><li id="68f1" class="nq nr it lb b lc ly lg lz lk ns lo nt ls nu lw nv nw nx ny bi translated"><code class="fe oe of og mv b">df1.append(df2)</code> —将<code class="fe oe of og mv b">df1</code>中的行添加到<code class="fe oe of og mv b">df2</code>的末尾(列应该相同)</li><li id="2fa2" class="nq nr it lb b lc nz lg oa lk ob lo oc ls od lw nv nw nx ny bi translated"><code class="fe oe of og mv b">df.concat([df1, df2],axis=1)</code> —将<code class="fe oe of og mv b">df1</code>中的列添加到<code class="fe oe of og mv b">df2</code>的末尾(行应该相同)</li><li id="d3fe" class="nq nr it lb b lc nz lg oa lk ob lo oc ls od lw nv nw nx ny bi translated"><code class="fe oe of og mv b">df1.join(df2,on=col1,how='inner')</code> — SQL样式将<code class="fe oe of og mv b">df1</code>中的列与<code class="fe oe of og mv b">df2</code>中的列连接起来，其中<code class="fe oe of og mv b">col</code>的行具有相同的值。怎么可能等于:<code class="fe oe of og mv b">'left'</code>、<code class="fe oe of og mv b">'right'</code>、<code class="fe oe of og mv b">'outer'</code>、<code class="fe oe of og mv b">'inner'</code>中的一个</li></ul></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="294e" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">这些是非常基本的Pandas命令，但我希望您能看到Pandas在数据分析方面有多么强大。这篇文章只是冰山一角——毕竟，整本书都可以(并且已经)写关于熊猫的数据分析。我也希望这篇文章让你感觉像拿着一个数据集，用熊猫来摆弄它！:)</p><p id="030b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">一如既往，如果你有任何意见，笔记，建议或问题，请不要犹豫给我写信！感谢阅读:)我将以一张可爱的熊猫图片和一个问题结束，大熊猫和小熊猫你更喜欢哪一个？？？</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="oi oj di ok bf ol"><div class="gh gi oh"><img src="../Images/b6dcbd750f5860cfa5e06cab44518858.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Uza5wbRmOGl-05h5J2pAw.jpeg"/></div></div></figure><p id="8b6c" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">下次见！</p><p id="57d3" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">附言</p><p id="e55d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">如果你喜欢这个教程，请查看我的<a class="ae lx" href="https://medium.com/@adi.bronshtein/a-quick-introduction-to-the-numpy-library-6f61b7dee4db" rel="noopener">NumPy</a>快速介绍！</p></div></div>    
</body>
</html>