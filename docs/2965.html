<html>
<head>
<title>How do Vancouverites feel about (de)-congestion pricing? A social media text mining approach.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">温哥华人对(取消)拥挤收费有什么看法？一种社交媒体文本挖掘方法。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-do-vancouverites-feel-about-de-congestion-pricing-a-social-media-text-mining-approach-90b3635f840c?source=collection_archive---------3-----------------------#2018-03-25">https://towardsdatascience.com/how-do-vancouverites-feel-about-de-congestion-pricing-a-social-media-text-mining-approach-90b3635f840c?source=collection_archive---------3-----------------------#2018-03-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="37bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">温哥华是世界上许多考虑移动定价策略的城市之一，希望以此减少交通拥堵，促进公平，支持交通投资。成立了一个<a class="ae kl" href="https://www.itstimemv.ca/" rel="noopener ugc nofollow" target="_blank">移动定价独立委员会</a>，对在温哥华市引入<a class="ae kl" href="https://www.itstimemv.ca/decongestion-charging.html" rel="noopener ugc nofollow" target="_blank">去拥堵收费</a>的可行性进行研究并提出建议，以实现这些目标。</p><p id="4121" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">几周前，我在委员会的脸书官方网页上浏览对其中一个<a class="ae kl" href="https://www.facebook.com/itstimemv/posts/1977924269096300:0" rel="noopener ugc nofollow" target="_blank">帖子</a>的评论——“是时候了，Metro Vancouver<em class="km"/>”——这两条评论引起了我的注意:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/3f507646b82eb394029928a95dce7eb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vv5Ym7mZv6OjB_yyoB7ixQ.png"/></div></div></figure><p id="c3b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在同一周，我有机会参加了由新威斯敏斯特市组织的小组讨论，会上发表了不同的意见。许多与会者认为移动定价是减少拥堵的灵丹妙药，而其他人则严重关注公平、公正和可负担性。在脸书和推特的官方页面上，我也观察到了一个类似的趋势，这让我很好奇——温哥华人对拥堵费有什么看法？</p><p id="f22c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的假设是:这是一种消极的感觉。显而易见先生——嘿，我听到了！不要认为我的话是理所当然的。正如w .爱德华兹·戴明曾经说过的:<em class="km"/><strong class="jp ir"><em class="km">我们信赖上帝；所有其他人带来的数据</em></strong><em class="km"/>。因此，让我们获取数据，进行一些分析，并对这一假设进行测试。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi kz"><img src="../Images/980c497dec26d29f8a8b1907a7c47098.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*MINb-ejYCab5RKkhqAplDA.gif"/></div></figure><p id="f935" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如你将在几分钟后看到的，我的分析得出结论，虽然关于这个有争议的话题确实有复杂的感情，但负面的<strong class="jp ir">情绪占主导地位。这是一种自然的反应:没有人愿意为他们曾经“免费”拥有的东西付费(许多纳税人认为这不是真正的免费)。这适用于任何形式的移动定价，尤其是在像美丽的温哥华这样的昂贵城市，以及我们目前支付的所有税收(包括汽油税)之外。也许这个一般观察的(唯一)例外是当人们看到引入新收费的价值时。不幸的是，真正的价值可能我们很多人都不清楚。</strong></p><blockquote class="la lb lc"><p id="8d32" class="jn jo km jp b jq jr js jt ju jv jw jx ld jz ka kb le kd ke kf lf kh ki kj kk ij bi translated">在我们看结果之前，我想指出一个重要的注意事项。这种分析所感受到的表达出来的情绪可能不能用它们的真实程度来表示。只有通过精心设计的实验，从<strong class="jp ir">的代表性样本</strong>中收集数据，才能对感兴趣的量进行准确的估计。在这一分析中，来自用户在脸书官方帖子上互动的数据只被<strong class="jp ir">使用了</strong>。诚然，这个样本不能被认为是一个代表性的样本，但尽管如此，它提供了一个镜头来回答这个有趣的问题。</p></blockquote><p id="8c60" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在接下来的两节中，我将解释数据是如何收集和分析的。分析在<code class="fe lg lh li lj b">R</code>中完成，源代码可在<a class="ae kl" href="https://github.com/moh-salah/Mobility-Pricing-Sentiment-Analysis" rel="noopener ugc nofollow" target="_blank"> Github </a>上获得。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="3d15" class="lr ls iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated"><strong class="ak">数据</strong></h1><p id="a7ed" class="pw-post-body-paragraph jn jo iq jp b jq mp js jt ju mq jw jx jy mr ka kb kc ms ke kf kg mt ki kj kk ij bi translated">数据收集自2017年10月下旬至2018年3月中旬委员会的官方<a class="ae kl" href="https://www.facebook.com/pg/itstimemv/posts/" rel="noopener ugc nofollow" target="_blank">脸书页面</a>。这一时期涵盖了<em class="km">是时候了</em>项目的整个公众参与阶段。</p><p id="dbf6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我使用了<code class="fe lg lh li lj b">Rfacebook</code>包——它提供了一个到<a class="ae kl" href="https://developers.facebook.com/" rel="noopener ugc nofollow" target="_blank">脸书API </a>的接口——来获取页面内容。数据分3步查询。首先我查询了帖子，然后是评论，最后是评论回复。帖子数据集包括发布的消息和类型(状态、照片、视频等。)，喜欢的次数和反应(喜欢，难过，生气等。)、份额数量、时间戳和ID。评论和评论回复数据集的结构几乎相同。两个数据集都包括发表的评论、赞数、时间戳和ID。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="e96a" class="lr ls iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated"><strong class="ak">分析</strong></h1><p id="9711" class="pw-post-body-paragraph jn jo iq jp b jq mp js jt ju mq jw jx jy mr ka kb kc ms ke kf kg mt ki kj kk ij bi translated">为了测量用户的印象，我们将从两个方面分析这些数据:一个是通过用户对每个帖子做出反应的显式情绪(对帖子的分析)。另一种是通过使用文本挖掘技术的情感分析(评论分析)。我将在下面的小节中详细讨论这两种方法。</p><p id="fe2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">一、职位分析</strong></p><p id="70c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了将事情放入perceptive并了解页面的活跃程度，让我们看看每月的帖子数量:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mu"><img src="../Images/9f6ea16b039537edbc6da47770d48c55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v3Lc4_rZEjhKnJcIaeyztA.png"/></div></div></figure><p id="97ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下图显示了每月的参与度。我不是社交媒体专家(甚至不是一个非常活跃的用户！)，但是，我理解“参与度”一词在营销和广告领域可能有不同的含义。在这个分析中，我将参与度定义为“用户每月的总活动量”，包括喜欢、反应、评论和分享的数量。</p><blockquote class="la lb lc"><p id="10de" class="jn jo km jp b jq jr js jt ju jv jw jx ld jz ka kb le kd ke kf lf kh ki kj kk ij bi translated">理想情况下，敬业度计算为一个比率或加权平均值，其中不同类型的敬业度根据其重要性进行加权。例如，一个帖子的分享应该比一个评论或类似的东西更重要。然而，就我有限的知识而言，没有明确的方法来量化这一点。因此，我决定简单地将不同类型的约定放在一起。也就是说，可能有一些重复计算(同一个人可能喜欢、分享和评论同一篇帖子)，这在下图中没有考虑到。由于我无法访问只有页面所有者或管理员才能访问的“洞察”数据(如帖子的总点击量或浏览量)，因此限制重复计算和/或计算更有意义的比率是不可行的。</p></blockquote><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mu"><img src="../Images/3e2b2db3e73729b54cea9fc23fd1b0f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bSbp_rsfAJVtUtvQUSOTKg.png"/></div></div></figure><p id="d9e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到正题:看起来二月是参与度最高的月份。接下来，我们来看看帖子反应的分布情况:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mu"><img src="../Images/b832b39b14758f5ade1cda6c1a5032c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bI6cWRdR7rHqOrBGYJhTVw.png"/></div></div></figure><p id="f6cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">特别感兴趣的，点赞数和愤怒情绪。总的来说，喜欢的情绪多于愤怒的情绪。以下是在参与阶段每个月的平均反应数，即喜欢和愤怒反应数的趋势:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mu"><img src="../Images/674f9b96cf11ccbe7214cfec90cdffee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ebmEZUyd4vLtw8mbvAF5dQ.png"/></div></div></figure><p id="2661" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在参与活动的早期阶段，没有太多的愤怒反应，然而，这一数字在2月份达到了最高水平。有意思！看起来二月份的帖子收到了最多的喜欢和愤怒情绪！</p><p id="a9fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看看最受欢迎的帖子是什么？</p><pre class="ko kp kq kr gt mv lj mw mx aw my bi"><span id="65ff" class="mz ls iq lj b gy na nb l nc nd">We’re studying Distance-Based Charges: charging per kilometre driven within a given boundary, varying by time and location. We’re exploring ways this type of charge could work in Metro Vancouver to figure out whether this approach would reduce congestion, improve fairness, and support transportation investment in our growing region. We want to hear your thoughts when online engagement opens on February 26!</span></pre><p id="872a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">收到最多愤怒反应的帖子是什么？</p><pre class="ko kp kq kr gt mv lj mw mx aw my bi"><span id="705f" class="mz ls iq lj b gy na nb l nc nd">We’re studying Distance-Based Charges: charging per kilometre driven within a given boundary, varying by time and location. We’re exploring ways this type of charge could work in Metro Vancouver to figure out whether this approach would reduce congestion, improve fairness, and support transportation investment in our growing region. We want to hear your thoughts when online engagement opens on February 26!</span></pre><p id="3cf9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不，这不是一个错误！同样的帖子获得了最高数量的喜欢和愤怒的反应。在不同的拥挤收费方法(警戒线收费、过路费等)中。)，看起来“基于距离的收费”是页面上讨论的最有争议的方法。有道理，对吧？</p><p id="2c8f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们进入下一部分之前，让我们将反应分为积极(喜欢和爱)和消极(生气、悲伤、哈哈和哇)情绪。我把哈哈和哇的反应归类为负面情绪，因为在这种情况下，它们分别与讽刺和震惊联系在一起。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mu"><img src="../Images/4d16384101a0b0e600f32c28ebf54bcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eOvG2VUT1T9ie11Nv6kLkw.png"/></div></div></figure><p id="cff7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">耶！</p><p id="5733" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">抓紧…我们不要太兴奋太快。评论中仍然隐藏着大量我们尚未看到的信息。下一节重点分析评论和评论回复。</p><p id="fa7c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">二。评论分析</strong></p><p id="253b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">根据所选的分析单位，有许多可能的方法来分析文本数据。一种方法是将分析单位定义为单词。另一种方法是将其定义为文本块(一句或多句)。后一种方法更现实，但也更复杂。</p><blockquote class="la lb lc"><p id="8ad4" class="jn jo km jp b jq jr js jt ju jv jw jx ld jz ka kb le kd ke kf lf kh ki kj kk ij bi translated">在我们深入分析之前，值得注意的是，我将评论和评论回复合并在一个数据集中。我还删除了页面管理员的所有评论，以便分析只关注用户的评论。在文本挖掘分析中，去除“停用词”和数字是很典型的，我也是这样做的。</p></blockquote><p id="293e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们来看看评论中最常用的词语:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mu"><img src="../Images/7a7a3b361c5152b2e243f982612ecae0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lgiq6TPi4Eu5SltWZQ0N-g.png"/></div></div></figure><p id="d24e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">“拥堵”这个词没有进入前五名！“税”是使用最多的词，其次是“人”——嗯，“税务人”只是提醒一下，以防你想知道:“不”是一个停用词，从正在分析的词包中删除。</p><p id="a5f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里是评论中使用的漂亮的彩色单词云——颜色和大小表示每个组的排名:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ne"><img src="../Images/1eb571411990f821097ec72bfba4f4e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lj-BgN9yUoLTMLPOPZKspA.png"/></div></div></figure><p id="2b7c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们将讨论从用户评论中挖掘情感的两种方法:作为单词和作为评论。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="42e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">二世。a .情感分析—字数</strong></p><p id="57d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们看了词频之后，现在让我们来看看这些词背后潜在的情感。这个过程通常被称为<strong class="jp ir">意见挖掘</strong>或<strong class="jp ir">情感分析。为了做到这一点，我们需要知道每个单词的相关情绪。幸运的是，有字典可以用来评估超过27，000个单词的相关意见或情绪。</strong></p><p id="e7fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个分析中，我使用了三个通用词汇:<code class="fe lg lh li lj b">AFINN</code>、<code class="fe lg lh li lj b">bing</code>和<code class="fe lg lh li lj b">nrc</code>——这三个都是<code class="fe lg lh li lj b">tidytext</code> <code class="fe lg lh li lj b">R</code>包的一部分。值得注意的是，这些词典是基于单字(即单个单词)。单字方法不考虑单词组合，如“不高兴”或“非常悲伤”。在某些文本中(如小说)，这可能不是一个问题。然而，对于预期会出现否定和讽刺的情况，比如在社交媒体文本中，基于词汇的方法可能不会返回最准确的结果。尽管如此，它们仍然可以用来获得评论中情感内容的总体感觉。</p><p id="1d44" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如使用R  的<a class="ae kl" href="https://www.tidytextmining.com/sentiment.html#the-sentiments-dataset" rel="noopener ugc nofollow" target="_blank"> <em class="km">文本挖掘中所述，<code class="fe lg lh li lj b">nrc</code>词典以二元方式(“是”/“否”)将单词分类为积极、消极、愤怒、预期、厌恶、恐惧、快乐、悲伤、惊讶和信任。<code class="fe lg lh li lj b">bing</code>词典以二元方式将单词分为积极和消极两类。<code class="fe lg lh li lj b">AFINN</code>词典给单词打分在-5到5之间，负分表示消极情绪，正分表示积极情绪。</em></a></p><p id="20d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们来看看基于三种词汇的结果是如何比较的:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mu"><img src="../Images/67795d65cf84906b3586c15e657a95cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8bY8hr35_EI0flQdB4e-aA.png"/></div></div><figcaption class="nf ng gj gh gi nh ni bd b be z dk">Word Sentiments using nrc lexicon</figcaption></figure><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mu"><img src="../Images/39bf77ba3d516d7150273b210f384fe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bIRrOZhwpCKk9Yi5LPYKTw.png"/></div></div><figcaption class="nf ng gj gh gi nh ni bd b be z dk">Word Sentiments using bing lexicon</figcaption></figure><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mu"><img src="../Images/de6db436a5e5bffe295a28abca042d66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HGPLLmQ0Ey_KBsALeSCCyA.png"/></div></div><figcaption class="nf ng gj gh gi nh ni bd b be z dk">Word Sentiments using AFINN lexicon</figcaption></figure><p id="4a21" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看起来,<code class="fe lg lh li lj b">bing</code>和<code class="fe lg lh li lj b">AFINN</code>词汇的结果更加一致——负面情绪的词汇更多。另一方面，将<code class="fe lg lh li lj b">nrc</code>词典中的不同情绪分为积极情绪和消极情绪(类似于我们之前对帖子反应所做的)会导致两组之间的单词份额几乎相等。鉴于我前面提到的这种方法的局限性，我不想在这些结果上多费口舌。相反，让我们看看如何将评论作为一个文本单元而不是一个词来进行情感分析。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="aa98" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">二。b .情感分析—评论</strong></p><p id="8761" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本节中，我们的目标是为每条评论分配一个情感分数，同时将评论视为一个文本单元，而不是单个单词。几年前，这不是一个简单的问题。然而，多亏了谷歌，这现在变得更加可行和容易实现。</p><p id="8fb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://cloud.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌云平台</a>的<a class="ae kl" href="https://cloud.google.com/blog/big-data/2017/01/new-features-in-the-google-cloud-natural-language-api-thanks-to-your-feedback" rel="noopener ugc nofollow" target="_blank">最新更新</a>提供了强大的机器学习API，这些API运行在复杂的深度学习模型背后，这些模型是多年来利用谷歌源源不断的数据和巨大的计算能力开发的。这些工具和服务使用户更容易在指尖驾驭机器学习的力量。自然语言处理(NLP) API 也不例外。我使用了<code class="fe lg lh li lj b"><a class="ae kl" href="https://cran.rstudio.com/web/packages/googleLanguageR" rel="noopener ugc nofollow" target="_blank">googleLanguageR</a></code>包来访问NLP API。为了能够访问这个API，必须首先获得一个密钥。查看<a class="ae kl" href="https://cloud.google.com/natural-language/docs/basics" rel="noopener ugc nofollow" target="_blank">谷歌文档</a>获取快速入门指南。建立一个软件开发帐户，除了300美元的注册积分之外，还提供每月一定限额(NLP API为5000)的免费访问。</p><p id="6604" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">NLP API提供不同的服务。出于本文的目的，我将只关注<strong class="jp ir">情绪分析。</strong>分析的重点是识别给定文本中的主流情感观点。根据谷歌的文档，情感是由数值<code class="fe lg lh li lj b">score</code>和<code class="fe lg lh li lj b">magnitude</code>来表示的。<code class="fe lg lh li lj b">score</code>的范围在-1和1之间，表示总体情绪是消极的还是积极的。与<code class="fe lg lh li lj b">score</code>不同的是，<code class="fe lg lh li lj b">magnitude</code>没有规格化。然而，它是一个正整数，表示情绪的强度(消极或积极)，通常与文本的长度相关(文本越长，<code class="fe lg lh li lj b">magnitude</code>越高)。</p><blockquote class="la lb lc"><p id="85bc" class="jn jo km jp b jq jr js jt ju jv jw jx ld jz ka kb le kd ke kf lf kh ki kj kk ij bi translated">为了验证API结果，我评估了一堆注释和它们的赋值<code class="fe lg lh li lj b">scores</code>。结果相当不错。正如人们所料，API背后的模型并不完美，但我多次惊讶于其对潜在情绪的捕捉。请记住，社交媒体文本通常是低质量的文本，包括拼写错误、表情符号和缩略语。我还注意到，非常短的评论经常得到零或接近零的<code class="fe lg lh li lj b">scores</code>。这可能表明，如果模型是不确定的，它会分配一个低的<code class="fe lg lh li lj b">score</code>——这是需要记住的。</p></blockquote><p id="1344" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是用户评论的<code class="fe lg lh li lj b">score</code>分布:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mu"><img src="../Images/feb6ce8632856d91588d0c0e3b5b25a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l4U8LzqHSjsGNXYPiGu7YA.png"/></div></div></figure><p id="87f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如你所见，负面评论比较多。然而，有很多零或接近零的评论<code class="fe lg lh li lj b">score</code>。我们应该如何处理这些问题？</p><p id="241d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">总的来说，<code class="fe lg lh li lj b">score</code>和<code class="fe lg lh li lj b">magnitude</code>指标可用于测量四种情绪水平，即:积极、消极、中性和混合情绪。例如，零或接近零的文本<code class="fe lg lh li lj b">score</code>可能被解释为低情绪或混合情绪的文本。低情绪文本是一个中立的观点，而混合情绪文本是一个积极和消极情绪相互抵消的文本。谷歌建议用<code class="fe lg lh li lj b">magnitude</code>来区分两者。具有低<code class="fe lg lh li lj b">score</code>和低<code class="fe lg lh li lj b">magnitude</code>的文本应归类为中性文本，而混合文本将具有低<code class="fe lg lh li lj b">score</code>和高<code class="fe lg lh li lj b">magnitude</code>。低和高的定义相当宽松；这在很大程度上取决于分析的背景。基于<code class="fe lg lh li lj b">score</code>的分布，并通过检查个人评论，我发现，平均而言，<code class="fe lg lh li lj b">score</code>在-0.2和0.2之间的文本既不明显是负面的，也不明显是正面的。类似地，通过查看<code class="fe lg lh li lj b">magnitude</code>低<code class="fe lg lh li lj b">score</code>评论的分布(在-0.2和0.2的范围内)，0.5似乎是定义低/高<code class="fe lg lh li lj b">magnitude</code>的合理界限。</p><p id="c8e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你还记得，根据明确的反应(例如，喜欢，愤怒的情绪)，我们发现关于“基于距离的收费”的帖子是同时收到最多喜欢和愤怒情绪的帖子。你猜怎么着？结果发现，同一篇帖子收到的正面和负面评论最多(基于四个定义的情绪水平)。这是对情感分析结果的很好的验证。</p><p id="912d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们来看看用户评论中情绪的四个层次的分布情况:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mu"><img src="../Images/6048f1dfc6ae8c63f95b5e9ddcc2c1e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z_hZTDhwuFsgoCyTXcCBrQ.png"/></div></div></figure><p id="95be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这并不奇怪。我们从<code class="fe lg lh li lj b">score</code>分布中得知，负面评论会更多。但是，正如你所看到的，也有相对较高比例的低情绪评论被分为中性和混合情绪评论。</p><p id="8d41" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们考虑一下看待这个问题的另一种方式。如果你是脸书用户，你可能知道评论和评论回复也可以被用户喜欢。让我们考虑这个假设的例子，对于一个给定的帖子，有两条评论:一条负面评论获得10个赞，一条正面评论获得15个赞。如果我们忽略喜欢的数量，我们会得出结论，该帖子被感知的比例为50/50。然而，与一个负面评论和10个喜欢(11个负面印象)相比，得出帖子被正面看待的结论可能更现实，因为有一个正面评论和15个喜欢(16个正面印象)。下图显示了基于他们收到的评论和相关赞数的分布情况。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mu"><img src="../Images/6238d6a34e97f2dcfea0692623cd622e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iCBPcBCFihZuKauKzAuLoQ.png"/></div></div></figure><blockquote class="la lb lc"><p id="8308" class="jn jo km jp b jq jr js jt ju jv jw jx ld jz ka kb le kd ke kf lf kh ki kj kk ij bi translated">这种方法是一种改进，但并不完美。同一个人可以任意多次评论一篇文章，也可以喜欢自己的评论。此外，更有可能的是，一个写了负面(或正面)评论的人也会喜欢同一帖子上的其他负面(或正面)评论。因为我们不知道对帖子(或评论)发表评论和/或喜欢评论(或评论回复)的用户的id，所以我们在解释这些结果时必须小心——它们不代表用户的百分比。然而，有人可能会争辩说，这些影响可能会相互抵消，不应该对结果产生太大影响。不幸的是，我们没有更多的数据来确认。</p></blockquote><p id="3dd3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，为了把事情放在一起，让我们把我们从用户对每个帖子的反应的显性情绪和我们从他们的评论中提取的隐性情绪结合起来。与我们之前所做的类似，我将喜欢和爱的反应的数量添加到正面评论及其相关喜欢的数量中，将愤怒、悲伤、哇和哈哈的反应的数量添加到负面评论及其相关喜欢的数量中。下面是情绪水平的总体分布:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mu"><img src="../Images/b00fe9f8623f4ec7ef5f3bcedb6dda8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4DZV123-2S04_0vdYaMVgA.png"/></div></div></figure><p id="2426" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">哒哒！该图总结了分析。它结合了我们从帖子和评论分析中学到的见解。这也证实了我最初的假设——负面情绪占主导地位。好消息是，现在我们对情绪水平的分布有了更好的认识。中性和混合感觉占整体分布的40%左右。与强烈反对的人相比，不确定引入移动定价的人可能更容易改变看法。这可以通过解决他们关心的问题并帮助他们理解问题的复杂性和欣赏提议的解决方案来实现。第一步是确定这些评论和相关的意见/关注点——这种类型的分析有助于实现这一点。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="bc2e" class="lr ls iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">TL；博士；医生</h1><p id="118c" class="pw-post-body-paragraph jn jo iq jp b jq mp js jt ju mq jw jx jy mr ka kb kc ms ke kf kg mt ki kj kk ij bi translated">在这篇文章中，我们使用文本挖掘技术来分析社交媒体源。特别是，从独立移动定价委员会的官方脸书网页收集数据。我们探索了几种分析公开可用数据的方法，并提出了一种了解用户情绪水平的方法。这是数据科学和机器学习如何从半非结构化数据中提供有价值的见解的一个例子。</p><p id="e219" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">交通拥堵和移动定价是影响每个人日常生活的争议话题。个人不太可能意识到向他们曾经免费拥有的东西收费的价值。这解释了为什么就需求管理这样一个复杂的概念教育公众不是一件容易的事情。我们发现，虽然用户表达了许多中性和混合的情绪，但负面情绪占主导地位。这样的反应是意料之中的。这一分析帮助我们理解了不同情绪水平的分布，这对制定公众参与策略非常有用。</p><p id="f45f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">谢谢你的来访！我希望你喜欢阅读这篇文章，我很想听到你的反馈。欢迎在评论中给我留言。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><blockquote class="la lb lc"><p id="9473" class="jn jo km jp b jq jr js jt ju jv jw jx ld jz ka kb le kd ke kf lf kh ki kj kk ij bi translated">在这个帖子中表达的观点和看法完全是我的。用于进行分析的数据和信息都是公开的，不包含任何敏感和/或个人信息。代码可在<a class="ae kl" href="https://github.com/moh-salah/Mobility-Pricing-Sentiment-Analysis" rel="noopener ugc nofollow" target="_blank">这里</a>获得，但是，数据集不符合API服务提供商的条款和条件。您可以通过按照代码中提供的步骤获取数据来重现结果。探索愉快！</p></blockquote></div></div>    
</body>
</html>