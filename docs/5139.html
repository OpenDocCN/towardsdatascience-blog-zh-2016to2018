<html>
<head>
<title>Machine Learning Model for Predicting Click-Through in Hotel Online Ranking</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">预测酒店在线排名点击量的机器学习模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/machine-learning-model-for-predicting-click-through-in-hotel-online-ranking-d55fc18c8516?source=collection_archive---------10-----------------------#2018-09-29">https://towardsdatascience.com/machine-learning-model-for-predicting-click-through-in-hotel-online-ranking-d55fc18c8516?source=collection_archive---------10-----------------------#2018-09-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/1a45e4f4724f5de0e9125d11b70171ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tScS95_weyTxZIexseJ6Aw.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo credit: pexels</figcaption></figure><div class=""/><div class=""><h2 id="2b6a" class="pw-subtitle-paragraph kc je jf bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">如何应用机器学习技术来最大化呈现选项的点击率</h2></div><p id="31d1" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">酒店个性化和排名的核心是将一组酒店与一组品味各异、有时难以察觉的游客相匹配。匹配的准确性取决于在线旅行社(OTA)如何利用他们的可用信息，如给定的酒店特征、酒店的位置吸引力、用户的总购买历史和竞争对手的信息等，来推断旅行者对酒店的偏好。例如，<a class="ae lq" href="https://www.computerworlduk.com/data/how-hotelscom-uses-data-science-personalise-customer-experience-3662447/" rel="noopener ugc nofollow" target="_blank">Hotels.com 通过编辑客户的搜索标准，当他们进行旅游查询时，在结果列表的顶部呈现最具竞争力的产品来满足他们的需求</a>。</p><p id="66e1" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">这是我们今天的目标:应用机器学习技术来最大化所呈现选择的点击率，其中点击表明访问者的兴趣，并可能决定预订。</p><p id="e6ed" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">最终，这就是我们想要实现的:当用户将他(或她)的搜索标准输入到酒店搜索引擎中时，会根据上述排名算法向他(或她)显示一个经过筛选的个性化排序的可用酒店列表，从而使列表顶部的酒店成为用户点击概率最高的酒店。我们一步一步来。</p><h1 id="aa43" class="lr ls jf bd lt lu lv lw lx ly lz ma mb kl mc km md ko me kp mf kr mg ks mh mi bi translated">数据描述</h1><p id="912d" class="pw-post-body-paragraph ku kv jf kw b kx mj kg kz la mk kj lc ld ml lf lg lh mm lj lk ll mn ln lo lp ij bi translated">数据集包含以下信息，可以从<a class="ae lq" href="https://www.kaggle.com/c/expedia-personalized-sort/data" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>下载，我们将使用 train.csv</p><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mo"><img src="../Images/cad7696e78deb7d18a135b8c58f0fa34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*feRBOEwTPGtg2OURVqVZuw.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 1</figcaption></figure><p id="6644" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">让我们试着让列名更直观。</p><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mt"><img src="../Images/3933b598f50459bf0d3b3e2760bdf56f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ivAH_xUOsGaQmGEIDsQeOA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 2</figcaption></figure><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mu"><img src="../Images/0a5640ba02e286c56f326ce39f8b03bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2OVvOA9OcNOjf9MUXbWOUA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 3</figcaption></figure><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mv"><img src="../Images/65e52c348a747c7108da0233639cd3fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OJYx0xCkj04cZWuRF1p4Tg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 4</figcaption></figure><h1 id="2a15" class="lr ls jf bd lt lu lv lw lx ly lz ma mb kl mc km md ko me kp mf kr mg ks mh mi bi translated">数据预处理</h1><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="61bb" class="nb ls jf mx b gy nc nd l ne nf">import pandas as pd</span><span id="18ee" class="nb ls jf mx b gy ng nd l ne nf">df = pd.read_csv('train.csv')<br/>df.shape</span></pre><p id="d94c" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><strong class="kw jg"> <em class="nh"> (9917530，54) </em> </strong></p><p id="df75" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">这是一个包含近 1000 万个观测值和 54 个特征的大型数据集。因此，我正在寻找一种方法使它更易于管理。</p><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="97df" class="nb ls jf mx b gy nc nd l ne nf">import matplotlib.pyplot as plt<br/>n, bins, patches = plt.hist(df.prop_country_id, 100, density = 1, facecolor='blue', alpha=0.75)<br/>plt.xlabel('Property country Id')<br/>plt.title('Histogram of prop_country_id')<br/>plt.show();</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/f42feaa69c0d898926e0979b45cac0b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*6hhx-xIhkygF9W5OO07gXw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 5</figcaption></figure><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="c804" class="nb ls jf mx b gy nc nd l ne nf">df.groupby('prop_country_id').size().nlargest(5)</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/0a2069493f274f81c3f013b5084bda9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*tz4aHUtz-uPt_tbXMnKc2g.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 6</figcaption></figure><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="842e" class="nb ls jf mx b gy nc nd l ne nf">n, bins, patches = plt.hist(df.visitor_location_country_id, 100, density = 1, facecolor='blue', alpha=0.75)<br/>plt.xlabel('Visitor location country Id')<br/>plt.title('Histogram of visitor_location_country_id')<br/>plt.show();</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/718d6ed7e3d9f4d38cce122751b16a6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*yDWJht6ag5pR4UAVWUpoDw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 7</figcaption></figure><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="010e" class="nb ls jf mx b gy nc nd l ne nf">df.groupby('visitor_location_country_id').size().nlargest(5)</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/34131d8bcd727e1e2a8fd9809144d3c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*59qn4i9-m-9piu0mCH20ww.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 8</figcaption></figure><p id="36df" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">这些数据是匿名的，因此无法确定消费者计划前往的确切国家或城市。然而，很明显，最大的国家(标为 219)是美国。最大的国家有 61%的观测值。其中，58%的搜索是由也在这个国家的消费者进行的，这表明该国幅员辽阔，国内旅游占很大一部分。价格货币也表明最大的国家是美国。</p><p id="34c3" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">因此，为了提高计算效率，我们将在美国游客身上训练独立模型。这种方法大大减少了训练时间。</p><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="369a" class="nb ls jf mx b gy nc nd l ne nf">us = df.loc[df['visitor_location_country_id'] == 219]<br/>us = us.sample(frac=0.6, random_state=99)<br/>del us['visitor_location_country_id']</span></pre><p id="ce46" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">受限于计算能力，我们随机取美国数据集的 60%。然后删除“访问者 _ 位置 _ 国家 _id”列。</p><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="6dd2" class="nb ls jf mx b gy nc nd l ne nf">us.isnull().sum()</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/a5cc8ecca7bc18ccf83db8bfeed23af9.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*qFLEFX85jOVZtvm4EDyvEw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 9</figcaption></figure><p id="c3d0" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">如您所见，我们在许多功能中有许多缺失的数据。我们将删除 NaN 值超过 90%的特征，还将删除“日期时间”、“位置标识”和“属性标识”，并估算包含 NaN 值不到 30%的三个特征，它们是:“属性查看得分”、“属性位置得分 2”和“原始目的地距离”。</p><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="a9de" class="nb ls jf mx b gy nc nd l ne nf">cols_to_drop = ['date_time', 'visitor_hist_starrating', 'visitor_hist_adr_usd', 'srch_query_affinity_score', 'comp1_rate', 'comp1_inv', 'comp1_rate_percent_diff', 'comp2_rate_percent_diff', 'comp3_rate_percent_diff', 'comp4_rate_percent_diff', 'comp5_rate_percent_diff', 'comp6_rate_percent_diff', 'comp7_rate_percent_diff', 'comp8_rate_percent_diff', 'comp2_rate', 'comp3_rate', 'comp4_rate', 'comp5_rate', 'comp6_rate', 'comp7_rate', 'comp8_rate', 'comp2_inv', 'comp3_inv', 'comp4_inv', 'comp5_inv', 'comp6_inv', 'comp7_inv', 'comp8_inv', 'gross_bookings_usd', 'srch_id', 'prop_id']<br/>us.drop(cols_to_drop, axis=1, inplace=True)</span></pre><p id="8cc4" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><strong class="kw jg">随机估算“prop _ review _ score”</strong></p><figure class="mp mq mr ms gt is"><div class="bz fp l di"><div class="nn no l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">random_impute</figcaption></figure><p id="f6d2" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">这种方法消除了平均数或总数估计量的插补方差，同时保持了项目值的分布。</p><p id="a2d0" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><strong class="kw jg">用平均值</strong>估算“道具位置得分 2”</p><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="fac3" class="nb ls jf mx b gy nc nd l ne nf">us['prop_location_score2'].fillna((us['prop_location_score2'].mean()), inplace=True)</span></pre><p id="9874" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><strong class="kw jg">用中间值</strong>估算“起点 _ 终点 _ 距离”</p><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="2ccb" class="nb ls jf mx b gy nc nd l ne nf">us['orig_destination_distance'].fillna((us['orig_destination_distance'].median()), inplace=True)</span></pre><p id="f9d8" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">我们受够了指责！</p><h1 id="03b4" class="lr ls jf bd lt lu lv lw lx ly lz ma mb kl mc km md ko me kp mf kr mg ks mh mi bi translated">电子设计自动化(Electronic Design Automation)</h1><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="ba5c" class="nb ls jf mx b gy nc nd l ne nf">us.shape</span></pre><p id="aaaf" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><strong class="kw jg"> <em class="nh"> (3467283，22) </em> </strong></p><p id="3189" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">经过基本的数据清理后，我们的美国数据集包含超过 340 万个观测值和 22 个特征。让我们来探索这些特性。</p><p id="65e4" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><strong class="kw jg">点击并预订</strong></p><p id="452a" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">我们的目标变量是“click_bool”，而不是“booking_bool”。因为哪里有预订，哪里就一定有点击，我们要优化点击。</p><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="b539" class="nb ls jf mx b gy nc nd l ne nf">import matplotlib.pyplot as plt<br/>import seaborn as sns<br/>sns.countplot(x='booking_bool',data=us, palette='hls')<br/>plt.show();</span><span id="0252" class="nb ls jf mx b gy ng nd l ne nf">us['booking_bool'].value_counts()</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/087377aacfd19753260f8e5f54df5910.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ITrE-VQnllMIi7yA2SmbCQ.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 10</figcaption></figure><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/f30cca540b9bd8210d5c9db67a5b88fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*k8Ajzv3sbUYDWN3fNOlgjQ.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 11</figcaption></figure><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="2da1" class="nb ls jf mx b gy nc nd l ne nf">sns.countplot(x='click_bool',data=us, palette='hls')<br/>plt.show();</span><span id="6e16" class="nb ls jf mx b gy ng nd l ne nf">us['click_bool'].value_counts()</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nr"><img src="../Images/586ab739238e1c88d484fc5f246a6d2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DFD9v6geeRmo9vhVCF01lg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 12</figcaption></figure><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/d0f66a8bdf564f3ac86358e97f12525d.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/1*qYMAOSbIsiDTAeA4Jb8NXQ.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 13</figcaption></figure><p id="ba4c" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">由于在线旅游业务的性质，预订率(2.8%)和点击率(4.3%)都非常低，非点击印象非常严重，类别非常不平衡。</p><p id="d0ea" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><strong class="kw jg">搜索停留时间</strong></p><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="37e0" class="nb ls jf mx b gy nc nd l ne nf">n, bins, patches = plt.hist(us.srch_length_of_stay, 50, density = 1, facecolor='blue', alpha=0.75)<br/>plt.xlabel('Search length of stay')<br/>plt.title('Histogram of search_length_of_stay')<br/>plt.axis([0, 30, 0, 0.65])<br/>plt.show();</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/822edebda38a3eb8c40f2f85e402b80a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*t9N_d_dfdwA8xbYo9ZFgEA.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 14</figcaption></figure><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="4053" class="nb ls jf mx b gy nc nd l ne nf">us.groupby('srch_length_of_stay').size().nlargest(5)</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/7bfc95597bfc0a30833f1e739bc5005c.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*dzB8VFfjUOljaAeOj65LPw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 15</figcaption></figure><p id="0ccb" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">搜索最多的停留时间是 1 天，然后是 2 天、3 天……没有异常值。</p><p id="5cf8" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><strong class="kw jg">搜索成年人数量</strong></p><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="7944" class="nb ls jf mx b gy nc nd l ne nf">n, bins, patches = plt.hist(us.srch_adults_count, 20, density = 1, facecolor='blue', alpha=0.75)<br/>plt.xlabel('Search adults count')<br/>plt.title('Histogram of search_adults_count')<br/>plt.show();</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/f2492ef7b44b0648dcdcbbe72021d8b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*_efpcbgohP4KdGDolVCLmg.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 16</figcaption></figure><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="24c8" class="nb ls jf mx b gy nc nd l ne nf">df.groupby('srch_adults_count').size().nlargest(5)</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/09c531e9a48cee1010a6b8984f2ed08f.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*_-5UdGNtMnbdA3ZdkNmDlw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 17</figcaption></figure><p id="191a" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">最常见的搜索成人计数是 2-成人，然后 1-成人，有意义。</p><p id="96b4" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><strong class="kw jg">房产星级评定</strong></p><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="1e65" class="nb ls jf mx b gy nc nd l ne nf">n, bins, patches = plt.hist(us.prop_starrating, 20, density = 1, facecolor='blue', alpha=0.75)<br/>plt.xlabel('Property star rating')<br/>plt.title('Histogram of prop_star_rating')<br/>plt.show();</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/80e51f231a429ed1ec37a8926e7eef45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*jiJlCkx8-vS3BLttygh76A.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 18</figcaption></figure><p id="b904" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">最常见的搜索属性星级是 3 星。很高兴知道，我会想得更高。</p><p id="2aad" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><strong class="kw jg">物业是不是品牌</strong></p><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="d4b9" class="nb ls jf mx b gy nc nd l ne nf">us.groupby('prop_brand_bool').size()</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/fe681b876428caf1f283dda80860e19f.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/1*CQke0dG_zMpYl2U4hBSdmA.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 19</figcaption></figure><p id="d483" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">73%以上的物业是品牌物业。这很有意义，因为我们谈论的是美国酒店和美国游客。</p><p id="f684" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">周六是否留下</p><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="dbaa" class="nb ls jf mx b gy nc nd l ne nf">us.groupby('srch_saturday_night_bool').size()</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/9be246bb2620a6543ebf20bb94ee92b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*NpA5cC4s6rghvBd_oFXjXw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 20</figcaption></figure><p id="2722" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><strong class="kw jg">价格美元</strong></p><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="9844" class="nb ls jf mx b gy nc nd l ne nf">sns.set(style="ticks", palette="pastel")</span><span id="72b5" class="nb ls jf mx b gy ng nd l ne nf">ax = sns.boxplot(x="click_bool", y="price_usd", hue="click_bool", data=us)<br/>ax.set_ylim([0, 200]);</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/3e0af30bb6048630147f701e3a39454a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*ftGUf4XgTsUe9oskJvU6mQ.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 21</figcaption></figure><pre class="mp mq mr ms gt mw mx my mz aw na bi"><span id="2409" class="nb ls jf mx b gy nc nd l ne nf">us.groupby('click_bool')['price_usd'].describe()</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ob"><img src="../Images/7de23fddbd2a439eb9dc31123b3c2276.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-RMn9kTJ7g1YAjVOwwaP7g.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 22</figcaption></figure><p id="09aa" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">平均而言，获得点击的 price_usd 总是低于没有获得点击的 price _ USD。</p><h1 id="2aeb" class="lr ls jf bd lt lu lv lw lx ly lz ma mb kl mc km md ko me kp mf kr mg ks mh mi bi translated">平衡等级</h1><p id="ef2c" class="pw-post-body-paragraph ku kv jf kw b kx mj kg kz la mk kj lc ld ml lf lg lh mm lj lk ll mn ln lo lp ij bi translated">对于快速学习，我们的平衡策略是向下采样负面实例。</p><figure class="mp mq mr ms gt is"><div class="bz fp l di"><div class="nn no l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">down_sampling</figcaption></figure><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/40f03109e03154b2bfbcdcb063a1d9e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*Sw_RKwb8ItmfLsDwhZsIlA.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 23</figcaption></figure><h1 id="a710" class="lr ls jf bd lt lu lv lw lx ly lz ma mb kl mc km md ko me kp mf kr mg ks mh mi bi translated">模型训练和评估</h1><p id="05b8" class="pw-post-body-paragraph ku kv jf kw b kx mj kg kz la mk kj lc ld ml lf lg lh mm lj lk ll mn ln lo lp ij bi translated"><strong class="kw jg">用集成模型进行点进预测</strong></p><figure class="mp mq mr ms gt is"><div class="bz fp l di"><div class="nn no l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">ensemble_models</figcaption></figure><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi od"><img src="../Images/aca241cb870e2d826fbdb5519db53152.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/format:webp/1*gD1ihVlrU_LAkEjtZYqF7A.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 24</figcaption></figure><p id="0754" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><strong class="kw jg">用朴素贝叶斯模型进行点进预测</strong></p><figure class="mp mq mr ms gt is"><div class="bz fp l di"><div class="nn no l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">naive_bayes_models</figcaption></figure><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oe"><img src="../Images/aec7f3d9f4eebb893f4ddfc3deaed97c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aPkcMI9zMbmS5qCd4zb8-Q.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 25</figcaption></figure><p id="ce0c" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><strong class="kw jg">用神经网络进行点进预测</strong></p><figure class="mp mq mr ms gt is"><div class="bz fp l di"><div class="nn no l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">neural_network</figcaption></figure><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi of"><img src="../Images/d9155ecc03cf3aeedd095640346592f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/format:webp/1*EGctY4WpmSZ59f-JYFcJoQ.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 26</figcaption></figure><p id="ef1d" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">基于这种基线方法，在未来的帖子中，我们将构建一个<a class="ae lq" href="https://en.wikipedia.org/wiki/Learning_to_rank" rel="noopener ugc nofollow" target="_blank">学习排名</a>模型，为每个印象个性化酒店排名。但在那之前，享受点击吧！</p><p id="3518" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">Jupyter 笔记本可以在<a class="ae lq" href="https://github.com/susanli2016/Machine-Learning-with-Python/blob/master/Hotel%20Optimize%20Click-through.ipynb" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到。周末愉快！</p></div></div>    
</body>
</html>