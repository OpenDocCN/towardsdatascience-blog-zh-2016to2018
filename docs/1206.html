<html>
<head>
<title>Remote Computing with Jupyter Notebooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Jupyter笔记本电脑进行远程计算</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/remote-computing-with-jupyter-notebooks-5b2860f761e8?source=collection_archive---------1-----------------------#2017-08-10">https://towardsdatascience.com/remote-computing-with-jupyter-notebooks-5b2860f761e8?source=collection_archive---------1-----------------------#2017-08-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f55c0a283551f21b866f9d844af07c8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QTsuaid22dh8UXcyplbB-g.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk"><a class="ae kc" href="https://www.lynda.com/Linux-tutorials/Linux-Desktops-Remote-Access/517442-2.html" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><div class="kd ke gp gr kf kg"><a href="https://bobbywlindsey.ck.page/5dca5d4310" rel="noopener  ugc nofollow" target="_blank"><div class="kh ab fo"><div class="ki ab kj cl cj kk"><h2 class="bd ir gy z fp kl fr fs km fu fw ip bi translated">想在数据科学方面变得更好吗？</h2><div class="kn l"><h3 class="bd b gy z fp kl fr fs km fu fw dk translated">当我在我发布独家帖子的媒体和个人网站上发布新内容时，请单击此处获得通知。</h3></div></div></div></a></div><p id="32f2" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">不久前，我让AWS为我提供了一个唯一的URL，我可以导航并使用Jupyter笔记本。我钦佩它的便利性和能力，只要启动一个计算程序，关上笔记本电脑，就知道我的计算会继续进行。然而，根据您的使用情况，使用AWS P2实例会非常昂贵，对我来说，每月大约600美元。所以，我想我可以用这些钱建造一台电脑，作为深度学习的平台，偶尔玩玩视频游戏。</p><p id="f4d1" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">这篇文章描述了配置设置<em class="lm">一旦</em>你已经建立了你的电脑并且安装了像Ubuntu这样的Linux版本。事实证明，下面的配置对我来说比AWS更容易设置，在别名的帮助下，连接到我的服务器比以往任何时候都容易。我们开始吧！</p><h1 id="e34f" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">装置</h1><p id="1deb" class="pw-post-body-paragraph ko kp iq kq b kr ml kt ku kv mm kx ky kz mn lb lc ld mo lf lg lh mp lj lk ll ij bi translated">所以首先你需要在你的Ubuntu服务器上安装以下软件:</p><ul class=""><li id="71bd" class="mq mr iq kq b kr ks kv kw kz ms ld mt lh mu ll mv mw mx my bi translated">Anaconda ，它将提供许多您需要的默认Python包</li><li id="c6aa" class="mq mr iq kq b kr mz kv na kz nb ld nc lh nd ll mv mw mx my bi translated">openssh-server，可以安装以下软件:<code class="fe ne nf ng nh b">sudo apt-get install openssh-server -y</code></li><li id="2f99" class="mq mr iq kq b kr mz kv na kz nb ld nc lh nd ll mv mw mx my bi translated">tmux，可以安装<code class="fe ne nf ng nh b">sudo apt-get install tmux -y</code></li></ul><p id="2d5d" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">如果您需要查看openssh-server的状态或重启它，请在您的终端中键入以下内容:</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="6bec" class="nq lo iq nh b gy nr ns l nt nu">systemctl status ssh </span><span id="fd1e" class="nq lo iq nh b gy nv ns l nt nu">sudo service ssh restart</span></pre><h1 id="2026" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">本地连接到您的服务器</h1><p id="aa4a" class="pw-post-body-paragraph ko kp iq kq b kr ml kt ku kv mm kx ky kz mn lb lc ld mo lf lg lh mp lj lk ll ij bi translated">为了确保大多数事情都设置正确，我们首先需要验证您可以连接到本地网络上的服务器。</p><p id="e2e2" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">好吧！所以在你的服务器上，打开位于<code class="fe ne nf ng nh b">/etc/ssh/sshd_config</code>的<code class="fe ne nf ng nh b">sshd_config</code>文件。要对其进行更改，您需要sudo权限。文件打开后，您需要指定连接时要使用的端口。无论您选择什么，我强烈建议不要使用默认端口22。假设您决定使用端口22222。在您的<code class="fe ne nf ng nh b">sshd_config</code>文件中有一个名为<code class="fe ne nf ng nh b">Port</code>的条目，您应该这样编辑它:</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="25c1" class="nq lo iq nh b gy nr ns l nt nu">Port 22222</span></pre><p id="306f" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">在<code class="fe ne nf ng nh b">AllowUsers</code>下，输入您登录服务器时使用的用户名。</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="17fc" class="nq lo iq nh b gy nr ns l nt nu">AllowUsers your_username</span></pre><p id="8ac2" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">接下来，将<code class="fe ne nf ng nh b">PasswordAuthentication</code>设置为<code class="fe ne nf ng nh b">yes</code>。</p><p id="7bd1" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">最后，为了确保Ubuntu不会阻止端口8888上的网络流量，我们需要调整它的iptables:</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="4f26" class="nq lo iq nh b gy nr ns l nt nu">sudo iptables -I INPUT -p tcp -s 0.0.0.0/0 --dport 8888 -j ACCEPT </span><span id="4ea9" class="nq lo iq nh b gy nv ns l nt nu">sudo iptables -I INPUT -p tcp -s 0.0.0.0/0 --dport 443 -j ACCEPT </span><span id="5536" class="nq lo iq nh b gy nv ns l nt nu">sudo netfilter-persistent save</span></pre><p id="d834" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">现在，记下您的服务器的IP地址。这可以通过在您的终端中键入<code class="fe ne nf ng nh b">ifconfig</code>并查找类似于<code class="fe ne nf ng nh b">inet 192.168.1.112</code>的内容来找到。一旦您在本地网络上确定了服务器的IP地址，就该拿起您的笔记本电脑并尝试登录了:</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="dd2e" class="nq lo iq nh b gy nr ns l nt nu">ssh your_username@192.168.1.112 -p 22222</span></pre><p id="b8ff" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">如果你得到一个终端提示，你就成功了！</p><h1 id="4c85" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">远程连接到您的服务器</h1><p id="6bd4" class="pw-post-body-paragraph ko kp iq kq b kr ml kt ku kv mm kx ky kz mn lb lc ld mo lf lg lh mp lj lk ll ij bi translated">现在，设置远程计算的全部目的是，当你在别人的网络上时，你可以离开你的房子，远程进入你的服务器。要做到这一点，只需要做一些更改(要求您仍然在自己的网络上):</p><ul class=""><li id="1ae8" class="mq mr iq kq b kr ks kv kw kz ms ld mt lh mu ll mv mw mx my bi translated">如果您的笔记本电脑上还没有一组公钥和私钥，<a class="ae kc" href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/" rel="noopener ugc nofollow" target="_blank">生成它们</a></li><li id="4c6e" class="mq mr iq kq b kr mz kv na kz nb ld nc lh nd ll mv mw mx my bi translated">将您的公钥复制到您的服务器:<code class="fe ne nf ng nh b">ssh-copy-id your_username@192.168.1.112 -p 22222</code></li><li id="ec0d" class="mq mr iq kq b kr mz kv na kz nb ld nc lh nd ll mv mw mx my bi translated">通过在您的服务器终端键入<code class="fe ne nf ng nh b">curl 'https://api.ipify.org'</code>来识别您的服务器的WAN IP地址(注意，您的ISP经常更改此地址，这就是我使用<a class="ae kc" href="http://amzn.to/2vnHIjk" rel="noopener ugc nofollow" target="_blank"> Google Wifi </a>的原因，它允许我从任何地方检查我的WAN地址)</li><li id="deed" class="mq mr iq kq b kr mz kv na kz nb ld nc lh nd ll mv mw mx my bi translated">在路由器上，打开端口转发。使用我们的示例，您需要将端口22222转发到端口22222。</li></ul><p id="e498" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">现在尝试使用您找到的WAN地址远程访问您的服务器！</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="215c" class="nq lo iq nh b gy nr ns l nt nu">ssh your_username@server_wan_ip -p 22222</span></pre><p id="2cb0" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">如果你看到一个提示，干得好！最后一件事是在你的<code class="fe ne nf ng nh b">sshd_config</code>文件中设置<code class="fe ne nf ng nh b">PasswordAuthentication</code>为<code class="fe ne nf ng nh b">no</code>，因为现在你用ssh密钥登录；这样，没有人可以尝试暴力破解您的密码。</p><p id="8ee2" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">你现在可以从你的网络之外访问你的服务器，去拿你自己的星巴克咖啡:)。</p><h1 id="4b85" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">启动远程Jupyter笔记本</h1><p id="f738" class="pw-post-body-paragraph ko kp iq kq b kr ml kt ku kv mm kx ky kz mn lb lc ld mo lf lg lh mp lj lk ll ij bi translated">现在所有困难的工作都已完成，您可以通过以下步骤轻松使用远程Jupyter笔记本电脑:</p><ol class=""><li id="5f28" class="mq mr iq kq b kr ks kv kw kz ms ld mt lh mu ll nw mw mx my bi translated">ssh进入你的服务器:<code class="fe ne nf ng nh b">ssh your_username@server_wan_ip -p 22222</code></li><li id="5000" class="mq mr iq kq b kr mz kv na kz nb ld nc lh nd ll nw mw mx my bi translated">开始一个新的tmux会话，您以后可以轻松地从该会话中退出:<code class="fe ne nf ng nh b">tmux new -s session-name</code></li><li id="9745" class="mq mr iq kq b kr mz kv na kz nb ld nc lh nd ll nw mw mx my bi translated">无浏览器启动jupyter-笔记本:<code class="fe ne nf ng nh b">jupyter-notebook --no-browser --port=8889</code></li><li id="0b68" class="mq mr iq kq b kr mz kv na kz nb ld nc lh nd ll nw mw mx my bi translated">现在，在笔记本电脑上的新终端中，将服务器端口流量转发到笔记本电脑的本地端口:<code class="fe ne nf ng nh b">ssh -N -L localhost:8888:localhost:8889 your_username@server_wan_ip -p 22222</code></li><li id="62ee" class="mq mr iq kq b kr mz kv na kz nb ld nc lh nd ll nw mw mx my bi translated">在您的网络浏览器中，导航到<code class="fe ne nf ng nh b">localhost:8888/tree</code>，您应该会看到您的Jupyter笔记本！</li></ol><p id="900b" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">现在，您可以在笔记本电脑上轻松使用Jupyter笔记本，而是使用服务器的强大资源来进行计算。</p><p id="6224" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">最后一件事，在想通了上面的步骤后，我想我应该通过使用别名和函数使这个过程变得更简单。以下是我添加到笔记本电脑的<code class="fe ne nf ng nh b">.bashrc</code>文件中的相关行:</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="96d1" class="nq lo iq nh b gy nr ns l nt nu">server-connect() {<br/>    ssh your_username@$1 -p 22222<br/>}</span><span id="2b27" class="nq lo iq nh b gy nv ns l nt nu">jn-connect() {<br/>    ssh -N -L localhost:8888:localhost:8889 your_username@$1 -p 22222<br/>}</span></pre><p id="9bfc" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">我添加到服务器的<code class="fe ne nf ng nh b">.bashrc</code>文件中的行:</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="35cf" class="nq lo iq nh b gy nr ns l nt nu">alias jn-remote="jupyter-notebook --ip='*' --no-browser --port=8889"</span></pre><p id="d890" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">现在，上述5个步骤变成了:</p><ol class=""><li id="699b" class="mq mr iq kq b kr ks kv kw kz ms ld mt lh mu ll nw mw mx my bi translated"><code class="fe ne nf ng nh b">server-connect server_wan_ip</code></li><li id="b6e4" class="mq mr iq kq b kr mz kv na kz nb ld nc lh nd ll nw mw mx my bi translated"><code class="fe ne nf ng nh b">tmux new -s session-name</code></li><li id="0191" class="mq mr iq kq b kr mz kv na kz nb ld nc lh nd ll nw mw mx my bi translated"><code class="fe ne nf ng nh b">jn-remote</code></li><li id="9357" class="mq mr iq kq b kr mz kv na kz nb ld nc lh nd ll nw mw mx my bi translated">打开新终端并键入<code class="fe ne nf ng nh b">jn-connect server_wan_ip</code></li><li id="6d93" class="mq mr iq kq b kr mz kv na kz nb ld nc lh nd ll nw mw mx my bi translated">导航至<code class="fe ne nf ng nh b">localhost:8888/tree</code></li></ol><p id="555d" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">就是这样！现在，你可以在咖啡店里一边用笔记本电脑放松，一边运行你正在构建的那些疯狂的神经网络。祝你好运！</p><p id="a151" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><em class="lm">如果你喜欢我在这里写的东西，一定要看看我的</em> <a class="ae kc" href="https://bobbywlindsey.com" rel="noopener ugc nofollow" target="_blank"> <em class="lm">个人博客</em> </a> <em class="lm">，那里有我在媒体上没有的文章。</em></p></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><p id="1b60" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><em class="lm">原载于2017年8月10日</em><a class="ae kc" href="https://www.bobbywlindsey.com/2017/08/10/remote-computing-with-jupyter-notebooks/" rel="noopener ugc nofollow" target="_blank"><em class="lm">bobbywlindsey.com</em></a><em class="lm">。</em></p></div></div>    
</body>
</html>