<html>
<head>
<title>Named Entity Recognition with NLTK and SpaCy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于 NLTK 和 SpaCy 的命名实体识别</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/named-entity-recognition-with-nltk-and-spacy-8c4a7d88e7da?source=collection_archive---------0-----------------------#2018-08-17">https://towardsdatascience.com/named-entity-recognition-with-nltk-and-spacy-8c4a7d88e7da?source=collection_archive---------0-----------------------#2018-08-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/ee65f19d29fc7cffdbc7ecea27e982b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*14p0aAqLZX3KX4Gkpouz6g.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo credit: Pixabay</figcaption></figure><div class=""/><div class=""><h2 id="009e" class="pw-subtitle-paragraph kc je jf bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">NER 在自然语言处理的许多领域都有应用</h2></div><p id="c0f2" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><a class="ae lq" href="https://en.wikipedia.org/wiki/Named-entity_recognition" rel="noopener ugc nofollow" target="_blank">命名实体识别</a> (NER)可能是信息提取的第一步，它试图定位文本中的<a class="ae lq" href="https://en.wikipedia.org/wiki/Named_entity" rel="noopener ugc nofollow" target="_blank">命名实体</a>并将其分类成预定义的类别，如人名、组织、位置、时间表达式、数量、货币值、百分比等。NER 在<a class="ae lq" href="https://en.wikipedia.org/wiki/Natural_language_processing" rel="noopener ugc nofollow" target="_blank">自然语言处理</a> (NLP)的很多领域都有应用，它可以帮助回答很多现实世界的问题，比如:</p><ul class=""><li id="5e5e" class="lr ls jf kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated">新闻中提到了哪些公司？</li><li id="1fc1" class="lr ls jf kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">投诉或评论中是否提到了特定产品？</li><li id="e489" class="lr ls jf kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">推文包含人名吗？推文包含这个人的位置吗？</li></ul><p id="946c" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">本文描述了如何使用<a class="ae lq" href="https://www.nltk.org/book/ch07.html" rel="noopener ugc nofollow" target="_blank"> NLTK </a>和<a class="ae lq" href="https://spacy.io/usage/linguistic-features" rel="noopener ugc nofollow" target="_blank"> SpaCy </a>构建命名实体识别器，以识别事物的名称，例如原始文本中的人员、组织或位置。我们开始吧！</p><h1 id="72af" class="mf mg jf bd mh mi mj mk ml mm mn mo mp kl mq km mr ko ms kp mt kr mu ks mv mw bi translated">NLTK</h1><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="674f" class="ng mg jf nc b gy nh ni l nj nk">import nltk<br/>from nltk.tokenize import word_tokenize<br/>from nltk.tag import pos_tag</span></pre><h2 id="d83b" class="ng mg jf bd mh nl nm dn ml nn no dp mp ld np nq mr lh nr ns mt ll nt nu mv nv bi translated">信息提取</h2><p id="3215" class="pw-post-body-paragraph ku kv jf kw b kx nw kg kz la nx kj lc ld ny lf lg lh nz lj lk ll oa ln lo lp ij bi translated">我引用了《纽约时报》的一句话:“欧洲当局周三对谷歌处以创纪录的 51 亿美元罚款，原因是谷歌在手机市场滥用权力，并责令该公司改变做法。”</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="d34a" class="ng mg jf nc b gy nh ni l nj nk">ex = 'European authorities fined Google a record $5.1 billion on Wednesday for abusing its power in the mobile phone market and ordered the company to alter its practices'</span></pre><p id="f622" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">然后，我们对句子应用单词标记化和词性标注。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="1af3" class="ng mg jf nc b gy nh ni l nj nk">def preprocess(sent):<br/>    sent = nltk.word_tokenize(sent)<br/>    sent = nltk.pos_tag(sent)<br/>    return sent</span></pre><p id="a4d5" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">让我们看看我们得到了什么:</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="333d" class="ng mg jf nc b gy nh ni l nj nk">sent = preprocess(ex)<br/>sent</span></pre><figure class="mx my mz na gt is gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/40c91e027ceb71be353f8131cc02c04a.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*KFG-dWUIatG6bJxJ4dhktg.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 1</figcaption></figure><p id="2917" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">我们得到一个元组列表，其中包含句子中的单个单词及其相关的词性。</p><p id="91cc" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">现在，我们将实现名词短语分块，以使用由规则组成的正则表达式来识别命名实体，这些规则指示句子应该如何分块。</p><p id="0f1b" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">我们的组块模式由一个规则组成，即每当组块者找到可选的限定词 DT，后跟任意数量的形容词 JJ，然后是名词 NN 时，就应该形成名词短语 NP。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="7c42" class="ng mg jf nc b gy nh ni l nj nk">pattern = 'NP: {&lt;DT&gt;?&lt;JJ&gt;*&lt;NN&gt;}'</span></pre><h2 id="37f0" class="ng mg jf bd mh nl nm dn ml nn no dp mp ld np nq mr lh nr ns mt ll nt nu mv nv bi translated">组块</h2><p id="33fb" class="pw-post-body-paragraph ku kv jf kw b kx nw kg kz la nx kj lc ld ny lf lg lh nz lj lk ll oa ln lo lp ij bi translated">使用这个模式，我们创建了一个组块解析器，并在我们的句子上测试它。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="fc80" class="ng mg jf nc b gy nh ni l nj nk">cp = nltk.RegexpParser(pattern)<br/>cs = cp.parse(sent)<br/>print(cs)</span></pre><figure class="mx my mz na gt is gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/e88dffe107aad1609eb83de79136abf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*3Gmd7LaEtAsuPmRSJZyxZg.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 2</figcaption></figure><p id="0e53" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">输出可以读作树或层次结构，S 是第一级，表示句子。我们也可以用图形显示出来。</p><figure class="mx my mz na gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/deda698e88adc655343ccadf2c7ffed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y9DvFxsu3pCecI46yDwMxA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 3</figcaption></figure><p id="b2e7" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">IOB 标签已经成为在文件中表示块结构的标准方式，我们也将使用这种格式。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="0159" class="ng mg jf nc b gy nh ni l nj nk">from nltk.chunk import conlltags2tree, tree2conlltags<br/>from pprint import pprint</span><span id="f890" class="ng mg jf nc b gy oe ni l nj nk">iob_tagged = tree2conlltags(cs)<br/>pprint(iob_tagged)</span></pre><figure class="mx my mz na gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi of"><img src="../Images/29db7f6fc20ff3657ff9b7b90923bd3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*H2q7RsGUR3iCpgJVjXSw1Q.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 4</figcaption></figure><p id="e392" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">在这个表示中，每行有一个标记，每个标记都有其词性标记和命名实体标记。基于这个训练语料，我们可以构建一个可以用来标注新句子的 tagger 并使用 nltk.chunk.conlltags2tree()函数将标记序列转换成块树。</p><p id="7d37" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">通过函数 nltk.ne_chunk()，我们可以使用分类器识别命名实体，分类器添加了类别标签，如个人、组织和 GPE。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="6ddc" class="ng mg jf nc b gy nh ni l nj nk">ne_tree = ne_chunk(pos_tag(word_tokenize(ex)))<br/>print(ne_tree)</span></pre><figure class="mx my mz na gt is gh gi paragraph-image"><div class="gh gi og"><img src="../Images/18b16ce6b91528c00d203e753c9c0347.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*oWNyssn2LLeNrIus33tkyw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 5</figcaption></figure><p id="a6b2" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">谷歌是公认的人。挺让人失望的，你不觉得吗？</p><h1 id="f7a2" class="mf mg jf bd mh mi mj mk ml mm mn mo mp kl mq km mr ko ms kp mt kr mu ks mv mw bi translated">空间</h1><p id="d971" class="pw-post-body-paragraph ku kv jf kw b kx nw kg kz la nx kj lc ld ny lf lg lh nz lj lk ll oa ln lo lp ij bi translated"><a class="ae lq" href="https://spacy.io/api/annotation#section-named-entities" rel="noopener ugc nofollow" target="_blank"> SpaCy 的命名实体识别</a>已经在<a class="ae lq" href="https://catalog.ldc.upenn.edu/ldc2013t19" rel="noopener ugc nofollow" target="_blank"> OntoNotes 5 </a>语料库上进行训练，它支持以下实体类型:</p><figure class="mx my mz na gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oh"><img src="../Images/615d72a55c2dfd9dd5b2908e955fa61b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qQggIPMugLcy-ndJ8X_aAA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 6 (Source: SpaCy)</figcaption></figure><h2 id="bbc0" class="ng mg jf bd mh nl nm dn ml nn no dp mp ld np nq mr lh nr ns mt ll nt nu mv nv bi translated">实体</h2><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="be6e" class="ng mg jf nc b gy nh ni l nj nk">import spacy<br/>from spacy import displacy<br/>from collections import Counter<br/>import en_core_web_sm<br/>nlp = en_core_web_sm.load()</span></pre><p id="96f6" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">我们用的是同一句话，“欧洲当局周三对谷歌处以创纪录的 51 亿美元罚款，原因是其在手机市场滥用权力，并责令该公司改变做法。”</p><p id="1ff6" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">Spacy 的一个好处是我们只需要应用 nlp 一次，整个后台管道将返回对象。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="d6dc" class="ng mg jf nc b gy nh ni l nj nk">doc = nlp('European authorities fined Google a record $5.1 billion on Wednesday for abusing its power in the mobile phone market and ordered the company to alter its practices')<br/>pprint([(X.text, X.label_) for X in doc.ents])</span></pre><figure class="mx my mz na gt is gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/3d37549ff763751377d22c0a4522c9a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:842/format:webp/1*uoAnpkcIIKztaLU1ty7EDQ.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 7</figcaption></figure><p id="5288" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">European 是 NORD(国籍或宗教或政治团体)，Google 是一个组织，51 亿美元是货币值，星期三是日期对象。都是对的。</p><h2 id="5eb0" class="ng mg jf bd mh nl nm dn ml nn no dp mp ld np nq mr lh nr ns mt ll nt nu mv nv bi translated">代币</h2><p id="4743" class="pw-post-body-paragraph ku kv jf kw b kx nw kg kz la nx kj lc ld ny lf lg lh nz lj lk ll oa ln lo lp ij bi translated">在上面的例子中，我们在实体级别上工作，在下面的例子中，我们演示了使用罗比标记方案来描述实体边界的令牌级实体注释。</p><figure class="mx my mz na gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oj"><img src="../Images/1bf2eb67efe35ac91aac60776c20bda8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_sYTlDj2p_p-pcSRK25h-Q.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 8 (Source: SpaCy)</figcaption></figure><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="d59a" class="ng mg jf nc b gy nh ni l nj nk">pprint([(X, X.ent_iob_, X.ent_type_) for X in doc])</span></pre><figure class="mx my mz na gt is gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/d9bfcb263ec25fd5a0f25f511ad8f040.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*R7MQ6H8hFNXegvxB-BgMiw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 9</figcaption></figure><p id="47c8" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><code class="fe ol om on nc b">"B"</code>表示令牌开始于实体，<code class="fe ol om on nc b">"I"</code>表示令牌在实体内部，<code class="fe ol om on nc b">"O"</code>表示令牌在实体外部，<code class="fe ol om on nc b">""</code>表示没有设置实体标签。</p><h2 id="28b3" class="ng mg jf bd mh nl nm dn ml nn no dp mp ld np nq mr lh nr ns mt ll nt nu mv nv bi translated">从文章中提取命名实体</h2><p id="0653" class="pw-post-body-paragraph ku kv jf kw b kx nw kg kz la nx kj lc ld ny lf lg lh nz lj lk ll oa ln lo lp ij bi translated">现在，让我们认真对待空间问题，从《纽约时报》的一篇文章中提取命名实体——“<a class="ae lq" href="https://www.nytimes.com/2018/08/13/us/politics/peter-strzok-fired-fbi.html?hp&amp;action=click&amp;pgtype=Homepage&amp;clickSource=story-heading&amp;module=first-column-region&amp;region=top-news&amp;WT.nav=top-news" rel="noopener ugc nofollow" target="_blank">在短信中批评特朗普的联邦调查局特工彼得·斯特佐克被解雇了</a>”</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="aac1" class="ng mg jf nc b gy nh ni l nj nk">from bs4 import BeautifulSoup<br/>import requests<br/>import re</span><span id="5865" class="ng mg jf nc b gy oe ni l nj nk">def url_to_string(url):<br/>    res = requests.get(url)<br/>    html = res.text<br/>    soup = BeautifulSoup(html, 'html5lib')<br/>    for script in soup(["script", "style", 'aside']):<br/>        script.extract()<br/>    return " ".join(re.split(r'[\n\t]+', soup.get_text()))</span><span id="3e69" class="ng mg jf nc b gy oe ni l nj nk">ny_bb = url_to_string('https://www.nytimes.com/2018/08/13/us/politics/peter-strzok-fired-fbi.html?hp&amp;action=click&amp;pgtype=Homepage&amp;clickSource=story-heading&amp;module=first-column-region&amp;region=top-news&amp;WT.nav=top-news')<br/>article = nlp(ny_bb)<br/>len(article.ents)</span></pre><p id="50eb" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><strong class="kw jg"> <em class="oo"> 188 </em> </strong></p><p id="afa3" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">文章中有 188 个实体，它们被表示为 10 个独特的标签:</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="e0c9" class="ng mg jf nc b gy nh ni l nj nk">labels = [x.label_ for x in article.ents]<br/>Counter(labels)</span></pre><figure class="mx my mz na gt is gh gi paragraph-image"><div class="gh gi op"><img src="../Images/9dd3afcc8fca4a78555f8df3eb96086c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*sUjSb4dEuSk2w5bU8llgbw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 10</figcaption></figure><p id="27de" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">以下是三个最常见的令牌。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="d3df" class="ng mg jf nc b gy nh ni l nj nk">items = [x.text for x in article.ents]<br/>Counter(items).most_common(3)</span></pre><figure class="mx my mz na gt is gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/63effeaf7adff962fd6fa5e1b3b5e509.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*EuFzO2mKVdJNdFqQ1avShg.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 11</figcaption></figure><p id="34d9" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">让我们随机选择一句话来了解更多。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="e75e" class="ng mg jf nc b gy nh ni l nj nk">sentences = [x for x in article.sents]<br/>print(sentences[20])</span></pre><figure class="mx my mz na gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi or"><img src="../Images/cbfa5049f0bb03b44936c883359a4e32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DUmLS-6lBRuX3ppVUlsZ-A.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 12</figcaption></figure><p id="110c" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">让我们运行<code class="fe ol om on nc b"><a class="ae lq" href="https://spacy.io/api/top-level#displacy.render" rel="noopener ugc nofollow" target="_blank">displacy.render</a></code> <a class="ae lq" href="https://spacy.io/api/top-level#displacy.render" rel="noopener ugc nofollow" target="_blank"> </a>来生成原始标记。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="535c" class="ng mg jf nc b gy nh ni l nj nk">displacy.render(nlp(str(sentences[20])), jupyter=True, style='ent')</span></pre><figure class="mx my mz na gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi os"><img src="../Images/4c13810aebbeb39599201a71765ed496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JNHlyK5-jQA6JBKj3nDYcA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 13</figcaption></figure><p id="1004" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">一个错误的分类是联邦调查局。这很难，不是吗？</p><p id="9d64" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">使用 spaCy 的内置<a class="ae lq" href="https://spacy.io/usage/visualizers" rel="noopener ugc nofollow" target="_blank"> displaCy visualizer </a>，上面的句子及其依赖项看起来是这样的:</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="bd41" class="ng mg jf nc b gy nh ni l nj nk">displacy.render(nlp(str(sentences[20])), style='dep', jupyter = True, options = {'distance': 120})</span></pre><figure class="mx my mz na gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ot"><img src="../Images/2fd8695bcc6af9a7cd895ebe75d1d545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bJzRK3Lk8Jri26y7O7xBnA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 14</figcaption></figure><p id="1fa5" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">接下来我们逐字逐句，提取词性，把这个句子词条化。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="a31d" class="ng mg jf nc b gy nh ni l nj nk">[(x.orth_,x.pos_, x.lemma_) for x in [y <br/>                                      for y<br/>                                      in nlp(str(sentences[20])) <br/>                                      if not y.is_stop and y.pos_ != 'PUNCT']]</span></pre><figure class="mx my mz na gt is gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/20b145d0aa9928457abf0a67c376a9e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*1OyJd6gpq8hbbjzCYyxKlQ.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 15</figcaption></figure><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="56b9" class="ng mg jf nc b gy nh ni l nj nk">dict([(str(x), x.label_) for x in nlp(str(sentences[20])).ents])</span></pre><figure class="mx my mz na gt is gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/e0bdd98488b849ca00c608ff51154b88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*QKvX3tj62IiemjC8cdBAIA.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 16</figcaption></figure><p id="b70c" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">命名实体提取是正确的，除了“F.B.I”。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="8a68" class="ng mg jf nc b gy nh ni l nj nk">print([(x, x.ent_iob_, x.ent_type_) for x in sentences[20]])</span></pre><figure class="mx my mz na gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ow"><img src="../Images/918e81898b04dbc37fb9e36a50e31ed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B0lin04fOg4tVpX5_wRuwA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 17</figcaption></figure><p id="8ffc" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">最后，我们将整篇文章的实体形象化。</p><figure class="mx my mz na gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ox"><img src="../Images/32c50c761734b18b1920163a812cd240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dqYZiUL8ElnIbltlg54lMQ.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 18</figcaption></figure><p id="fe8f" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">你自己试试。很有趣！源代码可以在<a class="ae lq" href="https://github.com/susanli2016/NLP-with-Python/blob/master/NER_NLTK_Spacy.ipynb" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到。星期五快乐！</p></div></div>    
</body>
</html>