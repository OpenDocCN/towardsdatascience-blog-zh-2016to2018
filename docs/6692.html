<html>
<head>
<title>Mythbusting Fantasy Premier League: Form over fixtures</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">打破神话的梦幻英超联赛:形式胜于赛程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/mythbusting-fantasy-premier-league-form-over-fixtures-eecf9022e834?source=collection_archive---------19-----------------------#2018-12-26">https://towardsdatascience.com/mythbusting-fantasy-premier-league-form-over-fixtures-eecf9022e834?source=collection_archive---------19-----------------------#2018-12-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="d3f3" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">数据科学教程</h2><div class=""/><div class=""><h2 id="5052" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用足球数据和机器学习来测试在预测不失球、进球和助攻方面，形式是否比固定比赛更重要</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/d23a57fed4cd37fad0a8e327950b7472.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zF36y8QMmoqlSgCbFgQUMw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><em class="lh">Form vs fixtures discussions on Reddit</em></figcaption></figure><p id="02e4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">超过 600 万人参加了<a class="ae me" href="https://fantasy.premierleague.com/" rel="noopener ugc nofollow" target="_blank">梦幻超级联赛(FPL) </a>的比赛，试图组建最好的 11 名球员阵容，以获得英格兰超级联赛 38 周以来的最高分。每个球员的得分由他们在实际比赛中的表现决定，守门员和后卫在没有失球的情况下完成一场比赛可以获得 4 分，进球得分者根据他们的位置，每个进球或助攻可以获得 3 到 6 分。为了最大限度地提高球队的得分，经理们必须做出明智的决定，选择最有可能保持零失球或每周进球的球员。</p><p id="656b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">经理们经常讨论的两个流行指标是球员的状态和即将到来的比赛难度。根据状态选择球员意味着更喜欢在最近的比赛中得分好或者保持零失球的球员。然而，考虑比赛难度也很重要，因为一名球员在对阵较弱的对手时得分，可能不会在对阵更强的球队时得分。</p><p id="5a3d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在决定这两个指标时，我注意到经理们经常在<a class="ae me" href="https://www.reddit.com/r/FantasyP" rel="noopener ugc nofollow" target="_blank">梦幻英超社区</a>上称赞“形式胜于固定”，但几乎没有发现在预测不失球或进攻得分(即助攻或进球)方面比较这两个指标的分析。<a class="ae me" href="https://mathematicallysafe.wordpress.com/2018/07/08/fpl-analysis-the-impact-of-fixtures-on-player-performance/" rel="noopener ugc nofollow" target="_blank">彼得·布雷克</a>已经分析了固定难度的影响，但它只考虑了固定难度，而没有考虑球员的状态。因此，为了测试形式是否确实比夹具更重要，我使用了 2016 年以来的 FPL 数据来比较他们在预测 FPL 不失球和进攻点方面的贡献。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mf"><img src="../Images/529b807078ce894a863fed6ab678571b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JEvCuU6r0UICgdXn.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><em class="lh">Sample screen of Fantasy Premier League</em></figcaption></figure><h2 id="722f" class="mg mh it bd mi mj mk dn ml mm mn dp mo lr mp mq mr lv ms mt mu lz mv mw mx iz bi translated">1.查找数据并定义形状和夹具</h2><p id="345c" class="pw-post-body-paragraph li lj it lk b ll my kd ln lo mz kg lq lr na lt lu lv nb lx ly lz nc mb mc md im bi translated">我能够通过<a class="ae me" href="https://fantasy.premierleague.com/drf/bootstrap-static" rel="noopener ugc nofollow" target="_blank"> FPL 的 API </a>收集到<a class="ae me" href="https://github.com/vaastav/Fantasy-Premier-League" rel="noopener ugc nofollow" target="_blank">瓦斯塔夫阿南德</a>过去两个赛季的数据。在获得过去两个赛季(2016-17 和 2017-18)的数据后，我将球员的“状态”定义为他们前 6 周的平均表现，与 FPL 官方网站上的定义一致。比赛难度确定如下:前 2 名球队的比赛难度排名为 5，排名第 3 至第 6 的球队排名为 4，排名第 7 至第 12 的球队排名为 3，排名第 12 至第 20 的球队排名为 2。这并不完全是在官方<a class="ae me" href="https://www.premierleague.com/news/783106" rel="noopener ugc nofollow" target="_blank"> FPL 网站</a>上定义的，该网站声称使用了“FPL 专家开发的复杂算法”，但看起来是足够接近的近似值。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nd"><img src="../Images/267330a5d24220d81de763cde87391c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DcstTEsy69XinhIy.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><em class="lh">Fixture Difficulty Ranking Chart</em></figcaption></figure><p id="9d56" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我将跳转到结果，但是所有用于分析的数据和代码都可以在<a class="ae me" href="https://github.com/jcheong0428/jcheong0428.github.io/tree/master/assets/post20181226/FPL_form_v_fixture" rel="noopener ugc nofollow" target="_blank">这里</a>获得，笔记本也嵌入在文章的底部。</p><h2 id="9451" class="mg mh it bd mi mj mk dn ml mm mn dp mo lr mp mq mr lv ms mt mu lz mv mw mx iz bi translated">2.估计夹具和模板对清洁板材的贡献</h2><p id="acc5" class="pw-post-body-paragraph li lj it lk b ll my kd ln lo mz kg lq lr na lt lu lv nb lx ly lz nc mb mc md im bi translated">首先，我评估了夹具难度如何影响零失球的概率。在图 1 的左图中，我们可以看到对手的比赛难度降低了球队零失球的概率。大约 15%的球队在对阵比赛难度为 5 的球队时保持不失球(例如，上赛季的曼城和曼联)，而大约 30%的球队在对阵比赛难度为 2 的球队时保持不失球(例如，上赛季的西布罗姆维奇或斯托克城)。我们也看到了主场优势，当球队在主场比赛时，不失球的可能性更大。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ne"><img src="../Images/aa428082ea9bf84bb4baa189612756ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*h2cP-RTRRdWjp6D4.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><em class="lh">Figure 1. Fixture difficulty on clean sheet probability. Left panel uses the opponent’s fixture difficulty. Right panel uses the difference between the playing team and the opponent team’s fixture difficulty ranking such that higher difference suggests that a high caliber team is playing a low caliber team. Error bars are 95% confidence intervals</em></figcaption></figure><p id="3ad6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">此外，我们还可以考虑两队之间的比赛难度差异。例如，曼城很难排在第 5 位，这表明他们是一支困难的球队，但如果他们与一支类似的球队比赛，两者之间的差异可以更好地预测不失球的可能性。差值的计算方法是比赛队的比赛难度减去对手的比赛难度，因此数值越高表示优势越大。正如所料，我们可以从图 1 的右图中看到，当一个更强的球队对阵一个更弱的球队时，不失球的可能性更大。</p><p id="4b59" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，为了测试球员的形式或固定难度是否可以预测不失球，我们可以训练一个以形式和固定为特征的机器学习模型。通过标准化特征，我们可以比较一个特征是否比另一个特征更有助于预测干净的纸张。我在个人玩家身上训练了一个逻辑回归模型，反复进行 K 倍交叉验证。通过这种方式，我们还可以看到不同数据折叠的系数有多稳定。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mf"><img src="../Images/fe5f870f35419abefa9bce0c472ac399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MikQ-IiQvrqGsBEb.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><em class="lh">Figure 2. Form vs fixture on clean sheets. Left panel shows average coefficient weights of fixture difficulty difference and form in predicting clean sheets. Middle panel shows average accuracy in predicting clean sheets which was 58%. Right panel shows the confusion matrix in accurately predicting clean sheets (coded as 1). Error bars are 95% confidence intervals</em></figcaption></figure><p id="f319" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这个分析中，我只包括了在比赛中打了 60 分钟以上的后卫和守门员，因为他们是那些如果不失球就会获得零失球分数的人。图 2 的左图清楚地显示了两队之间的比赛难度差异是比球员状态更强的不失球预测因素。虽然该模型的准确性不高，只有 58%,但我们仍然可以得出这样的结论:当选择那些在不失球的情况下获得大部分分数的守门员和后卫时，经理们应该考虑的是固定而不是形式。</p><blockquote class="ng"><p id="7896" class="nh ni it bd nj nk nl nm nn no np md dk translated">对于守门员和后卫来说，在预测不失球方面，比赛比球员的状态更重要</p></blockquote><h1 id="b7cf" class="nq mh it bd mi nr ns nt ml nu nv nw mo ki nx kj mr kl ny km mu ko nz kp mx oa bi translated">3.估计固定物和形态对攻击点的贡献</h1><p id="7ada" class="pw-post-body-paragraph li lj it lk b ll my kd ln lo mz kg lq lr na lt lu lv nb lx ly lz nc mb mc md im bi translated">比赛中的进球也会受到比赛难度的影响。在球队层面，我们可以从图 3 左图中看到，与实力更强的球队比赛(即比赛难度为 5)比与更轻松的对手比赛(比赛难度为 2)进球略少。从图 3 的右图中，我们还可以推断出，当排名靠前的球队与排名垫底的球队比赛时，我们可以看到大约两个进球，但在大多数其他比赛中，我们可以看到大约一个进球。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ob"><img src="../Images/9a16f838f75e7142cddcc1cf5dcf9cb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3q-z6Zbb-d0tJAhg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><em class="lh">Figure 3. Fixture difficulty on attacking expected goals. Left panel uses the opponent’s fixture difficulty. Right panel uses the difference between the playing team and the opponent team’s fixture difficulty ranking such that higher difference suggests that a high ranked team is playing a lower rank team. Error bars are 95% confidence intervals</em></figcaption></figure><p id="fbe3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然而在 FPL，球员不仅因为进球得分，还因为助攻得分。因此，我决定使用进攻得分作为因变量，进攻得分定义为比赛中的进球或助攻。类似于零失球分析，我只包括了在比赛中出场超过 60 分钟的中场和前锋，因为他们需要获得进攻分。现在，我们再次运行逻辑回归模型来预测球员状态和设备难度差异的攻击点。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mf"><img src="../Images/63749c0e987dc2c6a6a180caf268155f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jKE4bK3aOe0d5yya.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><em class="lh">Figure 4. Form vs fixture on attacking points. Left panel shows average coefficient weights on fixture difficulty difference and form. Middle panel shows average accuracy in predicting clean sheets which was 62%. Right panel shows the confusion matrix in accurately predicting attacking points (coded as True). Error bars are 95% confidence intervals</em></figcaption></figure><p id="9e07" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这里，我们发现形式和比赛的差异都有助于球员进球或助攻的概率，但形式比比赛更重要(图 4 的左图)。预测准确度为 62%,并且它比获得攻击点(灵敏度；图 4 右侧面板中的混淆矩阵)。由此我们可以得出结论，<em class="nf">主教练应该考虑中场和前锋的状态而不是赛程。</em></p><blockquote class="ng"><p id="3858" class="nh ni it bd nj nk nl nm nn no np md dk translated">在预测进攻点时，球员的状态比中场和前锋的固定位置更重要。</p></blockquote><h1 id="f6b7" class="nq mh it bd mi nr ns nt ml nu nv nw mo ki nx kj mr kl ny km mu ko nz kp mx oa bi translated">我们学到了什么</h1><p id="795a" class="pw-post-body-paragraph li lj it lk b ll my kd ln lo mz kg lq lr na lt lu lv nb lx ly lz nc mb mc md im bi translated">在这里，我们验证了在 FPL 流行的神话，球员的状态比比赛更重要。事实证明，至少对防守者来说，固定比赛比形式更重要。他们更有可能在与较弱的对手比赛时不失球，不管他们的状态如何。相比之下，对于中场和前锋来说，这个神话被证明是真实的，那种形式确实比固定难度更能预测进攻点，尽管它仍然是预测进攻点的一个重要因素。</p><h1 id="ef57" class="nq mh it bd mi nr ns nt ml nu nv nw mo ki oc kj mr kl od km mu ko oe kp mx oa bi translated">结论</h1><p id="f1b8" class="pw-post-body-paragraph li lj it lk b ll my kd ln lo mz kg lq lr na lt lu lv nb lx ly lz nc mb mc md im bi translated">在分析中，有几个重要的假设和警告需要记住。例如，夹具难度差异应该更多地被认为是一个顺序变量，其中差异之间的间距在现实中可能不是线性的。此外，为了简单起见，我使用了逻辑回归，但是泊松分布可能更适合这样的数据。此外，如果模型被置换，预测精度很差，可能接近噪声水平(<a class="ae me" rel="noopener" target="_blank" href="/chance-is-not-enough-evaluating-model-significance-with-permutations-e3b17de6ba04">见我以前关于置换模型的重要性的帖子</a>)。这就留下了一种可能性，其他变量可能比状态和比赛更好地预测不失球和进攻得分，但这将是另一个问题。感谢您的阅读，并随时留下任何意见或建议。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="of og l"/></div></figure></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><p id="2ca4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="nf">原载于 2018 年 12 月 26 日</em><a class="ae me" href="http://jinhyuncheong.com/jekyll/update/2018/12/26/Form_over_fixture.html" rel="noopener ugc nofollow" target="_blank"><em class="nf">【jinhyuncheong.com</em></a><em class="nf">。</em></p></div></div>    
</body>
</html>