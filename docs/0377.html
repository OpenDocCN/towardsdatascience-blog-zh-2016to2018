<html>
<head>
<title>When Should I Ride the Bus in Chicago?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我应该什么时候在芝加哥乘公共汽车？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/when-should-i-ride-the-bus-in-chicago-21a4bc26e033?source=collection_archive---------7-----------------------#2017-04-24">https://towardsdatascience.com/when-should-i-ride-the-bus-in-chicago-21a4bc26e033?source=collection_archive---------7-----------------------#2017-04-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/589964307662bd25f0d22640ffa14c65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZdM4YghA1vqt6NAKNArLWA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">source: <a class="ae kc" href="http://unsplash.com" rel="noopener ugc nofollow" target="_blank">unsplash.com</a></figcaption></figure><p id="2028" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">随着芝加哥整个春天的天气变得越来越好，我注意到我每天乘坐公交车上下班的拥挤程度有所波动。越来越多的人是令人沮丧的，随着温度的升高，我越来越倾向于骑自行车上下班。一年中这个时候芝加哥的天气变化无常，当外面天气不太理想时，我不愿意骑自行车，所以我决定收集一些信息来帮助我判断什么更糟糕——天气还是公交车上的人群。</p><p id="ceb9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我必须找到用于此的数据。幸运的是，芝加哥市有一个开放的数据门户，这绝对是了不起的。公交路线数据很干净，格式也很好，这大大弥补了它直到2016年11月才完成的事实。至于天气数据，我是从<a class="ae kc" href="http://wunderground.com" rel="noopener ugc nofollow" target="_blank">地下</a>气象站刮来的。</p><p id="7cb4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦我得到了这些数据集，我就把它们上传到R中，用ggplot2进行一些探索性的可视化。我特别研究了天气和8号路线之间的关系，因为那是我最常乘坐的巴士路线。</p><p id="e029" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面我们可以看到，随着气温的上升，工作日的乘客数量下降。尤其是气温超过60度的时候。然而，在周末，不管气温如何，乘客量仍然相当平稳。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/f0bddd529abb9d563cf78a9e92f56aba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*i1kf_zN8H0xLVIS6mYxv7g.png"/></div></figure><p id="f794" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">检查风速与下面的乘客人数似乎没有太大的关系。我们可以肯定地看到，一周中的日子是一个很大的因素，就像前面的图表一样，但没有那么多风。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/107d1a507c1711fd3e84d8d28fb006f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*pIIjiwpxv5qgECx1NCfjcA.png"/></div></figure><p id="e8ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就像风速一样，降水似乎对车友的量没有太大影响。这让我有些惊讶，因为我确实感觉到雨天公交车上的人更多，但这可能是一种错觉，因为潮湿导致不太舒服。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/791b4865201f7738ab18b15edd3b8b43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*qsLPNnw1Q68Vnl_J1B7wdg.png"/></div></figure><p id="97a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不出所料，在之前的图表中看到一周中的日子被分开后，周末乘坐公交车的人数比工作日低得多。这意味着当考虑周末的交通方式时，公共汽车很可能不会拥挤。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/a5baa80ed0fda3fd0b411e403d7ba8ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*KBEVEv8OJ0qe-OV50WwLBQ.png"/></div></figure><p id="c534" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了在未来帮助自己，我想看看我是否能预测某一天的乘客数量。根据上面获得的知识，似乎唯一有价值的预测变量是温度和星期几。我将数据分成80-20份用于训练和测试，然后在训练数据上使用一周中的某一天和一天中的最高和最低温度来组合glm。以下是将该模型应用于测试数据时，该模型的预测值与实际乘坐人数的对比。不幸的是，误差很大，但84%的预测值与实际值相差在15%以内。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/136e20a022dfba0b86a1971dec923b1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*B1vYKGH6fxOMqkmyHU4rCA.png"/></div></figure><p id="de12" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在深入研究了上述关系并试图预测公交车流量后，我想弄清楚如何实际决定是骑自行车还是跳上公交车。为此，我决定为天气和公交车的拥挤程度创建“痛苦”指数。公共汽车上乘坐量的痛苦指数只是一个从0到100范围内的标准化。存在的公式是:misery _ I = 100 *(riders _ I-min(riders)/(max(riders)-min(riders))。至于天气指数，我分别用40、40和20(温度是倒数)组合了温度、降水和风速的归一化。这种分裂仅仅是我个人对最让我畏缩的属性的偏好。现在，痛苦指数被放在一起，我有一个评级系统来决定是坐公共汽车还是骑自行车:如果天气指数高于公共汽车，那么它就是，如果公共汽车指数高于它，那么是时候跳上我的自行车了。</p><p id="31d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">激动人心的部分来了。该模型是否能很好地预测乘客量，以决定是骑自行车还是乘公共汽车？将我们预测的公交乘客量与公交痛苦指数相加，并将其与观测到的天气痛苦指数进行比较，然后将由此得出的决策与原始的观测决策进行比较，我们得到了91.1%的准确率。不算太坏。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/36951bf7d4f71e99aff3b6631a3d8416.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*oWBEX6CveOBqmqcIcpurgg.png"/></div></figure><p id="a8d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">基于这一切，我决定用Shiny创建一个互动工具，你可以在这里查看<a class="ae kc" href="http://guseverson.shinyapps.io/bikeorbus" rel="noopener ugc nofollow" target="_blank"/>。该工具接收您计划乘坐的公交路线，并从Weather Underground的API中获取当前天气，然后根据更新的数据运行上述模型，以预测公交路线的拥挤程度并计算痛苦指数。除此之外，还有一个选项可以显示你对天气有多“强硬”,这个选项为天气痛苦指数增加了参数和乘数。</p><p id="3e59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>