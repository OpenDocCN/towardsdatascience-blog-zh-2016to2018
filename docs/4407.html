<html>
<head>
<title>When to use Cassandra and when to steer clear</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">何时使用卡桑德拉，何时避开</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/when-to-use-cassandra-and-when-to-steer-clear-72b7f2cede76?source=collection_archive---------1-----------------------#2018-08-14">https://towardsdatascience.com/when-to-use-cassandra-and-when-to-steer-clear-72b7f2cede76?source=collection_archive---------1-----------------------#2018-08-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="aefc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">“但是卡珊德拉做得不好！”在部署了 Cassandra 集群并开始使用它之后，您肯定不想听到这样的话。在进行任何投资之前，让我们检查一下 Apache Cassandra 是否与您的任务兼容。那么，应该用卡珊德拉吗？</p><h1 id="e57e" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">当答案是“是”的时候</h1><p id="6019" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">Cassandra 天生适合于繁重的编写工作<strong class="jp ir"><em class="lo"/></strong>。节点间的数据分发很快，写入很便宜，这使得<a class="ae lp" href="https://www.datastax.com/nosql-databases/benchmarks-cassandra-vs-mongodb-vs-hbase" rel="noopener ugc nofollow" target="_blank">卡珊德拉每秒处理几十万次写入操作</a>只是一个普通的星期二。此外，Cassandra 非常好地处理了<strong class="jp ir"> <em class="lo">繁重的读取工作负载</em> </strong>，尽管有一些进一步描述的限制。</p><p id="3c24" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您计划跨<strong class="jp ir"> <em class="lo">多个数据中心和云可用性区域</em> </strong>进行数据分发，Cassandra 也很适合。您在波士顿和檀香山的用户将访问他们本地的数据中心(速度更快)，但将使用相同的数据池。</p><p id="2ca1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于数据复制，Cassandra 适合“永远在线”的应用程序，因为它的集群是<strong class="jp ir"> <em class="lo">永远可用的</em> </strong>。数据存储在多个节点和多个数据中心，因此如果集群中多达一半的节点(甚至整个数据中心)出现故障，Cassandra 仍然可以很好地管理。</p><p id="8932" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">与 Apache Spark 之类的结合，Cassandra 可以成为<strong class="jp ir"><em class="lo"/></strong>实时分析的强大‘骨干’。而它<strong class="jp ir"> <em class="lo">线性缩放</em> </strong>。因此，如果您预期您的实时数据会增长，Cassandra 在这方面绝对有最大的优势。</p><h1 id="3cfc" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">当答案是“不”的时候</h1><p id="0082" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">卡珊德拉在以下方面有局限性:</p><p id="ba0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">酸交易</strong>。如果你指望 Cassandra 建立一个支持 ACID 属性(原子性、一致性、隔离性和持久性)的系统，不幸的是，这是行不通的。Cassandra 处理数据的方式不够“严格”:它可能允许部分成功的交易，包含重复、矛盾等等。这就是为什么依赖于 ACID 的系统(例如，处理银行转账的核心银行系统等等)不应该和 Cassandra 一起使用。事实上，没有 NoSQL 技术可以做到这一点:这样的系统需要关系数据库。尽管 Cassandra 有一个旨在保护 ACID 属性的轻量级事务特性，但它还不够好。</p><p id="8b19" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">强一致性</strong>。为了实现高可用性，Cassandra 牺牲了强一致性，只授予最终一致性。卡珊德拉有补救措施，但这不足以解决精度要求高的问题。“补救措施”之一是调整数据库，使其不复制数据，但这就扼杀了 Cassandra 的王牌——可用性。</p><p id="370f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">大量的更新和删除</strong>。卡珊德拉在写作方面令人难以置信(以下是这一惊人写作表现的<a class="ae lp" href="https://www.scnsoft.com/blog/cassandra-performance" rel="noopener ugc nofollow" target="_blank">原因</a>)。但它只是面向追加的。如果你需要<em class="lo">更新</em>很多，Cassandra 并不好:对于每次更新，它只是添加一个具有相同主键的“年轻”数据版本。想象一下，对于读操作来说，在它们的“相似”池中找到所需的数据版本是多么痛苦。此外，Cassandra 处理<em class="lo">删除</em>的方式类似:它向数据添加一个墓碑，而不是实际删除它。因此，针对同一主键的读取会发现大量“不死”数据，而不仅仅是最新值。有时会进行压缩，所有不必要的数据都会被删除，但是在压缩之间，读取时间会更长。</p><p id="8e22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">大量扫描</strong>。卡珊德拉阅读数据非常好。但是只要知道想要的数据主键就很好读。如果你不这样做，Cassandra 将不得不扫描所有节点来找到你需要的，这将需要一段时间。如果超过等待时间阈值，扫描将根本无法完成。</p><h1 id="ace1" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">“确定”时的真实用例</h1><p id="58ef" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">为了更清楚地描述何时使用 Cassandra，我们给出了一些最流行的用例。</p><h1 id="8a39" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">传感器数据</h1><p id="1cc1" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">Cassandra 的数据模型的组织方式以及 Cassandra 专为密集型写入工作负载而设计的事实使其非常适合传感器数据。它<strong class="jp ir"> <em class="lo">适合完全不同的行业</em> </strong>，无论是制造、物流、医疗保健、房地产、能源生产、农业还是其他。无论传感器类型如何，Cassandra 都能很好地处理传入的数据流，并为进一步的数据分析提供可能性。</p><h1 id="c21c" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">信息系统</h1><p id="1137" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">消息系统(聊天、协作和即时消息应用等。)对 Cassandra 来说就像传感器数据一样完美，因为它们不需要数据更新。Cassandra 可以快速编写新收到的信息，允许快速阅读和其他附加功能。例如，你可以给消息一个“生存时间”,当这个时间用完时，Cassandra 会删除它，避免昂贵的墓碑和压缩。</p><h1 id="b662" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">电子商务网站</h1><p id="8450" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">数据模型设计、面向写入、相当快的读取速度和线性可伸缩性使 Cassandra 适合于具有类似<strong class="jp ir"> <em class="lo">产品目录</em> </strong>和<strong class="jp ir"> <em class="lo">推荐或个性化引擎</em> </strong>等功能的电子商务网站。对于后者，Cassandra 可以存储属于同一细分市场的访问者的活动，这些访问者彼此靠近，这将允许分析工具快速访问数据，例如，为想要离开网站的用户提供诱人的建议。</p><h1 id="bfc1" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">娱乐网站</h1><p id="57fd" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">Cassandra 还帮助各种娱乐网站跟踪和监控用户的活动。它存储了用户看过、玩过、读过或听过的电影、游戏、文章或歌曲的数据，以及他们在每项活动上花费的时间等。然后，Cassandra 可以将这些数据输入分析工具，向用户推荐他们可能喜欢的其他电影、游戏、文章或歌曲。</p><h1 id="2fab" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">银行欺诈检测</h1><p id="bbf0" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">尽管 Cassandra 不太适合银行账户之间的转账，也不太适合 ACID 交易，但银行仍然可以从中受益。他们为分析客户数据而构建的大数据解决方案可以通过启用<strong class="jp ir"> <em class="lo">欺诈检测</em> </strong>为客户提供额外的安全级别。Cassandra 做得非常出色，它通过与 Apache Spark 的无缝集成提供了很高的速度和对实时分析的支持。</p><h1 id="669b" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">小测验</h1><p id="99c0" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">卡珊德拉不是银弹，就像任何 NoSQL 数据库不是。它有自己的优点和缺点要考虑。如果你想检查你对它们的记忆程度，这里有一个小测验:</p><p id="bebf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">1.Cassandra 可以在多个同步的数据中心上运行吗？</p><p id="a72d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.Cassandra 可以与哪些技术配合使用来进行实时分析？</p><p id="4ae7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.Cassandra 在升级和密集写入方面做得如何？</p><p id="0d00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.Cassandra 适合一个需要 ACID 事务，扫描，删除，更新的项目吗？</p><p id="2674" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5.卡珊德拉的典型特征是什么:强一致性还是持续可用性？</p><p id="53e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，最大的问题是:你应该使用卡桑德拉还是避开它？现在，你已经掌握了做出这个重要决定的所有背景信息。</p></div></div>    
</body>
</html>