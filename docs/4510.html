<html>
<head>
<title>7 lessons I’ve learned from building up a MySQL data processing system from scratch (with Python)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我从零开始构建 MySQL 数据处理系统(使用 Python)中学到的 7 个教训</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/7-lessons-ive-learned-from-building-up-a-mysql-data-processing-system-from-scratch-cccd8c7517e0?source=collection_archive---------10-----------------------#2018-08-20">https://towardsdatascience.com/7-lessons-ive-learned-from-building-up-a-mysql-data-processing-system-from-scratch-cccd8c7517e0?source=collection_archive---------10-----------------------#2018-08-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a84628f27358716e80e22ab9b3788b04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_ZnId4i6hcOWuHWXYVmQNw.jpeg"/></div></div></figure><p id="822e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在写这篇短文之前，我首先要说的是，我并不自称是一名优秀的数据科学家或机器学习工程师。第一件事是，我有一段有趣的、意想不到的(对我来说)工作经历，我想分享一些我从中学到的感悟。</p><p id="ae71" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我自己是一名自然语言处理/机器学习科学家，至于我的经验，不幸的是，我不能说你真的需要一个很好的计算机科学背景才能在这个领域成功工作(至少在我的国家)，我不认为这是一个好的工作概念。我个人认识一些杰出的研究人员，他们由于某种原因没有足够的技能来参与实时开发和知识库贡献，这是一种小型数据科学悲剧。所以，知道我将要讲述的一些事情对于大多数阅读这篇短文的观众来说可能是非常清楚的，我仍然想分享它们——也许有人会发现这些信息是有用的。</p><p id="635a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望你会喜欢我将要讲的故事。</p><h2 id="e376" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">1.处理异常至关重要</h2><p id="e29a" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">当我第一次尝试连接到存储在 Google Cloud 上的这个特定的 MySQL 数据库时，我遇到了许多不同的错误。当我设置我的代理时，我经历了更多。事情是，处理所有的错误总是更好的，尤其是与连接相关的错误，在代码开发的第一阶段，<em class="lu">在需要时抛出</em>，否则调用<em class="lu"> except </em>语句。</p><p id="8327" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这听起来可能很简单，但在我的例子中，我可以有环境变量，其中有 UNIX 套接字名称和节点环境名称，我可以让它们的值不正确，我可以让我的数据库凭证不正确，<em class="lu">，我可以拥有这一切</em>。处理这类案例的几个小时节省了我很多时间，我真的很高兴我把这些时间投入到项目开发的这个阶段。</p><h2 id="c779" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">2.适当的抽象类是无价的</h2><p id="cdf1" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">在处理抽象类时，你需要记住的最重要的事情是，你需要花很多时间和精力去定义它，并且你需要确定<em class="lu">你确实需要它</em>。我的存储库的结构是基于这样一个事实，即我必须创建许多。csv 文件，具有非常相似的模式(唯一键)。事实上，我有许多类似的提取器、算法、数据后处理器等。，所有这些都被简化为基本抽象类，这使得下一个模块的创建更加容易。</p><p id="b4bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当你写第 n 个模块的时候，你真的意识到<em class="lu">你已经把你的类做对了</em>，而且你明白，构造函数和一些在编码时没有定义的方法已经实现了，你不需要再为它们费心了。</p><h2 id="76a1" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">3.灵活的存储库结构总是最好的</h2><p id="4800" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">有时它可能看起来有点难看(例如，一个文件夹中有一个文件)，但是如果您看到如果您需要更改一些关键模块(例如，像文本预处理程序)，并且这样做您只需要更改 1-2 个文件，<em class="lu">那么它是很好的</em>。</p><p id="0908" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我不认为自己是一个软件架构师，所以对我来说很难判断在这个领域什么是好的，什么是错的，但是我学到的是<em class="lu">组件的高度碎片化和独立性</em>总是好的。我自己开发的 repo 有大量的小文件夹，引用它们比试图使架构整体化要容易得多(也许更漂亮)。</p><h2 id="776e" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">4.测试数据科学模型是值得的</h2><p id="adb0" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">我写这些文字的时候，我在嘲笑自己，因为我仍然没有足够的时间来创建涵盖所有情况的漂亮的测试。我仍然提到这一点的原因是，如果您有不太明显的 ML/NLP 模型行为，至少为了您自己的利益，最好对它进行测试。</p><p id="eb88" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我没有很多 NLP/ML 算法(其中大部分足够简单)，但是它们的另一部分<em class="lu">如果没有最简单的测试就无法支持</em>。此外，在更好地理解模型方面，测试通常是有用的——浏览断言语句，当您希望在脑海中刷新时，一些算法概念可能会变得更加清晰。</p><h2 id="c14e" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">5.使数据库符合第三范式</h2><p id="6672" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">有时这是我和同事争论的一部分，但是如果不使所有 3 个语句都完美地为数据库工作，你就不能编写一个有效的数据处理系统。没有它们，一些不明显的查询麻烦往往会发生，你甚至找不到问题出在哪里。</p><p id="8a30" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一个简短的 SQL NFs 指南是<a class="ae lv" href="https://www.geeksforgeeks.org/database-normalization-normal-forms/" rel="noopener ugc nofollow" target="_blank">这里是</a>，我认为多看两遍总是更好。</p><h2 id="6477" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">6.记录你的错误</h2><p id="4553" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">简单易用—日志记录。通常，你不会查看你收到的所有 3 年警告和错误，但是<em class="lu">一些错误可能不会重复</em>(我有一些错误)，日志记录至少帮助我理解了发生的原因。我是在我的本地机器上做的，当一些东西在服务器上不工作时，查看类似的案例为我节省了一些时间。</p><h2 id="e674" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">7.除非你的数据库非常简单，否则你不需要 ORM</h2><p id="d741" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">在从事这个项目的很长一段时间里，我真的担心我需要用 ORM 重写所有的东西。我大错特错了。</p><p id="99cd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">实际上，像 SQLAlchemy 和 Peewee 这样的东西适合小型的简单数据库，但是它们不适合像 had 这样的复杂数据库(有时编写一个查询需要 4 个 group by 和 5 个 joins)。它们很优雅，有时非常简单和漂亮，但无论如何，<em class="lu">如果你只是简单地使用连接器 API，你就不能拥有像</em>一样多的控制。我决定使用 MySQL Connector，我很高兴我没有改变我的决定，因为用 ORM 编写任何东西都会使困难的事情变得更加复杂。</p><h2 id="5411" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">∞.结论</h2><p id="0c2f" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">这篇小笔记与 ML/NLP 算法解释及其性能讨论无关，但我仍然觉得它很有用。我希望在开始从事这个项目之前，我知道上面描述的所有陈述，但我也确信，只有在花费一些痛苦的时间修复错误和寻找实际问题之后，其中一些陈述才会变得清晰易懂。</p></div></div>    
</body>
</html>