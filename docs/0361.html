<html>
<head>
<title>Probability in a Weighted Coin-flip Game using Python and Numpy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和Numpy的加权抛硬币游戏中的概率</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/probability-in-a-weighted-coin-flip-game-using-python-and-numpy-bc1686c49a35?source=collection_archive---------0-----------------------#2017-04-22">https://towardsdatascience.com/probability-in-a-weighted-coin-flip-game-using-python-and-numpy-bc1686c49a35?source=collection_archive---------0-----------------------#2017-04-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0cdd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本周一个简短有趣的问题:</p><p id="2121" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">两个玩家正在玩一个游戏，从玩家1开始，他们掷一枚<em class="kl">不一定是</em>公平的硬币。第一个抛头的人获胜。一枚硬币正面朝上的概率是<em class="kl"> p </em>。参与人1赢得比赛的概率是多少？</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/5e365c56839b51f984f3680ac67227f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YUB4NGZ7zjszmbwR"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Photo by <a class="ae lc" href="https://unsplash.com/@yirage?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andriyko Podilnyk</a> on <a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="fcf5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以用python中的一个简单函数来探讨这个问题。让我们编写一个接受两个参数的函数:1。)要玩的游戏的数量，以及2。)抛硬币导致正面的概率(设置为默认值0.5或50%)。</p><p id="b7e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们姑且称这个函数为“P1 _赢_概率_加权_硬币_游戏”</p><p id="a8d4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以用下面的代码模拟这个游戏:</p><pre class="kn ko kp kq gt ld le lf lg aw lh bi"><span id="ad19" class="li lj iq le b gy lk ll l lm ln">import numpy as np</span><span id="8b1e" class="li lj iq le b gy lo ll l lm ln">def P1_win_prob_weighted_coin_game(num_games, prob_heads=.5): <br/>  player_one_wins = 0 <br/>  for n in range(0,num_games): <br/>    num_flips = 0 <br/>    win = 0<br/>    while win == 0: <br/>      turn = np.random.uniform(0,1) <br/>      num_flips += 1 <br/>      if turn &lt;= prob_heads: <br/>        if num_flips % 2 != 0: <br/>          player_one_wins += 1 <br/>        win += 1 <br/>  return float(player_one_wins)/float(num_games)</span></pre><p id="f936" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们一步一步地简单介绍一下。</p><pre class="kn ko kp kq gt ld le lf lg aw lh bi"><span id="81e0" class="li lj iq le b gy lk ll l lm ln">import numpy as np</span><span id="32bd" class="li lj iq le b gy lo ll l lm ln">def P1_win_prob_weighted_coin_game(num_games, prob_heads = 0.5): <br/>  player_one_wins = 0</span></pre><p id="afa4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们从导入numpy开始，因为我们可以利用它的随机选择功能来模拟这个游戏的抛硬币机制。</p><p id="04eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们定义函数的名称，并指定两个参数。我们将默认正面概率设置为0.5，以防我们只是想使用公平硬币指定一些游戏来查看结果。显然，我们可以在这里随意输入自定义概率。</p><p id="7bc2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还为玩家1赢得的游戏数量设置了一个全局计数器，每轮模拟从0开始。</p><pre class="kn ko kp kq gt ld le lf lg aw lh bi"><span id="eaa0" class="li lj iq le b gy lk ll l lm ln">  for n in range(0,num_games): <br/>      num_flips = 0 <br/>      win = 0<br/>      while win == 0: <br/>        turn = np.random.uniform(0,1) <br/>        num_flips += 1</span></pre><p id="954e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，对于指定模拟次数(例如，range(0，num_games ))的每场游戏，我们将从零开始计算掷硬币的次数。这既能记录游戏进行了多长时间，也能帮助我们在一次正面朝上的情况下确定谁是赢家。</p><p id="248b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还指定了一个获胜条件“win ”,它将帮助我们知道游戏何时完成。当win仍然等于零时，玩家继续掷硬币。每“转”一次构成硬币的一次翻转，它是在0和1之间随机选择的十进制值。每走一个回合，我们的num_flips计数器就加一。</p><pre class="kn ko kp kq gt ld le lf lg aw lh bi"><span id="82a7" class="li lj iq le b gy lk ll l lm ln">        if turn &lt;= prob_heads: <br/>          if num_flips % 2 != 0: <br/>            player_one_wins += 1 <br/>          win += 1</span></pre><p id="b687" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果随机选择的“回合”值小于或等于我们设置的“prob_heads”值，我们认为这是一个获胜条件。</p><p id="8219" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以这样理解:如果翻转头部的概率是0.6，那么0和1之间的60%的值可以被解释为头部翻转(例如，0.0和0.6之间的所有值)。</p><p id="a39d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦满足获胜条件，我们就检查硬币被抛了多少次。因为参与人1总是第一个掷硬币，我们知道奇数次掷硬币意味着参与人1是最后一个走的，因此是赢家。如果玩家1赢了游戏，我们在函数的顶部给我们的玩家1赢计数器加1。我们还将“win”的值更改为1.0，这将中断当前游戏，并在预设的模拟次数内开始下一个游戏。</p><pre class="kn ko kp kq gt ld le lf lg aw lh bi"><span id="3454" class="li lj iq le b gy lk ll l lm ln">  return float(player_one_wins)/float(num_games)</span></pre><p id="144b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦所有模拟运行完毕，该函数将返回玩家1赢得的游戏数除以所玩游戏的总数。这将表示为十进制的获胜百分比。</p><p id="3a57" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好吧！现在我们已经写好了函数，让我们用一枚硬币玩50，000次游戏，看看会有什么结果:</p><pre class="kn ko kp kq gt ld le lf lg aw lh bi"><span id="d935" class="li lj iq le b gy lk ll l lm ln">P1_win_prob_weighted_coin_game(50000)</span><span id="91ae" class="li lj iq le b gy lo ll l lm ln">0.66848</span></pre><p id="5b5b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在超过50，000场比赛中，我们看到一号玩家有明显的优势。事实上，玩家1有大约2/3的机会因为先抛硬币而赢得游戏，即使使用公平硬币。</p><p id="34cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们调整硬币正面朝上的概率呢？如果硬币有75%的机会正面朝上呢？</p><pre class="kn ko kp kq gt ld le lf lg aw lh bi"><span id="b637" class="li lj iq le b gy lk ll l lm ln">P1_win_prob_weighted_coin_game(50000, .75)</span><span id="d25c" class="li lj iq le b gy lo ll l lm ln">0.80066</span></pre><p id="53d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在75%的抛硬币中，一个有重量的硬币朝上，玩家1有80%的机会获胜。</p><p id="b6b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们真的降低头部出现的可能性呢？比方说，如果正面只出现1%的几率呢？</p><pre class="kn ko kp kq gt ld le lf lg aw lh bi"><span id="ec10" class="li lj iq le b gy lk ll l lm ln">P1_win_prob_weighted_coin_game(50000, .01)</span><span id="ba14" class="li lj iq le b gy lo ll l lm ln">0.50498</span></pre><p id="18d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">只有当我们大幅度降低正面朝上的可能性时，两个玩家才有大致相同的获胜机会。</p><p id="b391" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有趣的东西！你可以随意摆弄这个函数，看看不同的模拟次数和正面概率如何影响玩家1获胜的可能性。</p><p id="f45e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>