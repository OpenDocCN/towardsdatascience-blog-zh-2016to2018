<html>
<head>
<title>The Effect of Naming in Data Science Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">命名在数据科学代码中的作用</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/effective-naming-in-data-science-ea847c04f51b?source=collection_archive---------3-----------------------#2018-03-13">https://towardsdatascience.com/effective-naming-in-data-science-ea847c04f51b?source=collection_archive---------3-----------------------#2018-03-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/2afeadc90e0671202ae0172b713494e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oD0Kb93iePyHdefQJx31lQ.jpeg"/></div></div></figure><div class=""/><p id="f6e0" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">即使有工具允许在不编码的情况下实践数据科学，它们也远远不够。数据科学家将编写和读取代码。阅读可读性差的代码是一种可怕的体验。这篇文章关注命名实体(例如变量、函数)的重要性，以及它如何容易地提高你的代码质量。</p><h1 id="a69d" class="kw kx jb bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">“会有代码”</h1><blockquote class="lu"><p id="a784" class="lv lw jb bd lx ly lz ma mb mc md kv dk translated">“……我还预计特定领域语言的数量将继续增长。这将是一件好事。但它不会消除代码。”</p></blockquote><p id="b75e" class="pw-post-body-paragraph jy jz jb ka b kb me kd ke kf mf kh ki kj mg kl km kn mh kp kq kr mi kt ku kv ij bi translated">罗伯特·c·马丁在他的书<a class="ae mj" href="https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882" rel="noopener ugc nofollow" target="_blank">的第一页写道</a>《干净的代码:敏捷软件技术手册》，第一章名为“将会有代码”。我们，数据科学家，编写和读取代码。即使有帮助工具，我们仍将编写和阅读代码。这是我们的核心实践之一。这就是我们如何分析数据、训练模型、预测结果等等。我坚信，对于一个数据科学家来说，代码是无法逃避的。</p><p id="da9c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在某种程度上，我们仍然可以不用编码来实践数据科学。从早期到今天，有图形工具可以分析数据或练习机器学习。这种工具的一个例子是<a class="ae mj" href="https://www.cs.waikato.ac.nz/ml/weka/" rel="noopener ugc nofollow" target="_blank"> WEKA </a>。WEKA是一个带有图形用户界面的机器学习工具包。根据维基百科，它的发展始于1993年<a class="ae mj" href="https://en.wikipedia.org/wiki/Weka_(machine_learning)" rel="noopener ugc nofollow" target="_blank"> * </a>。它允许用户在不编写一行代码的情况下进行机器学习实验等。那我为什么坚持说写代码和读代码是数据科学家的根本？因为会有自定义操作。</p><p id="fae2" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">图形工具只有这么多操作。如果你不是每天都在做同样的事情，那么总有一天工具会失去你所需要的功能。这可以是一个分析，一个机器学习模型，或者一些其他的操作。您需要在某种程度上控制、定制和扩展您的操作。级别取决于任务、库或工具。由于许多问题需要新的或定制的方法，很快你就会超过那些图形工具。</p><p id="9365" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们很少单独工作。组织通常没有单一的数据科学家，而是有数据科学团队。即使事实并非如此，数据科学家也会与其他学科合作。这种协作需要良好的数据科学代码质量。</p><p id="f59c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，如果你在为一家公司工作，你其他团队的同事会需要你的代码。为了将你的模型嵌入后端、前端或其他系统，你需要代码。一个不能部署或集成的模型对你的公司来说是没有用的。</p><p id="0212" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你认同数据科学会有代码，那我们就来谈谈如何为数据科学写好代码。编写好的代码是一项艰巨的任务。有很好的文字解释为什么它是必要的和如何实现它。在这篇文章中，我的目标是关注其中的一点。这一点不需要培训或教育，但会显著提高您的代码质量。我将重点关注的是<strong class="ka jc">命名、</strong>，它将提高代码的可读性。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="6836" class="kw kx jb bd ky kz mr lb lc ld ms lf lg lh mt lj lk ll mu ln lo lp mv lr ls lt bi translated">一个简单的技巧:重命名</h1><p id="a517" class="pw-post-body-paragraph jy jz jb ka b kb mw kd ke kf mx kh ki kj my kl km kn mz kp kq kr na kt ku kv ij bi translated">阅读一段可读性差的代码是一种可怕的体验。让我们看看下面这个简单的例子:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="0389" class="nk kx jb ng b gy nl nm l nn no">import pandas as pd</span><span id="4b62" class="nk kx jb ng b gy np nm l nn no">df = pd.DataFrame({"f1": [42, 12, 5, 8, 15, 65], <br/>                   "f2": [172, 155, 110, 120, 158, 168]})<br/>df2 = df[df.f1 &gt;= 18]<br/>out = df2.f2.mean()<br/># out: 170.0</span></pre><p id="9897" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">试着猜猜这段代码是做什么的。这段代码的作者知道每一行的目标，并且在她编写代码时知道整个代码的目标。然而，作为一个读者，你看到了一个你需要破译的代码片段。由于作者没有注意可读性，你将花费更多的时间和精力试图理解这段代码。此外，你将更容易犯错误。让我们仔细分析一下这个例子，看看它为什么不好:</p><ul class=""><li id="76df" class="nq nr jb ka b kb kc kf kg kj ns kn nt kr nu kv nv nw nx ny bi translated">我知道进口熊猫作为pd现在是非常标准的。所有与熊猫打交道的数据科学家都会理解这种简写。这不是代码中最大的问题，但我相信这是可以改进的。除此之外，短(例如2个字符)变量名在自动补全中也很麻烦(例如pd vs pdb)。</li><li id="dcd9" class="nq nr jb ka b kb oc kf od kj oe kn of kr og kv nv nw nx ny bi translated"><code class="fe nz oa ob ng b">df = ...</code>同样，可能是因为pandas教程，将数据帧命名为df是一种广泛应用的实践。但是它隐藏了上下文中的数据。那是什么样的数据？</li><li id="8e5a" class="nq nr jb ka b kb oc kf od kj oe kn of kr og kv nv nw nx ny bi translated"><code class="fe nz oa ob ng b">"f1":... "f2":...</code>这些是我们数据框的列。然而，它不提供信息。那些列有什么样的数据？为什么它们被列举为1和2？列举是否有目的(比如某事物的第一和第二)，或者没有？</li><li id="eb6c" class="nq nr jb ka b kb oc kf od kj oe kn of kr og kv nv nw nx ny bi translated"><code class="fe nz oa ob ng b">df[df.f1 &gt;= 18]</code>这行中的18是什么意思？是某种神奇的数字吗？为什么我们要过滤大于或等于18的值，为什么我们要过滤f1列？</li><li id="1dd0" class="nq nr jb ka b kb oc kf od kj oe kn of kr og kv nv nw nx ny bi translated"><code class="fe nz oa ob ng b">out = df2.f2.mean()</code>到处都是同样的问题。f2列的意义是什么？为什么我们要取其平均值？</li></ul><p id="08cd" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我用更易读的方式重写它，而不是解释它的目的。我将只是重命名变量，并保持代码的其余部分不变。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="f8af" class="nk kx jb ng b gy nl nm l nn no">import pandas</span><span id="72e2" class="nk kx jb ng b gy np nm l nn no">physical_data = \<br/>        pandas.DataFrame({"age": [42, 12, 5, 8, 15, 65], <br/>                          "height": [172, 155, 110, 120, 158, 168]})</span><span id="5328" class="nk kx jb ng b gy np nm l nn no">adult_physical_data = physical_data[physical_data.age &gt;= 18]<br/>mean_height_of_adults = adult_physical_data.height.mean()<br/># mean_height_of_adults: 170.0</span></pre><p id="2b54" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">仅仅通过重命名，你只需一瞥就能理解代码片段的目标和每行中的操作。我认为现在没有必要解释代码，因为它非常清楚。</p><h1 id="a3a0" class="kw kx jb bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">数据= …，但是哪些数据呢？</h1><p id="edad" class="pw-post-body-paragraph jy jz jb ka b kb mw kd ke kf mx kh ki kj my kl km kn mz kp kq kr na kt ku kv ij bi translated">我相信数据科学代码中的命名可能比一般的软件代码更难。我们有更少的适合对象设计的概念，更多的抽象实体和多样化的集合。这使得数据科学中的命名更加困难。例如，考虑使用包含许多列的表。例如，一个表具有关于作为人的客户(例如，姓名、年龄)、客户行为(例如，购买)、地理信息(例如，购买的地址)和时间信息(例如，购买的时间)的列。你会如何命名这张桌子？</p><p id="a52e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以为该表取不同的名称，但有一些常见的不好的名称。例如，不要将其命名为<code class="fe nz oa ob ng b">dt</code>或<code class="fe nz oa ob ng b">df</code>。即使你会在pandas文档的每个地方看到df，你也必须明白它们是不属于某个项目的简短示例代码。也不要把它命名为<code class="fe nz oa ob ng b">data</code>。是的，它是数据，但你会将保存年龄的变量命名为“整数”吗？“数据”作为一个名称是非常模糊的。那是什么数据？它包含什么样的信息？</p><p id="f0f9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不要害怕使用长名字。较长的名称通常包含关于实体的更多信息。拥有更长的名字并不是一种负担。有许多不错的具有自动完成特性的ide，比如<a class="ae mj" href="https://www.jetbrains.com/pycharm/download/" rel="noopener ugc nofollow" target="_blank"> PyCharm </a>，所以你不必写全名。</p><p id="00d1" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">编码的时候，想想下一个会阅读你代码的人。她能理解剧本的主要目标以及每一句台词是如何服务于这个目标的吗？更具体地说，命名:她会仅仅通过名字就迅速捕捉到那个实体的含义吗？</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="beb1" class="kw kx jb bd ky kz mr lb lc ld ms lf lg lh mt lj lk ll mu ln lo lp mv lr ls lt bi translated"><strong class="ak">不要为糟糕的代码找借口</strong></h1><p id="7d89" class="pw-post-body-paragraph jy jz jb ka b kb mw kd ke kf mx kh ki kj my kl km kn mz kp kq kr na kt ku kv ij bi translated">用更好的名字，不仅仅是为了你的队友，也不仅仅是为了你自己。你的队友和你自己都从这个习惯中受益。从你队友的角度来看，她会更容易更快地读懂你写的代码。从你个人的角度来看，你会写你的代码更容易，因为你将有更少的认知负荷去记忆你的实体的意义。因此，你的团队和组织将从这个习惯中受益。</p><p id="3c62" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，命名更好的习惯似乎很难养成。你可能不想把时间花在寻找更好的名字上。然而，这是一个有回报的习惯。即使你写的代码是一个原型，或者是一个小项目的一部分，你也应该实践它。在不知道的情况下，这样的代码可能会变成一个更大的项目。很多情况下，项目看起来很小，但是开发持续了很多年；设计为“一劳永逸”的项目最终对组织非常重要。这就是为什么即使是最短的代码也应该有好的命名。</p><p id="1ba0" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你从来没有想过更好的命名，我希望在读完这篇文章后，你会尝试更好地命名你的实体，并看看它如何提高你的代码质量。</p></div></div>    
</body>
</html>