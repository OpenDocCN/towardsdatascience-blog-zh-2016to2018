<html>
<head>
<title>How to use API to make a Deep learning satellite image repository?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用API做一个深度学习卫星图片库？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-use-api-to-make-a-deep-learning-satellite-image-repository-818a5ae2a5fa?source=collection_archive---------2-----------------------#2018-03-25">https://towardsdatascience.com/how-to-use-api-to-make-a-deep-learning-satellite-image-repository-818a5ae2a5fa?source=collection_archive---------2-----------------------#2018-03-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="a847" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">进行任何深度学习实验的最重要的部分之一是从不同的来源提取或收集数据，以获得真实/接近实际的训练样本。现在，在缺乏已经可用的深度学习研究存储库或kaggle数据集的情况下，有时我们可能会在尝试我们在特定用例中学习的方法时遇到障碍。这就是神奇的API世界来拯救我们的地方。</p><h1 id="d78f" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">什么是API？</h1><p id="dbee" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">以下是维基百科的内容:</p><blockquote class="lo lp lq"><p id="6fff" class="jn jo lr jp b jq jr js jt ju jv jw jx ls jz ka kb lt kd ke kf lu kh ki kj kk ij bi translated"><em class="iq">在计算机编程中，应用编程接口(API)是一组用于构建应用软件的子例程定义、协议和工具。一般来说，它是各种软件组件之间的一组明确定义的通信方法。一个好的API通过提供所有的构建模块，让开发一个计算机程序变得更加容易，然后由程序员把这些模块组合在一起。API可以用于基于网络的系统、操作系统、数据库系统、计算机硬件或软件库。API规范可以有多种形式，但通常包括例程、数据结构、对象类、变量或远程调用的规范。POSIX、Windows API和ASPI是不同形式的API的例子。</em> <strong class="jp ir"> <em class="iq">通常提供API的文档以方便使用</em> </strong> <em class="iq">。</em></p></blockquote><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/ad310277917e6d42d18c57eca9ba9f01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*i4K1v6ab3FIutEAe3Wml5w.png"/></div><figcaption class="md me gj gh gi mf mg bd b be z dk">from -<a class="ae mh" href="https://shareurcodes.com/blog/creating%20a%20simple%20rest%20api%20in%20php" rel="noopener ugc nofollow" target="_blank">https://shareurcodes.com/blog/creating%20a%20simple%20rest%20api%20in%20php</a></figcaption></figure><p id="aa64" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">简而言之:API是一种接口或协议，它允许用户/开发人员从开发的应用程序(如web服务器/web实用工具等)中提取实用程序，而无需理解底层代码或系统。API可用于获取数据以及更新数据源中的数据。我们在这里将涉及或使用的是GET请求，因为我们对数据源感兴趣。</p><h1 id="6c52" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">手里的问题是什么？</h1><p id="e938" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">现在考虑深度学习的图像分类问题，我需要的是一组卫星图像，这些图像被标记为对应的灾难类型。我瞄准的门户网站是<a class="ae mh" href="https://earthobservatory.nasa.gov/NaturalHazards/" rel="noopener ugc nofollow" target="_blank">https://earthobservatory.nasa.gov/NaturalHazards/</a></p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mi"><img src="../Images/e3093048d663378300fc37e64a302508.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hw6q-qNeBSQLFHOPhiqctA.png"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk"><a class="ae mh" href="https://earthobservatory.nasa.gov/NaturalHazards/" rel="noopener ugc nofollow" target="_blank">https://earthobservatory.nasa.gov/NaturalHazards/</a></figcaption></figure><p id="6c07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在地球观测站是一个门户网站，将有100多张图片，现在我需要搜索一个API端点，它允许我获取继续分析所需的图片。API端点是一个URL，根据API文档中提供的规范，可以查询它来搜索您需要的数据。</p><p id="48a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在浩如烟海的网络世界里搜索了一下，我找到了https://eonet.sci.gsfc.nasa.gov/。它是关于自然事件的元数据的储存库。这个存储库支持的API有一个很好的端点文档。</p><p id="df53" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是大多数API文档的样子:</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mn"><img src="../Images/abcf05d2a1f833a0350b133442ba8833.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T41Ke_IxbXVZMFFnIqdgvA.png"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk"><a class="ae mh" href="https://eonet.sci.gsfc.nasa.gov/docs/v2.1" rel="noopener ugc nofollow" target="_blank">https://eonet.sci.gsfc.nasa.gov/docs/v2.1</a></figcaption></figure><p id="b6e4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我需要从表格中了解的是:</p><p id="2826" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">1)自然事件跟踪器的API端点是<a class="ae mh" href="https://eonet.sci.gsfc.nasa.gov/api/v2.1/events" rel="noopener ugc nofollow" target="_blank">https://eonet.sci.gsfc.nasa.gov/api/v2.1/events</a>。这就是我对图像元数据的所有查询，都将通过这个URL获得。</p><p id="4971" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2)我可以根据来源、状态、限制、天数来查询存储库</p><p id="cad5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3)示例查询-【https://eonet.sci.gsfc.nasa.gov/api/v2.1/events?limit=5 T2】&amp;天数=20 &amp;来源=InciWeb &amp;状态=未结。这给了我下面的JSON结果，关于过去5天的自然事件，来自InciWeb并且仍然开放。</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mo"><img src="../Images/5f06b461913b345f546b4a524dc12001.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GDyZXPzh_pwqopKDkz4QoA.png"/></div></div></figure><h1 id="7dba" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated"><strong class="ak">如何有效地编码和获取信息？</strong></h1><p id="586e" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">现在我们知道了信息存在于何处，但我们仍然需要找到一种最佳方法来做到这一点:</p><p id="64ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> Step-1 </strong>使用python中的请求来访问eonet API端点并获得所需的json响应</p><pre class="lw lx ly lz gt mp mq mr ms aw mt bi"><span id="169d" class="mu km iq mq b gy mv mw l mx my">import requests<br/>parameters={"limit":1000,"days":5000}<br/>response=requests.get('<a class="ae mh" href="https://eonet.sci.gsfc.nasa.gov/api/v2/events?status=closed&amp;source=EO'" rel="noopener ugc nofollow" target="_blank">https://eonet.sci.gsfc.nasa.gov/api/v2/events?status=closed&amp;source=EO'</a>)<br/>print(response.status_code)</span></pre><p id="fe93" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">代码应该得到json响应，您可以使用任何在线可用的json到csv转换器将其转换为csv。从csv中过滤出您希望作为训练数据一部分保留的图像URL</p><p id="e38f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">步骤2 </strong>现在，当你有了所有你需要下载图片的图片网址。您可以使用以下代码将图像下载到您的硬盘或虚拟机上。</p><pre class="lw lx ly lz gt mp mq mr ms aw mt bi"><span id="b324" class="mu km iq mq b gy mv mw l mx my">import csv<br/>import urllib<br/>import lxml.html<br/>import requests</span><span id="a095" class="mu km iq mq b gy mz mw l mx my">connection = urllib.urlopen(url)</span><span id="912d" class="mu km iq mq b gy mz mw l mx my">with open('location/urls_to_download_2.csv') as csvfile:<br/>    csvrows = csv.reader(csvfile, delimiter=',', quotechar='"')<br/>    for row in csvrows:<br/>      if 'view.php' in row[0]:<br/>        filename = row[1]<br/>        url = row[0]<br/>        locn=row[2]<br/>        print (locn)</span></pre><p id="9934" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">是的。现在，您已经具备了图像形式的所有必需数据，可以征服卫星图像的深度学习了。只管去做吧！</p></div></div>    
</body>
</html>