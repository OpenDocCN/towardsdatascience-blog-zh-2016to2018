<html>
<head>
<title>Introducing Jupytext</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jupytext 简介</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/introducing-jupytext-9234fdff6c57?source=collection_archive---------4-----------------------#2018-09-08">https://towardsdatascience.com/introducing-jupytext-9234fdff6c57?source=collection_archive---------4-----------------------#2018-09-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d611" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Jupyter 笔记本是包含代码、叙述和情节的交互式文档。它们是试验代码和数据的绝佳场所。笔记本很容易分享，GitHub 上的<a class="ae kl" href="https://github.com/parente/nbestimate" rel="noopener ugc nofollow" target="_blank"> 2.6M 笔记本</a>正好说明笔记本有多受欢迎！</p><p id="c864" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Jupyter 笔记本很棒，但是它们通常是巨大的文件，具有非常特殊的 JSON 文件格式。让我们来介绍一下<a class="ae kl" href="https://github.com/mwouts/jupytext/blob/master/README.md" rel="noopener ugc nofollow" target="_blank"> <em class="km"> Jupytext </em> </a>，这是一个 Jupyter 插件，它以纯文本文件的形式读写笔记本:Julia、Python、R scripts、Markdown 或 R Markdown 文档。</p><h1 id="24aa" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">Jupyter 笔记本作为文本文件</h1><p id="10e3" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">我们编写了 Jupytext 来处理 Jupyter 笔记本，就像我们处理文本文件一样。使用<em class="km"> Jupytext </em>，</p><ul class=""><li id="fcb9" class="lq lr iq jp b jq jr ju jv jy ls kc lt kg lu kk lv lw lx ly bi translated">在您最喜欢的文本编辑器或 IDE 中重构笔记本(例如用普通的 Python 脚本来表示)成为了一个真正的选择，</li><li id="5004" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">将笔记本直接写成脚本或降价是另一种选择</li><li id="19a0" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">使用 Git 在 Jupyter 笔记本上进行协作变得非常简单。</li></ul><p id="f193" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">笔记本的文本表示集中在我们实际书写的部分:单元格输入。我们重视投入甚于产出。通常，它们是笔记本中唯一我们想要版本控制的部分。输入比输出轻得多(通常是千字节比兆字节)。</p><p id="f7a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们也重视产出。使用<a class="ae kl" href="https://github.com/mwouts/jupytext#paired-notebooks" rel="noopener ugc nofollow" target="_blank">配对笔记本</a>可以保存输出。在该配置中，除了脚本或 Markdown 文档之外，Jupyter 还将笔记本保存为传统的<code class="fe me mf mg mh b">.ipynb</code>文件。文本表示可以在 Jupyter 之外编辑。在 Jupyter 中重新加载笔记本时，单元格输入来自文本文件，匹配的输出来自<code class="fe me mf mg mh b">.ipynb</code>文件。</p><h1 id="662d" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">作为脚本编辑的 Jupyter 笔记本</h1><p id="cb8d" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">在第一个动画中，我们展示了如何使用您最喜欢的文本编辑器或 IDE 来编辑您的 Jupyter 笔记本。在浏览代码、编辑和执行单元或单元片段以及调试方面，ide 比 Jupyter 更方便。</p><p id="13d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">动画脚本:</p><ul class=""><li id="aec3" class="lq lr iq jp b jq jr ju jv jy ls kc lt kg lu kk lv lw lx ly bi translated">我们从 Jupyter 笔记本开始。</li><li id="4e2c" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">笔记本包括一幅世界人口图。剧情图例没有按照人口递减的顺序排列，我们会解决这个问题。</li><li id="040b" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">我们希望将笔记本保存为一个<code class="fe me mf mg mh b">.ipynb</code>和一个<code class="fe me mf mg mh b">.py</code>文件:我们向笔记本元数据添加一个<code class="fe me mf mg mh b">"jupytext_formats": "ipynb,py",</code>条目。</li><li id="b4f7" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">Python 脚本可以用 PyCharm 打开:</li><li id="980a" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">在代码和文档中导航比在 Jupyter 中更容易。</li><li id="73d0" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">控制台便于快速测试。我们不需要为此创建细胞。</li><li id="1e46" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">我们发现数据帧的列顺序不正确。我们更新相应的单元格，并得到正确的绘图。</li><li id="1e54" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">Jupyter 笔记本在浏览器中刷新。从 Python 脚本加载修改后的输入。输出和变量被保留。我们最终重新运行代码并得到正确的图形。</li></ul><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mi"><img src="../Images/85aa6ee0657b9c81441fa1eb4cecd8e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PEWh-F4Rzf9GXIcn.gif"/></div></div></figure><h1 id="9078" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">脚本和降价作为 Jupyter 笔记本</h1><p id="da9e" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">有了<a class="ae kl" href="https://github.com/mwouts/jupytext/blob/master/README.md" rel="noopener ugc nofollow" target="_blank"> <em class="km"> Jupytext </em> </a>，每一个 Julia、Python 或者 R script、R Markdown 或者 Markdown 文档都变成了一个潜在的 Jupyter 笔记本。把你的笔记本写成文本，需要的时候在 Jupyter 中呈现出来。</p><p id="614d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下面的动画中，</p><ul class=""><li id="5830" class="lq lr iq jp b jq jr ju jv jy ls kc lt kg lu kk lv lw lx ly bi translated">Jupyter notebook(不是 lab，<a class="ae kl" href="https://github.com/mwouts/jupytext/issues/8" rel="noopener ugc nofollow" target="_blank">敬请关注</a>)将我们的普通 Python 脚本作为 Jupyter notebook 打开。</li><li id="3448" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">从 Jupyter 中保存会给其他未更改的文件添加一个 YAML 头。</li><li id="6fb8" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">向笔记本添加一个单元格会带来一个非常简单的区别。</li><li id="0496" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">刷新笔记本会保留变量，但不会保留输出。输出不存储在文本文件中。</li><li id="1dc6" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">我们通过向笔记本元数据添加一个<code class="fe me mf mg mh b">"jupytext_formats": "ipynb,py",</code>条目，将脚本与传统的 Jupyter 笔记本配对。当我们保存时，会创建一个新的<code class="fe me mf mg mh b">ipynb</code>文件。</li><li id="cadf" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated">由于有了<code class="fe me mf mg mh b">ipynb</code>文件，当笔记本刷新或重新加载时，输出会保留下来。</li></ul><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mi"><img src="../Images/7a187bcf78fe4256473de2980de84692.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*xSrsbf_NG2BhwurSYiVeTw.gif"/></div></div></figure><h1 id="f911" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">Jupyter 笔记本协作</h1><p id="bf44" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">你试过合并 Jupyter 笔记本吗？您应该使用<a class="ae kl" href="https://nbdime.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> nbdime，</a>或者准备好面对<em class="km">不可读的笔记本:NotJSONError </em>如果合并的 JSON 中缺少逗号或括号！</p><p id="1a70" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了<a class="ae kl" href="https://github.com/mwouts/jupytext/blob/master/README.md" rel="noopener ugc nofollow" target="_blank"> <em class="km"> Jupytext </em> </a>，在笔记本上协作就像在脚本上协作一样简单。</p><p id="91b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">只签入文本版本。享受简单的合并和有意义的差异！</p><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mu"><img src="../Images/7ac3e1db73f68fd948f3150144f3c576.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*F44oY914Mchy2-I6.gif"/></div></div></figure><h1 id="54b1" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">安装 Jupytext</h1><p id="dee0" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated"><a class="ae kl" href="https://github.com/mwouts/jupytext/blob/master/README.md" rel="noopener ugc nofollow" target="_blank"> <em class="km"> Jupytext </em> </a>在<a class="ae kl" href="https://pypi.org/project/jupytext/" rel="noopener ugc nofollow" target="_blank"> pypi </a>上有售。安装 python 包并将 Jupyter 配置为使用 Jupytext 的内容管理器:</p><pre class="mj mk ml mm gt mv mh mw mx aw my bi"><span id="ca36" class="mz ko iq mh b gy na nb l nc nd"># Get Jupytext from pip<br/>pip install jupytext --upgrade</span><span id="2f34" class="mz ko iq mh b gy ne nb l nc nd"># Append this to .jupyter/jupyter_notebook_config.py c.NotebookApp.contents_manager_class="jupytext.TextFileContentsManager"</span><span id="789a" class="mz ko iq mh b gy ne nb l nc nd"># And restart your notebook server<br/>jupyter notebook<!-- --> </span></pre><p id="0fbf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过在笔记本元数据中添加<code class="fe me mf mg mh b">"jupytext_formats": "ipynb,py",</code>(用您喜欢的扩展名替换<code class="fe me mf mg mh b">py</code>)，将 Python 脚本与您的 Jupyter 笔记本相关联，或者将<code class="fe me mf mg mh b">ipynb</code>文件与您的 Python 脚本相关联(为了方便保存单元格输出)。如果您计划在 Jupyter 之外编辑文本文件时保持 Jupyter 打开，请通过在单元格中运行<code class="fe me mf mg mh b">%autosave 0</code>来关闭 Jupyter 的自动保存。</p><h1 id="b40b" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">参考</h1><p id="0227" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">将 Jupyter 笔记本作为文本使用的想法并不新鲜。Python 中实现的可选转换器包括:</p><ul class=""><li id="68b2" class="lq lr iq jp b jq jr ju jv jy ls kc lt kg lu kk lv lw lx ly bi translated"><a class="ae kl" href="https://github.com/aaren/notedown" rel="noopener ugc nofollow" target="_blank">笔记</a> : Jupyter 笔记本作为减价文件，</li><li id="3e89" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated"><a class="ae kl" href="https://github.com/rossant/ipymd" rel="noopener ugc nofollow" target="_blank"> ipymd </a> : Jupyter 笔记本作为 Markdown 文档，Python 脚本，OpenDocument 文件，</li><li id="7534" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated"><a class="ae kl" href="https://github.com/grst/ipymd" rel="noopener ugc nofollow" target="_blank">ipymd 的一个分支</a>增加了对 R Markdown 和 R HTML 笔记本的支持，</li><li id="d34f" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated"><a class="ae kl" href="https://github.com/minodes/pynb" rel="noopener ugc nofollow" target="_blank"> pynb </a>:作为 Python 脚本的 Jupyter 笔记本。</li></ul><p id="7303" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们怀着极大的兴趣关注着 Atom 的<a class="ae kl" href="https://atom.io/packages/hydrogen" rel="noopener ugc nofollow" target="_blank"> Hydrogen </a>插件，以及 Visual Studio 代码的<a class="ae kl" href="https://marketplace.visualstudio.com/items?itemName=donjayamanne.jupyter" rel="noopener ugc nofollow" target="_blank"> Jupyter </a>扩展。这些扩展将脚本(带有明确的单元格标记，我们希望在 Jupytext 中在<a class="ae kl" href="https://github.com/mwouts/jupytext/issues/59" rel="noopener ugc nofollow" target="_blank">某个点</a>支持这些标记)转化为类似于笔记本的交互式环境。</p><h1 id="dc06" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">感谢</h1><p id="ba0f" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">Jupytext 是我第一个重要的开源贡献。从事开源项目是一次很棒的经历。我问了很多问题，非常感谢这些有帮助的回答、建议和合作。</p><p id="9c74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">特别是，我要感谢 Gregor Sturm 提出了一个伟大的想法，让我们可以将 T21 的笔记本和传统的 Jupyter 笔记本配对，并感谢他对这个项目的反馈。Eric Lebigot 和 Franç ois Wouts 关于如何推进和沟通项目的建议非常有帮助。最后，我要感谢早期的测试人员花时间在 Jupyter 笔记本和 Jupytext 上尝试新的协作方式。</p><h1 id="66fc" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">反馈</h1><p id="0ae6" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">Jupytext 很大程度上归功于用户的反馈。欢迎提出建议和问题:请在我们的<a class="ae kl" href="https://github.com/mwouts/jupytext/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>项目中使用问题跟踪器，以便对程序或文档提出改进建议。那里见！</p></div></div>    
</body>
</html>