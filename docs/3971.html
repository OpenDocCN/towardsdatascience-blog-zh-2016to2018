<html>
<head>
<title>Web scraping and analyzing 400,000 articles from a news blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从新闻博客中抓取和分析 400，000 篇文章</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/web-scraping-and-analyzing-400-000-articles-1393d0e789ba?source=collection_archive---------9-----------------------#2018-07-05">https://towardsdatascience.com/web-scraping-and-analyzing-400-000-articles-1393d0e789ba?source=collection_archive---------9-----------------------#2018-07-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8bb3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">领先在线出版商的每日发帖频率有什么趋势&amp;季节性吗？</h2></div></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><p id="5566" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在这篇文章中，我将分析由希腊领先的在线出版商之一<a class="ae li" href="http://www.newsbeast.gr/" rel="noopener ugc nofollow" target="_blank"> NEWSBEAST </a>发表的文章。核心问题是<strong class="ko ir">“news beast 的每日发布频率有任何趋势&amp;季节性吗？”</strong>数据分析前的主要步骤(文末有完整 r 代码的链接可以):</p><ul class=""><li id="f7ee" class="lj lk iq ko b kp kq ks kt kv ll kz lm ld ln lh lo lp lq lr bi translated">使用 R 中的 rvest &amp; car 库从站点(www.newsbeast.gr)抓取文章</li><li id="1d15" class="lj lk iq ko b kp ls ks lt kv lu kz lv ld lw lh lo lp lq lr bi translated">数据准备(包括数据清理、转换)</li><li id="f199" class="lj lk iq ko b kp ls ks lt kv lu kz lv ld lw lh lo lp lq lr bi translated">探索性分析</li></ul><p id="f924" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">让我们创建一个散点图来查看过去 4 年每天发布的文章数量。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi lx"><img src="../Images/88f635de9c4e9bc24f2bbb10524edc77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pe0GEd00MlB8op38.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk">Image by Author</figcaption></figure><p id="8831" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我们可以清楚地发现，在每天发表的文章数量上有两种不同模式的持续趋势(在过去 4 年中)。我们怀疑在特定的工作日(可能是周末？)发表的日常文章明显少了。第二个趋势(不太明显)可能是每年发表的文章越来越少。现在让我们用不同颜色来区分每个工作日，以获得更清晰的视图。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi lx"><img src="../Images/7c2d5eb9c903c984762b458d555edb5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2uH-3lmezBcfLayN.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk">Image by Author</figcaption></figure><p id="c66a" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">所以现在很明显，周末期间的每日帖子数量比工作日少得多。<br/>现在，让我们尝试在每个工作日建立一个模型，并创建一个图来展示这些。在下图中，每个工作日通过使用<a class="ae li" href="https://en.wikipedia.org/wiki/Local_regression" rel="noopener ugc nofollow" target="_blank">黄土回归</a>拟合一条单独的平滑线来表示</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi lx"><img src="../Images/59df3a400793dc86236250a4ed63832d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_M2CNHfgAPTnI_nn.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk">Image by Author</figcaption></figure><p id="ac05" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">周末的标准误差(95%置信水平)表明与工作日的差异是显著的。</p><p id="32b5" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">现在让我们调查不同年份之间是否有显著差异。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi lx"><img src="../Images/dc8ccf72f1c2237d1c7ed6901dfd33c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jSy8OyPXMT2vpMdi.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk">Image by Author</figcaption></figure><p id="2681" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">通过查看误差线，看起来所有的差异(不同年份之间)在统计上都是显著的，除非在比较 2016 年和 2017 年时，误差线是重叠的。<br/>这一发现可以通过在不同样本中应用非参数 Wilcoxon 符号秩检验来证实(见下表)</p><blockquote class="mn mo mp"><p id="0611" class="km kn mq ko b kp kq jr kr ks kt ju ku mr kw kx ky ms la lb lc mt le lf lg lh ij bi translated"><strong class="ko ir"> <em class="iq">年份:2014–2015 | P 值&lt; 0.001 </em> </strong></p><p id="5893" class="km kn mq ko b kp kq jr kr ks kt ju ku mr kw kx ky ms la lb lc mt le lf lg lh ij bi translated"><strong class="ko ir"> <em class="iq">年份:2015–2016 | P 值&lt; 0.001 </em> </strong></p><p id="08e1" class="km kn mq ko b kp kq jr kr ks kt ju ku mr kw kx ky ms la lb lc mt le lf lg lh ij bi translated"><strong class="ko ir"> <em class="iq">年份:2016–2017 | P 值&lt; 0.001 </em> </strong></p></blockquote><p id="2ad6" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">所有的 p 值都非常低(&lt; 0.01)，置信水平为 0.95，因此发布的每日平均文章的差异非常显著。</p><p id="cb99" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">最后，为了研究其他不太明显的季节性趋势，我们使用了一个专用于时间序列分析的软件包。使用 prophet package for R 拟合了一个预测模型，如下所示，它揭示了更多的季节性趋势。特别是在圣诞节和暑假期间(大约在 8 月份)的日常文章中出现了两个主要的“下降”。在<strong class="ko ir">复活节</strong>期间也有一个小的“下降”。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi lx"><img src="../Images/5ecc90285459ba2bfbe5bf0bfeef71aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-VBJ40Rq0w7sQaRy.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk">Image by Author</figcaption></figure><p id="60cf" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">另一个有用的功能是能够绘制各种成分的图表(如下图),这是一个简单的方法来得出每日/每周/每年的趋势。特别是在下面的图表中，我们可以很容易地发现周末的下降，在<strong class="ko ir">圣诞节期间、暑假、复活节期间</strong>的日常文章中的“下降”以及每年的“下降”。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi lx"><img src="../Images/62d707ad7a0fb2dd8e5f581685238295.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ISdb22q2nKGxEWng.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk">Image by Author</figcaption></figure><h1 id="43f2" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">结论</h1><p id="d5b0" class="pw-post-body-paragraph km kn iq ko b kp nm jr kr ks nn ju ku kv no kx ky kz np lb lc ld nq lf lg lh ij bi translated">分析表明，这个新闻博客发布的内容越来越少。另一个有趣的发现是，在假期期间(圣诞节、复活节、夏天和周末),发布的帖子显著减少。这很奇怪，因为众所周知，人们倾向于使用这些新闻博客，尤其是在假期。他们肯定应该在假期期间试着发布更多的文章。</p><p id="a998" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">特别是:</p><ul class=""><li id="dde7" class="lj lk iq ko b kp kq ks kt kv ll kz lm ld ln lh lo lp lq lr bi translated">在过去的 4 年里，每日发布的文章显著减少。总体围绕<strong class="ko ir"> 30% </strong>的文章较少。</li><li id="28b5" class="lj lk iq ko b kp ls ks lt kv lu kz lv ld lw lh lo lp lq lr bi translated">周末发表的文章比平日少得多。</li><li id="5cda" class="lj lk iq ko b kp ls ks lt kv lu kz lv ld lw lh lo lp lq lr bi translated">每年圣诞节和暑假期间，日常生活用品会有两次显著的“下降”。</li><li id="1dc4" class="lj lk iq ko b kp ls ks lt kv lu kz lv ld lw lh lo lp lq lr bi translated">每年复活节假期期间，每日发表的文章数量都有小幅“下降”。</li></ul><p id="ddb4" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><a class="ae li" href="https://raw.githubusercontent.com/mantoniou/Blog/master/content/post/2018-04-04-web-scraping-and-analyzing-400-000-articles.Rmd" rel="noopener ugc nofollow" target="_blank">全 R 码</a></p></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><p id="ea80" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><em class="mq">原载于</em><a class="ae li" href="https://www.manosantoniou.com/post/web-scraping-and-analyzing-400-000-articles/" rel="noopener ugc nofollow" target="_blank"><em class="mq">www.manosantoniou.com</em></a><em class="mq">。</em></p></div></div>    
</body>
</html>