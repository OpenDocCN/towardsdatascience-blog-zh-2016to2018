<html>
<head>
<title>Price Elasticity of Demand, Statistical Modeling with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">需求的价格弹性，用 Python 进行统计建模</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/calculating-price-elasticity-of-demand-statistical-modeling-with-python-6adb2fa7824d?source=collection_archive---------2-----------------------#2018-08-31">https://towardsdatascience.com/calculating-price-elasticity-of-demand-statistical-modeling-with-python-6adb2fa7824d?source=collection_archive---------2-----------------------#2018-08-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/3f69422cf3e02afbc58eafccedfaec83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yhl_E_fI-4IifYhLV-3KDg.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo credit: Pexels</figcaption></figure><div class=""/><div class=""><h2 id="0534" class="pw-subtitle-paragraph kc je jf bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">如何实现利润最大化</h2></div><p id="b930" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><a class="ae lq" href="https://en.wikipedia.org/wiki/Price_elasticity_of_demand" rel="noopener ugc nofollow" target="_blank"> <strong class="kw jg">需求价格弹性</strong>(<strong class="kw jg">【PED】</strong>)</a>是经济学中用来表示当只有价格变化时，商品或服务的需求量对其价格变化的反应性，或<a class="ae lq" href="https://en.wikipedia.org/wiki/Elasticity_(economics)" rel="noopener ugc nofollow" target="_blank">弹性</a>。更准确地说，它给出了价格变化 1%时需求量的百分比变化。</p><p id="d988" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">在经济学中，弹性是衡量需求或供给对价格的敏感程度。<br/>在营销中，消费者对产品价格变化的敏感程度。</p><p id="650a" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">它回答了以下问题:</p><ul class=""><li id="ab27" class="lr ls jf kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated">"如果我降低一种产品的价格，销量会增加多少？"</li><li id="4b30" class="lr ls jf kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">“如果我提高一种产品的价格，会如何影响其他产品的销售？”</li><li id="5540" class="lr ls jf kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">“如果一种产品的市场价格下降，这将在多大程度上影响企业愿意向市场供应的数量？”</li></ul><p id="6c9a" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">我们将构建一个线性回归模型来估计 PED，我们将使用<a class="ae lq" href="https://www.statsmodels.org/dev/about.html#module-statsmodels" rel="noopener ugc nofollow" target="_blank"> Python 的 Statsmodels </a>来估计我们的模型，并进行统计测试和数据探索。我们开始吧！</p><h1 id="64c5" class="mf mg jf bd mh mi mj mk ml mm mn mo mp kl mq km mr ko ms kp mt kr mu ks mv mw bi translated">数据</h1><p id="bcca" class="pw-post-body-paragraph ku kv jf kw b kx mx kg kz la my kj lc ld mz lf lg lh na lj lk ll nb ln lo lp ij bi translated">我们将研究牛肉价格和需求数据，这些数据可以从<a class="ae lq" href="https://raw.githubusercontent.com/susanli2016/Machine-Learning-with-Python/master/beef.csv" rel="noopener ugc nofollow" target="_blank">这里</a>下载。</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="946f" class="nl mg jf nh b gy nm nn l no np">%matplotlib inline</span><span id="031e" class="nl mg jf nh b gy nq nn l no np">from __future__ import print_function<br/>from statsmodels.compat import lzip<br/>import numpy as np<br/>import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import statsmodels.api as sm<br/>from statsmodels.formula.api import ols</span><span id="515d" class="nl mg jf nh b gy nq nn l no np">beef = pd.read_csv('beef.csv')<br/>beef.head(10)</span></pre><figure class="nc nd ne nf gt is gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/d9fd17bb9ab12f5bc1a42f0da6909894.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*Lc-Z9rCmiR-MQs9hJabDiA.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 1</figcaption></figure><h1 id="fa34" class="mf mg jf bd mh mi mj mk ml mm mn mo mp kl mq km mr ko ms kp mt kr mu ks mv mw bi translated"><strong class="ak">回归分析</strong></h1><h2 id="2a59" class="nl mg jf bd mh ns nt dn ml nu nv dp mp ld nw nx mr lh ny nz mt ll oa ob mv oc bi translated"><strong class="ak">普通最小二乘(OLS)估计</strong></h2><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="7e02" class="nl mg jf nh b gy nm nn l no np">beef_model = ols("Quantity ~ Price", data=beef).fit()<br/>print(beef_model.summary())</span></pre><figure class="nc nd ne nf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/2e32008e0faf570ac92f9ecfa68cc70d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Vspv3sGlPb9DYZ33LYqqA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 2</figcaption></figure><p id="ccd4" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><strong class="kw jg">观察:</strong></p><ol class=""><li id="cb04" class="lr ls jf kw b kx ky la lb ld lt lh lu ll lv lp oe lx ly lz bi translated">小 P 值表明我们可以拒绝价格对数量没有影响的零假设。</li><li id="c1d4" class="lr ls jf kw b kx ma la mb ld mc lh md ll me lp oe lx ly lz bi translated">高 R 平方表明我们的模型解释了很多反应的可变性。</li><li id="6813" class="lr ls jf kw b kx ma la mb ld mc lh md ll me lp oe lx ly lz bi translated">在回归分析中，我们希望我们的回归模型有显著的变量，并产生高的 R 平方值。</li><li id="b025" class="lr ls jf kw b kx ma la mb ld mc lh md ll me lp oe lx ly lz bi translated">我们将展示图表来帮助更直观地解释回归分析结果。</li></ol><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="c4f8" class="nl mg jf nh b gy nm nn l no np">fig = plt.figure(figsize=(12,8))<br/>fig = sm.graphics.plot_partregress_grid(beef_model, fig=fig)</span></pre><figure class="nc nd ne nf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi of"><img src="../Images/42e1cc576c62267c38660f887a0aa0bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J5fgwq3PGwJaG4thvfnolQ.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 3</figcaption></figure><p id="fc38" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">该趋势表明，预测变量(价格)提供了关于响应(数量)的信息，并且数据点不会进一步偏离回归线，并且给定从大约 29 到 31 的预测区间，预测非常精确。</p><h2 id="b791" class="nl mg jf bd mh ns nt dn ml nu nv dp mp ld nw nx mr lh ny nz mt ll oa ob mv oc bi translated"><strong class="ak">分量-分量加残差(CCPR)图</strong></h2><p id="5220" class="pw-post-body-paragraph ku kv jf kw b kx mx kg kz la my kj lc ld mz lf lg lh na lj lk ll nb ln lo lp ij bi translated">CCPR 图通过考虑其他独立变量的影响，提供了一种判断一个回归变量对响应变量的影响的方法。</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="95ab" class="nl mg jf nh b gy nm nn l no np">fig = plt.figure(figsize=(12, 8))<br/>fig = sm.graphics.plot_ccpr_grid(beef_model, fig=fig)</span></pre><figure class="nc nd ne nf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi og"><img src="../Images/07ccf24b45a4f226c8f035b4fb194fa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YQuG4waOoV5xnZnLtlVz4g.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 4</figcaption></figure><p id="4107" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">正如你所看到的，用价格解释的数量变化之间的关系是确定的线性关系。没有太多的观察对关系产生相当大的影响。</p><h2 id="7f2a" class="nl mg jf bd mh ns nt dn ml nu nv dp mp ld nw nx mr lh ny nz mt ll oa ob mv oc bi translated"><strong class="ak">回归图</strong></h2><p id="9c93" class="pw-post-body-paragraph ku kv jf kw b kx mx kg kz la my kj lc ld mz lf lg lh na lj lk ll nb ln lo lp ij bi translated">我们使用 plot _ regress _ exog 函数来快速检查关于单个回归变量(在本例中为价格)的模型假设。</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="2862" class="nl mg jf nh b gy nm nn l no np">fig = plt.figure(figsize=(12,8))<br/>fig = sm.graphics.plot_regress_exog(beef_model, 'Price', fig=fig)</span></pre><figure class="nc nd ne nf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oh"><img src="../Images/f2eae20dfdf934a1d7483446668a0c70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GheccPx1HiYnYyomvJbHiA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 5</figcaption></figure><h2 id="eea6" class="nl mg jf bd mh ns nt dn ml nu nv dp mp ld nw nx mr lh ny nz mt ll oa ob mv oc bi translated"><strong class="ak">递归最小二乘</strong></h2><p id="4a03" class="pw-post-body-paragraph ku kv jf kw b kx mx kg kz la my kj lc ld mz lf lg lh na lj lk ll nb ln lo lp ij bi translated">最后我们应用<a class="ae lq" href="https://en.wikipedia.org/wiki/Recursive_least_squares_filter" rel="noopener ugc nofollow" target="_blank">递归最小二乘(RLS)滤波器</a>来研究参数不稳定性。</p><p id="3089" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">在 RLS 估计之前，我们将处理数据并创建一个日期时间索引。</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="7d3d" class="nl mg jf nh b gy nm nn l no np">beef['Year'] = pd.to_datetime(beef['Year'], format="%Y")</span><span id="6ab1" class="nl mg jf nh b gy nq nn l no np">from pandas.tseries.offsets import *<br/>beef['Date'] = beef.apply(lambda x:(x['Year'] + BQuarterBegin(x['Quarter'])), axis=1)<br/>beef.drop(['Year', 'Quarter'], axis=1, inplace=True)<br/>beef.set_index('Date', inplace=True)</span><span id="8f12" class="nl mg jf nh b gy nq nn l no np">beef.head(10)</span></pre><figure class="nc nd ne nf gt is gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/539f2e793ead6bfe6933fa122cd070fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*wWh5czghgLBMFTavSZmIqw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 6</figcaption></figure><h2 id="864b" class="nl mg jf bd mh ns nt dn ml nu nv dp mp ld nw nx mr lh ny nz mt ll oa ob mv oc bi translated">RLS 估计</h2><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="c35b" class="nl mg jf nh b gy nm nn l no np">endog = beef['Quantity']<br/>exog = sm.add_constant(beef['Price'])</span><span id="147d" class="nl mg jf nh b gy nq nn l no np">mod = sm.RecursiveLS(endog, exog)<br/>res = mod.fit()</span><span id="6e22" class="nl mg jf nh b gy nq nn l no np">print(res.summary())</span></pre><figure class="nc nd ne nf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oj"><img src="../Images/6b35379bfd9fbffd27f10a4bf309e5ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-TUARtS0oJr1cNwcMdQYvA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 7</figcaption></figure><p id="5f9e" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">RLS 模型递归地计算回归参数，所以有多少数据点就有多少估计值，汇总表只显示对整个样本估计的回归参数；这些估计相当于 OLS 估计。</p><h2 id="cdf1" class="nl mg jf bd mh ns nt dn ml nu nv dp mp ld nw nx mr lh ny nz mt ll oa ob mv oc bi translated"><strong class="ak"> RLS 图</strong></h2><p id="e8ac" class="pw-post-body-paragraph ku kv jf kw b kx mx kg kz la my kj lc ld mz lf lg lh na lj lk ll nb ln lo lp ij bi translated">我们可以生成给定变量的递归估计系数图。</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="2ef1" class="nl mg jf nh b gy nm nn l no np">res.plot_recursive_coefficient(range(mod.k_exog), alpha=None, figsize=(10,6));</span></pre><figure class="nc nd ne nf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ok"><img src="../Images/879d0845d5b4de6f8a9e55b7425792dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ctb8IiMB90QHDPnTCGYegw.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 8</figcaption></figure><p id="87b0" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">为了方便起见，我们使用 plot_cusum 函数直观地检查参数的稳定性。</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="961c" class="nl mg jf nh b gy nm nn l no np">fig = res.plot_cusum(figsize=(10,6));</span></pre><figure class="nc nd ne nf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ol"><img src="../Images/ee5b4f85074c8fa65b305aa4bffd0495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rky-tEjpyNuTS9wsqUf8Vg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 9</figcaption></figure><p id="e135" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">在上面的图中，CUSUM 统计量没有超出 5%的显著性范围，因此我们无法在 5%的水平上拒绝稳定参数的零假设。</p><p id="af9f" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">源代码可以在<a class="ae lq" href="https://github.com/susanli2016/Machine-Learning-with-Python/blob/master/Price%20Elasticity%20of%20Demand.ipynb" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到。祝你周末愉快！</p><p id="3843" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">参考资料:</p><p id="e67c" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><a class="ae lq" href="https://www.statsmodels.org/stable/index.html" rel="noopener ugc nofollow" target="_blank">统计模型</a></p></div></div>    
</body>
</html>