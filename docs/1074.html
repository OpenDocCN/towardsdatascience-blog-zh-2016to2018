<html>
<head>
<title>AI: Track Me</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">艾:跟踪我</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/ai-track-me-325833522043?source=collection_archive---------10-----------------------#2017-07-26">https://towardsdatascience.com/ai-track-me-325833522043?source=collection_archive---------10-----------------------#2017-07-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="7091" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的手机收集的数据量令人震惊。让我们看看我的谷歌历史，看看我们能看到什么。这是一篇两篇文章。这篇文章是关于数据收集的，下一篇是关于数据的机器学习。如果您不了解 python，甚至不知道如何编程，您应该仍然能够理解。如果您了解 python，那么您应该能够毫不费力地在您的数据上复制本文中的步骤。简单地 apt-get 或 pip 安装缺少的库。就是这样。</p><p id="eaa5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们从<a class="ae kl" href="https://www.google.com/settings/takeout" rel="noopener ugc nofollow" target="_blank">谷歌外卖</a>为我的一个工作账户抓取了 133MB 的位置追踪数据。数据是 2014 年到 2017 年的。它没有我所有的数据，但它有很多。</p><p id="f60c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了制作下面的两张地图，从谷歌外卖收集的 JSON 文件由在线服务进行了解释。这让我们在编写任何代码之前对数据集的形状和大小有一个概念。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/271eedb6903002870ec9d297af1e3d45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*epc-dBsThrggAJbRrIvVVw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Map of business trips to Montreal, Toronto, Florida, Texas, San Francisco, New York, L.A., Washington, Chicago, and other fun destinations. Somehow trips to San Diego, Israel, Arizona, Mexico, Cuba, etc were not tracked or were tracked under another business account. Graph <a class="ae kl" href="http://theyhaveyour.info" rel="noopener ugc nofollow" target="_blank">generated here</a>.</figcaption></figure><p id="b31d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">乍一看，我们看到我使用这个工作帐户进行了一些商务旅行。该手机在 2014 年 6 月至 2017 年 7 月期间跟踪了 483，868 次旅行。<a class="ae kl" href="https://www.timeanddate.com/date/duration.html" rel="noopener ugc nofollow" target="_blank">那是大约 1126 天</a>和<strong class="jp ir">每天 430 次“旅行”</strong>(从 483868 次旅行/1126 天)被追踪。即便如此，数据中还是少了几次旅行，要么是因为手机落在家里，要么是数据记录在了另一个工作账户中，或者可能是我带了不同的手机。也许我们应该称这些记录为运动记录或位置记录，而不是“旅行”。还有，很多都是我睡着的时候拍的。那个；这不完全是一次旅行。看上面的图片，在右下角的插图中，很明显我周六旅行最少，这与我在周六发多少邮件的帖子<a class="ae kl" href="https://medium.com/@lemaysolutions/ai-read-my-email-e69a833dd0f1" rel="noopener">非常吻合</a>。</p><p id="7695" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面的热图显示了我在渥太华去过的地方。很明显，咨询师的生活需要在城市中四处奔波，而不是在工作和家庭之间来回奔波。这被与孩子、健康、购物等相关的周末旅行放大了。当你想到渥太华的工业和商业区在哪里时，这张地图就有意义了。主要的东西向蠕虫状斑点是渥太华的 417 高速公路。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lc"><img src="../Images/9703c358d6e5bf32ee62571b0d581536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZTqt-nulUZppNXKwTj-bxw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Heat map of my trips within Ottawa 2014–2017. Graph <a class="ae kl" href="http://locationhistoryvisualizer.com" rel="noopener ugc nofollow" target="_blank">generated here</a>.</figcaption></figure><p id="fbab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们忽略数据上的注释，包括谷歌记录位置时认为我在做什么:</p><pre class="kn ko kp kq gt ld le lf lg aw lh bi"><span id="87f9" class="li lj iq le b gy lk ll l lm ln">"activity" : [ {<br/>        "type" : "STILL",<br/>        "confidence" : 100<br/>      } ]</span></pre><p id="9a59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将关注我的手机在特定时间(时间戳)的经度和纬度。下面的短程序将 Google 外卖的 133MB JSON 文件处理成 20MB 的 SQLite 数据库文件。</p><pre class="kn ko kp kq gt ld le lf lg aw lh bi"><span id="91c5" class="li lj iq le b gy lk ll l lm ln">import sqlite3, json<br/>from pprint import pprint    <br/>if __name__ == '__main__':<br/>    with open('LocationHistory.json') as data_file:    <br/>        conn = sqlite3.connect("locationData.db")<br/>        c = conn.cursor()<br/>        c.execute("create table if not exists mylocation (timestampMs INTEGER, lat INTEGER, lng INTEGER)")<br/>        i=0<br/>        for location in json.load(data_file)["locations"]:<br/>            i+=1<br/>            #use pprint(location) to see the data<br/>            c.execute("insert into mylocation (timestampMs, lat, lng) VALUES (?,?,?)",(location["timestampMs"],location["latitudeE7"],location["longitudeE7"],))<br/>            if i % 1000 == 0:<br/>                conn.commit()</span></pre><p id="32bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在在数据库表 mylocation 中正好有 483，000 行。我找到了 303019 对不同的经度和纬度点。缩小到渥太华，它位于北纬 45.4215 度，西经 75.6972 度，我们可以找到上面热图中的所有点。我们通过以下简单的查询来实现这一点:</p><pre class="kn ko kp kq gt ld le lf lg aw lh bi"><span id="1fdf" class="li lj iq le b gy lk ll l lm ln">select lat, lng from mylocation where lng &gt; -763515690 and lng &lt; -754101650 and lat &lt; 456811330 and lat &gt; 450194280 order by timestampMs asc</span></pre><p id="a515" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，存储的纬度和经度没有小数点。上面的查询定义了一个盒子，其东、西墙由 Arnprior (45.436555，<strong class="jp ir"> -76.351569 </strong>)和 Cumberland (45.518922，<strong class="jp ir"> -75.410165 </strong>)组成，而盒子的南北两侧是 La Peche ( <strong class="jp ir"> 45.681133 </strong>，-75.931882)和 Kempville/North Grenville()结果是<strong class="jp ir">416，558 行 T11 数据，它们标记了渥太华地区的地点和时间。</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lo"><img src="../Images/8cbfa20d714733931926274f16e3565d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W16_DU_1uwgF8W-RH-6w-Q.png"/></div></div></figure><p id="3111" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该数据代表一个序列。让我们看看是否可以根据这些数据，用 LSTM 来预测我的运动，然后绘制出结果。</p><p id="c2e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，让我们把数据转换成张量/numpy 格式。数据非常简单。让我们通过忽略时间戳并将数据转换成两个数的流来进一步简化它:位置数据。每个位置都是一对数字[ <em class="lp"> lat，lng </em> ]。现在的目标是训练一个回归模型来逼近序列。简单来说，它可以在看到我去过的一系列地方后，猜测出我在经度和纬度上的位置。</p><p id="5a15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们下次做那件事。请继续关注第二部分。</p><p id="8380" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">编码快乐！</p><p id="d405" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">-丹尼尔<br/> <a class="ae kl" href="mailto:daniel@lemay.ai" rel="noopener ugc nofollow" target="_blank">丹尼尔@lemay.ai </a> ←打个招呼。<br/><a class="ae kl" href="https://lemay.ai" rel="noopener ugc nofollow" target="_blank">LEMAY . AI</a><br/>1(855)LEMAY-AI</p><p id="8427" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可能喜欢的其他文章:</p><ul class=""><li id="167e" class="lq lr iq jp b jq jr ju jv jy ls kc lt kg lu kk lv lw lx ly bi translated"><a class="ae kl" rel="noopener" target="_blank" href="/artificial-intelligence-and-bad-data-fbf2564c541a">人工智能和坏数据</a></li><li id="d59c" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated"><a class="ae kl" rel="noopener" target="_blank" href="/artificial-intelligence-hyperparameters-48fa29daa516">人工智能:超参数</a></li><li id="4172" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated"><a class="ae kl" href="https://medium.com/towards-data-science/artificial-intelligence-get-your-users-to-label-your-data-b5fa7c0c9e00" rel="noopener">人工智能:让你的用户给你的数据贴上标签</a></li></ul></div></div>    
</body>
</html>