<html>
<head>
<title>Doing your first sentiment analysis in R with Sentimentr</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 R 中使用 Sentimentr 进行第一次情感分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/doing-your-first-sentiment-analysis-in-r-with-sentimentr-167855445132?source=collection_archive---------6-----------------------#2018-10-02">https://towardsdatascience.com/doing-your-first-sentiment-analysis-in-r-with-sentimentr-167855445132?source=collection_archive---------6-----------------------#2018-10-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4a9c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从字符串中提取情感的最快最简单的方法。</h2></div><p id="3b3f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">R 的<a class="ae le" href="https://cran.r-project.org/web/packages/sentimentr/sentimentr.pdf" rel="noopener ugc nofollow" target="_blank"> Sentimentr </a>包有利于分析心理学或社会学研究的文本。它的第一大优势是，它使情感分析变得简单，只需几行代码就可以实现。它的第二大优势是它纠正了反转，这意味着虽然更基本的情绪分析会根据形容词<em class="lf">好</em>将“<em class="lf">我不好</em>判断为积极的，但 Sentimentr 会识别出好的反转，并将其归类为消极的。</p><blockquote class="lg lh li"><p id="7e49" class="ki kj lf kk b kl km ju kn ko kp jx kq lj ks kt ku lk kw kx ky ll la lb lc ld im bi translated">总而言之，Sentimentr 允许你快速进行复杂的情感分析，并直接将其作为回归或任何其他进一步分析的输入。</p></blockquote><p id="e045" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本文涵盖了如何开始。如果您正在寻找高级分析技术，请参考其他文章，如<a class="ae le" href="https://github.com/trinker/sentimentr" rel="noopener ugc nofollow" target="_blank"> Tyler Rinker 的 Github Repo </a>的自述。在本教程中，我将分析来自<a class="ae le" href="http://jmcauley.ucsd.edu/data/amazon/" rel="noopener ugc nofollow" target="_blank"> He &amp; McAuley (2016)数据集</a>的亚马逊美容产品评论。但是，您可以轻松地修改代码，使其适合您自己的数据集。</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lm"><img src="../Images/0f2a56c3b2c1458f25d97a9d0c7829c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b6LYugN7syO9wbiFiE8rcQ.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@thenewmalcolm?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Obi Onyeador</a> on <a class="ae le" href="https://unsplash.com/s/photos/sentiment?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ec59" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">默认情况下，Sentimentr 使用<a class="ae le" href="https://github.com/mjockers/syuzhet" rel="noopener ugc nofollow" target="_blank"> Jockers (2017)字典</a>，这对于大多数情况来说应该是完美的。</p><h1 id="5ff2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">安装软件包并加载数据</strong></h1><pre class="ln lo lp lq gt mu mv mw mx aw my bi"><span id="3ecc" class="mz md it mv b gy na nb l nc nd">install.packages("sentimentr")<br/>library(sentimentr)</span></pre><p id="e7cb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">前两个命令安装并加载 Sentimentr 包。接下来，我加载数据。因为它是 JSON 格式的，所以我需要加载 ndjson 包。然后我可以使用这个包的<strong class="kk iu"> stream_in </strong>函数来加载 Amazon Beauty 数据。</p><pre class="ln lo lp lq gt mu mv mw mx aw my bi"><span id="2393" class="mz md it mv b gy na nb l nc nd">install.packages("ndjson")<br/>library(ndjson)<br/>df = stream_in("AmazonBeauty.json")<br/>head(df)</span></pre><p id="2063" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我还使用了<strong class="kk iu"> head </strong>函数来快速查看前几行数据。正如您在自己的机器上执行此操作时所看到的，有一个名为<strong class="kk iu"> reviewText </strong>的列包含评论。</p><h1 id="9c8a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">做实际的情感分析。</h1><pre class="ln lo lp lq gt mu mv mw mx aw my bi"><span id="4086" class="mz md it mv b gy na nb l nc nd">sentiment=sentiment_by(df$reviewText)</span></pre><p id="5808" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个命令运行情感分析。在这种情况下，我使用了<strong class="kk iu">perspective _ by</strong>命令来获得整个评审的总体情绪度量。在其他情况下，您可以使用<strong class="kk iu">情感</strong>命令(不带 _by)来获取每个句子的情感。</p><p id="f042" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当这个命令运行时(确实需要一段时间)，我将讨论函数将返回什么。该示例中的情感对象将是包括以下列的数据表:</p><ul class=""><li id="76f1" class="ne nf it kk b kl km ko kp kr ng kv nh kz ni ld nj nk nl nm bi translated"><strong class="kk iu"> element_id </strong> —审核的 id 号</li><li id="4d1e" class="ne nf it kk b kl nn ko no kr np kv nq kz nr ld nj nk nl nm bi translated"><strong class="kk iu">字数</strong> —评论的字数</li><li id="d6e1" class="ne nf it kk b kl nn ko no kr np kv nq kz nr ld nj nk nl nm bi translated"><strong class="kk iu"> sd </strong> —评论中句子情感得分的标准差</li><li id="4dd3" class="ne nf it kk b kl nn ko no kr np kv nq kz nr ld nj nk nl nm bi translated"><strong class="kk iu">ave _ sensition</strong>—评论中句子的平均情感得分</li></ul><p id="38ca" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最有趣的变量是<strong class="kk iu">ave _ perspective</strong>，这是一个数字中评论的情绪。该数字可以取正值或负值，并表示情感的效价和极性。</p><h1 id="d4dc" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">分析情感得分</h1><p id="a703" class="pw-post-body-paragraph ki kj it kk b kl ns ju kn ko nt jx kq kr nu kt ku kv nv kx ky kz nw lb lc ld im bi translated">我们可以看一些计算出来的情绪得分的汇总统计。</p><pre class="ln lo lp lq gt mu mv mw mx aw my bi"><span id="9ce4" class="mz md it mv b gy na nb l nc nd">summary(sentiment$ave_sentiment)</span></pre><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/1a9ebec49483665f63203e1211fdaba6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*eeRDXI7zfxGAOBYhS7TP8g.png"/></div></figure><p id="2c8a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如你所见，大多数评论倾向于适度正面，但也有一些极端的异常值，最正面的评论为 3.44，最负面的评论为-1.88。这些值与平均值和中值相差甚远，应考虑将其剔除，以便进一步分析。</p><p id="f135" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我还做了一个快速直方图来查看评论的情绪。</p><pre class="ln lo lp lq gt mu mv mw mx aw my bi"><span id="3d2f" class="mz md it mv b gy na nb l nc nd">library(ggplot2)<br/>qplot(sentiment$ave_sentiment,   geom="histogram",binwidth=0.1,main="Review Sentiment Histogram")</span></pre><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi ny"><img src="../Images/db5033c68a2edae14aae77c6deaa0169.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TgUZZ8WZZdx2N26cY1x8XA.png"/></div></div></figure><h1 id="3188" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">将你的情感分数整合到原始数据集中</h1><p id="44d9" class="pw-post-body-paragraph ki kj it kk b kl ns ju kn ko nt jx kq kr nu kt ku kv nv kx ky kz nw lb lc ld im bi translated">因为我对情感分数最感兴趣，所以我将通过将情感分数及其标准差集成回主数据集中来结束本教程。</p><pre class="ln lo lp lq gt mu mv mw mx aw my bi"><span id="b44b" class="mz md it mv b gy na nb l nc nd">df$ave_sentiment=sentiment$ave_sentiment<br/>df$sd_sentiment=sentiment$sd</span></pre></div></div>    
</body>
</html>