<html>
<head>
<title>Building a Graph Data Pipeline With Zeppelin Spark and Neo4j</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Zeppelin Spark 和 Neo4j 构建图形数据管道</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-a-graph-data-pipeline-with-zeppelin-spark-and-neo4j-8b6b83f4fb70?source=collection_archive---------3-----------------------#2018-07-12">https://towardsdatascience.com/building-a-graph-data-pipeline-with-zeppelin-spark-and-neo4j-8b6b83f4fb70?source=collection_archive---------3-----------------------#2018-07-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="e91e" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">向 Zeppelin 添加网络支持</h1><p id="a278" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">交互式笔记本如今非常流行。无论您是在数据工程(数据处理)中使用它们，还是在数据科学项目(数据分析/ML)中使用它们，它们都是“事实上的”标准，并且正在许多组织中取代幻灯片演示。除了 Jupyter 笔记本之外，Apache Zeppelin 的应用也很广泛，特别是因为它与 Apache Spark 和其他大数据系统集成得很好。</p><p id="642a" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">从我在不同环境下使用 Zeppelin 和 Neo4j 的经验开始，我开发了 Zeppelin 解释器，它连接到 Neo4j，以便直接在笔记本中查询和显示图形数据(图形和表格格式)。<a class="ae lo" href="https://zeppelin.apache.org/docs/0.8.0/interpreter/neo4j.html" rel="noopener ugc nofollow" target="_blank">这个解释器现在是 zeplin 0.8</a>的一部分，所以你可以开箱即用来查询和可视化你的图形数据！</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lp"><img src="../Images/71525d81cc6eb89bb8b2e07c8c08e9b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O76fKDDIJuK5fAwdU9TjCg.png"/></div></div></figure><p id="71f5" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">本文将展示如何在 Docker 环境中使用 Zeppelin、Spark 和 Neo4j 来构建简单的数据管道。<br/>我们将使用<em class="mb">芝加哥犯罪数据集</em>，它涵盖了自 2001 年以来发生的犯罪。整个数据集包含大约 600 万起犯罪和关于它们的元数据，例如位置、犯罪类型和日期等等。</p><p id="f503" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在本例中，我们将使用由<a class="ae lo" href="https://dev.socrata.com/foundry/data.cityofchicago.org/6zsd-86xi" rel="noopener ugc nofollow" target="_blank">so crata API</a>返回的 1000 个犯罪构成的数据集子集。</p><h1 id="56f4" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">步骤 1:配置容器</h1><p id="c0eb" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">你应该已经安装了<em class="mb"> Docker </em>和<em class="mb"> Docker-Compose </em>。</p><p id="00e9" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">不幸的是<a class="ae lo" href="https://issues.apache.org/jira/browse/ZEPPELIN-3586" rel="noopener ugc nofollow" target="_blank"> Zeppelin 在嵌入式版本上有一个 bug </a>,我们需要解决它，使它像容器一样工作。为此，我们创建了自己的 docker 文件:</p><figure class="lq lr ls lt gt lu"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="5c90" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">这是我们的合成文件。基本上将官方的 Neo4j 容器和我们的 Zeppelin 容器合并为两个服务。</p><figure class="lq lr ls lt gt lu"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="c0cf" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><em class="mb">对于您的本地设置，只需更改</em> <code class="fe me mf mg mh b"><em class="mb">neo4j-zeppelin.yml</em></code> <em class="mb">的第 22 行和第 23 行，以便提供正确的路径。</em></p><p id="c860" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">现在让我们运行这个示例代码来加速我们的堆栈:</p><pre class="lq lr ls lt gt mi mh mj mk aw ml bi"><span id="04c7" class="mm jo iq mh b gy mn mo l mp mq">docker-compose -f neo4j-zeppelin.yml up -d</span></pre><p id="6bb0" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">现在我们有两个可到达的服务:</p><ul class=""><li id="c11f" class="mr ms iq kn b ko lj ks lk kw mt la mu le mv li mw mx my mz bi translated">齐柏林飞艇:<a class="ae lo" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a></li><li id="50c4" class="mr ms iq kn b ko na ks nb kw nc la nd le ne li mw mx my mz bi translated">neo4j:<a class="ae lo" href="http://localhost:7474" rel="noopener ugc nofollow" target="_blank">http://localhost:7474</a></li></ul><h1 id="b1a9" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">步骤 2:配置 Zeppelin</h1><p id="f029" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">如果您从我的 GitHub 存储库中下载并执行 compose 文件，那么一切都是预先配置好的。</p><p id="d40d" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">但是我们来看一些<strong class="kn ir">隐藏配置。</strong>右上角有一个菜单</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/51acc04222f20665edb2f9485658bba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*Ofyp0-S_WyagKkvVfdI4hA.png"/></div></figure><p id="8f36" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">点击<strong class="kn ir">解释器</strong>，然后按“火花”筛选列表。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ng"><img src="../Images/baa1fe7d9fe723fcb21470bfa4d91f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RaHvTPHu4d4MQ0H0xe4hVQ.png"/></div></div></figure><p id="cf8b" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">如您所见，用黄色突出显示的是<a class="ae lo" href="https://github.com/neo4j-contrib/neo4j-spark-connector/releases" rel="noopener ugc nofollow" target="_blank"> Neo4j-Spark-Connector </a>连接 Neo4j 所需的三个属性。</p><p id="e69f" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">现在，如果您将解释器过滤器更改为“neo4j ”,您会发现:</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nh"><img src="../Images/6548ce30d7a84f4fef30822992a14856.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pU_1axBjiUIymrdzhgGySw.png"/></div></div></figure><p id="56da" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">该页面包含 Neo4j 解释器的属性，尤其是 auth 信息。</p><h1 id="9b1e" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第三步:我们的数据处理笔记本</h1><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ni"><img src="../Images/66d94764fcc5eb546cfa9d08c3dda9de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*jdXh6-1g4MGmSio5NYOTyA.gif"/></div></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">The notebook in action</figcaption></figure><p id="451a" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">我们已经配置了 Zeppelin / Spark / Neo4j 堆栈，现在让我们享受一下数据分析的乐趣。</p><p id="5726" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在 Zeppelin 中，每个笔记本由段落或块组成，每个段落或块包含处理特定任务的代码块。</p><p id="90ea" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在我们的笔记本中，<em class="mb">第一个块</em>用于从 Spark-Packages 存储库中下载我们项目中所需的依赖项:Neo4j-Spark-Connector</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nn"><img src="../Images/8452d9dd18979cd48abfdadf20539119.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HudCHnFxdJbniGbce7dvvw.png"/></div></div></figure><p id="d1d7" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在第二个块中，我们下载数据集并存储到我们的文件系统中</p><p id="b12c" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">正如我在介绍中所说，我们将使用芝加哥犯罪数据集的一个小子集。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ng"><img src="../Images/c1af0948c273fb2f9b00e6be9fb5def4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fyjowiLCpkSuJAqnkM9U6Q.png"/></div></div></figure><p id="5027" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在第三个块中，我们将数据集从文件系统读入 Spark 数据集</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi no"><img src="../Images/57630e5d03eb0dc84b438ceb12300698.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gHyxRioaEGbVbmBvtmWOcg.png"/></div></div></figure><p id="4203" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在<em class="mb">第四块</em>中，我们使用</p><pre class="lq lr ls lt gt mi mh mj mk aw ml bi"><span id="b5b8" class="mm jo iq mh b gy mn mo l mp mq">crimeDF.printSchema</span></pre><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi np"><img src="../Images/f9e47afe51e70ca1ee44d86da7ab29ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Vr-tlM6zapYgBWyhUQZBg.png"/></div></div></figure><p id="9b4c" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">从这个模式开始，我们将像这样构造一个图模型</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/3cb4ba992e04a131c374e0368df23129.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/format:webp/1*EUuRJDcX51dyrLq4eXMp0w.png"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Graph Schema</figcaption></figure><p id="7df1" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">我们有 4 个节点:</p><ul class=""><li id="f745" class="mr ms iq kn b ko lj ks lk kw mt la mu le mv li mw mx my mz bi translated"><code class="fe me mf mg mh b">Beat</code>(警区)带<code class="fe me mf mg mh b"><strong class="kn ir">beat</strong></code>属性；</li><li id="0910" class="mr ms iq kn b ko na ks nb kw nc la nd le ne li mw mx my mz bi translated"><code class="fe me mf mg mh b">Crime</code>具有<code class="fe me mf mg mh b"><strong class="kn ir">id, description, case_number, point</strong></code> <strong class="kn ir"> </strong>属性；</li><li id="9567" class="mr ms iq kn b ko na ks nb kw nc la nd le ne li mw mx my mz bi translated"><code class="fe me mf mg mh b">CrimeType</code>带有<code class="fe me mf mg mh b"><strong class="kn ir">primary_type</strong></code>性质；</li><li id="37df" class="mr ms iq kn b ko na ks nb kw nc la nd le ne li mw mx my mz bi translated"><code class="fe me mf mg mh b">CrimeDate</code>具有<code class="fe me mf mg mh b"><strong class="kn ir">parsed_date</strong></code>和<code class="fe me mf mg mh b"><strong class="kn ir">date</strong></code>属性</li></ul><p id="3278" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">和 3 种关系:</p><ul class=""><li id="fd16" class="mr ms iq kn b ko lj ks lk kw mt la mu le mv li mw mx my mz bi translated"><code class="fe me mf mg mh b">ON_BEAT</code>从<code class="fe me mf mg mh b"><strong class="kn ir">Beat</strong></code>开始，到<code class="fe me mf mg mh b"><strong class="kn ir">Crime</strong></code>结束；</li><li id="a1d5" class="mr ms iq kn b ko na ks nb kw nc la nd le ne li mw mx my mz bi translated"><code class="fe me mf mg mh b">IS_TYPE</code>从 a <code class="fe me mf mg mh b"><strong class="kn ir">Crime</strong></code>开始，到 a <code class="fe me mf mg mh b"><strong class="kn ir">CrimeType</strong></code>结束；</li><li id="3b6a" class="mr ms iq kn b ko na ks nb kw nc la nd le ne li mw mx my mz bi translated"><code class="fe me mf mg mh b">ON_DATE</code>从 a <code class="fe me mf mg mh b"><strong class="kn ir">Crime</strong></code>开始，到 a <code class="fe me mf mg mh b"><strong class="kn ir">CrimeDate</strong></code>结束；</li></ul><p id="fed8" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在<em class="mb">第五块</em>中，我们将创建新列，以便添加<em class="mb">解析日期</em>和<em class="mb">地理空间参考</em>。顺便说一下，从 Neo4j 3.4 开始，数据库本身支持<a class="ae lo" href="https://medium.com/neo4j/working-with-neo4j-date-and-spatial-types-in-a-react-js-app-5475b5042b50" rel="noopener">日期和空间数据</a>，但不幸的是 Neo4j-Spark-Connector 还不支持它。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nr"><img src="../Images/b2346bfe89c662656504eee63665fcc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bhdoxW3kJgcIAuK0WqfEjg.png"/></div></div></figure><p id="ed2f" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在<em class="mb">第六块</em>中，我们通过使用<a class="ae lo" href="https://zeppelin.apache.org/docs/0.8.0/usage/other_features/zeppelin_context.html" rel="noopener ugc nofollow" target="_blank"> Zeppelin 上下文 API </a>简单地探索我们的数据集:</p><pre class="lq lr ls lt gt mi mh mj mk aw ml bi"><span id="8f2b" class="mm jo iq mh b gy mn mo l mp mq">z.show(exendedCrimeDF)</span></pre><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ns"><img src="../Images/e0d1dca25898e7b4f58e02c90db94b3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eYRcg6pdQXd5jnLdY7_hUQ.png"/></div></div></figure><p id="47d3" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">现在让我们跳到第七个模块<em class="mb">中，在这里我们使用 Neo4j-Spark-Connector 获取数据。我们使用提供方法的<code class="fe me mf mg mh b">Neo4jDataFrame</code>:</em></p><pre class="lq lr ls lt gt mi mh mj mk aw ml bi"><span id="9b95" class="mm jo iq mh b gy mn mo l mp mq">Neo4jDataFrame.mergeEdgeList(sc: SparkContext,<br/>    dataFrame: DataFrame,<br/>    source: (label,Seq[prop]),<br/>    relationship: (type,Seq[prop]),<br/>    target: (label,Seq[prop]))</span></pre><p id="f720" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">要将数据帧合并回 Neo4j 图形:</p><ul class=""><li id="4b93" class="mr ms iq kn b ko lj ks lk kw mt la mu le mv li mw mx my mz bi translated">两个节点按顺序由第一个属性合并；</li><li id="0d77" class="mr ms iq kn b ko na ks nb kw nc la nd le ne li mw mx my mz bi translated">两个节点之间的关系被合并，序列中的所有属性都将在该关系上设置；</li><li id="6beb" class="mr ms iq kn b ko na ks nb kw nc la nd le ne li mw mx my mz bi translated">序列中的属性名用作数据框的列名，目前没有名称转换；</li><li id="58d8" class="mr ms iq kn b ko na ks nb kw nc la nd le ne li mw mx my mz bi translated">结果以 10000 为一批发送到图表中。</li></ul><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi no"><img src="../Images/b98003791cee6e7e377b10105f2265f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rWOdqEKpGSwKBDggaqa3qw.png"/></div></div></figure><p id="fac2" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">到目前为止，我们只在齐柏林飞艇和火花乐队工作。现在图形数据已经导入到 Neo4j 中，我们可以使用 Neo4j 解释器从 Zeppelin 查询 Neo4j。<br/>要使用 Neo4j 解释器，我们必须使用特定的解释器绑定</p><pre class="lq lr ls lt gt mi mh mj mk aw ml bi"><span id="064e" class="mm jo iq mh b gy mn mo l mp mq">%neo4j</span></pre><p id="7f55" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">接下来是我们的密码查询:</p><pre class="lq lr ls lt gt mi mh mj mk aw ml bi"><span id="d389" class="mm jo iq mh b gy mn mo l mp mq">MATCH (crime:Crime)-[is:IS_TYPE]-&gt;(type:CrimeType),<br/> (crime)-[on:ON_DATE]-&gt;(date:CrimeDate)<br/>RETURN crime, is, type, on, date<br/>LIMIT 10</span></pre><p id="14eb" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">结果将显示为图形，如下图所示:</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi no"><img src="../Images/5970b94d02972117e800769ff0efe6a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Op2dfRkBvjmP43Wlf6boIw.png"/></div></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">A Neo4j query block with graph query and visualization</figcaption></figure><p id="580f" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">该科分为五个不同的领域:</p><ul class=""><li id="bbe2" class="mr ms iq kn b ko lj ks lk kw mt la mu le mv li mw mx my mz bi translated">红色:用于编写密码查询的区域；</li><li id="e1ae" class="mr ms iq kn b ko na ks nb kw nc la nd le ne li mw mx my mz bi translated">黄色:显示最新 Zeppelin 发行版中可用的新<strong class="kn ir">图形可视化</strong>的按钮；</li><li id="8f2c" class="mr ms iq kn b ko na ks nb kw nc la nd le ne li mw mx my mz bi translated">绿色:关于图形的一般信息；节点、边等…</li><li id="c920" class="mr ms iq kn b ko na ks nb kw nc la nd le ne li mw mx my mz bi translated">蓝色:用于呈现图形可视化的区域</li><li id="75f7" class="mr ms iq kn b ko na ks nb kw nc la nd le ne li mw mx my mz bi translated">紫色:当你点击一个节点/边时，相关数据将会显示的区域</li></ul><p id="c9e1" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">此外，结果图也将作为一个扁平的表格。因此，所有其他可视化(图表等)也是可用的，您可以通过单击相应的按钮在它们之间简单地切换。</p><p id="218c" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">图形可视化附带设置，以便提供一些配置:</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nt"><img src="../Images/5ff9c7c5d669fd214788f7f455eb908c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QUCFOpSuXrCjKl93K7er5A.png"/></div></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">The graph visualization settings</figcaption></figure><p id="d037" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">例如，通过这些设置，您可以自定义显示为节点标题的属性。</p><p id="27be" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">使用鼠标滚轮，您可以放大/缩小图表，以显示如下所示的标题</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nt"><img src="../Images/afc8e4390c987fea49af5fc00c8cfbbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5pRlDfWtC-3U0eT6ruQ40w.png"/></div></div></figure><h2 id="d167" class="mm jo iq bd jp nu nv dn jt nw nx dp jx kw ny nz kb la oa ob kf le oc od kj oe bi translated">利用 Zeppelin 动态表单</h2><p id="31ef" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">Neo4j 解释器可以利用<a class="ae lo" href="https://zeppelin.apache.org/docs/0.8.0/usage/dynamic_form/intro.html" rel="noopener ugc nofollow" target="_blank"> Zeppelin 动态表单</a>来构建参数化查询，就像这样:</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi of"><img src="../Images/d8b074cf57109645ddac8bef4f421479.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6lRD5XDvG6twL4Liv0VDkQ.png"/></div></div></figure><h1 id="7abd" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">好处:增加地理空间可视化</h1><p id="3ada" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">Zeppelin 有一个名为<a class="ae lo" href="https://zeppelin.apache.org/helium_packages.html" rel="noopener ugc nofollow" target="_blank"> Helium </a>的可插拔架构，可以轻松添加新的可视化内容。在右上方的菜单中点击氦气条目，然后在氦气页面中启用 zeplin-Leaflet 作为<a class="ae lo" href="https://www.npmjs.com/package/volume-leaflet" rel="noopener ugc nofollow" target="_blank">，如图所示</a>。然后，您的密码查询结果也可以在地图上可视化。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi og"><img src="../Images/f1ff848cd1f861d499b47aa574a407c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EldIsWNR76tLuvQlCTLHkA.png"/></div></div></figure><p id="2401" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">你可以直接从<a class="ae lo" href="https://github.com/conker84/zeppelin-neo4j" rel="noopener ugc nofollow" target="_blank"> GitHub </a>下载整个笔记本代码。我很想得到你对 Apache Zeppelin 的 Neo4j 和图形解释器的反馈，请在评论或我的 GitHub 问题中告诉我。此外，如果你有 Zeppelin 和 Spark 的很酷的图形用例，也请分享它们，这样更多的人可以了解图形的<strong class="kn ir">力量。</strong></p></div></div>    
</body>
</html>