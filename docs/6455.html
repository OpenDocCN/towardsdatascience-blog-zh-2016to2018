<html>
<head>
<title>Use Embeddings to Predict Therapeutic Area of Clinical Studies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用嵌入来预测临床研究的治疗领域</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/use-embeddings-to-predict-therapeutic-area-of-clinical-studies-654af661b949?source=collection_archive---------15-----------------------#2018-12-14">https://towardsdatascience.com/use-embeddings-to-predict-therapeutic-area-of-clinical-studies-654af661b949?source=collection_archive---------15-----------------------#2018-12-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e565" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">特定领域嵌入如何帮助分类</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/810217819c35dbbb153d4ab941b4818e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cYRH2MT34p8SnCW0SzJO-g.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image from Unsplash</figcaption></figure><p id="26ab" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">临床研究是一个充满迷人概念的世界，其中存在大量可免费下载的数据集。我在<a class="ae lr" href="https://www.comprehend.com" rel="noopener ugc nofollow" target="_blank">understand</a>(<a class="ae lr" href="https://boards.greenhouse.io/comprehend/jobs/1456548" rel="noopener ugc nofollow" target="_blank">招聘</a>)的任务之一是做一个概念验证，在大约 40 个手动定义的治疗领域中自动分类临床研究，如下所示:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="69c7" class="lx ly iq lt b gy lz ma l mb mc">Cardiology/Vascular Diseases  <br/>Dental and Oral Health  <br/>Dermatology  <br/>Genetic Disease  <br/>Hematology  <br/>Infections and Infectious Diseases  <br/>Musculoskeletal  <br/>Neurology  <br/>Nutrition and Weight Loss  <br/>Obstetrics/Gynecology  <br/>Oncology  <br/>Ophthalmology  `<br/>Pharmacology/Toxicology  <br/>Psychiatry/Psychology  <br/>Pulmonary/Respiratory Diseases  <br/>...etc...</span></pre><p id="2edf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">可供参考的大约 289000 项研究可以在 ClinicalTrials.gov 的<a class="ae lr" href="https://clinicaltrials.gov/" rel="noopener ugc nofollow" target="_blank">网站上找到。正如我们将在下面看到的，由于</a><a class="ae lr" href="https://www.ctti-clinicaltrials.org/" rel="noopener ugc nofollow" target="_blank"> CTTI </a> ( <em class="md">临床试验转化倡议)</em>提供了高质量的文档，人们可以下载完整的内容作为 CSV 文件或 Postgres 数据库供离线使用。特别是研究与一些医学术语相关联。</p><p id="629e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">既然上述治疗领域是人工定义的，我们如何将它们与研究的医学术语联系起来？这就是<strong class="kx ir"> <em class="md">概念嵌入</em> </strong> <em class="md"> </em>的来源。下面介绍的所有代码都可以在<a class="ae lr" href="https://github.com/thierryherrmann/simple-machine-learning/blob/master/2018-11-10-studies-therapeutic-areas/studies-therapeutic-areas.ipynb" rel="noopener ugc nofollow" target="_blank"> Jupyter 笔记本</a>中找到</p><h1 id="a1d2" class="me ly iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">医学背景下的预训练嵌入</h1><p id="89c6" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">关于单词嵌入已经写了很多。这里有一个关于他们力量的很好的介绍。在本帖中，我们将使用预训练<em class="md"> ed </em> <strong class="kx ir"> <em class="md">临床概念</em> </strong>嵌入将治疗区域映射到研究中。</p><p id="8213" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">美国国家医学图书馆(NLM)创建了统一医学语言系统(UMLS)，这是一个令人难以置信的组织良好的医学概念和术语的来源，在其网站上有最好的描述:</p><blockquote class="na nb nc"><p id="5cfc" class="kv kw md kx b ky kz jr la lb lc ju ld nd lf lg lh ne lj lk ll nf ln lo lp lq ij bi translated">UMLS 整合并分发关键术语、分类和编码标准以及相关资源，以促进创建更有效和可互操作的生物医学信息系统和服务，包括电子健康记录</p></blockquote><p id="6bd7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">特别是，一个核心概念是一个医学概念，像<em class="md">疟疾</em>、<em class="md">放射疗法</em>、<em class="md">肿瘤</em>或<em class="md">白血病</em>一样多种多样。每个概念由一个<em class="md">概念唯一标识符</em> (CUI)标识，并映射到各种医学术语的数据源，如我们将在下面使用的<a class="ae lr" href="https://www.nlm.nih.gov/mesh/" rel="noopener ugc nofollow" target="_blank"> MeSH </a>(医学主题标题)。</p><p id="b7a2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里有一个<a class="ae lr" href="https://www.nlm.nih.gov/research/umls/new_users/online_learning/UMLST_009.html" rel="noopener ugc nofollow" target="_blank"> <em class="md">富发布格式</em> (RRF)浏览器</a>的截图，这是 UMLS 提供的一个强大的工具，从 NLM 获得许可证后就可以下载。可以通过单词搜索概念，并且可以找到与其他概念的关系:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/f3974284083fd9c3bb9c5f8085cbb53d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YdrNr8fMQyd0u50IsUccfA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Rich Release Format Browser</figcaption></figure><p id="c042" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">由<a class="ae lr" href="http://dl.acm.org/citation.cfm?id=2661974" rel="noopener ugc nofollow" target="_blank"> De Vine 等人从 348，566 份医学杂志摘要(由作者提供)中学习到的 UMLS CUIs 的预训练嵌入可以在此处</a>下载<a class="ae lr" href="https://github.com/clinicalml/embeddings/blob/master/DeVine_etal_200.txt.gz" rel="noopener ugc nofollow" target="_blank">，这要感谢 D. Sontag 等人在那里所做的出色工作(参见</a><a class="ae lr" href="http://people.csail.mit.edu/dsontag/papers/ChoiChiuSontag_AMIA_CRI16.pdf" rel="noopener ugc nofollow" target="_blank">学习医学概念的低维表示</a>)。以下是如何加载它们的方法，这要感谢令人敬畏的 gensim 库:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/258fed52dd2bb621927daff4d2ccb6c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*VttJg4yC9g1c1nLeuDDYGA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Load concept embeddings with gensim</figcaption></figure><p id="bdd4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如所料，密切相关的概念的余弦相似性很高。例如，以下是与头痛或肝炎最接近的概念:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/c3810301cb8a6c720b5c7553884abe7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*mRuLDAIStWfw08Z18WsMrw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Most similar concepts</figcaption></figure><h1 id="8b84" class="me ly iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">通过概念嵌入将研究与治疗领域联系起来</h1><p id="c084" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">我们将通过以下途径将临床研究与概念嵌入的治疗领域联系起来:</p><ol class=""><li id="af02" class="ni nj iq kx b ky kz lb lc le nk li nl lm nm lq nn no np nq bi translated">从<a class="ae lr" href="https://aact.ctti-clinicaltrials.org/" rel="noopener ugc nofollow" target="_blank"> AACT </a>的<em class="md"> browse_conditions.txt </em>文件中获取研究<a class="ae lr" href="https://www.nlm.nih.gov/mesh/" rel="noopener ugc nofollow" target="_blank"> MeSH </a>术语(医学主题词)</li><li id="a1aa" class="ni nj iq kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">使用来自<em class="md">NLM 国家医学图书馆</em>的<!-- -->文件<!-- -->将网格术语转换为其唯一标识符(又名<em class="md">代码</em></li><li id="7a61" class="ni nj iq kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">使用 UMLS 文件加载 UMLS 概念标识符(Cui)及其关联的网格代码。在这一点上，Cui 不再是抽象的。</li><li id="06f2" class="ni nj iq kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">手动将治疗区域与 UMLS 概念标识符(CUIs)相关联</li><li id="da8f" class="ni nj iq kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">使用预先训练的嵌入来找到 Cui(在 4 中找到)的区域。上图)与研究中的最相似(见 3。以上)</li></ol><p id="5a09" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下图总结了一组数据源和转换:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/095649964b6fd3fe45622c022a75613c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*oUnetc60meIJia2-NLtIHQ.png"/></div></figure><h2 id="de48" class="lx ly iq bd mf nx ny dn mj nz oa dp mn le ob oc mp li od oe mr lm of og mt oh bi translated">1.获取与研究相关的网格术语</h2><p id="6ca4" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">来自 ClinicalTrials.gov 的<a class="ae lr" href="https://clinicaltrials.gov/" rel="noopener ugc nofollow" target="_blank"/>的<a class="ae lr" href="https://www.ctti-clinicaltrials.org/" rel="noopener ugc nofollow" target="_blank"> CTTI </a>提供了非常有条理和有记录的数据。可以从<a class="ae lr" href="https://aact.ctti-clinicaltrials.org/download" rel="noopener ugc nofollow" target="_blank"> CTTI 下载网站</a>下载研究和相关数据。下面是我们感兴趣的数据子集(CTTI 提供的模式图):</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/fa5f800789ccaed5ead9b540199bd7d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*wUGBxSGT3xBPTYOz05iOMw.png"/></div></figure><p id="ae6a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">病历报告在文件<code class="fe oj ok ol lt b">studies.txt</code>中，并链接到<code class="fe oj ok ol lt b">browse_conditions.txt</code>中的网格术语。下面是研究<code class="fe oj ok ol lt b"><strong class="kx ir">NCT01007578</strong></code> <strong class="kx ir"> </strong>关于<em class="md">动脉粥样硬化</em>的网状术语的例子:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="9253" class="lx ly iq lt b gy lz ma l mb mc">grep <strong class="lt ir">NCT01007578</strong> ./clinical-trials-gov/browse_conditions.txt</span><span id="2389" class="lx ly iq lt b gy om ma l mb mc">1508569|NCT01007578|Atherosclerosis|atherosclerosis<br/>1508570|NCT01007578|Peripheral Arterial Disease|peripheral arterial disease<br/>1508571|NCT01007578|Peripheral Vascular Diseases|peripheral vascular diseases<br/>1508572|NCT01007578|Arterial Occlusive Diseases|arterial occlusive diseases</span></pre><p id="8c54" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">加载这些内容并从病历报告 ID 到其网格术语集构建一个字典很容易。<code class="fe oj ok ol lt b">load_df()</code>是围绕熊猫的一个小包装器函数<code class="fe oj ok ol lt b">read_csv(). </code>然后字典被构建:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/4ba14a912dbe04861c6168f1e19f4229.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9gIgt-jcIJ3wshMM7EfhGQ.png"/></div></div></figure><h2 id="b40e" class="lx ly iq bd mf nx ny dn mj nz oa dp mn le ob oc mp li od oe mr lm of og mt oh bi translated">2.将网格术语转换为它们的唯一标识符</h2><p id="a70c" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">r <!-- -->相关的网格文件<!-- -->可以从国家医学图书馆下载。解析细节在笔记本里。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/8a4257e698a8ea025b6f803193d25b23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_3CTF4C8IBGVvcLwFE6tzQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Build MeSH terms to MeSH codes dictionary</figcaption></figure><h2 id="691c" class="lx ly iq bd mf nx ny dn mj nz oa dp mn le ob oc mp li od oe mr lm of og mt oh bi translated">3.加载 UMLS 概念</h2><p id="ba70" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">我们现在将加载概念和源文件(<code class="fe oj ok ol lt b">MRCONSO.RRF</code>)，这些文件来自大量<em class="md"> UMLS </em>文件<a class="ae lr" href="https://www.nlm.nih.gov/research/umls/knowledge_sources/metathesaurus/release/" rel="noopener ugc nofollow" target="_blank">这里</a>。其格式在这里描述<a class="ae lr" href="https://www.ncbi.nlm.nih.gov/books/NBK9685/table/ch03.T.concept_names_and_sources_file_mr/?report=objectonly" rel="noopener ugc nofollow" target="_blank">。在将这个 CSV 文件作为 pandas 数据框加载之前，我们可以通过只保留我们需要的列来将其大小(7148656 行，897Mb)减半。</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/5b4d4a398110e0de6d3e325653765be7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*025EQ_-VOg6ckCRDXLFpzA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Reduce Concepts File Size</figcaption></figure><p id="453a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">short <code class="fe oj ok ol lt b">load_conso()</code>函数将缩减后的文件加载到数据帧中。查看相同的概念(相同的 CUI)如何映射到不同的源特定代码(不同的 SAB/代码):</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/56d87397fbe81ee93ca2ed6e5bb5576e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oEN5o03cKstaYnv5iJItYg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">MRCONSO.RRF excerpt</figcaption></figure><h2 id="e0d9" class="lx ly iq bd mf nx ny dn mj nz oa dp mn le ob oc mp li od oe mr lm of og mt oh bi translated">3.1 将网格代码映射到 Cui</h2><p id="81e1" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">从上面的数据框创建一个从网格代码到 CUIs 的映射。这将在以后用于将研究与概念 Cui 关联(通过网格代码)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/8ab45586dc915d170785d9da13ae09b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mbl9wz2Z99mNt1jWuQTVkw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Mapping MeSH codes to CUIs</figcaption></figure><p id="18d4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后我们使用 1 的结果。, 2.和 3.1 来构建概念 Cui 的研究标识符的字典。对于第一遍，我们删除引用了不在 CTTI 文件中的网格术语的病历报告:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi os"><img src="../Images/68c9f15d0be02d7f5d421e624c3738a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*FIc4xD30Kx_4-ROxaS-G0g.png"/></div></figure><h2 id="c67b" class="lx ly iq bd mf nx ny dn mj nz oa dp mn le ob oc mp li od oe mr lm of og mt oh bi translated">3.2 将概念 Cui 映射到字符串</h2><p id="ef6b" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">从上面的数据框创建一个从 CUIs 到相应字符串集的映射。这将在以后用于将治疗区域映射到 Cui:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/b3530f91ccbb79d06ee4e57fbfe60a54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hMYcIiaj7ky-W-QJ5r9v7Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Mapping CUIs to Descriptions</figcaption></figure><p id="eee9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了以后的评估目的，使用该映射将病历报告与由相关 Cui 的字符串组成的描述字符串相关联是有用的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/72d90ecd4e395e4b6d8f9056d53c5ecf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*JhtyicpUks_CPlNowAQQDQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Study terms for Evaluation Purposes</figcaption></figure><h2 id="9c3d" class="lx ly iq bd mf nx ny dn mj nz oa dp mn le ob oc mp li od oe mr lm of og mt oh bi translated">4.手动将治疗区域与 UMLS 概念(Cui)相关联</h2><p id="e4c4" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">治疗区域是手动定义的，以满足战略业务需求。因此，要把它们与研究联系起来，我们需要把它们与概念 CUIs 联系起来。这是这篇文章最棘手的部分。</p><p id="defc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">主题专家了解每个领域，因此能够识别哪些字符串或描述与之相关。使用上面的<code class="fe oj ok ol lt b">cui_to_strings </code>字典，使用子字符串匹配很容易识别哪个 CUI 匹配哪个字符串。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/ae3ec89f517ebf587e703e3a92fc7c0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2xUvkdpWhW9856KotCizrQ.png"/></div></div></figure><p id="8056" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">例如，对于<em class="md">心脏病学</em>区域，让我们尝试保留其术语集至少包含<code class="fe oj ok ol lt b">cardiodiolog</code>和<code class="fe oj ok ol lt b">cardiovascul</code>子字符串的所有 Cui(结果被截断):</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/decd36dffe5cb20bd95e37aee39b472c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a7DXWzD36Dbfog_SPt4JAw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Finding Cardiology’s Concepts (output truncated)</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/ab22fcf15e18e9049ce22432c82ebb7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ypDihRzWK5POX1W10HvBlw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Cardiology Concepts (output truncated)</figcaption></figure><p id="7ed8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通过在两组嵌入向量上使用<a class="ae lr" href="https://radimrehurek.com/gensim/models/keyedvectors.html" rel="noopener ugc nofollow" target="_blank"> Gensim </a>的<code class="fe oj ok ol lt b">KeyedVector.n_similarity()</code>，希望这组 Cui 与关于<em class="md">心脏病学</em>的研究之间的相似性会很高。</p><p id="abc8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在某些情况下，有必要要求术语来自多个集合。例如，对于区域<em class="md">感染和传染病</em>，第一个集合<code class="fe oj ok ol lt b">[‘infectious’, ‘infected’, ‘infection’]</code>返回与感染相关的概念，但不一定是疾病。以下尝试给出了更好的结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/25f851839c7e24485dafcb8f6a9572aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qpA7uqESWVfb25dQnNwboQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Finding Infectious Diseases’ Concepts (output truncated)</figcaption></figure><p id="144b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在其他情况下，一些术语匹配来自非期望区域的 Cui。对于<em class="md">牙齿和口腔健康</em>区域，使用<code class="fe oj ok ol lt b">[‘tooth cavit’, ‘caries’, ‘cavities’]</code>会从许多不需要的区域产生 Cui。关于与牙齿区域无关的一组<em class="md">腔</em>相关的串，参见<code class="fe oj ok ol lt b">excluded_terms</code>参数。下面的最终结果似乎没有异常值:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/8bc3c8946606242f4e51b0178f0ab885.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OYCVJbr87jrshHXdMIWx8A.png"/></div></div></figure><h2 id="1d2e" class="lx ly iq bd mf nx ny dn mj nz oa dp mn le ob oc mp li od oe mr lm of og mt oh bi translated">5.使用概念嵌入将研究与治疗领域相匹配</h2><p id="cdad" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">这是所有东西放在一起的地方。从目前构建的结构来看，不难使用蛮力来保留与使用<a class="ae lr" href="https://radimrehurek.com/gensim/models/keyedvectors.html" rel="noopener ugc nofollow" target="_blank"> Gensim </a>的<code class="fe oj ok ol lt b">KeyedVector.n_similarity()</code>的每项研究最相似的治疗区域:</p><ul class=""><li id="d0a1" class="ni nj iq kx b ky kz lb lc le nk li nl lm nm lq pa no np nq bi translated">这个概念来源于这项研究(字典<code class="fe oj ok ol lt b">std_to_cuis</code>)</li><li id="6507" class="ni nj iq kx b ky nr lb ns le nt li nu lm nv lq pa no np nq bi translated">这个概念来源于各个治疗领域</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/c1025d21e0bc7fbb4c948950ad268806.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZepMEpNB2MtS25pr2Uk_9g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Matching studies with therapeutic areas</figcaption></figure><h1 id="8071" class="me ly iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">结果</h1><p id="c3c0" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">结果可以用以下代码显示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pc"><img src="../Images/f072d3d25e310b643b4261d90feb839f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oJ_FVV3gkPzXmwmGdZ4l2Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Studies matched to therapeutic areas</figcaption></figure><p id="e3ca" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以下是不同治疗领域的典型结果摘录。由于空间限制，它被截断。如果它太小而无法在你的设备上阅读，那么<a class="ae lr" href="https://github.com/thierryherrmann/simple-machine-learning/blob/master/2018-11-10-studies-therapeutic-areas/studies-therapeutic-areas.ipynb" rel="noopener ugc nofollow" target="_blank">笔记本</a>包含了更多的结果，有助于在不执行代码的情况下查看它们(执行代码需要从 UMLS 获得下载文件的许可，这并不困难，我得到了 NLM 的热情支持)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pd"><img src="../Images/183a3131c1b2c958d14449711114cd16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aYlcDE1TE9ZfI1a4gXatbQ.png"/></div></div></figure><h2 id="5c2d" class="lx ly iq bd mf nx ny dn mj nz oa dp mn le ob oc mp li od oe mr lm of og mt oh bi translated">对结果的一些评论</h2><p id="1750" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">尽管一些研究被错误分类，结果还是很有趣。通常关注误分类有助于理解哪个崔导致(或影响)了错误的选择。</p><p id="d82c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当关注一个错误的分类时，总是关注第二个和第三个治疗区域，看看它们与第一个有多接近。例如，在下面的错误分类中，第二个(正确的)区域<code class="fe oj ok ol lt b">Trauma, 0.49841</code>与第一个(不正确的)区域<code class="fe oj ok ol lt b">Urology: 0.50133</code>非常相似。这告诉我们，结果并不总是那么糟糕，重点应该放在更糟糕的错误分类上。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="63ab" class="lx ly iq lt b gy lz ma l mb mc">study: NCT03677856</span><span id="14a7" class="lx ly iq lt b gy om ma l mb mc">terms: {'thoracic diseases', 'anesthetic drug', 'anesthesia agent', 'thoracic diseases [disease/finding]', 'anaesthetics', 'thoracic disorder', 'anaesthetic drugs', 'anaesthetic agent', 'anesthetics drugs', 'anesthetic agent', 'diseases, thoracic', 'anesthetic', 'agents, anesthetic', 'anesthetic agents', '[cn200] anesthetics', 'thoracic disease', 'disease thoracic', 'anesthetic drugs', 'disease, thoracic', 'thoracic dis', 'anesthetics', 'drugs, anesthetic', 'anesthestic drugs', 'drugs causing loss of sensation'}</span><span id="3fe8" class="lx ly iq lt b gy om ma l mb mc">ranks: [('Urology', 0.50133), ('Trauma', 0.49841), ('Neurology', 0.49322), ('Dermatology', 0.48437), ('Obstetrics/Gynecology', 0.47121)]</span></pre><p id="e29f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在某些情况下，可能需要手动验证每个 CUI，并从特定治疗区域或研究中删除或添加一些 CUI，并找到导致不匹配的 CUI(借助 gensim 的相似性函数)。然后试着推断这个崔和其他人的互动来理解引起不一致的语义方面。<a class="ae lr" href="https://github.com/thierryherrmann/simple-machine-learning/blob/master/2018-11-10-studies-therapeutic-areas/studies-therapeutic-areas.ipynb" rel="noopener ugc nofollow" target="_blank">笔记本</a>收录了一些值得调查的误分类。</p><h1 id="7f3b" class="me ly iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">结论和可能的改进</h1><ul class=""><li id="1596" class="ni nj iq kx b ky mv lb mw le pe li pf lm pg lq pa no np nq bi translated">获取每个治疗区域的 Cui 至关重要。这可能会变得棘手，如上面的例子所示(<em class="md">牙科</em>或<em class="md">传染病</em>)。</li><li id="f5aa" class="ni nj iq kx b ky nr lb ns le nt li nu lm nv lq pa no np nq bi translated">如果我们无法找到合适的折中方案，可以使用 NLM 的 RRF 浏览器(见上面的截图)浏览相关概念，并手动将每个 Cui 分配到一个有问题的治疗区域。有时一些概念重叠，相似性将无法给出好的结果。需要从负面案例开始进行更多的调整/调查。</li><li id="cba6" class="ni nj iq kx b ky nr lb ns le nt li nu lm nv lq pa no np nq bi translated">进行集成:在这里使用另外两个可用的 CUI 嵌入<a class="ae lr" href="https://github.com/clinicalml/embeddings" rel="noopener ugc nofollow" target="_blank"/>(更小，但可能仍然是好的)希望它们可以弥补这里尝试的嵌入中缺少的概念。由于这些其他嵌入更小，预计不会有很大的改进。</li><li id="7bf9" class="ni nj iq kx b ky nr lb ns le nt li nu lm nv lq pa no np nq bi translated">如果不对病历报告进行分类比错误分类更好，请考虑对第一个区域和第二个区域之间的相似性差异使用阈值。只有当差异大于阈值时才预测治疗区域，因为第一和第二区域之间的间隔被认为足够宽。</li></ul></div></div>    
</body>
</html>