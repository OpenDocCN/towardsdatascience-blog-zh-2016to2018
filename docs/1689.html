<html>
<head>
<title>What I Learned From Analyzing and Visualizing Traffic Accidents Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我从分析和可视化交通事故数据中学到了什么</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/what-i-learned-from-analyzing-and-visualizing-traffic-accidents-data-7cd080a15c15?source=collection_archive---------1-----------------------#2017-10-04">https://towardsdatascience.com/what-i-learned-from-analyzing-and-visualizing-traffic-accidents-data-7cd080a15c15?source=collection_archive---------1-----------------------#2017-10-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5d491227511ada1f26acc2fbd0752062.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1x6n5gEB6I0RdOuUAaKR4w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Source: Power BI</figcaption></figure><h1 id="7e26" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">概观</h1><p id="52c0" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">美国国家公路交通安全管理局(NHTSA)向公众公开了一些非常有趣的数据。我下载了几个数据集，其中包含从 1994 年到 2015 年的致命机动车辆碰撞和死亡的信息。本分析的目的是探索并更好地理解影响车辆碰撞可能性的一些因素。</p><p id="f8b0" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">分析和可视化是用 R 语言完成的。r 是可怕的，因为你会发现。</p><h1 id="6fdc" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">数据</h1><p id="1210" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated"><strong class="lc ir">加载库</strong></p><p id="88b9" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">我将使用下面的库进行分析和可视化。为了保持文章简洁，我没有展示大部分数据清理和分析步骤的代码，但是和我所有的文章一样，代码可以在<a class="ae ly" href="https://github.com/susanli2016/Data-Analysis-with-R/blob/master/traffic_safety.Rmd" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="811e" class="mn kd iq mj b gy mo mp l mq mr">library(XML)<br/>library(RCurl)<br/>library(rvest)<br/>library(dplyr)<br/>library(tidyr)<br/>library(ggplot2)<br/>library(ggthemes)<br/>library(reshape)<br/>library(treemap)</span></pre><p id="41fa" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">美国的交通死亡人数一直呈下降趋势。值得注意的是，2014 年的死亡人数(不到 33，000 人)远低于 2005 年的峰值(超过 43，000 人)。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="89a2" class="mn kd iq mj b gy mo mp l mq mr">ggplot(aes(x=Year, y=Val), data = df_long_total) + geom_line(size = 2.5, alpha = 0.7, color = "mediumseagreen", group=1) + <br/>  geom_point(size = 0.5) + <br/>  ggtitle('Total Number of Accidents and Fatalities in the US 1994 - 2015') +<br/>  ylab('count') +<br/>  xlab('Year') +<br/>  theme_economist_white()</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/952d432dc0ba1d54925ff5f28b3d749c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c-7IKVht3hBw0MsA07Uk_g.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 1</figcaption></figure><p id="6c49" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">而且上述数字还没有考虑到路上不断增加的汽车数量。美国人开车比以往任何时候都多。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b6a4" class="mn kd iq mj b gy mo mp l mq mr">ggplot(aes(x=Year, y=Val), data = df_long_travel) + geom_line(size = 2.5, alpha = 0.7, color = "mediumseagreen", group=1) + <br/>  geom_point(size = 0.5) + <br/>  ggtitle('Total Vehicle Miles Traveled 1994 - 2015') +<br/>  ylab('Billion Miles') +<br/>  xlab('Year') +<br/>  theme_economist_white()</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/222a76c9ff50a67df0afba1bad3b9d04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0PeM4uujes3o0s6BHuOXvQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 2</figcaption></figure><p id="5c60" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><strong class="lc ir"> 2015 年各州交通死亡人数以及与 2014 年相比的百分比变化</strong></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="cb03" class="mn kd iq mj b gy mo mp l mq mr">state &lt;- state[c('State', 2015, 2014, 'Percent.Change')]<br/>newdata &lt;- state[order(-state$`2015`),]<br/>newdata</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/686138facf442e4310e703d8069f44db.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*KZffiiGDvQCSQab_1FBgKg.png"/></div></figure><figure class="me mf mg mh gt jr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/547e35ff491f16806ed599d7d6c0b240.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*878A1tJ8Z7ZQnzSQvcvIsw.png"/></div></figure><figure class="me mf mg mh gt jr gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/e1c753348ad22909eb84bac981c980fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*JzOBBov4uDtMzYXFRpybaA.png"/></div></figure><ul class=""><li id="3f71" class="mw mx iq lc b ld lz lh ma ll my lp mz lt na lx nb nc nd ne bi translated">德克萨斯州在 2014 年和 2015 年都是美国交通死亡人数最多的州。</li><li id="4e28" class="mw mx iq lc b ld nf lh ng ll nh lp ni lt nj lx nb nc nd ne bi translated">可以理解的是，交通死亡人数最少的州也是居民最少的州，包括哥伦比亚特区，其次是罗德岛州和佛蒙特州。</li></ul><p id="149c" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><strong class="lc ir">在全国范围内，每年男性的机动车事故死亡率高于女性(两倍以上)。</strong></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e32b" class="mn kd iq mj b gy mo mp l mq mr">ggplot(aes(x = year, y=count, fill=killed), data=kill_full) +<br/>  geom_bar(stat = 'identity', position = position_dodge()) + <br/>  xlab('Year') +<br/>  ylab('Killed') +<br/>  ggtitle('Number of Persons Killed in Traffic Accidents by Gender 1994 - 2015') + theme_economist_white()</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/e6d227c22456f199a14c12cd5da046d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bvmCv1VgIgvKRUNDL2gGUw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 3</figcaption></figure><p id="332e" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><strong class="lc ir">25 至 34 岁年龄组的死亡人数最多。</strong></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b395" class="mn kd iq mj b gy mo mp l mq mr">age_full$age &lt;- ordered(age_full$age, levels = c('&lt; 5', '5 -- 9', '10 -- 15', '16 -- 20', '21 -- 24', '25 -- 34', '35 -- 44', '45 -- 54', '55 -- 64', '65 -- 74', '&gt; 74'))<br/>ggplot(aes(x = age, y=count), data =age_full) + geom_bar(stat = 'identity') +<br/>  xlab('Age') +<br/>  ylab('Number of Killed') +<br/>  ggtitle('Fatalities Distribution by Age Group 1994 - 2015') + theme_economist_white()</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/bd35ca7633f66f87ca0599dfdd30933b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RTGLaDp2ji6mDBjF5RXlnQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 4</figcaption></figure><p id="c581" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><strong class="lc ir">从 2005 年到 2015 年，只有两个年龄组的死亡人数增加；55 比 64 和 65 比 74。16 至 20 岁和 35 至 44 岁年龄组的死亡率下降幅度最大。</strong></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0f3b" class="mn kd iq mj b gy mo mp l mq mr">ggplot(age_full, aes(x = year, y = count, colour = age)) + <br/>  geom_line() +<br/>  geom_point() +<br/>  facet_wrap(~age) + xlab('Year') +<br/>  ggtitle('Traffic Fatalities by Age 1994 - 2015') + <br/>  theme(legend.position="none")</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/6554f6021389fc1f27a34943f6cd3305.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gaaa-iIrNF8UdNQhIqa-zQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 5</figcaption></figure><p id="2fdd" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">从这张树形图中，我们看到下午 3 点到 5 点 59 分和下午 6 点到 8 点 59 分死亡人数最多。让我们深入了解一下。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3b92" class="mn kd iq mj b gy mo mp l mq mr">treemap(kill_by_hour_group, index=c("hours","variable"), vSize="sum_hour", type="index", fontsize.labels=c(15,12), title='Fatalities by time of the day', fontcolor.labels=c("white","orange"), fontface.labels=c(2,1), bg.labels=c("transparent"),  align.labels=list(<br/>  c("center", "center"), c("right", "bottom")), overlap.labels=0.5, inflate.labels=F,<br/>)</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/0929d621e341a192557e4212f0c30af2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W-GBGhIVpxQ2-k-Lb7-G8A.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 6</figcaption></figure><p id="ce63" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">大多数事故发生在周六和周日的午夜到凌晨 2:59 之间。让我们更深入地探究一下原因。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="116e" class="mn kd iq mj b gy mo mp l mq mr">ggplot(aes(x = variable, y = sum_hour, fill = hours), data = kill_by_hour_group) +<br/>  geom_bar(stat = 'identity', position = position_dodge()) +<br/>  xlab('Hours') +<br/>  ylab('Total Fatalities') +<br/>  ggtitle('Fatalities Distribution by Time of the Day and Day of the week 1994-2015') + theme_economist_white()</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/1dfcc71758ba7cc03cfca5f5067807fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QCeEF9ZAv1HK7GFiqGnTDA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 7</figcaption></figure><p id="383b" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">星期六和星期天的午夜到凌晨 2 点 59 分是许多人离开酒吧的时间。我们还要说多少次，不要酒后驾车？</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6e05" class="mn kd iq mj b gy mo mp l mq mr">ggplot(aes(x = year, y = count, fill = hour), data = pair_all) +<br/>  geom_bar(stat = 'identity', position = position_dodge()) +<br/>  xlab('Year') +<br/>  ylab('Number of Fatalities') +<br/>  ggtitle('Fatal Crashes caused by Alcohol-Impaired Driving, by Time of Day 1994-2015') + theme_economist_white()</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/427e0ad40168f8f031dfdde753e938a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cnqQIeq2Q3wAarsc219ylg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 8</figcaption></figure><p id="bded" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">在过去 10 年里，酒精中毒驾驶致死的比例实际上是持平的。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="133b" class="mn kd iq mj b gy mo mp l mq mr">ggplot(aes(x = year, y = mean, color = bac), data = al_all_by_bac) +<br/>  geom_jitter(alpha = 0.05) +<br/>  geom_smooth(method = 'loess') +<br/>  xlab('Year') +<br/>  ylab('Percentage of Killed') +<br/>  ggtitle('Fatalities and Blood Alcohol Concentration of Drivers 1994-2015') + theme_economist_white()</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/748eb236e0a8e2366ef4406455f0ac15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lfcJftPGN-PAEg-Rmq_4ug.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Figure 9</figcaption></figure><h2 id="6dce" class="mn kd iq bd ke nk nl dn ki nm nn dp km ll no np kq lp nq nr ku lt ns nt ky nu bi translated">轮到你了</h2><p id="e734" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated"><a class="ae ly" href="https://www-fars.nhtsa.dot.gov/Main/index.aspx" rel="noopener ugc nofollow" target="_blank"> NHTSA </a>为交通死亡信息提供了丰富的数据源。有数百种方法来分析它们，最好的方法取决于数据和你试图回答的问题。我们的工作是讲述一个有数据支持的故事。哪种类型的车辆更有可能发生碰撞？车辆中最安全的座位在哪里？所以，拿出你自己的故事，让我知道你在数据中发现了什么！</p><p id="b4a1" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">数据不能激励人，故事可以。</p></div></div>    
</body>
</html>