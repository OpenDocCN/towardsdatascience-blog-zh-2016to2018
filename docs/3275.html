<html>
<head>
<title>Technical Analysis library to financial datasets with Python Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python Pandas金融数据集技术分析库</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/technical-analysis-library-to-financial-datasets-with-pandas-python-4b2b390d3543?source=collection_archive---------3-----------------------#2018-04-27">https://towardsdatascience.com/technical-analysis-library-to-financial-datasets-with-pandas-python-4b2b390d3543?source=collection_archive---------3-----------------------#2018-04-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c601cdee895af9b9a1efeb43972a645a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FxtgxKvjwbP7qchdcshY4w.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">[Image[1] (Image courtesy: <a class="ae kc" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank">https://unsplash.com</a>)]</figcaption></figure><p id="0e42" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在过去的几个月里，我一直在研究一些金融时间序列，如<a class="ae kc" href="https://github.com/bukosabino/btctrading" rel="noopener ugc nofollow" target="_blank">预测比特币价格</a>或<a class="ae kc" href="https://numer.ai/" rel="noopener ugc nofollow" target="_blank">号人物</a>、<a class="ae kc" href="https://www.kaggle.com/c/two-sigma-financial-modeling" rel="noopener ugc nofollow" target="_blank">两个适马投资</a>或<a class="ae kc" href="https://financialforecasting.gresearch.co.uk" rel="noopener ugc nofollow" target="_blank"> G-Research </a>提出的不同挑战。也就是说，我们已经决定基于<em class="lb"> Pandas </em>库用python开发一个技术分析库。您可以在以下位置找到该库:</p><div class="lc ld gp gr le lf"><a href="https://github.com/bukosabino/ta" rel="noopener  ugc nofollow" target="_blank"><div class="lg ab fo"><div class="lh ab li cl cj lj"><h2 class="bd ir gy z fp lk fr fs ll fu fw ip bi translated">布科萨比诺/ta</h2><div class="lm l"><h3 class="bd b gy z fp lk fr fs ll fu fw dk translated">ta——Python中的技术分析库</h3></div><div class="ln l"><p class="bd b dl z fp lk fr fs ll fu fw dk translated">github.com</p></div></div><div class="lo l"><div class="lp l lq lr ls lo lt jw lf"/></div></div></a></div><p id="f7bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个新的库面向从典型的金融数据集进行“特征工程”，这些数据集通常包括诸如“时间戳”、“开盘”、“高”、“低”、“收盘”和“成交量”等列。该库将由希望使用Python数据科学技术堆栈(Pandas、Scikit-Learn、XGBoost、LightGBM、Keras、TensorFlow等)解决机器学习问题的数据科学人员使用。</p><p id="fc57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">目前，这些工具在预测几乎任何事情上都取得了很好的效果，但是当它们被用来面对金融问题时，就不能正常工作了。它们不能正常工作，因为数据集中的行仅包含关于特定时间段(例如6小时或一天)的信息，这不足以使用当前模型生成良好的预测。为了改进预测，我们需要向数据集提供更多信息(要素),因为当提供更多信息时，当前模型会获得更好的结果。</p><p id="a732" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">技术分析的重点是提供过去的新信息来预测价格的走向。通过增加不同变量(“数量”、“波动性”、“趋势”、“势头”等)的不同指标产生的信息，我们可以提高原始数据集的质量。</p><p id="ee9d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们将详细解释两个例子:</p><p id="faf4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:bollinger_bands" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">布林线</strong> </a></p><p id="5021" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">布林线用于分析特定时期内资产价格的波动性。有3个波段，中间波段(MB)是最近n个周期的价格平均值，上波段(UB)和下波段(LB)等于中间波段，但加上和减去x倍标准差。正在使用的正常参数是n = 20个周期，x = 2。所以:</p><blockquote class="lu lv lw"><p id="9958" class="kd ke lb kf b kg kh ki kj kk kl km kn lx kp kq kr ly kt ku kv lz kx ky kz la ij bi translated">MB =总和(n个最后收盘值)/ n</p><p id="bea2" class="kd ke lb kf b kg kh ki kj kk kl km kn lx kp kq kr ly kt ku kv lz kx ky kz la ij bi translated">UB = MB + (X *标准偏差)</p><p id="2410" class="kd ke lb kf b kg kh ki kj kk kl km kn lx kp kq kr ly kt ku kv lz kx ky kz la ij bi translated">LB = MB — (X *标准偏差)</p></blockquote><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/144ed90670ae34ce4f6327fcabfe5108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*gdAeMotAOKXsYzrN."/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Bollinger Bands example [Image[2] (Own image generated with Matplotlib)]</figcaption></figure><p id="630d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在库中，收盘价变量被转换为5个新特性。除了3个布林线，我们还生成了另外2个指标，当收盘值高于上布林线或低于下布林线时，这两个指标会显示出来。因此，这两个特征将为0，除非收盘值超出这些范围，否则将为1。</p><p id="5242" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们看一下图2，当收盘波(蓝色)超过上波段或下波段时，价格会发生突然变化，通常在高于上波段时卖出，在低于下波段时买入是一个好主意。</p><p id="1a79" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="http://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:moving_average_convergence_divergence_macd" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"/>MACD</a></p><p id="6592" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">均线收敛背离是一个关注指数移动平均线(EMA)的交易指标。为了计算它，我们使用:</p><blockquote class="lu lv lw"><p id="e9a1" class="kd ke lb kf b kg kh ki kj kk kl km kn lx kp kq kr ly kt ku kv lz kx ky kz la ij bi translated">MACD =均线(n1，收盘)—均线(n2，收盘)</p><p id="b1a0" class="kd ke lb kf b kg kh ki kj kk kl km kn lx kp kq kr ly kt ku kv lz kx ky kz la ij bi translated">MACD信号=均线(n3，MACD)</p><p id="d547" class="kd ke lb kf b kg kh ki kj kk kl km kn lx kp kq kr ly kt ku kv lz kx ky kz la ij bi translated">MACD _差异= MACD—MACD _信号</p><p id="8c0f" class="kd ke lb kf b kg kh ki kj kk kl km kn lx kp kq kr ly kt ku kv lz kx ky kz la ij bi translated">变量的典型值是n1=12，n2=26，n3=9，但是根据你的交易风格和目标，库中也可以有其他的值。</p></blockquote><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/fb843f67f3c9e99aeccf0188a0ff3b2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*XaH9aDLjuZr_oSmG."/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">MACD example [Image[3] (Own image generated with Matplotlib)]</figcaption></figure><p id="7108" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">理论告诉我们，当MACD曲线(蓝色)小于MACD信号(橙色)时，或者当MACD差(绿色曲线代表MACD信号和MACD曲线之间的差)的值小于0时，价格趋势将是熊市。反之，则表示涨价。</p><p id="a0c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这时，图书馆已经实施了32项指标:</p><h2 id="684c" class="mf mg iq bd mh mi mj dn mk ml mm dp mn ko mo mp mq ks mr ms mt kw mu mv mw mx bi translated">卷</h2><ul class=""><li id="c4fc" class="my mz iq kf b kg na kk nb ko nc ks nd kw ne la nf ng nh ni bi translated">积累/分配指数</li><li id="f92d" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">平衡量(OBV)</li><li id="96ca" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">平衡体积平均值(OBV平均值)</li><li id="681e" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">柴金资金流(CMF)</li><li id="d624" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">力指数</li><li id="61e4" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">便于移动(EMV选举观察团)</li><li id="a46b" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">量价趋势(VPT)</li><li id="af1e" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">负体积指数</li></ul><h2 id="6d40" class="mf mg iq bd mh mi mj dn mk ml mm dp mn ko mo mp mq ks mr ms mt kw mu mv mw mx bi translated">波动性</h2><ul class=""><li id="a4ad" class="my mz iq kf b kg na kk nb ko nc ks nd kw ne la nf ng nh ni bi translated">平均真实距离</li><li id="ec43" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">布林线(BB)</li><li id="0938" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">凯尔特纳海峡</li><li id="d35b" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">唐奇安海峡(DC)</li></ul><h2 id="56cb" class="mf mg iq bd mh mi mj dn mk ml mm dp mn ko mo mp mq ks mr ms mt kw mu mv mw mx bi translated">趋势</h2><ul class=""><li id="9ceb" class="my mz iq kf b kg na kk nb ko nc ks nd kw ne la nf ng nh ni bi translated">移动平均收敛发散(MACD)</li><li id="c911" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">平均定向运动指数</li><li id="03ea" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">涡流指示器(六)</li><li id="8226" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">特里克斯(Trix)</li><li id="2959" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">质量指数</li><li id="fba1" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">商品频道指数(CCI)</li><li id="11d2" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">去趋势价格振荡器(DPO)</li><li id="e3cf" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">KST振荡器(KST)</li><li id="e24c" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">一目岛</li></ul><h2 id="5bca" class="mf mg iq bd mh mi mj dn mk ml mm dp mn ko mo mp mq ks mr ms mt kw mu mv mw mx bi translated">动力</h2><ul class=""><li id="8388" class="my mz iq kf b kg na kk nb ko nc ks nd kw ne la nf ng nh ni bi translated">货币流通指数</li><li id="ad03" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">相对强度指数</li><li id="0885" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">真实强度指数</li><li id="fb50" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">终极振荡器(UO)</li><li id="f098" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">随机振荡器</li><li id="4d1d" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">威廉姆斯%R (WR)</li><li id="b4fe" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">超棒振荡器(AO)</li></ul><h2 id="fe4e" class="mf mg iq bd mh mi mj dn mk ml mm dp mn ko mo mp mq ks mr ms mt kw mu mv mw mx bi translated">其他人</h2><ul class=""><li id="77ae" class="my mz iq kf b kg na kk nb ko nc ks nd kw ne la nf ng nh ni bi translated">每日退货</li><li id="3bf5" class="my mz iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">累积回报</li></ul><p id="2977" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些指标产生了58个特征。开发人员可以设置许多输入参数，如窗口的大小，不同的常数或智能自动填充方法中生成的NaN值。</p><p id="b7e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们已经将该库的第一个稳定版本上传到GitHub，可以使用“pip”安装。该库正在继续开发，所以我们将包括更多的指标，功能，文档等。请让我们知道任何评论，贡献或反馈。</p><div class="lc ld gp gr le lf"><a href="https://github.com/bukosabino/ta" rel="noopener  ugc nofollow" target="_blank"><div class="lg ab fo"><div class="lh ab li cl cj lj"><h2 class="bd ir gy z fp lk fr fs ll fu fw ip bi translated">布科萨比诺/ta</h2><div class="lm l"><h3 class="bd b gy z fp lk fr fs ll fu fw dk translated">ta——Python中的技术分析库</h3></div><div class="ln l"><p class="bd b dl z fp lk fr fs ll fu fw dk translated">github.com</p></div></div><div class="lo l"><div class="lp l lq lr ls lo lt jw lf"/></div></div></a></div><p id="0e2b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我是一名软件自由职业者，专注于数据科学，使用Python工具，如Pandas、Scikit-Learn、Zipline或Catalyst。如果你需要与本库相关的东西，技术分析，Algo交易，机器学习等，请随时联系我。</p></div></div>    
</body>
</html>