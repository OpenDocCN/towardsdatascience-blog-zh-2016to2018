<html>
<head>
<title>Market Basket Analysis on Online Retail Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在线零售数据的购物篮分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/market-basket-analysis-on-online-retail-data-24ee7214a762?source=collection_archive---------7-----------------------#2018-09-08">https://towardsdatascience.com/market-basket-analysis-on-online-retail-data-24ee7214a762?source=collection_archive---------7-----------------------#2018-09-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="1ad5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你有没有注意到，在杂货店里，面包和牛奶往往离得很远，尽管它们通常是一起购买的？这是为什么呢？这是因为他们想让你逛遍整个商店，注意面包和牛奶之间的其他商品，也许会买更多的商品。这是一个应用<strong class="js iu">市场篮子分析</strong> (MBA)的完美例子。MBA 是一种建模技术，其理论基础是，如果你购买了某一套商品，你或多或少会购买另一套商品。这是一项用于发现<em class="ko">关联规则</em>的基本技术，可以帮助增加公司的收入。</p><p id="4f51" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我之前的一篇文章(<a class="ae kp" rel="noopener" target="_blank" href="/preprocessing-large-datasets-online-retail-data-with-500k-instances-3f24141f511">预处理大型数据集:50 万以上实例的在线零售数据</a>)中，我解释了如何处理 50 万以上观察值的庞大数据集。我将使用相同的数据集来解释 MBA，并找到潜在的关联规则。</p><p id="0206" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正在使用的软件包有:</p><ul class=""><li id="5470" class="kq kr it js b jt ju jx jy kb ks kf kt kj ku kn kv kw kx ky bi translated"><strong class="js iu"> plyr </strong> —函数<em class="ko"> ddply </em>所必需的，该函数允许根据指定的标准创建项目集</li><li id="37ab" class="kq kr it js b jt kz jx la kb lb kf lc kj ld kn kv kw kx ky bi translated"><strong class="js iu">arules</strong>——一个非常有用的包，有许多选项，其中一个是函数<em class="ko"> apriori </em>，它可以根据一起购买的商品的频率来查找关系</li><li id="9689" class="kq kr it js b jt kz jx la kb lb kf lc kj ld kn kv kw kx ky bi translated"><strong class="js iu">arulesViz</strong>—<em class="ko">arules</em>包的扩展，具有关联规则和频繁项目集的各种可视化技术</li></ul><p id="d28a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">已经使用<em class="ko"> ddply </em>功能创建了项目集；对于数据框的每个子集，将应用一个函数，并将结果合并到一个数据框中。我们将按变量<em class="ko">发票号</em>进行拆分。物品清单已写入“Items_List.csv”文件，交易已使用<em class="ko"> read.transactions </em>函数扔入“篮子”中。以下是篮子的摘要:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/a2d692b340c5b9ca828b4df0f3930618.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/0*Mg1yHcOoI-yc00Qt"/></div></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/c3d53fa2c64ca0a22290abb805ba936f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/0*Kpdx6EMFlhDGzPpE"/></div></figure><p id="1aaa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以在上面看到哪些是最常购买的项目，以及项目集长度分布和基本统计数据。挺有用的！人们平均购买 23 件商品。</p><p id="00a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">看看前 15 本畅销书可能会很有意思。可以改变<em class="ko"> topN </em>参数或将<em class="ko">类型</em>切换到“相对”状态。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/b35935ff748cd411f24bfe2928527fdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/0*aBd-6153gryKNO8B"/></div></figure><p id="4751" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，使用<em class="ko">先验</em>函数，我们能够生成规则。我们将支持度设置为 0.005，它应该很小，因为我们有一个大的数据集，否则我们可能会得到很少的规则。置信度设置为 75%。总共生成了 678 条规则:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi le"><img src="../Images/45fb557868dd67d7ef2b426d813c8ff8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/0*lxLcULPJPHUtrx6i"/></div></div></figure><p id="a970" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这些规则已经按照可信度降序排列，在下面的总结中，我们可以看到规则的长度分布(从 2 到 6)。我们也看到最小和最大的支持、信心和提升。我们看到最大升力接近 122%。最小值是 8.691%，这表明这些项目出现的频率比预期的少得多。这两个信息在 MBA 中都非常有用——非常小的提升不应该被忽略！</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/6ce936ce5a1cf109644363c91c80eebe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/0*cXerzjJLLhyH90JO"/></div></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/6115088aca07fff00c2913fa48a72429.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/0*DNVA38sqKzV4-VkS"/></div></figure><p id="8870" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">arulesViz 软件包让我们能够可视化我们的发现。我们在下面看到我们所有规则的散点图。暗红色的点表示高度提升。那些规则往往有较高的可信度，但支持度较低。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/d1d7bec136ba2ae3a19d0250d5bd45af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/0*rZ6bMsfJX7YsURX5"/></div></figure><p id="5043" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以通过在<em class="ko">先验</em>函数中指定<em class="ko"> maxlen </em>来轻松控制规则的最大长度。这是在创建<em class="ko"> basket_rules2 </em>时完成的。当我们希望规则简洁时，这非常有用。在这种情况下，<em class="ko"> maxlen </em>被设置为 3。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/fbbb81358250f58a0a407b79f1c73194.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/0*VOe81CkAaR7SDdFR"/></div></figure><p id="91bb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另一种可视化规则的方式是下图。我们在图表中看到一些圆圈。圆圈越大，支撑越大。圆圈的颜色与升力有关。大圆圈代表支持度高的规则。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/35f42e448c704b2bfd5882da0e38837e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/0*JESYu_kc2lH0-u4m"/></div></figure><p id="966c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">也可以将项目作为目标来生成规则。例如，我们可能对顾客在喝咖啡之前可能会买什么感兴趣。在<em class="ko">先验</em>函数中，我们将<em class="ko">外观</em>设置为带有<em class="ko"> default = "lhs" </em>(左手边)和<em class="ko"> rhs = "COFFEE" </em>的列表。我们发现了 5 种通常与咖啡搭配的食物。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/7e2c1c2362cd9a33d136104a89bc09ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/0*jp2nho6cDYStZuLh"/></div></figure><p id="38ff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">糖之后顾客可能会买什么？让我们来了解一下！</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/fb46e0c2ff6dfe5287f098fb3b6c5e8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/0*en-6Z8BDQdgz7jFp"/></div></figure><p id="2c13" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当然是咖啡！:)</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><p id="9c14" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">MBA 吸引了众多零售公司的目光。零售业本质上是高度以客户为中心的，零售商正在不遗余力地寻找新的方法来更好地了解他们的客户。利用 MBA，零售商不仅可以确定目标市场，还可以通过创造、提供和交流卓越的客户体验来扩大客户群。MBA 允许零售商快速查看客户购物篮的大小、结构、数量和质量，以了解购买产品的模式。然而，MBA 给零售业从业者带来的好处要多得多。</p><p id="e5b3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">完整的 R 代码，请访问我的<a class="ae kp" href="https://github.com/dinajankovic/Market-Basket-Analysis-Online-Retail" rel="noopener ugc nofollow" target="_blank"> GitHub 简介。</a></p></div></div>    
</body>
</html>