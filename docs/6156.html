<html>
<head>
<title>A Beginner’s Guide to Plotting ‘FiveThirtyEight Like’ Visualizations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">绘制“五个三十八”可视化效果的初学者指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-beginners-guide-to-plotting-fivethrityeight-like-visualizations-5b63d3f3ddd0?source=collection_archive---------9-----------------------#2018-11-28">https://towardsdatascience.com/a-beginners-guide-to-plotting-fivethrityeight-like-visualizations-5b63d3f3ddd0?source=collection_archive---------9-----------------------#2018-11-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ffec" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在这里，我将向你展示我是如何从 FiveThirtyEight 的文章<a class="ae kf" href="https://fivethirtyeight.com/features/every-guest-jon-stewart-ever-had-on-the-daily-show/" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">中重现乔恩·斯图尔特在《每日秀》</strong> </a>中的每一位嘉宾的形象的。</h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/e9063bf786fe176b3a4c24158b4012b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*66GdKT0yLW4siFTwqLzmLg.png"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">Source: FiveThirtyEight’s article “Who Got to Be On ‘The Daily Show’?”</figcaption></figure><p id="b5aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可能已经使用 Matplotlib 和 Seaborn 进行了可视化，但是您可能希望提高绘图的美观性。你可以在这里从<a class="ae kf" href="https://github.com/fivethirtyeight" rel="noopener ugc nofollow" target="_blank"> FiveThirtyEight 的 Github </a>获得数据集的 csv 文件<a class="ae kf" href="https://raw.githubusercontent.com/fivethirtyeight/data/master/daily-show-guests/daily_show_guests.csv" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="9157" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">那么，让我们开始吧……</strong></h1><p id="87c1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">首先，进入你喜欢的编码环境。我更喜欢使用 Jupyter 笔记本(以防你不知道它或者想要帮助下载它，<a class="ae kf" href="https://www.dataquest.io/blog/jupyter-notebook-tutorial/" rel="noopener ugc nofollow" target="_blank">这里有一个我找到的教程</a>)。另外，另一个不错的选择是<a class="ae kf" href="https://colab.research.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌合作实验室</a>。</p><p id="4536" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦您的环境准备好了，加载适当的库，读取文件并显示前五行。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/e900d279f5e4f386abbd4db4a9971d23.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*tq8vMe7rvquvq8dUNlKBWw.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">First five rows of dataset</figcaption></figure><p id="9282" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们重命名“YEAR”和“Raw_Guest_List ”,以减少我们的输入，因为我们很快就会用到它们。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="5938" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们需要将“组”列中所有客人的职业浓缩为三类。这将有助于在图表中绘制我们的三条线。为此，我们定义了一个循环遍历“Group”列并创建一个新的“Occupations”列的函数。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/edbc55353e26b5c4145a0117e1717b01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*RKLtjzn4QVSDq0M3_QWn0A.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">See added ‘Occupation’ column combining occupations into three categories</figcaption></figure><p id="8089" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，根据每年的职业创建一个客人百分比表。为此，我们将使用 Pandas 的<a class="ae kf" href="http://pandas.pydata.org/pandas-docs/stable/reshaping.html#cross-tabulations" rel="noopener ugc nofollow" target="_blank">交叉表函数</a>，这将帮助我们简化计算。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/cc9a78feecaac295d7765ddfbd46fa84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*uUSYug0oQi6UZCfqIsbC7w.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">Table with percentage of guests by occupation each year</figcaption></figure><p id="5073" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">默认情况下，上面的交叉表函数会计算每年每个类别的客人数量。但是请注意包含的“正常化”参数<em class="mu">。这将调整我们的计算，给出一个比例。</em>此外，将 normalize 设置为<em class="mu"/>“index”会将此规范化应用于每一行，而不是每一列。然后我们可以乘以 100 ( <em class="mu"> *100 </em>)把这些比例变成百分比。</p><p id="b171" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，如果我们想要清理我们的表，我们也可以删除“Other”列，它不会在我们的图中使用。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/9a75b83145bae584e64ea7b68fa33c88.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/1*QIzRj5e-EnDKvidIRPaUcQ.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">Same table without ‘Other’ column</figcaption></figure><p id="4eb6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了方便绘图，我们将在表格中列出所有年份。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="mp mq l"/></div></figure><h1 id="9f5a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">是时候做我们一直以来真正想做的事情了！</h1><p id="5e93" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这里有一个代码要点，它将为我们提供粗略的草稿。自定义线条颜色和线条粗细，以匹配文章中的图表…</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/dd1e909c3eb1e6b32c27ed53102d69e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*e1uFtOkwMQI6KnmohMfwkA.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">Here’s our initial plot</figcaption></figure><p id="4c58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">沿 y 轴增加网格线的长度，并在图的基线处添加一条水平线。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/90a86776d7fa26e55c7eecf00adf50ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*KrfNDQgi9wb4uRfuB0NHxQ.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">Grid line along y-axis increased and horizontal line at baseline added</figcaption></figure><p id="800b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">调整显示的 x 和 y 标签，再次调整字体颜色和大小。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi my"><img src="../Images/0794094e6cbd3fc6540a1f8af7fa5db3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*8utvdk9AcCKO_yCxIht-9Q.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">Reduced number of grid lines and changed x &amp; y axis labels</figcaption></figure><p id="f459" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">设置图形标题和副标题(<em class="mu">不使用传统的 plt.title() </em>，因为它限制了文本放置)。请注意，下面的 x 和 y 参数根据 x 和 y 坐标确定文本的位置。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/c369296c772b81ee2523530696832b32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*iih-BT_hdTvRagGHQ9IkvA.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">Title &amp; subtitle aligned with ‘100%’ label on plot</figcaption></figure><p id="28e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用自定义字体大小和颜色为绘图中的每一行添加文本标签。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/af4ef746bbb11f67579632cbed5e50c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*rNXMe2Kuq0hvEYhYJRcuyA.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">Adding labels here takes a lot of playing with x &amp; y coordinates</figcaption></figure><p id="3684" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的最后一点是，在我们图表的底部有一个自定义的签名框。这里你必须在文本中获得正确的间距(见<em class="mu">的</em>参数中的文本),以使其适合图表的宽度。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi na"><img src="../Images/2e5b4be366df8fb26d6ff33f11a9a7e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*5_3C2jcn5C8AkAmqUV8Jxw.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">Voila!… Our finalized ‘FiveThirtyEight like’ visualization</figcaption></figure><p id="bc93" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样。</p><p id="3b3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">自己制作出像这样好看又干净的知识性剧情，感觉不是很好吗？不得不承认我感觉很好:)</p><p id="13f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您可以利用 FiveThirtyEight 提供的数据了。走吧。是时候让你看看一些有趣的文章，尝试自己去重现其他的情节了。</p></div></div>    
</body>
</html>