<html>
<head>
<title>Using tf.Print() in TensorFlow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用tf。在TensorFlow中打印()</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/using-tf-print-in-tensorflow-aa26e1cff11e?source=collection_archive---------0-----------------------#2018-01-25">https://towardsdatascience.com/using-tf-print-in-tensorflow-aa26e1cff11e?source=collection_archive---------0-----------------------#2018-01-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="c354" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我听说你想印一些张量。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/b7ae733bde3c2bec81988740d08605a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tjcdNo68ePRG0NCoeq429w.png"/></div></div></figure><p id="cd07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我知道你每次都以正确的方式使用调试器，并且永远不会使用print语句来调试你的代码。对吗？</p><p id="8a89" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为如果您这样做了，您可能会发现TensorFlow的<code class="fe kx ky kz la b">Print</code>语句与典型的print语句不太一样。</p><p id="5d67" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天我将展示TensorFlow的打印语句是如何工作的，以及如何最大限度地利用它们，希望能帮你解决一些困惑。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="lb lc l"/></div></figure><h1 id="1bf8" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">TensorFlow打印</h1><p id="4f9d" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">在编写TensorFlow代码时，有几种方法可以将内容打印出来。当然，还有经典的Python内置的<code class="fe kx ky kz la b">print</code>(或者函数<code class="fe kx ky kz la b">print()</code>，如果我们是Python 3的话)。然后还有TensorFlow的打印功能，<code class="fe kx ky kz la b">tf.Print</code>(注意大写的<code class="fe kx ky kz la b">P</code>)。</p><p id="b378" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当使用TensorFlow时，重要的是要记住一切最终都是图形计算。这意味着如果您使用Python的<code class="fe kx ky kz la b">print</code>打印TensorFlow操作，它将简单地显示该操作的描述，因为还没有任何值通过它传递。如果已知的话，它通常还会显示该节点中预期的维度。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mg"><img src="../Images/ca0b03347ac94fb07c05f431f029dd4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4h-CReumiK-UwKqtU-rCSQ.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk">Hmm, where are the values? At least we have the shape and type :)</figcaption></figure><p id="6e81" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你想打印执行时流经图形特定部分的<em class="ml">值</em>，那么我们需要使用<code class="fe kx ky kz la b">tf.Print</code>。</p><h2 id="a28b" class="mm le iq bd lf mn mo dn lj mp mq dp ln jy mr ms lr kc mt mu lv kg mv mw lz mx bi translated">构建您的打印节点</h2><p id="e309" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">我们通常认为打印是我们在事情发生后添加的东西，让它运行，然后回到我们正常的运营流程。在TensorFlow中，只有图中需要执行<em class="ml">来计算输出的节点才会被执行。因此，如果您的图形中有一个“悬空”打印节点，它将不会被执行。</em></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi my"><img src="../Images/015ae351b63427a0d12f65291739d109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mg-elxlxrHyywhr1Lds0-Q.png"/></div></div></figure><p id="d044" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那我们该怎么办？我们需要将打印调用拼接到图形本身中，就像这样:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mz"><img src="../Images/9066f8b56e488b5a59e960952de1600c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fp3uNcq0qQGMQZL-6eIpzA.png"/></div></div></figure><p id="5e65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这在代码中的体现方式是将Print调用作为其第一个参数传递给作为其“输入”的节点，然后将返回值<code class="fe kx ky kz la b">tf.Print</code>赋给一个变量，该变量将作为图中后面节点的输入，从而将Print语句串行链接到操作流中。(实际使用这个返回的节点是至关重要的，因为如果不使用，它就会悬空。)</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi na"><img src="../Images/7841003927f43b28fcb022ebd4bda941.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-aP1Azn1ymkdr1-mdLH0MA.png"/></div></div></figure><p id="a609" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然Print语句不做任何计算，只是向前传递张量，但它确实打印了所需的节点，这是一个副作用。</p><p id="6f87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">另一个有点不同于我们在print语句中看到的行为是，我们引入到图中的Print节点仅仅是设置Print语句何时发生，即何时到达计算图中的节点。但是，对打印的内容没有太多限制。</p><p id="9bbe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">也就是说，它只是在图中标记您希望打印语句出现的位置，但是您可以打印图中它可以访问的任何节点。这是调用<code class="fe kx ky kz la b">tf.Print</code>的第二个参数:要打印的节点数组。通常我们只使用同一个节点作为第一个参数，也就是输入，但是如果我们愿意，我们可以在输出中包含更多的节点。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nb"><img src="../Images/34fec319dc540a93f9586e9610f90bbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kQke5mVYKug368aBF3FDEg.png"/></div></div></figure><p id="dc54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还有第三个论点，一个信息。这允许您在打印节点之前预先考虑一些字符串，因此您可以很容易地在日志中找到给定的print语句。</p><h1 id="c404" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">付诸实践</h1><p id="564a" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">简单地说，<code class="fe kx ky kz la b">tf.Print</code>就是这样。但是你可以在哪里利用tf呢？在代码中打印？</p><p id="6f58" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经常发现自己在用tf。在我的输入函数中打印，以调试传递到我的训练循环中的确切内容。这里仅仅使用Python <code class="fe kx ky kz la b">print</code>是不够的，因为它只会在构造输入函数图时打印一次。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nc"><img src="../Images/e930df35a98821aba5cfc94ce0aaa95d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*dLpxUTEscafadjn-89t69A.gif"/></div></div></figure><p id="ee16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">相反，我们将介绍tf。打印对输入函数数据管道的调用。请注意，我们只是打印了作为输入传入的相同值，但是您当然也可以打印其他节点。</p><h2 id="fcd2" class="mm le iq bd lf mn mo dn lj mp mq dp ln jy mr ms lr kc mt mu lv kg mv mw lz mx bi translated">一些更多的建议</h2><p id="9b43" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">请注意，打印输出显示在我的Jupyter笔记本控制台的stderr中，<strong class="jp ir">而不是</strong>作为笔记本本身的输出。搜索打印输出时，请记住这一点！</p><p id="c800" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">另一个警告:如果你使用tf。在你的输入函数中，一定要限制你传入的数据量，否则你可能会滚动一个很长的控制台窗口:)</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nd"><img src="../Images/b4a6b655988ce90aa5db8c194c282499.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yNdKJziR2_ujM3Z9Gjyo2g.png"/></div></div></figure><p id="f48d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">TensorFlow的打印语句在许多方面都不是典型的打印语句，但当您需要查看图形中流动的张量时，它可以发挥很大的作用。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="4ba3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢阅读本集<a class="ae nl" href="https://goo.gl/UC5usG" rel="noopener ugc nofollow" target="_blank">云AI冒险</a>。如果你喜欢这个系列，请为这篇文章鼓掌让我知道。如果你想要更多的机器学习动作，一定要关注Medium 上的<a class="ae nl" href="https://medium.com/@yufengg" rel="noopener"> me或者订阅YouTube频道</a>来观看未来的剧集。更多剧集即将推出！</p><p id="438c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，看看TensorFlow的打印语句如何帮助您更清楚地了解您的机器学习是如何运行的！</p></div></div>    
</body>
</html>