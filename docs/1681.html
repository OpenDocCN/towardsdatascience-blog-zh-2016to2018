<html>
<head>
<title>Move Your Cursor with Webcam Using Tensorflow Object Detection API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Tensorflow 对象检测 API 通过网络摄像头移动光标</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/move-cursor-with-tensorflow-3727ed5e2795?source=collection_archive---------4-----------------------#2017-10-03">https://towardsdatascience.com/move-cursor-with-tensorflow-3727ed5e2795?source=collection_archive---------4-----------------------#2017-10-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="4271" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Tensorflow 最近发布了用于对象检测的<a class="ae kl" href="https://github.com/tensorflow/models/tree/master/research/object_detection" rel="noopener ugc nofollow" target="_blank">对象检测 API </a>，能够从图像中定位和识别对象。其快速检测图允许从视频帧甚至网络摄像头馈送中进行连续检测。它也可以用来制作鼠标。张量鼠。一个用摄像头移动光标的应用程序。</p><blockquote class="km"><p id="bd28" class="kn ko iq bd kp kq kr ks kt ku kv kk dk translated">你是不是一直想用香蕉移动光标，却做不到？未来就是现在。</p></blockquote><p id="45ea" class="pw-post-body-paragraph jn jo iq jp b jq kw js jt ju kx jw jx jy ky ka kb kc kz ke kf kg la ki kj kk ij bi translated"><a class="ae kl" href="https://github.com/tadejmagajna/TensorMouse" rel="noopener ugc nofollow" target="_blank"> TensorMouse </a>是一个小型开源 Python 应用程序，允许你通过在网络摄像头前移动随机的家用物体(如杯子、苹果或香蕉)来移动光标，并作为电脑鼠标或触控板的替代品。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/c49fb3f93ddf19c9f3450da3aecd3aa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*TR3IcLcma6uDy7BjwoF86Q.gif"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">TensorMouse allows you to play games… with bananas</figcaption></figure><h1 id="ce65" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">它是如何工作的？</h1><p id="639c" class="pw-post-body-paragraph jn jo iq jp b jq ml js jt ju mm jw jx jy mn ka kb kc mo ke kf kg mp ki kj kk ij bi translated">TensorMouse 从网络摄像头记录图像序列。然后，这些被输入 Tensorflow 对象检测 API 图形，该图形返回对象的概率和位置。然后移动鼠标光标，使光标位置与图像上对象的位置相对应。<br/>例如，如果在图像的左上角检测到物体，光标将移动到屏幕的左上角。</p><p id="1a0b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">应用程序的主要部分依次重复以下步骤:</p><ol class=""><li id="c4d0" class="mq mr iq jp b jq jr ju jv jy ms kc mt kg mu kk mv mw mx my bi translated">使用 OpenCV 从网络摄像头获取单帧图像</li><li id="d8d3" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk mv mw mx my bi translated">使用 Tensorflow 对象检测 API 进行对象检测</li><li id="492b" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk mv mw mx my bi translated">基于检测到的对象位置移动鼠标光标</li></ol><h2 id="73f2" class="ne lo iq bd lp nf ng dn lt nh ni dp lx jy nj nk mb kc nl nm mf kg nn no mj np bi translated">1.帧采集</h2><p id="fe0e" class="pw-post-body-paragraph jn jo iq jp b jq ml js jt ju mm jw jx jy mn ka kb kc mo ke kf kg mp ki kj kk ij bi translated">使用 Python OpenCV 模块捕获来自网络摄像头的帧。它为快速图像采集和缩放提供了一个跨平台的工具。然后将图像缩放至<code class="fe nq nr ns nt b">360p</code>以提高性能。</p><h2 id="5faa" class="ne lo iq bd lp nf ng dn lt nh ni dp lx jy nj nk mb kc nl nm mf kg nn no mj np bi translated">2.目标检测</h2><p id="8f96" class="pw-post-body-paragraph jn jo iq jp b jq ml js jt ju mm jw jx jy mn ka kb kc mo ke kf kg mp ki kj kk ij bi translated">对象检测用于确定所需对象在网络摄像机帧中的相对位置。它使用 Tensorflow 对象检测 API 的冻结<a class="ae kl" href="https://github.com/Zehaos/MobileNet" rel="noopener ugc nofollow" target="_blank"> Mobilenet </a>神经网络图，在 COCO 数据集上进行训练。该数据集由 80 种不同的物品组成，大部分包括杯子、苹果、餐具等家用物品。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi nu"><img src="../Images/261047d858fce8bcbf616fab50df2daf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hu0V9Qkmd1moc3W42twmdQ.jpeg"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Detected objects with corresponding probabilities</figcaption></figure><p id="72c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果检测到的对象概率超过指定的阈值(当前为 85%)，TensorMouse 会将该对象视为已检测到，并计算检测到的对象的框的中心。</p><h2 id="bd93" class="ne lo iq bd lp nf ng dn lt nh ni dp lx jy nj nk mb kc nl nm mf kg nn no mj np bi translated">3.移动鼠标光标</h2><p id="aab3" class="pw-post-body-paragraph jn jo iq jp b jq ml js jt ju mm jw jx jy mn ka kb kc mo ke kf kg mp ki kj kk ij bi translated">Python 包 pynput 为执行鼠标光标移动提供了跨平台支持。光标移动到基于检测到的对象的相对位置的位置。这意味着如果在图像的左上角检测到物体，光标将移动到屏幕的左上角。</p><p id="506f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，应用程序返回到步骤 1，从网络摄像头中检索下一张图像，并重复这些步骤。</p><h1 id="25b0" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">怎么用？</h1><p id="ca5b" class="pw-post-body-paragraph jn jo iq jp b jq ml js jt ju mm jw jx jy mn ka kb kc mo ke kf kg mp ki kj kk ij bi translated">该应用程序的源代码发布在 my <a class="ae kl" href="https://github.com/tadejmagajna/TensorMouse" rel="noopener ugc nofollow" target="_blank"> Github repo </a>中。</p><p id="e93a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">TensorMouse 可以在任何主流(Windows、Linux 或 MacOS)平台和几乎任何机器上运行，但要实现良好的帧速率，它需要一个像样的 CPU 或支持 CUDA 的显卡。</p><h2 id="a772" class="ne lo iq bd lp nf ng dn lt nh ni dp lx jy nj nk mb kc nl nm mf kg nn no mj np bi translated">装置</h2><p id="76b2" class="pw-post-body-paragraph jn jo iq jp b jq ml js jt ju mm jw jx jy mn ka kb kc mo ke kf kg mp ki kj kk ij bi translated">安装确保安装了软件包依赖项。</p><ol class=""><li id="b4f7" class="mq mr iq jp b jq jr ju jv jy ms kc mt kg mu kk mv mw mx my bi translated">安装 Anaconda(我推荐缩小版的<a class="ae kl" href="https://conda.io/miniconda.html" rel="noopener ugc nofollow" target="_blank"> Miniconda </a>)</li><li id="22c2" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk mv mw mx my bi translated">从 Gitlab 克隆<a class="ae kl" href="https://github.com/tadejmagajna/TensorMouse" rel="noopener ugc nofollow" target="_blank">tensor mouse</a></li><li id="8df1" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk mv mw mx my bi translated">打开终端并导航到项目根目录</li><li id="cd7b" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk mv mw mx my bi translated"><code class="fe nq nr ns nt b">conda env create -f environment.yml</code> (Linux/MacOS)或<code class="fe nq nr ns nt b">conda env create -f environment-win.yml</code> (Windows)</li><li id="3061" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk mv mw mx my bi translated"><code class="fe nq nr ns nt b">source activate tensormouse</code> (Linux/MacOS)或<code class="fe nq nr ns nt b">activate tensormouse</code> (Windows)</li></ol><h2 id="231d" class="ne lo iq bd lp nf ng dn lt nh ni dp lx jy nj nk mb kc nl nm mf kg nn no mj np bi translated">跑步张量鼠标</h2><p id="9896" class="pw-post-body-paragraph jn jo iq jp b jq ml js jt ju mm jw jx jy mn ka kb kc mo ke kf kg mp ki kj kk ij bi translated">一旦安装了依赖项并激活了环境(参见第 4 步和第 5 步)，我们就可以简单地运行 TensorMouse:</p><pre class="lc ld le lf gt nz nt oa ob aw oc bi"><span id="197b" class="ne lo iq nt b gy od oe l of og">python tensormouse.py</span></pre><p id="2484" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后等待大约 10-20 秒，等待绿色消息指示 Tensormouse 已成功启动。</p><p id="162f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将运行 Tensormouse 跟踪它的默认对象-杯子。但是您可以通过提供可选参数<code class="fe nq nr ns nt b">--obect="OBJECTNAME"</code>使它与 80 个 COCO 数据集对象中的任何一个一起工作</p><p id="8e4f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您也可以使用<code class="fe nq nr ns nt b">CTRL</code>进行点击，使用<code class="fe nq nr ns nt b">ALT</code>按钮进行拖动。</p><h2 id="4689" class="ne lo iq bd lp nf ng dn lt nh ni dp lx jy nj nk mb kc nl nm mf kg nn no mj np bi translated">使用说明</h2><ul class=""><li id="60ab" class="mq mr iq jp b jq ml ju mm jy oh kc oi kg oj kk ok mw mx my bi translated">确保物体光线充足(Tensormouse 在光线不好的情况下表现不佳)</li><li id="9494" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk ok mw mx my bi translated">确保物体足够远，不会占据整个网络摄像头画面，但足够近，仍然可以被检测到(需要一些尝试和错误)</li><li id="f777" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk ok mw mx my bi translated">如果你遇到物体检测性能差，尝试运行应用程序设置它来检测杯子，因为他们表现得相当好</li></ul></div></div>    
</body>
</html>