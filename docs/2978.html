<html>
<head>
<title>What your iMessage data says about you</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您的 iMessage 数据显示了您的哪些信息</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/what-your-imessage-data-says-about-you-daa186db16d?source=collection_archive---------12-----------------------#2018-03-26">https://towardsdatascience.com/what-your-imessage-data-says-about-you-daa186db16d?source=collection_archive---------12-----------------------#2018-03-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="3251" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kl translated">如今，我们几乎只通过短信交流。甚至我 96 岁的祖母也懂表情符号，知道表情符号的真正含义🍆和🔥。</p><p id="2d72" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对这些信息的分析会是什么样的呢？我们能从关系中学到什么？</p><p id="2d94" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将找出并研究如何围绕这些消息可视化构建一个应用程序！</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ku"><img src="../Images/b4048bbfce426c78d95fb9f3b01a0b3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A_MpZdK9yaLoRuTQc_t2HA.png"/></div></div></figure><blockquote class="lg lh li"><p id="4f07" class="jn jo lj jp b jq jr js jt ju jv jw jx lk jz ka kb ll kd ke kf lm kh ki kj kk ij bi translated">你有没有在写私人短信的时候把手机倾斜开了？</p><p id="5720" class="jn jo lj jp b jq jr js jt ju jv jw jx lk jz ka kb ll kd ke kf lm kh ki kj kk ij bi translated">你会让一个陌生人浏览你的对话吗？</p></blockquote><p id="89cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">想想我们的信息历史是多么的暴露和亲密，这几乎让人不舒服。它直接记录了我们与那些我们认为值得回短信的人的关系。</p><p id="81e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">iMessage 在在线信息领域占据主导地位，因为它本质上与苹果设备是锁定的。</p><p id="e61f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">任何拥有 MacBook 和 iPhone 的开发者或重度电脑用户都知道 iMessages 自动同步带来的难以置信的便利。</p><p id="2edd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好吧，酷——很好的推测。数据怎么说？</p><h1 id="251d" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">锁定数据</h1><p id="3a9b" class="pw-post-body-paragraph jn jo iq jp b jq ml js jt ju mm jw jx jy mn ka kb kc mo ke kf kg mp ki kj kk ij bi translated">这些数据不容易获取并不奇怪。iOS 完全锁定了消息——无法通过其 SDK 以任何方式访问。</p><p id="0279" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，在 iPhones 锁定的环境下，我们没有太多的选择来定位和分析设备上的信息。</p><p id="d943" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要是有一种方法可以让我们实时导出这些消息就好了…</p><pre class="kv kw kx ky gt mq mr ms mt aw mu bi"><span id="1c54" class="mv lo iq mr b gy mw mx l my mz">💡AH HA! - The desktop app!</span></pre><h1 id="2a37" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">我们的后门</h1><p id="dd0c" class="pw-post-body-paragraph jn jo iq jp b jq ml js jt ju mm jw jx jy mn ka kb kc mo ke kf kg mp ki kj kk ij bi translated">经过对苹果文档的研究，我们在 MacBook 上找到了 iMessage DB。</p><p id="2c2a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们在终端中运行这个简单的命令，我们将获得数据库的路径。</p><pre class="kv kw kx ky gt mq mr ms mt aw mu bi"><span id="8fa1" class="mv lo iq mr b gy mw mx l my mz">echo /Users/$USER/Library/Messages/chat.db</span></pre><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi na"><img src="../Images/c2c492710c40550484f8bf8930bdb808.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u95-4mVipLsMHE6iJMalMg.png"/></div></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk">Finding the path to our messages database</figcaption></figure><h1 id="ce40" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">探索/理解这种混乱</h1><p id="d088" class="pw-post-body-paragraph jn jo iq jp b jq ml js jt ju mm jw jx jy mn ka kb kc mo ke kf kg mp ki kj kk ij bi translated">我们打开数据库，但好的数据在哪里仍然让人有些困惑。我们仍然需要对这些数据库字段进行逆向工程——或者翻遍苹果文档。</p><p id="864c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让 SQL 与 DB Browser for SQLite 一起使用一段时间，这是一个处理 SQLite 数据库的简单应用程序。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi nf"><img src="../Images/ac4064004d307b77e225b883896428ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qeI36vmpr3JGdnUgqwbHOQ.png"/></div></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk">chat.db loaded into DB Browser for SQLite</figcaption></figure><div class="ng nh gp gr ni nj"><a href="http://sqlitebrowser.org/" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">SQLite 的数据库浏览器</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">2017-09-28 -新增 portable app 3 . 10 . 1 版本。谢谢约翰。:)2017-09-20 - DB 浏览器 for SQLite 3.10.1 已…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">sqlitebrowser.org</p></div></div></div></a></div><p id="fc8e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">几个小时后，我从 Apple docs 中拼凑了足够的工作 SQL 和线索来提取所需的信息。</p><p id="3cc9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这项工作被封装在一个 Python 类中，这样我就可以在 Jupyter 笔记本上做一些分析。</p><p id="ecab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是提取数据的片段</p><figure class="kv kw kx ky gt kz"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="063d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们可以用 Python 做一些真正的分析，然后将一些工作转化为有用的可视化。</p><h1 id="df1d" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">🤷🏽‍表情符号也很重要！</h1><p id="4936" class="pw-post-body-paragraph jn jo iq jp b jq ml js jt ju mm jw jx jy mn ka kb kc mo ke kf kg mp ki kj kk ij bi translated">即使在我们的分析中不包括文本，我们也可以做一些表情指纹识别。</p><p id="c1f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以很好地了解一段关系，只需显示我和另一个人之间发送的每个表情符号的数量。</p><p id="e2fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果分解成发送-接收，这可能更具描述性。</p><blockquote class="nu"><p id="9f97" class="nv nw iq bd nx ny nz oa ob oc od kk dk translated">这是我和朋友们的三个不同的表情网格</p></blockquote><div class="oe of og oh oi ab cb"><figure class="oj kz ok ol om on oo paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><img src="../Images/eab09068f97a13b61e82e1d1334b526f.png" data-original-src="https://miro.medium.com/v2/resize:fit:570/format:webp/1*ABHPeVmvRxqfq-6FE985PQ.png"/></div></figure><figure class="oj kz op ol om on oo paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><img src="../Images/8f745f7e8dbf7cf83fbb419db3c24088.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*d3jrQ3NK0dE371xSxvA9lw.png"/></div></figure><figure class="oj kz oq ol om on oo paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><img src="../Images/c293c9e243b778bcbe7d6e1b5274d09e.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*UiQ5hV7zecTzY8ffF4Ml_A.png"/></div></figure></div><h1 id="9922" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">模式发现</h1><p id="f598" class="pw-post-body-paragraph jn jo iq jp b jq ml js jt ju mm jw jx jy mn ka kb kc mo ke kf kg mp ki kj kk ij bi translated">太好了，我们有漂亮的图片，还对表情符号做了一些汇总。</p><p id="f5fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，我们希望确保这些东西在现实世界中是有意义的，并做一些理智检查。</p><p id="9ccf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我们将进行更深入的分析，并尝试将我们提取的几个数据点联系在一起。</p></div><div class="ab cl or os hu ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="ij ik il im in"><p id="6419" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是一个和我一起生活的家庭成员的一小时一天的图表。顶部的表情符号也显示在右边。</p><p id="8065" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们立即注意到晚上 9 点左右的深色方块，以及大量的狗表情符号……对我来说，这种模式再清楚不过了。</p><p id="3820" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的狗内斯；大约在晚上 9-10 点最后一次散步。如果我不在家或者离家很远，我的家人经常会带他去散步。</p><p id="a7a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些文字是在问 Ness 是否需要遛，有时还附带一个狗表情符号。</p><p id="73fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">太好了——事情正在有序进行。</p><blockquote class="nu"><p id="7d86" class="nv nw iq bd nx ny nz oa ob oc od kk dk translated">“这是你必须做的🐕esta noche？”</p><p id="561c" class="nv nw iq bd nx ny nz oa ob oc od kk dk translated">—家庭成员</p></blockquote><div class="oe of og oh oi ab cb"><figure class="oj kz oy ol om on oo paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><img src="../Images/54ab9be13bffedaa7f60b325b420e13a.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*bqotKJbS-OAntl_1d_ph-g.png"/></div></figure><figure class="oj kz oz ol om on oo paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><img src="../Images/ea4da18ee832bab250555b594581d340.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*blDdDxG8tin89Lb5YlXp0g.png"/></div></figure></div><p id="8f0e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这一切都是为了这个人</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/fafde6d9fe50a43aa59e1783b9fe0c9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*zSDg0rRbbxMpeNCM4kWGdw.gif"/></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk">Ness being dramatic on FT</figcaption></figure><h1 id="471e" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">让我们再做一次——制作一个应用程序</h1><p id="1e91" class="pw-post-body-paragraph jn jo iq jp b jq ml js jt ju mm jw jx jy mn ka kb kc mo ke kf kg mp ki kj kk ij bi translated">现在我们有了这个很酷的工具，但是我们想让它可重复使用。我们将使用 NodeJS 进行 SQLite 连接，使用 Express 来提供服务，使用 Electron 来打包。</p><p id="09ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">我们需要:</strong></p><ol class=""><li id="3b83" class="pb pc iq jp b jq jr ju jv jy pd kc pe kg pf kk pg ph pi pj bi translated">构建 UI——让我们从实际的 iMessage 应用程序中获得灵感！</li><li id="cef5" class="pb pc iq jp b jq pk ju pl jy pm kc pn kg po kk pg ph pi pj bi translated">对 DB 连接器脚本进行分类——让我们使用 NodeJS</li><li id="e89e" class="pb pc iq jp b jq pk ju pl jy pm kc pn kg po kk pg ph pi pj bi translated">构建一个小型服务器来连接 UI 和 DB</li><li id="7fc9" class="pb pc iq jp b jq pk ju pl jy pm kc pn kg po kk pg ph pi pj bi translated">制作一个小型电子应用程序包装器</li></ol><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi pp"><img src="../Images/c003107999946e1854a67118e24f400c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mdDmFu8ubqZE9qywnFfmzQ.png"/></div></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk">General App Layout</figcaption></figure><h1 id="c1d6" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">构建应用程序</h1><p id="271c" class="pw-post-body-paragraph jn jo iq jp b jq ml js jt ju mm jw jx jy mn ka kb kc mo ke kf kg mp ki kj kk ij bi translated">我们使用之前编写的 python 脚本作为节点版本的起点。我们做这种语言转换是因为我们最终想把这整个东西打包成一个 AppStore Mac 应用程序。Electron 使这个过程变得更容易，我们希望所有的代码都使用同一种语言。</p><p id="2b49" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，让我们创建一个电子应用程序 shell——一个 main.js 文件，它将打开一个窗口，监听本地主机和我们的 UI 将在 dev 中运行的端口。</p><figure class="kv kw kx ky gt kz"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="bc8e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们使用 express 来设置一个小型服务器。这个服务器应该返回应用程序的 html 页面，并且有两个端点——一个获取消息，一个获取最后的消息；iMessage 中的侧边栏。</p><figure class="kv kw kx ky gt kz"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="544f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您会注意到，这个服务器正在实例化我们尚未构建的 DataGrabber 类，这将是翻译后的 python 类。</p><p id="5576" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们构建它时，有一些变化，因为现在我们使用承诺来确保数据被返回，而不是依赖 python 的同步执行流。</p><figure class="kv kw kx ky gt kz"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="504d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些基本上是构建应用程序所需的所有部分，我们仍然需要大量的 CSS，JS 和 HTML 来制作 UI。如果读者感兴趣，我将把这个问题留给他们。</p><h1 id="4038" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">❓Questions 致读者</h1><ol class=""><li id="4bec" class="pb pc iq jp b jq ml ju mm jy pq kc pr kg ps kk pg ph pi pj bi translated">你认为我们能从谈话中提取出什么样的信息？</li><li id="259f" class="pb pc iq jp b jq pk ju pl jy pm kc pn kg po kk pg ph pi pj bi translated">我们如何做到这一点？</li><li id="3f21" class="pb pc iq jp b jq pk ju pl jy pm kc pn kg po kk pg ph pi pj bi translated">这样做的危险或好处是什么？</li><li id="28ae" class="pb pc iq jp b jq pk ju pl jy pm kc pn kg po kk pg ph pi pj bi translated">这些信息是人们想了解自己的吗？</li></ol><pre class="kv kw kx ky gt mq mr ms mt aw mu bi"><span id="e6d7" class="mv lo iq mr b gy mw mx l my mz">Thanks for getting through this adventure with me. Please show support and 👏 (clap) for this article.</span><span id="bae0" class="mv lo iq mr b gy pt mx l my mz">Remember you can clap up to 50 times, and clapping for this article would be really helpful in the Medium algorithm. </span><span id="1d63" class="mv lo iq mr b gy pt mx l my mz">Any support is greatly appreciated ❤️</span><span id="fd4a" class="mv lo iq mr b gy pt mx l my mz"><br/>Also, please answer the questions and add to the discussion below</span></pre></div></div>    
</body>
</html>