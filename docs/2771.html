<html>
<head>
<title>Black-Box Attacks on Perceptual Image Hashes with GANs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用 GANs 对感知图像哈希的黑盒攻击</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/black-box-attacks-on-perceptual-image-hashes-with-gans-cc1be11f277?source=collection_archive---------2-----------------------#2018-03-03">https://towardsdatascience.com/black-box-attacks-on-perceptual-image-hashes-with-gans-cc1be11f277?source=collection_archive---------2-----------------------#2018-03-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="65ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> tldr: </strong>这篇帖子演示了 GANs 能够以两种关键方式破解图像哈希算法:(1) <strong class="jp ir">反转攻击</strong>:从哈希合成原始图像(2) <strong class="jp ir">中毒攻击</strong>:合成任意自然图像分布的哈希冲突。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/5da3d1c4518876b11832e26c26f7c1b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_RT4M10OFKqmA8XYavEN3Q.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Diagram illustrating difference in hash space properties. <a class="ae lb" href="http://bertolami.com/index.php?engine=blog&amp;content=posts&amp;detail=perceptual-hashing" rel="noopener ugc nofollow" target="_blank">Image Credit</a>, Joe Bertolami</figcaption></figure><h2 id="170d" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">感知图像哈希背景</h2><p id="dea8" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">感知图像哈希(PIH)是基于图像外观的短十六进制字符串(例如“00081 c 3c 181818”)。感知图像散列，尽管是散列，但不是加密安全的散列。<strong class="jp ir">这是设计上的</strong>，因为 PIHs 的目标是对图像的微小变化(旋转、裁剪、伽玛校正、添加噪声、添加边框)保持平滑不变。这与加密散列函数形成对比，加密散列函数被设计用于非平滑性，并且如果任何单个比特改变，则完全改变。</p><p id="18c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下图片的感知散列仅因文本修改而略有改变，但它们的 md5 散列完全不同。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ma"><img src="../Images/d6c01a91b2045cf623f1d6604cfead0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a3lxk4Gv5BZj7Sr2t-2SJA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><a class="ae lb" href="https://github.com/jenssegers/imagehash" rel="noopener ugc nofollow" target="_blank">Image Credit</a>, Jens Segers</figcaption></figure><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="9398" class="lc ld iq mc b gy mg mh l mi mj">a_hash(original) = <!-- -->3c3e0e1a3a1e1e1e<br/>a_hash(modified) = <!-- -->3c3e0e3e3e1e1e1e</span><span id="688a" class="lc ld iq mc b gy mk mh l mi mj">md5(original) = 8d4e3391a3bca7...<br/>md5(modified) = c27baa59355d10...</span></pre><p id="743b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我不会过多地探究这些算法如何工作的细节:更多信息见(<a class="ae lb" href="https://www.hackerfactor.com/blog/?/archives/432-Looks-Like-It.html" rel="noopener ugc nofollow" target="_blank">此处</a>)。</p><p id="4d5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">尽管 PIHs 在加密方面并不可靠，但它仍被广泛用于隐私敏感的应用程序中。</p><h2 id="5d3d" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">哈希反转攻击</h2><p id="023b" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">因为感知图像散列具有将输入与输出相关联的平滑属性，所以我们可以用神经网络来建模这个过程及其逆过程。GANs 非常适合这个生成任务，特别是因为单个图像散列中有许多潜在的图像。gan 允许我们学习图像流形，并使模型能够探索这些不同但有效的图像分布输出。</p><p id="f2e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我训练<strong class="jp ir"> Pix2Pix </strong>网络(<a class="ae lb" href="https://arxiv.org/abs/1611.07004" rel="noopener ugc nofollow" target="_blank"> paper </a>，<a class="ae lb" href="https://github.com/affinelayer/pix2pix-tensorflow" rel="noopener ugc nofollow" target="_blank"> github </a>)来转换使用来自标准 python 哈希库的<code class="fe ml mm mn mc b">a_hash</code>函数计算的感知图像哈希，<strong class="jp ir">image hash</strong>(<a class="ae lb" href="https://github.com/jenssegers/imagehash" rel="noopener ugc nofollow" target="_blank">github</a>)。对于这个演示，我在<strong class="jp ir"> celebA </strong> faces 数据集上进行训练，尽管黑盒攻击是通用的，并且适用于其他数据集、图像分布和哈希函数。我将由<code class="fe ml mm mn mc b">a_hash</code>产生的图像散列排列到一个 2d 数组中，作为 pix2pix 模型的输入图像。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mo"><img src="../Images/8632eac2bfcad5e08c782ed956b10e22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zUIGRHkbPPE1-94fI4U16g.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Pix2Pix Model Setup. <a class="ae lb" href="https://affinelayer.com/pix2pix/" rel="noopener ugc nofollow" target="_blank">Image Credit</a> , <a class="ae lb" href="https://twitter.com/christophrhesse" rel="noopener ugc nofollow" target="_blank"><em class="mp">Christopher Hesse</em></a></figcaption></figure><p id="cd28" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是这种哈希反转攻击的一些结果。在许多情况下，攻击能够生成与原始图像相似的人脸，即使在失败的情况下，也常常代表原始图像的正确性别、发型和种族。注意:脸部纹理并不完美，因为模型没有完全收敛。这是使用谷歌的 <a class="ae lb" href="https://colab.research.google.com/" rel="noopener ugc nofollow" target="_blank"> <em class="mq"> Colab </em> </a> <em class="mq">工具在有限的计算资源上训练的。</em></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mr"><img src="../Images/82791a6185bf3a3ad96be2c2641fadeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lm-fKNhSRGQtnxgfBuWSEg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Left: 2D representation of the hash, Middle: Reconstructed Image, Right: Original Image</figcaption></figure><p id="cf64" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">许多应用程序认为这些散列是保护隐私的，但是上面的这些结果表明它们是可以逆转的。任何声称通过存储敏感图像哈希来保证安全的服务都是在误导用户，并存在遭受此类攻击的潜在风险。</p><h2 id="7199" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">哈希中毒攻击</h2><p id="ab71" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">哈希中毒攻击与以下场景相关:</p><blockquote class="ms mt mu"><p id="df3d" class="jn jo mq jp b jq jr js jt ju jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj kk ij bi translated">一个系统，允许用户提交照片到一个图像数据库，以禁止。一个人审查图像，以确保它是一个值得禁止的图像(并且图像是说，不是可口可乐的标志)。如果获得批准，该散列将被添加到数据库中，并在每次上传新图像时进行检查。如果这个新图像的哈希与被禁止的哈希冲突，图像将被阻止上传。</p></blockquote><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi my"><img src="../Images/a04be420dacea4aa5c7794bcd10a3132.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J5FCTUUjt74YymkdL_VqAQ.png"/></div></div></figure><p id="79cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果一个恶意用户以某种方式欺骗人类审查员接受可口可乐标志作为一个被禁图像，数据库可能会因包含本应共享的图像散列而“中毒”。事实上，我们只需要人类审查员接受一个与可口可乐标志有哈希冲突的图像！这个愚弄人类的任务可以通过我们学习到的生成模型来完成。</p><h2 id="b38b" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">哈希循环丢失，更强地保证哈希冲突</h2><p id="2a0c" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">在所描述的模型中，我们可以将散列转换成其原始图像的近似值。然而，这些生成的图像并不总是精确地散列回原始散列。为了成功地应用这种攻击，我们必须稍微修改 pix2pix 目标，以确保操作是正确可逆的，并将原始图像散列回真正的原始散列。</p><p id="beb6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在标准的 pix2pix 损失中增加了一个额外的哈希循环损失项。这将计算生成图像的哈希，并计算真实哈希和生成图像哈希之间的像素交叉熵损失。在有限的实验中，这个额外的损失项将生成的哈希冲突率从大约 30%提高到大约 80%。</p><h2 id="7c46" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">哈希碰撞攻击模型</h2><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mz"><img src="../Images/ed7fa6ea41b2d237eabbb4b1657d8189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dsnvYmX-5cLRjC6UcgZTSQ.png"/></div></div></figure><p id="6386" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上图展示了我们的网络生成一张与可口可乐标志有哈希冲突的脸的图像。这些共享相同的哈希，并允许用户毒化哈希数据库，并阻止公司徽标上传到平台。这里有一些更多的公司标志与生成的脸是哈希碰撞。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi na"><img src="../Images/d29c50355c01af8af6f7545af2375d98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*Tm4bBLXz0SrW_Ml3JJCdXg.png"/></div></figure><h2 id="2687" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">建议</h2><p id="b5e9" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">不要在隐私或内容敏感的应用中使用感知图像哈希！或者至少不要在没有一些额外安全措施的情况下存储它们。</p><p id="b1f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更安全的方案是为图像生成许多潜在的哈希(应用图像转换来创建新的哈希)，将这些哈希通过类似于<code class="fe ml mm mn mc b">md5</code>的可证明安全的哈希函数，并将这些哈希存储在您的数据库中，以便在匹配未来图像时进行检查。</p><p id="45e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一个潜在的解决方案是不公开正在使用哪个散列函数。但这是<strong class="jp ir">默默无闻的安全</strong>。它不能防止有权访问数据库或代码库的人逆转存储的散列或用详细的攻击毒害散列池。</p><h2 id="498f" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">笔记</h2><p id="41c2" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">感谢<a class="ae lb" href="http://www.duncanwilson.com/" rel="noopener ugc nofollow" target="_blank"> <em class="mq">邓肯·威尔逊</em> </a>，<a class="ae lb" href="https://github.com/igul222" rel="noopener ugc nofollow" target="_blank"> <em class="mq">伊桑·古尔拉贾尼</em> </a>，<a class="ae lb" href="http://people.csail.mit.edu/karthikn/" rel="noopener ugc nofollow" target="_blank"> <em class="mq">卡尔蒂克·纳拉西姆汉</em> </a> <em class="mq">，</em> <a class="ae lb" href="http://harinisuresh.com" rel="noopener ugc nofollow" target="_blank"> <em class="mq">哈里尼·苏雷什</em> </a> <em class="mq">，</em> <a class="ae lb" href="https://github.com/Edeleon4" rel="noopener ugc nofollow" target="_blank"> <em class="mq">爱德华多·德莱昂</em> </a> <em class="mq"> </em>对本工作的反馈和建议。感谢<a class="ae lb" href="https://twitter.com/christophrhesse" rel="noopener ugc nofollow" target="_blank"><em class="mq">Christopher Hesse</em></a>为伟大的 pix2pix 库，感谢<a class="ae lb" href="https://github.com/jenssegers/imagehash" rel="noopener ugc nofollow" target="_blank"> <em class="mq">延斯塞格斯</em> </a>为 imagehash python 库。</p><h1 id="0ec5" class="nb ld iq bd le nc nd ne lh nf ng nh lk ni nj nk ln nl nm nn lq no np nq lt nr bi translated">喜欢这篇文章吗？</h1><p id="521b" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated"><em class="mq">如果你喜欢这篇文章，请用</em>*拍手* <em class="mq">或分享告诉我。</em></p></div></div>    
</body>
</html>