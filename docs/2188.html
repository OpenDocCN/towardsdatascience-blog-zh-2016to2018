<html>
<head>
<title>The Origin of Jakartan</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">贾卡坦的起源</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-origin-of-jakartan-793f721369f6?source=collection_archive---------1-----------------------#2016-04-03">https://towardsdatascience.com/the-origin-of-jakartan-793f721369f6?source=collection_archive---------1-----------------------#2016-04-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="dd13" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用印度尼西亚2014年大选数据，免费可视化700万人的来源。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a6a71e7bf4f4a10b65bde932c6131643.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uwNW3HPAUf9H0kIvC_c7Iw.jpeg"/></div></div></figure><p id="0d54" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是大约2014年贾卡坦的家乡的地图。它仅包括迁移到雅加达的超过1，000人的始发城市，线宽与实际人数的对数值成比例，范围从10到10⁶.每种颜色代表它们目前的居住地:雅加达南部、北部、西部、东部或中部。你能猜出哪个颜色代表哪个吗？</p><h2 id="4b71" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">怎么开始的</h2><p id="cf6c" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">故事是这样的，我一直想对印度尼西亚选民名单数据做些什么，原因很简单:</p><ol class=""><li id="c669" class="ml mm iq kt b ku kv kx ky la mn le mo li mp lm mq mr ms mt bi translated">它是巨大的。准确地说，是188，268，423个独立选民。我不想用B字，因为它不是太大的东西。根据我在餐巾纸背面的计算，整个数据集实际上可以放入一个50美元的USB闪存盘。然而，对于一个公开可用的数据集来说，这仍然是了不起的！</li><li id="f8ab" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">这是公开的。实际上有点可怕的是，每个选民的名字<em class="mz">和</em>他们住在哪里(下至村一级)<em class="mz"> </em>本身可供任何人<a class="ae na" href="https://data.kpu.go.id/ss8.php" rel="noopener ugc nofollow" target="_blank">在</a>周围浏览，但如果它已经开放了，为什么不实际使用它，对吗？为了安全起见，我问了我的从事选举工作的非政府组织朋友和选举委员会的一名委员，他们确认名单本身确实是公开的，没有规定如何在选举范围之外使用。</li><li id="053f" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">很容易接近。这一次，它不是在一个PDF格式的错位影印表格里！</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/ba2f9803bcad2db3086484fdeaced3ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*XGaWXRE9DOEh-L6XKH6SPw.jpeg"/></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">Like, one Chrome Inspector and an overnight Python script away</figcaption></figure><p id="545d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以立即看到，虽然他们的详细地址、性别和年龄没有被列出(这是应该的)，但一个不寻常的变量是:出生地。当然，你可以很容易地从统计局的<a class="ae na" href="http://microdata.bps.go.id/mikrodata/index.php/catalog/2/datafile/F1" rel="noopener ugc nofollow" target="_blank">印度尼西亚2010年人口普查</a>中得到同样的而且编码更好的东西，他们会很乐意给你一些美元，但是你必须填写一张表格。呀。不，我们就刮刮看能刮多远。</p></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><h2 id="0613" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">欺骗性的简单部分</h2><p id="693d" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">唯一的问题是，我不知道如何轻松地处理数据，因为整个事情超出了我的笔记本电脑的能力。幸运的是，Google BigQuery来了！类似于:</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="3fd0" class="ln lo iq no b gy ns nt l nu nv">SELECT KELURAHAN, TEMPATLAHIR, COUNT(*) AS CNT FROM DPTS GROUP BY KELURAHAN, TEMPATLAHIR WHERE PROVINSI = 'DKI JAKARTA'</span></pre><p id="6606" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在15秒内给了我们这样的东西:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/3129ebaac5e1f82d74df65215cd85ec1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*odUaqHJD-_E2DmL_HsfZ4A.jpeg"/></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">I don’t want to disclose how many times I screwed up the SQL query</figcaption></figure><p id="5781" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然而，与任何数据探索实践一样，它从来没有那么容易。打开Rstudio或ipython笔记本，你会发现出生地一栏有多少唯一条目的问题:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/0195c97445ba93701ade32775298e63c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*OjB1BcyF29Qcch6RLLc_fQ.jpeg"/></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">For the purpose of this post, it looks fancier than R</figcaption></figure><p id="b865" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">120，000分为雅加达的5个部分，理想情况下应该产生大约24，000个独特的家乡名称，而不是几乎80，000个。整个印度尼西亚只有32个省，大约500个区和80，000个村庄。数据本身来源于国家身份数据库，该数据库被认为是生命、宇宙和一切事物的答案。他们用超级昂贵的电脑系统建立了整个银河系中每个印尼人的数据库。不会错的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/49d33dd6a58ee2917bd812ff0c909940.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KYxalFis2LdBsP5CmlHUOQ.jpeg"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">But I can be wrong about them.</figcaption></figure><p id="19c8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">遗憾的是，在Open Refine中打开数据集并运行聚类功能会给你带来坏消息。我几乎能听到程序在我耳边轻声低语，<em class="mz">“我知道这是什么感觉。你无能为力。记住这是计划的一部分。”</em></p><p id="9752" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">亲爱的善良的人们，你们所看到的是22，000+串拼写相似的地方中的一个。错别字是真的。实际上，我在选举委员会网站上查看了几十个，只是为了确保这不是我的刮刀在搞怪。<strong class="kt ir">在某个地方，不知何故，一个真正的政府官员在公民身份证中输入了JQKARTA、JUAKARTA、JAKARTAT或以上许多变体中的一个，而不是Jakarta作为他/她的出生地。</strong></p><p id="12fc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可能会认为他们实际上在系统中有下拉菜单而不是文本框。走吧。这是该死的雅加达，不是谷歌地图上的随机标记。它已经在那里叫了50年了。</p><p id="e386" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">更糟糕的是，构成出生地的并不总是一个城市。该值实际上从一个村庄的名称(没有任何其他地理标志)到一个国家。即使拼写正确，它也可能拼写不同(Singapura而不是Singapore)，缩写(Tanjung变成Tjg或Tj)，或者含糊不清(它是X村庄，城市，还是分区？那个省的还是另一个省的？).</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/9974f245e4eaf2a01f419c920d9314b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*lMAI1dZpU0gkiYaMla-aug.gif"/></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">all hail r/HighQualityGifs</figcaption></figure><p id="af5e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然数据是免费的，但我的时间不是。</p></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><h2 id="d9fe" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">继续前进</h2><p id="913b" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">最后，我希望这只是一个数据可视化练习。我要花好几个小时来清理那糟糕透顶的烂摊子。我选择了罪恶的全选，合并选择，然后关闭聚类窗口。我接受了那些相似名字的默认合并。</p><p id="fae8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">几分钟过去了，OpenRefine崩溃了。</p><p id="56d0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我只选择了有1000人来自始发地城市的那对，其余的都删掉了。愿数据科学之神原谅我，因为我犯了严重的罪。</p><p id="1692" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我将每一对居住地-家乡配对与我定制的、手工制作的、本地采购的地理编码器进行比对，该编码器的工作是将纬度和经度分配给每个地理区域。我还创建了一个额外的字段，包含人数的对数值，从一百万到一千人不等。经过几次手动编辑，我有了两个节点和边的CSV文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/9b6be69cc50dacc70ca263d406febdeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fvPjxpnFlNejXJwOewJqyQ.jpeg"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">Aww yiss.</figcaption></figure><p id="e58d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在让我们把它形象化！我总是对航线图情有独钟。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/f1a0e37910db7c7faf9ff59f3a3246ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0gJk6QYm_NDsLnoHu9SviA.jpeg"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">If only I can afford something beyond zero-mileage promo ticket.</figcaption></figure><p id="b192" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们看看这样做是否有意义。启动<a class="ae na" href="https://gephi.org/" rel="noopener ugc nofollow" target="_blank"> Gephi </a>，将节点文件加载到节点数据库，将边文件加载到边数据库。这是一件轻而易举的事。将新创建的日志值指定为边权重。安装GeoLayout插件，分配纬度和经度列。单击应用。嘣。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/911f717646b0343be1146c945d26ad0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p0TeiF3JgfRS3KEODXBC0A.jpeg"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">We’re on to something!</figcaption></figure><p id="aba6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，将这个漂亮的东西导出到一个制图平台，将其覆盖在一个同样漂亮的底图上，实际上是有意义的。不幸的是，最新版本打破了唯一的Shapefile导出插件，该插件自2013年以来一直没有更新。好了，剩下唯一要做的事情就是将图片导出为4000x4000 PNG格式，并使用盗版照片手动覆盖它…我的意思是，你可以选择免费的图像编辑程序。你完了！</p><h2 id="4aca" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">但是为什么不把它变成互动的呢</h2><p id="51de" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">是的，你可以使用CartoDB来绘制它，即使是在免费帐户上。上传两个相同的文件，从节点层创建一个新的地图，感谢他们的<a class="ae na" href="http://blog.cartodb.com/jets-and-datelines/" rel="noopener ugc nofollow" target="_blank">便捷教程</a>，在SQL选项卡上使用它:</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="4e51" class="ln lo iq no b gy ns nt l nu nv">SELECT a2.cartodb_id,<br/> a2.name,r.dest,r.cnt,r.origin,r.log,ST_Transform(<br/> ST_Segmentize(<br/> ST_Makeline(<br/> a2.the_geom, <br/> a1.the_geom<br/> )::geography, <br/> 100000<br/> )::geometry,<br/> 3857<br/> ) as the_geom_webmercator<br/>FROM node a1<br/>JOIN edges r ON r.source = a1.id<br/>JOIN node a2 ON r.target = a2.id</span></pre><p id="9322" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面的脚本将从每个城市对创建大圆线。我再次应用了一些额外的样式规则，根据对数值改变线条的粗细，并根据住所区分线条的颜色。现在你可以平移和缩放了！将光标悬停在线上，您可以看到家乡名称以及编号。嵌入的地图可能对你的手机屏幕来说太小了，但是你可以在这里访问全屏版本<a class="ae na" href="https://ryanurzha.cartodb.com/viz/778ae306-f929-11e5-a4a7-0e674067d321/public_map" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">Things rarely looks bad on CartoDB.</figcaption></figure></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><h2 id="6456" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">最后的想法</h2><p id="d3e1" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">老实说，这几千个错别字的事情是个败笔。如果一开始就没有这个疯狂的问题，地图看起来会酷得多。不过，考虑到所有的事情，我认为这仍然是一个有趣的dataviz迷你项目，它使用完全免费的软件和服务，从一个用于完全不同目的的数据集开始。</p><p id="0999" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">几个月后，数以百万计的贾卡坦人将体验穆迪克，即在开斋节回到家乡的仪式。那些活着的人将再次回到他们出生的地方，他们的家人生活的地方。这不仅仅是一个传统，而是一种逐渐消失的与千里之外的地方的联系，在那里他们曾经开始了漫长的旅程，</p><p id="0649" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">曾经被称为家的地方。</p></div></div>    
</body>
</html>