<html>
<head>
<title>Data Visualization in Python like in R’s ggplot2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的数据可视化，如 R 的 ggplot2</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-visualization-in-python-like-in-rs-ggplot2-bc62f8debbf5?source=collection_archive---------5-----------------------#2018-05-14">https://towardsdatascience.com/data-visualization-in-python-like-in-rs-ggplot2-bc62f8debbf5?source=collection_archive---------5-----------------------#2018-05-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="019e" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">教程 PYTHON 数据可视化</h2><div class=""/><div class=""><h2 id="161b" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">一步一步的教程如何创建一个基本的图表到一个出版就绪的 dataviz 图表</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/3d5c86255059405abdd7b3a174aa3471.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I1l2WfFAdDKgGTK_pFCUhQ.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Photo by <a class="ae lh" href="https://www.pexels.com/@faaiq-ackmerd-383634?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">faaiq ackmerd</a> from <a class="ae lh" href="https://www.pexels.com/photo/photo-of-night-sky-1025469/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="0c9d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你喜欢用 R 的<a class="ae lh" href="http://ggplot2.tidyverse.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd"> ggplot2 </strong> </a>来绘制数据，但是你必须使用 Python，那么<a class="ae lh" href="http://plotnine.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd"> plotnine </strong> </a>包作为<a class="ae lh" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd"> matplotlib </strong> </a>的替代包是值得研究的。在这篇文章中，我将向你展示如何开始使用 plotnine 进行高效的输出。</p><p id="c5f0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你想继续，请在 GitHub 上找到完整的脚本:</p><div class="me mf gp gr mg mh"><a href="https://github.com/scheithauer/python-plotnine" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd jd gy z fp mm fr fs mn fu fw jc bi translated">scheithauer/python-plotnine</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">python 中的数据可视化，就像 R 的 ggplot2 一样</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">github.com</p></div></div></div></a></div><h2 id="af52" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">ggplot2</h2><blockquote class="ni nj nk"><p id="f6fd" class="li lj nl lk b ll lm kd ln lo lp kg lq nm ls lt lu nn lw lx ly no ma mb mc md im bi translated">ggplot2 是一个基于<a class="ae lh" href="http://amzn.to/2ef1eWp" rel="noopener ugc nofollow" target="_blank">图形</a>语法的声明式创建图形的系统。您提供数据，告诉 ggplot2 如何将变量映射到美学，使用什么图形原语，它负责处理细节。资料来源:http://ggplot2.tidyverse.org/</p></blockquote><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi np"><img src="../Images/c6af19ea9d7d0ab6b653b56e05dadfa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*BxSzslwMvyDUjHFAFUtEmg.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">ggplot output; <a class="ae lh" href="http://ggplot2.tidyverse.org/reference/figures/README-example-1.png" rel="noopener ugc nofollow" target="_blank">http://ggplot2.tidyverse.org/reference/figures/README-example-1.png</a></figcaption></figure><h2 id="9eb6" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">plotnine 作为 python 的 matplotlib 的替代</h2><p id="0ea3" class="pw-post-body-paragraph li lj it lk b ll nq kd ln lo nr kg lq lr ns lt lu lv nt lx ly lz nu mb mc md im bi translated">根据我的经验，ggplot2 的优势是实现了图形的<em class="nl">语法</em>。</p><p id="43d7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="http://plotnine.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> plotnine </a>是由<a class="ae lh" href="https://github.com/has2k1" rel="noopener ugc nofollow" target="_blank">哈桑·基比瑞吉</a>为 python 编写的图形语法，它给 Python 带来了同样的优势:更少的编码和更容易理解(声明性范例)。</p><h2 id="400d" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">安装绘图仪</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="07ab" class="mq mr it nw b gy oa ob l oc od"># Using pip<br/>$ pip install plotnine         # 1. should be sufficient for most<br/>$ pip install 'plotnine[all]'  # 2. includes extra/optional packages<br/><br/># Or using conda<br/>$ conda install -c conda-forge plotnine</span></pre><h2 id="4b78" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">可视化数据</h2><p id="b7ee" class="pw-post-body-paragraph li lj it lk b ll nq kd ln lo nr kg lq lr ns lt lu lv nt lx ly lz nu mb mc md im bi translated">我用的<strong class="lk jd"/><a class="ae lh" href="https://github.com/nickhould/craft-beers-dataset" rel="noopener ugc nofollow" target="_blank"><strong class="lk jd">craft-beers-dataset</strong></a><strong class="lk jd"/>出自<a class="oe of ep" href="https://medium.com/u/cd11ab450571?source=post_page-----bc62f8debbf5--------------------------------" rel="noopener" target="_blank"> Jean-Nicholas Hould </a>。它包含了 2410 种美国精酿啤酒的信息。这些信息包括:</p><ul class=""><li id="7112" class="og oh it lk b ll lm lo lp lr oi lv oj lz ok md ol om on oo bi translated"><strong class="lk jd">abv</strong>——酒精的体积含量，0 表示无酒精，1 表示纯酒精</li><li id="3459" class="og oh it lk b ll op lo oq lr or lv os lz ot md ol om on oo bi translated">国际苦味单位，描述一种饮料有多苦。</li><li id="b9f4" class="og oh it lk b ll op lo oq lr or lv os lz ot md ol om on oo bi translated"><strong class="lk jd">名称</strong> —啤酒的名称。</li><li id="e748" class="og oh it lk b ll op lo oq lr or lv os lz ot md ol om on oo bi translated"><strong class="lk jd">风格</strong> —啤酒风格(lager、ale、IPA 等。)</li><li id="923c" class="og oh it lk b ll op lo oq lr or lv os lz ot md ol om on oo bi translated"><strong class="lk jd"> brewery_id </strong> —生产该啤酒的啤酒厂的唯一标识符</li><li id="1c95" class="og oh it lk b ll op lo oq lr or lv os lz ot md ol om on oo bi translated"><strong class="lk jd">盎司</strong> —啤酒的盎司数。</li></ul><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ou"><img src="../Images/d26437323bc897f7d1a69345b9a3ce90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tWtuqQsejkQawlPx79B3MQ.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Data set example entries</figcaption></figure><p id="31ec" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">安装必要的库</strong></p><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="16eb" class="mq mr it nw b gy oa ob l oc od">import pandas as pd<br/>import numpy as np<br/>from plotnine import *</span></pre><p id="cc22" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">定义有用的常数</strong></p><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="69bf" class="mq mr it nw b gy oa ob l oc od">c_remote_data ='<a class="ae lh" href="https://raw.githubusercontent.com/nickhould/craft-beers-dataset/master/data/processed/beers.csv'" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/nickhould/craft-beers-dataset/master/data/processed/beers.csv'</a><br/>c_col = ["#2f4858", "#f6ae2d", "#f26419",<br/>         "#33658a", "#55dde0", "#2f4858",<br/>         "#2f4858", "#f6ae2d", "#f26419",<br/>         "#33658a", "#55dde0", "#2f4858"]</span></pre><p id="29ea" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">有用的功能</strong></p><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="c647" class="mq mr it nw b gy oa ob l oc od">def labels(from_, to_, step_):<br/>    return pd.Series(np.arange(from_, to_ + step_, step_)).apply(lambda x: '{:,}'.format(x)).tolist()</span><span id="0b76" class="mq mr it nw b gy ov ob l oc od">def breaks(from_, to_, step_):<br/>    return pd.Series(np.arange(from_, to_ + step_, step_)).tolist()</span></pre><p id="3eec" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">读取数据并设置索引</strong></p><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="6bf9" class="mq mr it nw b gy oa ob l oc od">data = pd.read_csv(c_remote_data)</span><span id="5573" class="mq mr it nw b gy ov ob l oc od">data = (<br/>    data.filter([<br/>        'abv',<br/>        'ibu',<br/>        'id',<br/>        'name',<br/>        'style',<br/>        'brewery_id',<br/>        'ounces'<br/>    ]).<br/>    set_index('id')<br/>)</span></pre><h1 id="cd16" class="ow mr it bd ms ox oy oz mv pa pb pc my ki pd kj nb kl pe km ne ko pf kp nh pg bi translated">柱状图</h1><h2 id="4988" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">最初的</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="7370" class="mq mr it nw b gy oa ob l oc od">fig = (<br/>    ggplot(data.dropna(subset = ['abv'])) +<br/>    geom_histogram(aes(x = 'abv'))<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/0d14c13e37690088004389928def6ec6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*tPMfxnK6Ph0oY5hoItM7Mg.jpeg"/></div></figure><h2 id="8406" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">添加颜色</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="f6c1" class="mq mr it nw b gy oa ob l oc od">fig = (<br/>    ggplot(data.dropna(subset = ['abv'])) +<br/>    geom_histogram(<br/>        aes(x = 'abv'),<br/>        <strong class="nw jd">fill = c_col[0], color = 'black'</strong><br/>    )<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/fbf5a97c3beced515ab2845567ff99eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*icV7FRXgIjTrUU4nZ-v3Rw.jpeg"/></div></figure><h2 id="6e4f" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">添加标签</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="8752" class="mq mr it nw b gy oa ob l oc od">fig = (<br/>    ggplot(data.dropna(subset = ['abv'])) +<br/>    geom_histogram(<br/>        aes(x = 'abv'),<br/>        fill = c_col[0], color = 'black'<br/>    ) <strong class="nw jd">+<br/>    labs(<br/>        title ='Distribution of The alcoholic content by volume (abv)',<br/>        x = 'abv - The alcoholic content by volume',<br/>        y = 'Count',<br/>    )</strong><br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/2eef14a0807ea9ef643e7eb0c4f16b50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*k7r08uTtfambYPU9M_E_kw.jpeg"/></div></figure><h2 id="21ad" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">设置轴缩放比例</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="40f9" class="mq mr it nw b gy oa ob l oc od">fig = (<br/>    ggplot(data.dropna(subset = ['abv'])) +<br/>    geom_histogram(<br/>        aes(x = 'abv'),<br/>        fill = c_col[0], color = 'black'<br/>    ) +<br/>    labs(<br/>        title ='Distribution of The alcoholic content by volume (abv)',<br/>        x = 'abv - The alcoholic content by volume',<br/>        y = 'Count',<br/>    ) <strong class="nw jd">+<br/>    scale_x_continuous(<br/>        limits = (0, 0.14),<br/>        labels = labels(0, 0.14, 0.02),<br/>        breaks = breaks(0, 0.14, 0.02)<br/>    ) +<br/>    scale_y_continuous(<br/>        limits = (0, 350),<br/>        labels = labels(0, 350, 50),<br/>        breaks = breaks(0, 350, 50)<br/>    )</strong><br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/b652f3bdc609290f8d374e4c5ef7f7eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*BN6Vs2VY7KZ6h6hntt6zQg.jpeg"/></div></figure><h2 id="61b1" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">应用一个可用的主题</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="36c5" class="mq mr it nw b gy oa ob l oc od"><strong class="nw jd">theme_set(<br/>    theme_538()<br/>) </strong># one time call</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/0d0b245f8b969ff647c393f30de800ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*u0i-Uvv9TIRkTf-NVl32aA.jpeg"/></div></figure><h2 id="a7cd" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">更改一些主题功能</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="2eb8" class="mq mr it nw b gy oa ob l oc od">theme_set(<br/>    theme_538() <strong class="nw jd">+<br/>    theme(<br/>        figure_size = (8, 4),<br/>        text = element_text(<br/>            size = 8,<br/>            color = 'black',<br/>            family = 'Arial'<br/>        ),<br/>        plot_title = element_text(<br/>            color = 'black',<br/>            family = 'Arial',<br/>            weight = 'bold',<br/>            size = 12<br/>        ),<br/>        axis_title = element_text(<br/>            color = 'black',<br/>            family = 'Arial',<br/>            weight = 'bold',<br/>            size = 6<br/>        ),<br/>    )</strong><br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/aade7a1d2e23db56a8fb855c5e782dd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*TGmweCsBMsKToyvTIlv86Q.jpeg"/></div></figure><h2 id="7bbf" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">添加一些统计数据</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="fda6" class="mq mr it nw b gy oa ob l oc od">fig = (<br/>    ggplot(data.dropna(subset = ['abv'])) +<br/>    geom_histogram(<br/>        aes(x = 'abv'),<br/>        fill = c_col[0], color = 'black'<br/>    ) +<br/>    labs(<br/>        title ='Distribution of The alcoholic content by volume (abv)',<br/>        x = 'abv - The alcoholic content by volume (<strong class="nw jd">median = dashed line; mean = solid line)</strong>',<br/>        y = 'Count',<br/>    ) +<br/>    scale_x_continuous(<br/>        limits = (0, 0.14),<br/>        labels = labels(0, 0.14, 0.02),<br/>        breaks = breaks(0, 0.14, 0.02)<br/>    ) +<br/>    scale_y_continuous(<br/>        limits = (0, 350),<br/>        labels = labels(0, 350, 50),<br/>        breaks = breaks(0, 350, 50)<br/>    ) <strong class="nw jd">+<br/>    geom_vline(aes(xintercept = data.abv.mean()), color = 'gray') +<br/>    geom_vline(aes(xintercept = data.abv.median()), linetype = 'dashed', color = 'gray')</strong><br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/32de4c34f8edac1ab0aabff4c25c71e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*cwjkhwVK4kP9fdJnoVutcg.jpeg"/></div></figure><h2 id="fc1f" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">刻面</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="fe9e" class="mq mr it nw b gy oa ob l oc od">fig = (<br/>    ggplot(data.dropna(subset = ['abv', 'style'])[data['style'].dropna().str.contains('American')]) +<br/>    geom_histogram(<br/>        aes(x = 'abv'),<br/>        fill = c_col[0], color = 'black'<br/>    ) +<br/>    labs(<br/>        title ='Distribution of The alcoholic content by volume (abv)',<br/>        x = 'abv - The alcoholic content by volume',<br/>        y = 'Count',<br/>    ) +<br/>    scale_x_continuous(<br/>        limits = (0, 0.14),<br/>        labels = labels(0, 0.14, 0.07),<br/>        breaks = breaks(0, 0.14, 0.07)<br/>    ) +<br/>    scale_y_continuous(<br/>        limits = (0, 300),<br/>        labels = labels(0, 300, 100),<br/>        breaks = breaks(0, 300, 100)<br/>    ) <strong class="nw jd">+<br/>    theme(figure_size = (8, 12)) +<br/>    facet_wrap('~style', ncol = 4)</strong><br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/094bef4bab961253b33cab686092ce24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*Ej6uhxymJliuL-rXBXX6FA.jpeg"/></div></figure><h1 id="00fb" class="ow mr it bd ms ox oy oz mv pa pb pc my ki pd kj nb kl pe km ne ko pf kp nh pg bi translated">散点图</h1><h2 id="e674" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">最初的</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="ed6b" class="mq mr it nw b gy oa ob l oc od">fig = (<br/>    ggplot(data.dropna(subset = ['abv'])) +<br/>    geom_point(<br/>        aes(x = 'abv',<br/>            y = 'ibu'),<br/>        fill = c_col[0], color = 'black'<br/>    ) +<br/>    labs(<br/>        title ='Relationship between alcoholic content (abv) and int. bittering untis (ibu)',<br/>        x = 'abv - The alcoholic content by volume',<br/>        y = 'ibu - International bittering units',<br/>    ) +<br/>    scale_x_continuous(<br/>        limits = (0, 0.14),<br/>        labels = labels(0, 0.14, 0.02),<br/>        breaks = breaks(0, 0.14, 0.02)<br/>    )  +<br/>    scale_y_continuous(<br/>        limits = (0, 150),<br/>        labels = labels(0, 150, 30),<br/>        breaks = breaks(0, 150, 30)<br/>    )<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/a485bc8eaf469c0ccba3efab8295ca1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*bcL4eMH-adj4NZ-TOd5oBA.jpeg"/></div></figure><h2 id="293b" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">将磅值更改为变量</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="2141" class="mq mr it nw b gy oa ob l oc od">fig = (<br/>    ggplot(data.dropna(subset = ['abv'])) +<br/>    geom_point(<br/>        aes(x = 'abv',<br/>            y = 'ibu',<br/>            <strong class="nw jd">size = 'ounces'</strong>),<br/>        fill = c_col[0], color = 'black'<br/>    ) +<br/>    labs(<br/>        title ='Relationship between alcoholic content (abv) and int. bittering untis (ibu)',<br/>        x = 'abv - The alcoholic content by volume',<br/>        y = 'ibu - International bittering units',<br/>    ) +<br/>    scale_x_continuous(<br/>        limits = (0, 0.14),<br/>        labels = labels(0, 0.14, 0.02),<br/>        breaks = breaks(0, 0.14, 0.02)<br/>    )  +<br/>    scale_y_continuous(<br/>        limits = (0, 150),<br/>        labels = labels(0, 150, 30),<br/>        breaks = breaks(0, 150, 30)<br/>    )<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pk"><img src="../Images/0e08b1107432d3ddef34271cb36c2d88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EphgM5TQ38FkHZJJLxbv8w.jpeg"/></div></div></figure><h2 id="692e" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">将点颜色更改为变量</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="1c93" class="mq mr it nw b gy oa ob l oc od"><strong class="nw jd">data['ounces_str'] = data['ounces']<br/>data['ounces_str'] = data['ounces_str'].apply(str)</strong></span><span id="540a" class="mq mr it nw b gy ov ob l oc od">fig = (<br/>    ggplot(data.dropna(subset = ['abv'])) +<br/>    geom_point(<br/>        aes(x = 'abv',<br/>            y = 'ibu',<br/>            <strong class="nw jd">fill = 'ounces_str'</strong>),<br/>        <strong class="nw jd">alpha = 0.5</strong>,<br/>        color = 'black'<br/>    ) +<br/>    labs(<br/>        title ='Relationship between alcoholic content (abv) and int. bittering untis (ibu)',<br/>        x = 'abv - The alcoholic content by volume',<br/>        y = 'ibu - International bittering units',<br/>    ) +<br/>    scale_fill_manual(<br/>        name = 'Ounces',<br/>        values = c_col) +<br/>    scale_x_continuous(<br/>        limits = (0, 0.14),<br/>        labels = labels(0, 0.14, 0.02),<br/>        breaks = breaks(0, 0.14, 0.02)<br/>    )  +<br/>    scale_y_continuous(<br/>        limits = (0, 150),<br/>        labels = labels(0, 150, 30),<br/>        breaks = breaks(0, 150, 30)<br/>    )<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pl"><img src="../Images/528a05ed87c58ebd04ba27eb7daed05f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xYiKa-jyp0WvZHDy2rxADg.jpeg"/></div></div></figure><h2 id="a6cd" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">添加线性回归线</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="cda4" class="mq mr it nw b gy oa ob l oc od">fig = (<br/>    ggplot(data.dropna(subset = ['abv'])) +<br/>    geom_point(<br/>        aes(x = 'abv',<br/>            y = 'ibu',<br/>            fill = 'ounces_str'),<br/>        alpha = 0.5,<br/>        color = 'black'<br/>    ) <strong class="nw jd">+<br/>    geom_smooth(<br/>        aes(x = 'abv',<br/>            y = 'ibu')<br/>    )</strong> +<br/>    labs(<br/>        title ='Relationship between alcoholic content (abv) and int. bittering untis (ibu)',<br/>        x = 'abv - The alcoholic content by volume',<br/>        y = 'ibu - International bittering units',<br/>    ) +<br/>    scale_fill_manual(<br/>        name = 'Ounces',<br/>        values = c_col) +<br/>    scale_x_continuous(<br/>        limits = (0, 0.14),<br/>        labels = labels(0, 0.14, 0.02),<br/>        breaks = breaks(0, 0.14, 0.02)<br/>    )  +<br/>    scale_y_continuous(<br/>        limits = (0, 150),<br/>        labels = labels(0, 150, 30),<br/>        breaks = breaks(0, 150, 30)<br/>    )<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pl"><img src="../Images/9fc3ad0420d3ad6b125666a9fc88ddaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eFqx61_hNUMaRQHRhjahCQ.jpeg"/></div></div></figure><h2 id="1a82" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">刻面</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="5537" class="mq mr it nw b gy oa ob l oc od">fig = (<br/>    ggplot(data.dropna(subset = ['abv'])) +<br/>    geom_jitter(<br/>        aes(x = 'abv',<br/>            y = 'ibu',<br/>            fill = 'ounces_str'),<br/>        width = 0.0051,<br/>        height = 5,<br/>        color = 'black'<br/>    ) +<br/>    labs(<br/>        title ='Relationship between alcoholic content (abv) and int. bittering untis (ibu)',<br/>        x = 'abv - The alcoholic content by volume',<br/>        y = 'ibu - International bittering units',<br/>    ) +<br/>    scale_fill_manual(<br/>        guide = False,<br/>        name = 'Ounces',<br/>        values = c_col) +<br/>    scale_x_continuous(<br/>        limits = (0, 0.14),<br/>        labels = labels(0, 0.14, 0.02),<br/>        breaks = breaks(0, 0.14, 0.02)<br/>    )  +<br/>    scale_y_continuous(<br/>        limits = (0, 150),<br/>        labels = labels(0, 150, 30),<br/>        breaks = breaks(0, 150, 30)<br/>    ) <strong class="nw jd">+<br/>    facet_wrap('ounces_str')</strong><br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/2cc5ddb808f9787a59ea2a4bdcc5eaa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*gKR6AO4sTyX-nLBHVc9rhw.jpeg"/></div></figure><h1 id="8af7" class="ow mr it bd ms ox oy oz mv pa pb pc my ki pd kj nb kl pe km ne ko pf kp nh pg bi translated">热图</h1><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="f1c4" class="mq mr it nw b gy oa ob l oc od">fig = (<br/>    ggplot(data.dropna(subset = ['abv'])) +<br/>    <strong class="nw jd">geom_bin2d</strong>(<br/>        aes(x = 'abv',<br/>            y = 'ibu')<br/>    ) +<br/>    labs(<br/>        title ='Relationship between alcoholic content (abv) and int. bittering untis (ibu)',<br/>        x = 'abv - The alcoholic content by volume',<br/>        y = 'ibu - International bittering units',<br/>    ) +<br/>    scale_x_continuous(<br/>        limits = (0, 0.14),<br/>        labels = labels(0, 0.14, 0.02),<br/>        breaks = breaks(0, 0.14, 0.02)<br/>    )  +<br/>    scale_y_continuous(<br/>        limits = (0, 150),<br/>        labels = labels(0, 150, 30),<br/>        breaks = breaks(0, 150, 30)<br/>    ) <strong class="nw jd">+<br/>    theme(figure_size = (8, 8))</strong><br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pm"><img src="../Images/e3651e071e58c0f8da1bf99f2ceee1d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m7Vk_OmTwY2SmevddjrUKg.jpeg"/></div></div></figure><h1 id="f55f" class="ow mr it bd ms ox oy oz mv pa pb pc my ki pd kj nb kl pe km ne ko pf kp nh pg bi translated">箱线图</h1><h2 id="4c60" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">通用箱线图</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="7ecb" class="mq mr it nw b gy oa ob l oc od">fig = (<br/>    ggplot(data.dropna(subset = ['abv'])) +<br/>    <strong class="nw jd">geom_boxplot</strong>(<br/>        aes(x = 'ounces_str',<br/>            y = 'abv')<br/>    ) +<br/>    labs(<br/>        title ='Distribution of alcoholic content (abv) by size',<br/>        x = 'size in ounces',<br/>        y = 'abv - The alcoholic content by volume',<br/>    ) +<br/>    scale_y_continuous(<br/>        limits = (0, 0.14),<br/>        labels = labels(0, 0.14, 0.02),<br/>        breaks = breaks(0, 0.14, 0.02)<br/>    )<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/4c715f12abe11e7697da3eb797d1d5af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*cFwgQk3YTZx_UBJGzDYTHQ.jpeg"/></div></figure><h2 id="5234" class="mq mr it bd ms mt mu dn mv mw mx dp my lr mz na nb lv nc nd ne lz nf ng nh iz bi translated">小提琴盒图</h2><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="42d1" class="mq mr it nw b gy oa ob l oc od">fig = (<br/>    ggplot(data.dropna(subset = ['abv'])) +<br/>    <strong class="nw jd">geom_violin</strong>(<br/>        aes(x = 'ounces_str',<br/>            y = 'abv'),<br/>        fill = c_col[0]<br/>    ) +<br/>    labs(<br/>        title ='Distribution of alcoholic content (abv) by size',<br/>        x = 'size in ounces',<br/>        y = 'abv - The alcoholic content by volume',<br/>    ) +<br/>    scale_y_continuous(<br/>        limits = (0, 0.14),<br/>        labels = labels(0, 0.14, 0.02),<br/>        breaks = breaks(0, 0.14, 0.02)<br/>    )<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/e4bdaea757f071594ec02696ed59e5f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*rviIg59alVfV0CzyFA-Vew.jpeg"/></div></figure><h1 id="8574" class="ow mr it bd ms ox oy oz mv pa pb pc my ki pd kj nb kl pe km ne ko pf kp nh pg bi translated">结论</h1><p id="4633" class="pw-post-body-paragraph li lj it lk b ll nq kd ln lo nr kg lq lr ns lt lu lv nt lx ly lz nu mb mc md im bi translated">plotnine 提供了各种不同的可视化，很容易适应定制的输出。如果你有在 R 中使用 ggplot 的经验，那么切换到 plotnine 是毫不费力的。</p><p id="a047" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">点击此处查看更多我的文章</strong>:</p><ol class=""><li id="e68d" class="og oh it lk b ll lm lo lp lr oi lv oj lz ok md po om on oo bi translated"><a class="ae lh" href="https://medium.com/technical-excellence/article-pipeline-management-with-notion-app-template-13e83635ed1" rel="noopener">了解我如何为媒体设计文章</a></li><li id="5934" class="og oh it lk b ll op lo oq lr or lv os lz ot md po om on oo bi translated"><a class="ae lh" href="https://medium.com/technical-excellence/article-pipeline-management-with-notion-app-template-13e83635ed1" rel="noopener">了解如何使用链接(或管道)在 Python 中编写干净的代码</a></li><li id="9077" class="og oh it lk b ll op lo oq lr or lv os lz ot md po om on oo bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/nine-years-on-linkedin-in-data-b34047c77223">学习如何使用 R 分析你的 LinkedIn 数据</a></li><li id="95a8" class="og oh it lk b ll op lo oq lr or lv os lz ot md po om on oo bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/data-visualization-in-python-like-in-rs-ggplot2-bc62f8debbf5">学习如何使用图形语法在 Python 中以描述性的方式创建图表</a></li><li id="7586" class="og oh it lk b ll op lo oq lr or lv os lz ot md po om on oo bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/how-to-setup-logging-for-your-python-notebooks-in-under-2-minutes-2a7ac88d723d">了解如何在两分钟内用 python 数据科学代码设置日志</a></li></ol></div><div class="ab cl pp pq hx pr" role="separator"><span class="ps bw bk pt pu pv"/><span class="ps bw bk pt pu pv"/><span class="ps bw bk pt pu"/></div><div class="im in io ip iq"><p id="9d20" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Gregor Scheithauer 是一名顾问、数据科学家和研究员。他专门研究流程挖掘、业务流程管理和分析。你可以在<a class="ae lh" href="https://www.linkedin.com/in/gscheithauer/" rel="noopener ugc nofollow" target="_blank"><strong class="lk jd">LinkedIn</strong></a><a class="ae lh" href="https://twitter.com/gscheithauer" rel="noopener ugc nofollow" target="_blank"><strong class="lk jd">Twitter</strong></a>上和他联系，或者在<a class="ae lh" href="https://gscheithauer.medium.com/" rel="noopener"> <strong class="lk jd">中</strong> </a>上这里。谢谢大家！</p></div></div>    
</body>
</html>