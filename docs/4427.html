<html>
<head>
<title>Five Python Tricks You Need to Know Today</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">今天你需要知道的五个 Python 技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/five-python-tricks-you-need-to-learn-today-9dbe03c790ab?source=collection_archive---------1-----------------------#2018-08-15">https://towardsdatascience.com/five-python-tricks-you-need-to-learn-today-9dbe03c790ab?source=collection_archive---------1-----------------------#2018-08-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="4a20" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">无论你是高级人工智能工程师还是一年级生物学生，你都会在某个时候碰到 Python 编程语言。Python 于 1991 年首次发布，很快成为程序员和技术人员最喜欢使用的语言。根据高收入国家的堆栈溢出问题视图，Python 正迅速成为最受欢迎的语言选择。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/171bc32284af6c5bd3fe2f6789702d73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6urjmJjozuH-TaMb0-xfZg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk"><a class="ae le" href="https://stackoverflow.blog/2017/09/06/incredible-growth-python/" rel="noopener ugc nofollow" target="_blank">The Incredible Growth of Python</a>- David Robinson</figcaption></figure><p id="e3a0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">作为一种语法相对简单的高级解释语言，Python 对于那些没有编程经验的人来说是完美的。流行的 Python 库被很好地集成并用于不同的领域，如生物信息学(<a class="ae le" href="http://biopython.org" rel="noopener ugc nofollow" target="_blank"> biopython </a>)、数据科学(<a class="ae le" href="http://pandas.pydata.org" rel="noopener ugc nofollow" target="_blank">熊猫</a>)、机器学习(<a class="ae le" href="https://keras.io/" rel="noopener ugc nofollow" target="_blank"> keras </a> / <a class="ae le" href="https://www.tensorflow.org/" rel="noopener ugc nofollow" target="_blank"> tensorflow </a>)甚至天文学(<a class="ae le" href="http://www.astropy.org" rel="noopener ugc nofollow" target="_blank"> astropy </a>)。在学习了 C 和 Java 作为我的第一门编程语言后，我能够在谷歌搜索的几周内自学 Python。尽管执行速度比 Java 和其他语言慢得多，但 Python 实际上通过良好构建的流程集成特性提高了生产率。</p><p id="0e3a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们开始之前，我强烈推荐你去看看 Dan Bader 的<a class="ae le" href="https://dbader.org/products/python-tricks-book/" rel="noopener ugc nofollow" target="_blank"> Python 技巧书</a>。在他的书中，Dan 分享了一些非常有用的技巧和窍门，告诉我们如何用 Python 更有效地编码。如果你对 Python 一无所知，我强烈建议你开始学习 Code Academy 的<a class="ae le" href="https://www.codecademy.com/learn/learn-python" rel="noopener ugc nofollow" target="_blank"> Learn Python </a>互动课程。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><p id="b308" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">招数№1:强大的俏皮话</strong></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="d3cf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您是否厌倦了通读一行行代码并迷失在条件语句中？Python 一行程序可能正是您正在寻找的。例如，条件语句</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="7d99" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt; if</strong> alpha &gt; 7:<br/><strong class="lp iu">&gt;&gt;&gt;    </strong>beta = 999<br/><strong class="lp iu">&gt;&gt;&gt; elif</strong> alpha == 7:<br/><strong class="lp iu">&gt;&gt;&gt;    </strong>beta = 99<br/><strong class="lp iu">&gt;&gt;&gt; else</strong>:<br/><strong class="lp iu">&gt;&gt;&gt;    </strong>beta = 0</span></pre><p id="aa7f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">真的可以简化为:</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="f114" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt; </strong>beta = 999 <strong class="lp iu">if</strong> alpha &gt; 7 <strong class="lp iu">else</strong> 99 <strong class="lp iu">if</strong> alpha == 7 <strong class="lp iu">else</strong> 0</span></pre><p id="ca12" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这太荒谬了！如果您对自己编写的代码多加注意，您总会发现可以简化为一行程序的地方。除了条件语句，<code class="fe lz ma mb lp b">for</code>循环也可以简化。例如，在四行中加倍一个整数列表</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="33e9" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt; </strong>lst = [1, 3, 5]<br/><strong class="lp iu">&gt;&gt;&gt; </strong>doubled = [] <br/><strong class="lp iu">&gt;&gt;&gt; </strong><strong class="lp iu">for</strong> num <strong class="lp iu">in</strong> lst:<br/><strong class="lp iu">&gt;&gt;&gt;    </strong>doubled.append(num*2)</span></pre><p id="3a65" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">可以简化为一行:</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="0ee1" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt; </strong>doubled = [num * 2 for num in lst]</span></pre><p id="38a1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当然，如果您将所有内容都链接到一行程序中，可能会有点混乱。确保不要在代码中过度使用一行程序，因为有人可能会认为大量使用一行程序是“不符合 Pythonic 规范的”。</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="4161" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt; import</strong> pprint; pprint.pprint(zip(('Byte', 'KByte', 'MByte', 'GByte', 'TByte'), (1 &lt;&lt; 10*i for i in xrange(5))))</span></pre></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><p id="e3c0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">诀窍№2:快速字符串操作</strong></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mc ln l"/></div></figure><p id="9219" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">字符串操作可能很棘手(没有双关的意思)，但是 Python 隐藏了一些捷径，使您的生活变得非常容易。要反转一个字符串，我们只需添加<code class="fe lz ma mb lp b">::-1</code>作为列表索引</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="4114" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt; </strong>a =  "ilovepython" <br/><strong class="lp iu">&gt;&gt;&gt; print</strong> a[::-1] <br/>nohtypevoli</span></pre><p id="1671" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">同样的技巧也适用于整数列表。在 Python 中，字符串操作非常容易。例如，如果您想使用以下预定义变量<code class="fe lz ma mb lp b">str1</code>、<code class="fe lz ma mb lp b">str2</code>和<code class="fe lz ma mb lp b">lst3</code>输出一个句子</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="ce6f" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt; </strong>str1 = "Totally"<br/><strong class="lp iu">&gt;&gt;&gt; </strong>str2 = "Awesome"<br/><strong class="lp iu">&gt;&gt;&gt; </strong>lst3 = ["Omg", "You", "Are"]</span></pre><p id="49b6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">简单地使用<code class="fe lz ma mb lp b">.join()</code>方法和算术运算符来创建想要的句子。</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="2d50" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt; print </strong>' '.join(lst3)<br/>Omg You Are<br/><strong class="lp iu">&gt;&gt;&gt; print </strong>' '.join(lst3)+' '+str1+' '+str2<br/>Omg You Are Totally Awesome</span></pre><p id="9be5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">除了字符串操作，我还推荐阅读更多关于<a class="ae le" href="https://docs.python.org/3/library/re.html" rel="noopener ugc nofollow" target="_blank"> regex(正则表达式)</a>的内容，以便有效地搜索字符串和过滤模式。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><p id="0a6d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">招数№3:嵌套列表组合</strong></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="md ln l"/></div></figure><p id="17a7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe lz ma mb lp b">itertools</code>可能是我最喜欢的 Python 库之一。假设您的代码有十几个列表，经过一些操作后，您得到了一个深度嵌套的列表。这正是你解决这种语法混乱所需要的。</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="9884" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt; import</strong> itertools<br/><strong class="lp iu">&gt;&gt;&gt; </strong>flatten = lambda x: list(itertools.chain.from_iterable(x))<br/><strong class="lp iu">&gt;&gt;&gt; </strong>s = [['"', 'An', 'investment'], ['in'], ['knowledge'], ['pays'], ['the', 'best'], ['interest."', '--'], ['Benjamin'], ['Franklin']]<br/><strong class="lp iu">&gt;&gt;&gt; print</strong>(' '.join(flatten(s)))<br/>" An investment in knowledge pays the best interest." -- Benjamin Franklin</span></pre><p id="2c9a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从上面的例子可以看出，我们可以使用。<code class="fe lz ma mb lp b">join()</code>和<code class="fe lz ma mb lp b">itertools</code>。<code class="fe lz ma mb lp b">itertools</code>中的<code class="fe lz ma mb lp b">.combinations()</code>方法也是从输入 iterable 返回元素长度子序列的强大工具。点击<a class="ae le" href="https://docs.python.org/2/library/itertools.html" rel="noopener ugc nofollow" target="_blank">此处</a>阅读更多关于<code class="fe lz ma mb lp b">itertools</code>的信息。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><p id="fe3e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">绝招№4:简单的数据结构</strong></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="me ln l"/></div></figure><p id="5a53" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">回到<strong class="js iu">招数№1 </strong>，在 Python 中使用一行程序初始化数据结构也是非常容易的。Harold Cooper 使用以下代码实现了一个单行树结构:</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="82ba" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt; def</strong> tree(): <strong class="lp iu">return</strong> defaultdict(tree)</span></pre><p id="ff74" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">上面显示的代码简单地定义了一个树，它是一个字典，默认值是 trees。其他一行函数，如质数生成器</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="28a9" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt; </strong><strong class="lp iu">reduce</strong>( (<strong class="lp iu">lambda</strong> r,x: r-<strong class="lp iu">set</strong>(<strong class="lp iu">range</strong>(x**2,N,x)) <strong class="lp iu">if</strong> (x <strong class="lp iu">in</strong> r) <strong class="lp iu">else</strong> r), <br/>        <strong class="lp iu">range</strong>(2,N), <strong class="lp iu">set</strong>(<strong class="lp iu">range</strong>(2,N)))</span></pre><p id="14fd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">可以在 Github 和堆栈溢出中找到。Python 也有强大的库，比如<code class="fe lz ma mb lp b">Collections</code>，它将帮助您解决各种现实生活中的问题，而无需编写冗长的代码。</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="3728" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt;</strong> <strong class="lp iu">from</strong> collections <strong class="lp iu">import</strong> Counter<br/><strong class="lp iu">&gt;&gt;&gt; </strong>myList = [1,1,2,3,4,5,3,2,3,4,2,1,2,3]<br/><strong class="lp iu">&gt;&gt;&gt; print</strong>(Counter(myList))<br/>Counter({2: 4, 3: 4, 1: 3, 4: 2, 5: 1})</span></pre></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><p id="17ee" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">绝招№5:打印变得容易</strong></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mf ln l"/></div></figure><p id="15a5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后一个技巧是我希望早点知道的。原来打印一个字符串数组作为一个逗号分隔的字符串，我们<strong class="js iu">不需要</strong>使用<code class="fe lz ma mb lp b">.join()</code>和循环。</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="e014" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt;</strong> row = ["1", "bob", "developer", "python"]<br/><strong class="lp iu">&gt;&gt;&gt;</strong> <strong class="lp iu">print</strong>(','.join(str(x) <strong class="lp iu">for</strong> x <strong class="lp iu">in </strong>row))<br/>1,bob,developer,python</span></pre><p id="e32a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个简单的一行程序就可以了:</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="68b9" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt; print</strong>(*row, sep=',')<br/>1,bob,developer,python</span></pre><p id="509e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另一个巧妙的打印技巧是利用<code class="fe lz ma mb lp b">enumerate</code>。<code class="fe lz ma mb lp b">enumerate</code>是 Python 的内置函数，非常有用。所以不用写四行代码来打印</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="1023" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt; </strong>iterable = ['a','b','c']<br/><strong class="lp iu">&gt;&gt;&gt; </strong>c = 0 <br/><strong class="lp iu">&gt;&gt;&gt; </strong>for item in iterable: <br/><strong class="lp iu">&gt;&gt;&gt; </strong>    print c, item <br/><strong class="lp iu">&gt;&gt;&gt; </strong>    c+= 1<br/>0 a<br/>1 b<br/>2 c</span></pre><p id="19c6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">同样的事情只需要两行代码就可以完成</p><pre class="kp kq kr ks gt lo lp lq lr aw ls bi"><span id="5c8e" class="lt lu it lp b gy lv lw l lx ly"><strong class="lp iu">&gt;&gt;&gt; </strong>for c, item in enumerate(iterable):<br/><strong class="lp iu">&gt;&gt;&gt; </strong>    print c, item</span></pre><p id="71f7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Python 中有几十万种打印技巧，如漂亮打印<code class="fe lz ma mb lp b">pprint</code>。如果你知道一个巧妙的 Python 技巧，请在下面评论！</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/8e096e16ca16dc8b7be313753aa67e2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*F1oFCwu6_4ork7pWE__IIg.jpeg"/></div></figure><p id="3fa2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="mh">感谢您阅读我的文章。</em></p></div></div>    
</body>
</html>