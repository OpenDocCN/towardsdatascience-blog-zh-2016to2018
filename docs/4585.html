<html>
<head>
<title>Hitchhiker Tips on Effectively using Python NumPy Arrays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于有效使用 Python NumPy 数组的搭便车技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/hitchhiker-tips-on-effectively-using-python-numpy-arrays-66649b7bd5fb?source=collection_archive---------5-----------------------#2018-08-24">https://towardsdatascience.com/hitchhiker-tips-on-effectively-using-python-numpy-arrays-66649b7bd5fb?source=collection_archive---------5-----------------------#2018-08-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/91e7f36994f786487b36fdd50e2fd0bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LGUX4CAxPdTl3-K5jEl_xg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Tips on Effectively using NumPy Arrays</figcaption></figure><div class=""/></div><div class="ab cl kc kd hu ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="ij ik il im in"><p id="8faf" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">如果您正在使用 python 进行数据科学研究，那么您要么使用过 NumPy，要么肯定听说过它。大多数需要将数据存储在内存中的统计分析都使用 NumPy。</p><p id="113b" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">如果你是 NumPy 的新手，我强烈推荐你阅读我之前的文章<a class="ae lh" rel="noopener" target="_blank" href="/a-hitchhiker-guide-to-python-numpy-arrays-9358de570121">python NumPy 数组的搭便车指南</a>来了解 NumPy 的基本用法。</p><p id="04c6" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">在这篇文章中，我将讨论一些具体的技巧、窍门和技术，它们将帮助你获得大多数 NumPy 数组</p></div><div class="ab cl kc kd hu ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="ij ik il im in"><h2 id="1f8e" class="li lj jf bd lk ll lm dn ln lo lp dp lq ku lr ls lt ky lu lv lw lc lx ly lz ma bi translated">1.修改现有的 NumPy 数组</h2><blockquote class="mb mc md"><p id="94d7" class="kj kk me kl b km kn ko kp kq kr ks kt mf kv kw kx mg kz la lb mh ld le lf lg ij bi translated">与 Python 列表不同，NumPy 没有<code class="fe mi mj mk ml b">append(...)</code>函数，这实际上意味着我们不能追加数据或改变 NumPy 数组的大小。</p><p id="c398" class="kj kk me kl b km kn ko kp kq kr ks kt mf kv kw kx mg kz la lb mh ld le lf lg ij bi translated">为了改变大小和/或维度，我们需要通过在旧数组上应用效用函数来创建新的 NumPy 数组。</p></blockquote><p id="7c7a" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">从语法上来说，NumPy 数组类似于 python 列表，我们可以使用下标操作符来插入或更改 NumPy 数组的数据。例如，对于大小为 5 的 NumPy 数组，我们可以使用像<code class="fe mi mj mk ml b">while</code>和<code class="fe mi mj mk ml b">for</code>这样的循环来访问/更改/更新内容</p><figure class="mm mn mo mp gt is"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Changing individual events of NumPy array</figcaption></figure><p id="f70c" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">可以理解的是，这是一种非常过时的、非功能性的访问/操作数据的方式。幸运的是，NumPy 为 same 提供了批量访问功能，它在一行中毫不费力地做了同样的事情。一个这样的功能是<code class="fe mi mj mk ml b">numpy.put(...)</code>。</p><p id="928e" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">为了描述<code class="fe mi mj mk ml b">numpy.put(...)</code>的用法，我们将创建一个 python 列表并将该列表的内容复制到 NumPy 数组中</p><figure class="mm mn mo mp gt is"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Using numpy.put(…) function</figcaption></figure><p id="7fa3" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated"><code class="fe mi mj mk ml b">numpy.put(...)</code>函数获取一个范围，然后使用该范围从目的地复制源。副本将被限制在<code class="fe mi mj mk ml b">range(..)</code>功能中提供的数量。</p><p id="5cca" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">在上面的例子中，如果我们将<code class="fe mi mj mk ml b">np.put(...)</code>线改为</p><pre class="mm mn mo mp gt ms ml mt mu aw mv bi"><span id="84d4" class="li lj jf ml b gy mw mx l my mz">np.put(np_arr, range(3), py_arr)</span></pre><p id="6489" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">它将只改变<code class="fe mi mj mk ml b">np_arr</code>的前三个元素，其他的都不变</p><p id="6fca" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated"><code class="fe mi mj mk ml b">np.put(...)</code>函数的适用性不仅限于复制一维数组，还可以用于复制 n 维数组，如下面的代码所示</p><figure class="mm mn mo mp gt is"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">numpy.put(…) for multi dimensional array</figcaption></figure><p id="054d" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">使用<code class="fe mi mj mk ml b">np.put(...)</code>函数，我们可以提供一个数字列表，但是，在某些情况下，我们希望将相同的数字复制到 NumPy 的所有元素中。这类似于调用<code class="fe mi mj mk ml b">np.zeros(...)</code>或<code class="fe mi mj mk ml b">np.ones(...)</code>，区别在于除了 0 和 1 之外，还可以提供其他数字</p><blockquote class="mb mc md"><p id="bd13" class="kj kk me kl b km kn ko kp kq kr ks kt mf kv kw kx mg kz la lb mh ld le lf lg ij bi translated">这是通过调用<code class="fe mi mj mk ml b">np.fill(...)</code>函数实现的。</p></blockquote><p id="ae6b" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">无论我们在填充中提供什么数字(..)，它适用于 NumPy 数组的所有元素，而不管该数组是一维数组还是多维数组</p><figure class="mm mn mo mp gt is"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Using numpy.fill(…) function</figcaption></figure><p id="118a" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated"><code class="fe mi mj mk ml b">.fill(..)</code>函数只接受标量值。</p><p id="5b5e" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">这里描述的是<code class="fe mi mj mk ml b">dtype=np.int</code>的例子。它也适用于所有其他数据类型，如<code class="fe mi mj mk ml b">np.float, np.str, np.object</code>等</p></div><div class="ab cl kc kd hu ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="ij ik il im in"><h2 id="f653" class="li lj jf bd lk ll lm dn ln lo lp dp lq ku lr ls lt ky lu lv lw lc lx ly lz ma bi translated">2.切片 NumPy 数组</h2><blockquote class="mb mc md"><p id="3c3f" class="kj kk me kl b km kn ko kp kq kr ks kt mf kv kw kx mg kz la lb mh ld le lf lg ij bi translated">如果你有切割 python 列表的经验，在这里你会感觉像在家里一样。</p></blockquote><p id="5d1a" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">切片 NumPy 数组带来了额外的功能，并且在多维数组的情况下变得有趣。然而，为了正确理解切片是如何工作的，我们需要在研究多维数组之前先研究一维数组。</p><blockquote class="mb mc md"><p id="54c9" class="kj kk me kl b km kn ko kp kq kr ks kt mf kv kw kx mg kz la lb mh ld le lf lg ij bi translated"><code class="fe mi mj mk ml b">:</code>被称为<strong class="kl jg">分隔符</strong>，与<strong class="kl jg"> <em class="jf">相容—不相容</em> </strong>原理一起工作，这意味着分隔符的左侧将被包含，而分隔符的右侧将被排除。</p></blockquote><p id="39cc" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">例如，<code class="fe mi mj mk ml b">np_arr[1:4]</code>这样的语句意味着它将包括索引→ 1，但排除索引→ 4。因此这将有效地显示 Index → 1，2 &amp; 3 中的元素</p><p id="f7cb" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">下面是一些对一维数组进行切片的例子以及它们的预期输出</p><figure class="mm mn mo mp gt is"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Slicing 1-D arrays</figcaption></figure><p id="7fbe" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">切片的一个独特功能出现在<strong class="kl jg"> NumPy </strong>数组中，但不能用于 python <strong class="kl jg"> list </strong>中，这就是用一个值就地改变数组<strong class="kl jg">的多个元素的能力。</strong></p><p id="49e5" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">老实说，这是非常有价值的功能之一，对数学和机器学习都有帮助。下面是使用该功能的方法</p><figure class="mm mn mo mp gt is"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Slicing 1-D array</figcaption></figure><p id="5ec1" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">现在让我们来看一下多维数组的切片。当我们对多维数组进行切片时，分隔符左边和右边的含义保持不变(即索引),但我们通过使用两组逗号分隔的分隔符来扩展它，这两组分隔符代表<strong class="kl jg">行</strong>和<strong class="kl jg">列</strong>,即</p><p id="219c" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated"><code class="fe mi mj mk ml b">[rows → Start_Index : End_Index, Column → Start_Index : End_Index ]</code></p><p id="e71e" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">下面是一些例子，说明在 2D 阵列中切片意味着什么</p><figure class="mm mn mo mp gt is"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Slicing a 2 — D Array</figcaption></figure><p id="3b3a" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">类似地，对于 3D 数组，我们必须为一个维度添加一个逗号分隔的值。这里有一些相同的例子</p><figure class="mm mn mo mp gt is"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Slicing a 3-D Array</figcaption></figure></div><div class="ab cl kc kd hu ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="ij ik il im in"><h2 id="e180" class="li lj jf bd lk ll lm dn ln lo lp dp lq ku lr ls lt ky lu lv lw lc lx ly lz ma bi translated">3.拆分 NumPy 数组</h2><p id="c262" class="pw-post-body-paragraph kj kk jf kl b km na ko kp kq nb ks kt ku nc kw kx ky nd la lb lc ne le lf lg ij bi translated">在某些时候，有必要将 n-d NumPy 数组分成行和列。拆分 numpy 数组有多种函数和方法，但是有助于按行和按列拆分 NumPy 数组的两个特定函数是<code class="fe mi mj mk ml b">split</code>和<code class="fe mi mj mk ml b">hsplit</code>。</p><ul class=""><li id="11d1" class="nf ng jf kl b km kn kq kr ku nh ky ni lc nj lg nk nl nm nn bi translated"><code class="fe mi mj mk ml b">split</code>功能用于<strong class="kl jg">行<em class="me">行</em>行</strong>行的明智拆分</li><li id="5492" class="nf ng jf kl b km no kq np ku nq ky nr lc ns lg nk nl nm nn bi translated"><code class="fe mi mj mk ml b">hsplit</code>功能用于<strong class="kl jg"> <em class="me">列</em> </strong>的明智拆分</li></ul><p id="de6c" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">拆分 NumPy 数组的最简单方法可以在它们的维度上完成。一个 3 * 4 的数组可以很容易地分成 3 组行列表和 4 组列列表。下面是我们如何做同样的事情</p><figure class="mm mn mo mp gt is"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">NumPy Split Row and Column wise</figcaption></figure><p id="3cbe" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">如果多重因子允许分割，我们可以提供一个不同于分割可用维数的数。例如，我们可以将数组按列分为 2 组，如下所示</p><figure class="mm mn mo mp gt is"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h2 id="fb69" class="li lj jf bd lk ll lm dn ln lo lp dp lq ku lr ls lt ky lu lv lw lc lx ly lz ma bi translated">多重不均匀分裂</h2><p id="7270" class="pw-post-body-paragraph kj kk jf kl b km na ko kp kq nb ks kt ku nc kw kx ky nd la lb lc ne le lf lg ij bi translated">在上面的例子中，我们提供了一个数字来按行或列等分 NumPy 数组。</p><blockquote class="mb mc md"><p id="fed4" class="kj kk me kl b km kn ko kp kq kr ks kt mf kv kw kx mg kz la lb mh ld le lf lg ij bi translated">但是，通过提供需要拆分的精确索引，可以在不同的行和列上进行不均匀的拆分。</p></blockquote><p id="4eb5" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">它的工作原理就像我们上面看到的切片一样。基于列表中提供的索引，这些拆分函数将相应地对行或列进行切片。</p><p id="c48f" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">让我们假设我们有相同的 2D 数组如上所示，我想做自定义分裂。</p><p id="b394" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">情况 1:将 3 行分成[1]和[2，3]</p><p id="fdb2" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">在这里，我想将行分成两部分，我们提取第一行，然后将第二行和第三行合并为一行。我们将这样做</p><figure class="mm mn mo mp gt is"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Splitting Rows</figcaption></figure><p id="f480" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">情况 2:将 4 列分为[1]、[2、3]和[4]</p><p id="bf34" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">在这里，我想将列分成三部分，我们提取第一列，然后是第二+第三列，最后是第四列。我们将这样做</p><figure class="mm mn mo mp gt is"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Splitting Columns</figcaption></figure><p id="9230" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">所以这是 NumPy 的一些小技巧，可以帮助你更好地使用它。</p><blockquote class="mb mc md"><p id="d7c1" class="kj kk me kl b km kn ko kp kq kr ks kt mf kv kw kx mg kz la lb mh ld le lf lg ij bi translated">这就是这个故事的全部内容。更多关于下一组故事。</p></blockquote><p id="0793" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">感谢阅读…！！！</p><p id="9c71" class="pw-post-body-paragraph kj kk jf kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ij bi translated">达克什</p></div></div>    
</body>
</html>