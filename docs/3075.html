<html>
<head>
<title>NLG for Fun — Automated Headlines Generator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有趣的NLG—自动标题生成器</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/nlg-for-fun-automated-headlines-generator-6d0459f9588f?source=collection_archive---------4-----------------------#2018-04-06">https://towardsdatascience.com/nlg-for-fun-automated-headlines-generator-6d0459f9588f?source=collection_archive---------4-----------------------#2018-04-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/bf6fdd2341b32aa63647f0e1a29049e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P2k4ht5h-ltXA8VbHL8Kgw.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Image Courtesy: <a class="ae kc" href="https://pixabay.com/en/texture-handwriting-s%C3%BCtterlin-1362879/" rel="noopener ugc nofollow" target="_blank">https://pixabay.com/en/texture-handwriting-s%C3%BCtterlin-1362879/</a></figcaption></figure><p id="0625" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">自然语言生成是我们这个时代要探索的一个非常重要的领域。它形成了机器人如何交流的基础——不像文人如何写书，而是像我们如何交谈。在这个内核中，我将向您展示一个非常简单但功能强大的Python模块，它用几行代码就完成了类似的工作。</p><p id="39d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">模块:马克维奇</p><p id="5844" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们这里用的Py模块是<code class="fe lb lc ld le b"><a class="ae kc" href="https://github.com/jsvine/markovify" rel="noopener ugc nofollow" target="_blank">markovify</a></code>。</p><p id="2b9e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">马科维奇的描述:</strong></p><p id="6c17" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Markovify是一个简单的，可扩展的马尔可夫链生成器。目前，它的主要用途是建立大型文本语料库的马尔可夫模型，并从中生成随机句子。但是，理论上，它可以用于其他应用。</p><p id="8d3a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">关于数据集:</strong></p><p id="84be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这包括ABC网站在给定时间范围内发布的全部文章。每天200篇文章的量和对国际新闻的良好关注，我们可以相当肯定地说，每一个重大事件都在这里被捕获。这个数据集可以从<a class="ae kc" href="https://www.kaggle.com/therohk/million-headlines/data" rel="noopener ugc nofollow" target="_blank"> Kaggle数据集</a>下载。</p><h1 id="93b6" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">关于马尔可夫链的小知识</h1><blockquote class="md me mf"><p id="9b4f" class="kd ke mg kf b kg kh ki kj kk kl km kn mh kp kq kr mi kt ku kv mj kx ky kz la ij bi translated">马尔可夫链以安德烈·马尔可夫命名，是从一种“状态”(一种情况或一组值)跳到另一种状态的数学系统。例如，如果你为一个婴儿的行为建立一个马尔可夫链模型，你可以包括“玩”、“吃”、“睡觉”和“哭”作为状态，这些状态和其他行为一起可以形成一个“状态空间”:一个所有可能状态的列表。此外，在状态空间的顶部，马尔可夫链告诉你从一个状态跳跃或“过渡”到任何其他状态的可能性——例如，当前正在玩耍的婴儿在接下来的五分钟内睡着而没有先哭的可能性。</p></blockquote><p id="9af7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在Victor Powell的互动文章中阅读更多关于马尔可夫链如何工作的信息</p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/bff7de35332fd605ba2f31d5b0041b8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/0*EWfpFL-6MDO19k9g.jpg"/></div></figure><h1 id="e26f" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">加载所需的包</h1><pre class="ml mm mn mo gt mp le mq mr aw ms bi"><span id="b8e3" class="mt lg iq le b gy mu mv l mw mx">import pandas as pd <em class="mg"># data processing, CSV file I/O (e.g. pd.read_csv)</em><br/>import markovify <em class="mg">#Markov Chain Generator</em><br/><em class="mg"># Any results you write to the current directory are saved as output.</em></span></pre><h1 id="5436" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">读取输入文本文件</h1><pre class="ml mm mn mo gt mp le mq mr aw ms bi"><span id="e4fc" class="mt lg iq le b gy mu mv l mw mx">inp = pd.read_csv('../input/abcnews-date-text.csv')</span><span id="1c4d" class="mt lg iq le b gy my mv l mw mx">inp.head(3)</span><span id="e2fa" class="mt lg iq le b gy my mv l mw mx">publish_date headline_text<br/>020030219 aba decides against community broadcasting lic…<br/>120030219 act fire witnesses must be aware of defamation<br/>220030219a g calls for infrastructure protection summit</span></pre><h1 id="14a5" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">用马尔可夫链建立文本模型</h1><pre class="ml mm mn mo gt mp le mq mr aw ms bi"><span id="1de9" class="mt lg iq le b gy mu mv l mw mx">text_model = markovify.NewlineText(inp.headline_text, state_size = 2)</span></pre><h1 id="1748" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">是时候享受自动生成的标题了</h1><pre class="ml mm mn mo gt mp le mq mr aw ms bi"><span id="9c92" class="mt lg iq le b gy mu mv l mw mx"><em class="mg"># Print five randomly-generated sentences</em><br/>for i <strong class="le ir">in</strong> range(5):<br/>    print(text_model.make_sentence())</span><span id="064e" class="mt lg iq le b gy my mv l mw mx">iron magnate poised to storm cleanup<br/>meet the png government defends stockdale appointment<br/>the twitter exec charged with animal cruelty trial<br/>pm denies role in pregnancy<br/>shoalhaven business boosts hunter</span></pre><p id="18a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，这段文字可以成为Twitter机器人、Slack机器人甚至是恶搞博客的输入。这才是重点。</p><p id="2cd5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">参考资料:</p><ol class=""><li id="54e5" class="mz na iq kf b kg kh kk kl ko nb ks nc kw nd la ne nf ng nh bi translated"><a class="ae kc" href="https://github.com/amrrs/nlg_for_fun" rel="noopener ugc nofollow" target="_blank"> Github回购</a></li><li id="d929" class="mz na iq kf b kg ni kk nj ko nk ks nl kw nm la ne nf ng nh bi translated"><a class="ae kc" href="https://www.kaggle.com/nulldata/nlg-for-fun-automated-headlines-generator/notebook" rel="noopener ugc nofollow" target="_blank"> Kaggle内核</a></li><li id="48eb" class="mz na iq kf b kg ni kk nj ko nk ks nl kw nm la ne nf ng nh bi translated"><a class="ae kc" href="http://setosa.io/ev/markov-chains/" rel="noopener ugc nofollow" target="_blank">马尔可夫链直观解释</a></li><li id="5876" class="mz na iq kf b kg ni kk nj ko nk ks nl kw nm la ne nf ng nh bi translated"><a class="ae kc" href="https://www.kaggle.com/therohk/million-headlines/data" rel="noopener ugc nofollow" target="_blank">输入数据集</a></li></ol></div></div>    
</body>
</html>