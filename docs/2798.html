<html>
<head>
<title>Get Started With Examples of Reactivity in Shiny apps.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从闪亮应用的反应例子开始。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/get-started-with-examples-of-reactivity-in-in-shiny-apps-db409079dd11?source=collection_archive---------3-----------------------#2018-03-06">https://towardsdatascience.com/get-started-with-examples-of-reactivity-in-in-shiny-apps-db409079dd11?source=collection_archive---------3-----------------------#2018-03-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/d07a7b46606094ec67b3ef1d327ec77c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LezNz1WCj3h9yuX1XUynOA.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo Credit : <a class="ae jd" href="https://pixabay.com/en/background-christmas-3009949/" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><div class=""/><h1 id="c012" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">介绍</h1><p id="6b04" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">让闪亮的应用程序具有交互性的一个因素是反应能力。用最简单的术语来说，反应性/反应性编程是程序根据一组给定的用户输入计算输出的能力。一个闪亮的应用程序处理反应的能力在用户和现有信息之间建立了双向交流。</p><p id="8e9b" class="pw-post-body-paragraph lb lc jg ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">反应性适用于执行计算、数据操作、收集用户信息等情况。</p><p id="2b3f" class="pw-post-body-paragraph lb lc jg ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">作为一个开始构建闪亮应用的初学者，掌握处理反应的基本知识将有助于你探索闪亮应用的不同用例。</p><h1 id="e648" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">我们开始吧</h1><p id="75c8" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">直到下面的错误消息，人们才会想到反应性的概念。</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi me"><img src="../Images/7815b2458b726accabb9d25a2827c65b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VgAmq1yuakrCK2reLbuCng.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">error message</figcaption></figure><p id="5e97" class="pw-post-body-paragraph lb lc jg ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">当电抗组件被放置在非电抗函数中时，会出现此错误。该应用程序将不会加载，并将解析此错误。让我们看看什么是反应函数，它有什么作用。</p><h1 id="d202" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">闪亮应用的反应组件</h1><p id="3fe7" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">一个闪亮的应用程序有三个主要的反应组件:</p><h2 id="0c6a" class="mj ke jg bd kf mk ml dn kj mm mn dp kn lm mo mp kr lq mq mr kv lu ms mt kz mu bi translated"><strong class="ak">无功输入</strong></h2><p id="a438" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="ld jh"> </strong>反应式输入被定义为用户通过浏览器界面提供的输入。例如，当用户填写表单、选择项目或单击按钮时。这些动作将触发从无功输入设置的值。</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mv"><img src="../Images/02ec855a4640fd704eef7e24f16a161b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hT9JQQqjq__Xp6g0tIPoUQ.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Text input and Add button are reactive inputs</figcaption></figure><h2 id="f962" class="mj ke jg bd kf mk ml dn kj mm mn dp kn lm mo mp kr lq mq mr kv lu ms mt kz mu bi translated">无功输出</h2><p id="92bd" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">反应输出被定义为浏览器界面中程序提供的输出。例如图表、地图、曲线图或数值表。</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/cf0a1452c4079314fc032c40a13a850e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*M3XW_QSHyCtX4BXWF0ZEsw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Table of values as a reactive output</figcaption></figure><h2 id="bba8" class="mj ke jg bd kf mk ml dn kj mm mn dp kn lm mo mp kr lq mq mr kv lu ms mt kz mu bi translated">反应式表达</h2><p id="b968" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">电抗表达式被定义为将电抗输入转换为电抗输出的表达式。它们在发送无功输出之前执行计算。这些还会屏蔽慢速操作，如从服务器读取数据、在其他场景中进行网络调用。我们将在我们的例子中看到一个。</p><h1 id="7f88" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">例子</h1><p id="74ef" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">让我们从一个简单的例子开始，将两个整数相加，并在一个闪亮的应用程序中返回它们的和。</p><h2 id="d4bf" class="mj ke jg bd kf mk ml dn kj mm mn dp kn lm mo mp kr lq mq mr kv lu ms mt kz mu bi translated">用户界面</h2><pre class="mf mg mh mi gt mx my mz na aw nb bi"><span id="9867" class="mj ke jg my b gy nc nd l ne nf">titlePanel("Sum of two integers"),<br/>  <br/>  #number input form<br/>  sidebarLayout(<br/>    sidebarPanel(<br/>      textInput("one", "First Integer"),<br/>      textInput("two", "Second Integer"),<br/>      actionButton("add", "Add")<br/>    ),<br/>    <br/>    # Show result<br/>    mainPanel(<br/>      <br/>   textOutput("sum")<br/>      <br/>    )</span></pre><h2 id="39ea" class="mj ke jg bd kf mk ml dn kj mm mn dp kn lm mo mp kr lq mq mr kv lu ms mt kz mu bi translated">计算机网络服务器</h2><pre class="mf mg mh mi gt mx my mz na aw nb bi"><span id="93ac" class="mj ke jg my b gy nc nd l ne nf">server &lt;- function(input,output,session) {</span><span id="b8d6" class="mj ke jg my b gy ng nd l ne nf">#observe the add click and perform a reactive expression<br/>  observeEvent( input$add,{<br/>    x &lt;- as.numeric(input$one)<br/>    y &lt;- as.numeric(input$two)<br/>    #reactive expression<br/>    n &lt;- x+y<br/>    output$sum &lt;- renderPrint(n)<br/>  }<br/>    <br/>  )</span></pre><h2 id="2cfb" class="mj ke jg bd kf mk ml dn kj mm mn dp kn lm mo mp kr lq mq mr kv lu ms mt kz mu bi translated">结果</h2><figure class="mf mg mh mi gt is gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/0326ed76bfc1366c7c0bc32949b138d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*Z2UPro-d4jPxdrBp4RkMeg.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Example</figcaption></figure><h1 id="c689" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">演示</h1><p id="89b9" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">现在，让我们在处理反应性的同时，构建一些稍微复杂的东西。</p><h2 id="d035" class="mj ke jg bd kf mk ml dn kj mm mn dp kn lm mo mp kr lq mq mr kv lu ms mt kz mu bi translated">用户界面</h2><pre class="mf mg mh mi gt mx my mz na aw nb bi"><span id="c140" class="mj ke jg my b gy nc nd l ne nf">fields &lt;- c("name","age","height","weight")<br/>ui &lt;- fluidPage(<br/>   <br/>   # Application title<br/>   titlePanel("Health card"),<br/>   <br/>   # Sidebar with reactive inputs<br/>   sidebarLayout(<br/>      sidebarPanel(<br/>         textInput("name","Your Name"),<br/>        selectInput("age","Age bracket",c("18-25","25-45","above 45")),<br/>         textInput("weight","Please enter your weight in kg"),<br/>         textInput("height","Please enter your height in cm"),<br/>         actionButton("save","Add")<br/>        <br/>      ),<br/>      <br/>      # a table of reactive outputs<br/>      mainPanel(<br/>         mainPanel(<br/>            <br/>            DT::dataTableOutput("responses", width = 500), tags$hr()<br/>            <br/>         )<br/>      )<br/>   )<br/>)</span></pre><h2 id="8e89" class="mj ke jg bd kf mk ml dn kj mm mn dp kn lm mo mp kr lq mq mr kv lu ms mt kz mu bi translated">计算机网络服务器</h2><pre class="mf mg mh mi gt mx my mz na aw nb bi"><span id="26b4" class="mj ke jg my b gy nc nd l ne nf"># Define server logic <br/>   server &lt;- function(input, output,session) {<br/>      </span><span id="500b" class="mj ke jg my b gy ng nd l ne nf">#create a data frame called responses<br/>      saveData &lt;- function(data) {<br/>         data &lt;- as.data.frame(t(data))<br/>         if (exists("responses")) {<br/>            responses &lt;&lt;- rbind(responses, data)<br/>         } else {<br/>            responses &lt;&lt;- data<br/>         }<br/>      }<br/>      <br/>      loadData &lt;- function() {<br/>         if (exists("responses")) {<br/>            responses<br/>         }<br/>      }<br/>      <br/>      <br/>      # Whenever a field is filled, aggregate all form data<br/>      #formData is a reactive function</span><span id="8f02" class="mj ke jg my b gy ng nd l ne nf">      formData &lt;- reactive({<br/>         data &lt;- sapply(fields, function(x) input[[x]])<br/>         data<br/>      })<br/>      <br/>      # When the Save button is clicked, save the form data<br/>      observeEvent(input$save, {<br/>         saveData(formData())<br/>      })<br/>      <br/>      # Show the previous responses<br/>      # (update with current response when save is clicked)<br/>      output$responses &lt;- DT::renderDataTable({<br/>         input$save<br/>         loadData()<br/>      })     <br/>   }</span></pre><h2 id="71e0" class="mj ke jg bd kf mk ml dn kj mm mn dp kn lm mo mp kr lq mq mr kv lu ms mt kz mu bi translated">结果</h2><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ni"><img src="../Images/6686f98fccf8eb15c00221ab0b9b1bb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nr_jHuuZuAdvZH3o7UfAwQ.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">When project is run.</figcaption></figure><p id="1398" class="pw-post-body-paragraph lb lc jg ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">项目演示:【https://rstudio.cloud/project/22236 T4】</p><p id="26b1" class="pw-post-body-paragraph lb lc jg ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这就对了。既然你已经掌握了基本知识，请继续尝试。欢迎分享、向我提问或在twitter上给出反馈<a class="ae jd" href="https://twitter.com/lornamariak" rel="noopener ugc nofollow" target="_blank"> @lornamariak </a></p></div></div>    
</body>
</html>