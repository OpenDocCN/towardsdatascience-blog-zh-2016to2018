<html>
<head>
<title>3 approaches for backtesting historical data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">回溯测试历史数据的 3 种方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/three-approaches-for-backtesting-historical-data-aee7783b9e64?source=collection_archive---------6-----------------------#2018-09-08">https://towardsdatascience.com/three-approaches-for-backtesting-historical-data-aee7783b9e64?source=collection_archive---------6-----------------------#2018-09-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5859" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">读取和处理数据，用于交易中的统计和定量分析</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/68431c86c49482708c46b32b9b4ba508.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*85Zn8ocBvib1vBxfIoICDQ.jpeg"/></div></div></figure><p id="eac9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi lq translated">任何对金融市场的统计分析感兴趣的人都需要处理历史数据。需要历史数据来进行回溯测试或训练:</p><ul class=""><li id="2e97" class="lz ma it kw b kx ky la lb ld mb lh mc ll md lp me mf mg mh bi translated">量化交易。</li><li id="38f7" class="lz ma it kw b kx mi la mj ld mk lh ml ll mm lp me mf mg mh bi translated">统计交易。</li><li id="24ed" class="lz ma it kw b kx mi la mj ld mk lh ml ll mm lp me mf mg mh bi translated">价格行动回放/演练。</li></ul><p id="b523" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">每种需求都来自不同的目标。</p><h2 id="edbe" class="mn mo it bd mp mq mr dn ms mt mu dp mv ld mw mx my lh mz na nb ll nc nd ne nf bi translated">3 个关于为什么需要回溯测试和统计分析的例子</h2><p id="5b28" class="pw-post-body-paragraph ku kv it kw b kx ng ju kz la nh jx lc ld ni lf lg lh nj lj lk ll nk ln lo lp im bi translated">将回溯测试和统计分析结合到交易中有很多原因，它们可能来自非常不同的交易风格和方法:</p><ol class=""><li id="e3b9" class="lz ma it kw b kx ky la lb ld mb lh mc ll md lp nl mf mg mh bi translated">日内交易者可能对收集关于在交易时段期间开仓缺口被平仓的概率的统计信息感兴趣。</li><li id="fe31" class="lz ma it kw b kx mi la mj ld mk lh ml ll mm lp nl mf mg mh bi translated">价格行为自主交易者可能想要重放历史数据用于训练目的，或者简单地浏览过去的交易日。</li><li id="595a" class="lz ma it kw b kx mi la mj ld mk lh ml ll mm lp nl mf mg mh bi translated">一个定量/算法交易者可能想要运行模拟和回测她的算法。</li></ol><p id="a90a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">虽然每种市场方法都不尽相同，但对可用数据进行计算的需求却是所有方法的共同点。</p><h2 id="b139" class="mn mo it bd mp mq mr dn ms mt mu dp mv ld mw mx my lh mz na nb ll nc nd ne nf bi translated">如何做到这一点的 3 种方法</h2><p id="daa6" class="pw-post-body-paragraph ku kv it kw b kx ng ju kz la nh jx lc ld ni lf lg lh nj lj lk ll nk ln lo lp im bi translated">有三种主要的不同方法来处理历史数据分析:</p><ol class=""><li id="0e70" class="lz ma it kw b kx ky la lb ld mb lh mc ll md lp nl mf mg mh bi translated">可以使用像<em class="nm"> Metatrader </em>或<em class="nm"> Pro Real Time </em>这样的交易平台——仅举两个在散户中很有名的软件包为例。它们提供编程和回溯测试功能，并且具有与实际下单工具相同的优势。</li><li id="eb65" class="lz ma it kw b kx mi la mj ld mk lh ml ll mm lp nl mf mg mh bi translated">一个特定的回溯测试软件(比如<em class="nm"> Amibroker - </em>仅仅是提到一个负担得起的软件)可以用来执行所有的数据分析和回溯测试。它们通常比常规的股票图表软件更擅长回溯测试和分析，因此可以被认为是更严格的方法。</li><li id="a86a" class="lz ma it kw b kx mi la mj ld mk lh ml ll mm lp nl mf mg mh bi translated">可以开发定制软件，最常用的两种语言是<em class="nm"> R </em>和<em class="nm"> Python </em>。就资源和时间而言，这是昂贵的，但也是最灵活的方法，因为它对分析数据的内容和方式没有任何限制。使用编程语言还可以提供你可能需要的所有数学库，它可以让你校准性能，如果你需要的话。</li></ol><p id="887d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以找到关于哪种方法是最好的方法的强烈意见。但是，就像科技和商业中的任何事情一样，权衡是存在的，环境会推动一种解决方案优于其他解决方案。</p><p id="3311" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你正在做算法交易，你的计划是坚持价格和标准指标，利用软件图表交易工具，如<em class="nm"> Metatrader </em>可能是最好的选择，它的好处是以后更容易将实际的算法策略投入市场。</p><p id="982a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">更全面的回测方法是使用特定的回测软件。这带来了额外的好处，因为您可以利用该工具的扩展分析和功能。学习曲线可能与交易/图表软件相似，你将有额外的步骤来弄清楚如何将分析转化为可操作的东西。虽然有负担得起的选择，但这也将带来额外的成本。</p><p id="27b0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您正在进行不常见的分析，定制软件可能会节省时间和痛苦，因为现有的工具和框架将迫使您遵循某些分析/策略。</p><p id="e6e0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这种情况下，编程语言的选择也是相关的。这可能是最严肃和最灵活的方法，但也是对资源和时间要求最高的方法。如果你不打算分配必要的承诺、技能、时间或资源，这肯定是一个糟糕的选择。</p><p id="f043" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您也可以将它们混合使用，因为这些选项并不相互排斥。您可以使用回溯测试平台进行更常见的分析和概要分析，并使用定制软件进行非常具体的分析，这在现有框架中可能很难实现。</p><h2 id="c527" class="mn mo it bd mp mq mr dn ms mt mu dp mv ld mw mx my lh mz na nb ll nc nd ne nf bi translated">关于使用 Metatrader 的一些问题</h2><p id="71fc" class="pw-post-body-paragraph ku kv it kw b kx ng ju kz la nh jx lc ld ni lf lg lh nj lj lk ll nk ln lo lp im bi translated">由于是免费的，并且是我使用的差价合约的制图和交易软件，我认真考虑过使用<em class="nm"> Metatrader </em>。</p><p id="d73a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">作为一个商业框架，它带来了这类产品的常见弱点:</p><ul class=""><li id="567d" class="lz ma it kw b kx ky la lb ld mb lh mc ll md lp me mf mg mh bi translated">学习曲线并不像供应商和产品爱好者所说的那么容易。</li><li id="59e5" class="lz ma it kw b kx mi la mj ld mk lh ml ll mm lp me mf mg mh bi translated">它们的初始设置通常不那么简单。获取我们的第一个直方图有时可能很有挑战性。</li><li id="16f5" class="lz ma it kw b kx mi la mj ld mk lh ml ll mm lp me mf mg mh bi translated">当你做标准的事情时，它们可以节省时间，但是当你受到限制时，打破常规通常要困难得多。</li><li id="0f0d" class="lz ma it kw b kx mi la mj ld mk lh ml ll mm lp me mf mg mh bi translated">它们通常存在性能问题，因为它们被构造为模块化和分层的软件，以应对各种资产和场景。</li><li id="4344" class="lz ma it kw b kx mi la mj ld mk lh ml ll mm lp me mf mg mh bi translated">存在盲点，该工具要么太复杂而无法使用，要么根本不可能实现您想要的。</li><li id="532f" class="lz ma it kw b kx mi la mj ld mk lh ml ll mm lp me mf mg mh bi translated">你必须学习很多东西，但你实际上只使用了其中的一些能力。</li></ul><p id="f6d4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">主要的优势是你通常可以很快得到富有成效的结果，并且通常更容易得到社区的支持。</p><h2 id="0f23" class="mn mo it bd mp mq mr dn ms mt mu dp mv ld mw mx my lh mz na nb ll nc nd ne nf bi translated">使用 Metatrader</h2><p id="cd1d" class="pw-post-body-paragraph ku kv it kw b kx ng ju kz la nh jx lc ld ni lf lg lh nj lj lk ll nk ln lo lp im bi translated">当我对统计分析感兴趣时，我有机会和一个交易者交谈，他把这作为他工作的一部分。他对为什么使用<em class="nm"> Metatrader </em>提出了很好的观点，但是他的一个评论让我想到:</p><blockquote class="nn no np"><p id="95fa" class="ku kv nm kw b kx ky ju kz la lb jx lc nq le lf lg nr li lj lk ns lm ln lo lp im bi translated">Metatrader 可能是最好的方法，因为您可以实际看到数据，并且所有指标都已经在那里了。尽管如此，我一点也不喜欢它。</p></blockquote><p id="d92b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当有人花了足够的时间来掌握一个软件工具，但不是 100%满意时，这应该触发一个危险信号。</p><p id="568d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这位同事已经成功通过了<em class="nm"> Metatrader 要求的学习曲线。</em>他设法克服了商业框架的所有限制，并且他明智地利用了他过去的努力和<em class="nm"> Metatrader </em>的实际优势和能力(一旦你处理了最初的学习曲线，这些都是相关的)。</p><p id="86b7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我还意识到，这个人可能不愿意开发定制工具，最终目标是得到一个可以工作的交易机器人。在这种情况下，<em class="nm"> Metatrader </em>可能是最好的选择。</p><p id="e0f8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这次谈话之后，我浏览了一下 Metatrader 的文档，并试图找出如何获得基本的统计输出。我无法理解如何轻松地进行基本和简单的分析，并且我发现没有针对数据的实际数据模型。<strong class="kw iu">我只是不喜欢我所看到的</strong>-这显然是基于我以前在技术框架方面的经验的个人意见。我认为，任何回溯测试工具都应该能够轻松地导入数据，并提供基本的统计数据，而只需一个忠诚的用户付出最少的努力。</p><p id="4a50" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我觉得<em class="nm"> Metatrader </em>不适合我，因此我决定继续寻找和评估定制软件选项。虽然不是我选择的选项，但是值得一提的是<em class="nm"> Metatrader </em>可能是最快最安全的快速见效的方法。</p><h2 id="6a59" class="mn mo it bd mp mq mr dn ms mt mu dp mv ld mw mx my lh mz na nb ll nc nd ne nf bi translated">使用 Amibroker</h2><p id="77b7" class="pw-post-body-paragraph ku kv it kw b kx ng ju kz la nh jx lc ld ni lf lg lh nj lj lk ll nk ln lo lp im bi translated">来自 quantitative rader 的简·福克斯(Jane Fox)对定量方法很认真。她除了统计支持的算法之外不使用任何其他东西，当我在一次采访中听她讲话时，我发现她正在使用 Amibroker，并对软件包本身和使用特定回溯测试软件包的抽象概念产生了兴趣。</p><p id="1b38" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">作为一个纯粹的量化交易者，一个特定的回溯测试软件方法可能最适合这个任务。回溯测试是她的策略的 DNA。同样相关的是，Jane 似乎交易股票的摇摆头寸，并且可能不需要处理分钟蜡烛线或进行开箱即用的分析。</p><p id="234e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这种情况下，能够轻松地将所有相关的指标和工具整合到回溯测试中可以节省时间和金钱。</p><p id="e108" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在 Metatrader 的案例中，我确信学习使用它们并不像供应商和爱好者宣传的那样简单。</p><h2 id="83d1" class="mn mo it bd mp mq mr dn ms mt mu dp mv ld mw mx my lh mz na nb ll nc nd ne nf bi translated">开发你自己的定制软件</h2><p id="09a9" class="pw-post-body-paragraph ku kv it kw b kx ng ju kz la nh jx lc ld ni lf lg lh nj lj lk ll nk ln lo lp im bi translated">在本文的开头，我使用了打开缺口作为例子。我是故意提到这一点的，因为我是在参加何塞·科迪纳的一次研讨会时，对金融市场的统计分析产生了兴趣。</p><p id="ec5b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">何塞·科迪纳是西班牙著名的交易者，他在过去的 20 年里一直使用统计分析。这个研讨会是关于 DAX 开盘缺口的，它是一个关于如何分析市场特定方面的杰出介绍。分析非常具体，以至于他使用的是定制平台(如果我没猜错的话，他使用的是定制的<em class="nm"> C# </em>软件)。我对分析的速度(包括分析 DAX 期货数年的 1 分钟蜡烛线)和用于解决问题的整体分析过程感到惊讶。</p><h2 id="ded2" class="mn mo it bd mp mq mr dn ms mt mu dp mv ld mw mx my lh mz na nb ll nc nd ne nf bi translated">我最后的想法</h2><p id="d667" class="pw-post-body-paragraph ku kv it kw b kx ng ju kz la nh jx lc ld ni lf lg lh nj lj lk ll nk ln lo lp im bi translated">我主要对日内操作感兴趣，特别是短期价格行为和市场统计性质之间的相关性。如此具体，我最终决定定制软件将是我的出路。</p><p id="a862" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它不会很快给你结果，但它允许你建立一个定制的和熟悉的框架来满足你的需求。如果您对可用性不挑剔(编写商业软件是一个不同的历史，但这不是我的目标)，并且如果您使用 UNIX/Linux 环境，您可以利用现有的软件包，那么像图形功能和用户界面这样的几个方面可以很容易地解决。</p><p id="2c7c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">的确，我们需要投入更多的时间和资源，但商业工具也同样需要一个严格的环境，并且有自己的学习曲线。使用标准编程语言不会带来任何挑战，因为商业工具没有适当的文档，因为程序是众所周知和理解的，问题可以随着时间的推移而得到解决，而不会出现任何戏剧性的情况。</p><p id="c800" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">无论如何，在三个不同的选项中，我认为特定的回溯测试工具可能是一个好的选择，我计划在不久的将来广泛地测试一个。</p><p id="6641" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="nm">免责声明:帖子中提到的产品和人物绝不是作者认可的，也不代表作者的观点。仅在出于教育或说明目的的公共专业活动/相关性的背景下提及他们。</em></p></div></div>    
</body>
</html>