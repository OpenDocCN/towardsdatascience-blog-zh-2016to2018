<html>
<head>
<title>Small Victories: Building a Web App with Django and AWS and Building Confidence</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">小胜利:用Django和AWS构建一个Web应用并建立信心</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/small-victories-building-a-web-app-with-django-and-aws-and-building-confidence-8ee9d29d744e?source=collection_archive---------4-----------------------#2017-11-17">https://towardsdatascience.com/small-victories-building-a-web-app-with-django-and-aws-and-building-confidence-8ee9d29d744e?source=collection_archive---------4-----------------------#2017-11-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/dc9cfa80187d6774b652dfec7fbc84d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LkrETbg20e-AxK9BidB8eg.jpeg"/></div></div></figure><p id="9b88" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">^^^That是我用手机在电脑屏幕上拍的照片，前几天我高兴地把它上传到了我的个人社交媒体上。(是的，我真的是那种极客…)它代表了我的第一个web应用程序原型的成功测试，该应用程序在现实世界中运行(托管在我建立的免费AWS实例上)。我是11月8日拍的上图，原型机还在成功运行。</p><p id="0021" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我称之为一个小小的胜利，因为我意识到，对于技术领域更有经验的人来说，这似乎非常容易。但对于一个在我今年早些时候参加数据科学训练营之前从未上过正式计算机科学课的人来说，终于更全面地理解了web应用程序这样的东西是如何工作的，这是一个启示。我自己能做到这一点真是太棒了。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk">Ooh, what’s that under there? Looks exciting!</figcaption></figure><p id="ba8b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这篇文章是我非常喜欢的Chipy(芝加哥Python)导师项目的要求系列文章的第三篇。自从我在<a class="ae lg" href="https://medium.com/@annafelicityfriedman/fighting-impostor-syndrome-through-coding-affirmations-2bff242c2511" rel="noopener">的上一篇文章</a>以来，在我曾经很有能力的导师<a class="ae lg" href="http://www.joejasinski.com/" rel="noopener ugc nofollow" target="_blank">乔·贾辛斯基</a>的帮助下，我已经了解了姜戈很多新的方面。今天，我想我会把重点放在这个应用程序将要做的数据收集上，而不仅仅是为用户提供一个微小的服务。</p><p id="f931" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如我之前提到的，我是一个完全的数据极客——就我而言，一个人能收集的数据越多越好。我长期使用基于SQL的数据库，包括运行我的主要客户项目<a class="ae lg" href="http://www.mybodygallery.com/" rel="noopener ugc nofollow" target="_blank">MyBodyGallery.com</a>的大型数据库。我很高兴Django自带了创建SQLite数据库的内置功能(如果我想的话，以后我可以改成更好的Postgres或MySQL)。我不一定需要一个数据库作为这个应用程序的一个功能(我没有<em class="lh">存储数据的</em>，但它是一个受欢迎的附加功能。</p><p id="7963" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我这次指导的主要目标是让我创建的数据科学模型(<a class="ae lg" href="https://github.com/annafelicity/predicting_popularity" rel="noopener ugc nofollow" target="_blank">一个纹身书流行度计算器</a>)在现实世界中运行。我本可以让web应用程序告诉人们计算器的答案，然后消失在太空中，而不存储他们的查询或其他任何关于他们或他们与应用程序的用户交互的信息。但是第二个Joe向我提到，我们可以将用户查询存储在一个表中(在Django中称为模型，只是为了让事情变得更加混乱——阅读文档<a class="ae lg" href="https://docs.djangoproject.com/en/1.11/topics/db/models/" rel="noopener ugc nofollow" target="_blank">这里</a>)，这让我的大脑转动起来，我想到了一些其他类型的数据，这些数据非常适合存储用于未来的分析项目。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="li lb l"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk">With all the right data, we can take over the world!!! (I’m probably dating myself with this cartoon reference.)</figcaption></figure><p id="2c5d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我成功的web应用程序的手机照片可能很有吸引力，但这里有一个非常基本的原型应用程序界面的截图，用户可以在这里输入他们的书名查询。屏幕最初看起来是这样的:</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lj"><img src="../Images/0ecf14ba748df3450d3a29bece5da394.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*yFgFdFnsLHfP-3uj3-wQ0Q.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk">Pink is my favorite test color.</figcaption></figure><p id="9e01" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，一旦用户输入他们的查询，它会在同一个页面上输出如下内容:</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lk"><img src="../Images/238156cd041a2ebf28ffdf77ad22cf3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*d4EZU5TqhvdeHr9PRqZ94g.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk">Note: Right now all the queries result in a hard-coded number of 20 libraries — the web app does not incorporate the calculator model yet.</figcaption></figure><p id="2745" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">用户查询存储在一个SQL表中(在Django-speak中称为模型),在本例中称为QueryLog。Joe教我如何进入并充实表将收集的数据。Django models文档有许多可以包含的字段类型——如果您有兴趣的话，一定要读一读。稍后我可能会添加一些其他字段，但是现在我将收集一些显而易见的信息，比如查询本身、它是否被查看过、它是何时创建的以及它最后一次被修改的时间。乔建议添加一个“desc”字段，这基本上允许我在输入任何特定查询后进行记录；我也可以将这个领域用于其他各种可能的用途。</p><p id="c44f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对我来说，重要的是跟踪查询来自哪里。这在表中有两种形式:首先，我想记录原始网站(这将在以后的课程中介绍——“website _ origin”的代码现在只是一个占位符)。至少，我会把这个放在我的centerfortattoo.org<a class="ae lg" href="https://centerfortattoo.org/" rel="noopener ugc nofollow" target="_blank">和tattoohistorian.com</a>网站上，这样我就能，比如说，快速地找出哪个网站的流量更大。我也有一个想法，我可以把这个代码放在Github上作为开源，其他面向纹身的网站也可以嵌入计算器。如果发生这种情况，我想知道这些查询是从哪里发出的，以此来跟踪还有谁在使用这个应用程序。</p><p id="6a0d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其次，我认为跟踪每个查询的IP地址会很有趣。我可以利用这些IP来分析用户的地理分布。Joe建议使用Django-ipware 来实现这一目的，它确实有效(我让我值得信赖的测试员，也就是我那令人敬畏的男朋友从远处输入一些查询来进行测试)。下面是我的代码中概述所有数据库表字段的部分:</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ll"><img src="../Images/cd68b91bfcf9fe74eac5b42ff25359b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xNVfLam3CWmUKymFGIGjWg.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk">This models.py script sets up all the different types of fields in the QueryLog table. I can add more if I want to. I just then need to run manage.py make migrations and then migrate to make those additions actually happen.</figcaption></figure><p id="29c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当您运行构建所有股票框架代码的初始Django manage.py startapp命令时，Django会自动创建一个漂亮的管理仪表板。您可以通过在测试IP的末尾添加/admin/并导航到它来访问这个仪表板。您还需要将自己设置为超级用户才能使用它。这是通过AWS运行的管理仪表板的外观——当你从自己的机器上运行服务器时，它看起来更好，但Joe提到我们必须在托管版本中调整一些东西。但现在还有效，所以谁在乎呢？</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div class="gh gi lm"><img src="../Images/b9832eae43fcb713585c8e84f5a4955d.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*9kYdoUP0ftVNYqBOmU6G5Q.png"/></div></figure><p id="1e6e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这已经是一个很长的帖子，所以我没有时间来解释这个问题，但Joe教我如何添加代码，以便在“计算器”(这是这个应用程序的名称)下的管理面板中，你可以访问“查询”，它提供了QueryLog表中的所有数据。瞧:</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/246642eeae675ec3995f9eed4c8d795e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*IhP7OLjD4gWSp4gsi_qp4Q.png"/></div></figure><p id="31fa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">目前，我们将管理仪表板QueryLog overview设置为显示查询、查询创建日期和任何修改日期。稍后我会添加一些我想看的其他东西的专栏，比如IP和网站来源。</p><p id="922b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">是的，在测试代码的时候，你肯定会对我的思维状态有所了解。“他妈的耶”，“我喜欢猫！”，还有《狗真恶心》(那只狗刚走过来，流了我一胳膊的口水)肯定是令人兴奋的、有头脑的书名。我要补充的是，问题14-17来自我的男朋友，我想这告诉了你他有多棒。得到一句“我爱你！”通过你的原型网络应用程序发送信息，甚至发送两次，是非常令人惊奇的。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lo lb l"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk">Love you right back, honey! (Readers: I’m a woman in tech. I can be a bit sappy. Deal with it.)</figcaption></figure><p id="edf6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您单击用户输入查询条目的行号之一，您可以看到关于每个查询的更多信息。你也可以进去改变这里的一切。您还可以在管理面板中将某些字段设置为不可更改的(您可以在这里看到创建和修改日期以及IP的示例——这提醒了我也需要对查询本身执行此操作)。下面是我们设置IP跟踪之前的完整查询记录的一个示例(因此是硬编码的1.1.1.1占位符地址):</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/abaed323a2c3ef570a1f920558230766.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*dMbI6VxaeEIlpveBx_QGMQ.png"/></div></figure><p id="0574" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好了，今天有时间就写这么多。但是请继续关注:尽管这个项目只需要一个由三部分组成的博客，我肯定会创建至少第四部分来宣布最终项目的启动和运行。我想我能做到。我知道我能做到。我给这篇文章加了副标题:建立一个网络应用程序……建立自信是有原因的。</p><p id="f0ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我在这个新冒险中的每一步都让我对自己的编码技能越来越有信心。我甚至考虑在40多岁的时候重返校园，攻读某种计算机科学学位，以增加我的收藏。(我真的很后悔没有从一开始就获得这个学位，尽管幸运的是，今天我们有很好的继续教育机会，比如针对我们这些处于职业生涯中期的人的训练营和导师项目。)</p><p id="1f27" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于我的下一步，至少，在导师计划于12月中旬结束之前，我需要花一点时间清理计算器模型(及其各种子模型)并为用户输入的查询编写一个适当的数据管道。然后我需要想出如何将它嵌入我现有的Wordpress.com网站(目前的想法是用iframe，但我知道Wordpress用iframe会很奇怪…)。咻。我能做到！如果我能让它看起来漂亮，那将是锦上添花。我一定会得到一个漂亮的蛋糕来庆祝！</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lq lb l"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk">Belle’s got the right idea. Maybe some pastries and wine are in order too :)</figcaption></figure></div></div>    
</body>
</html>