<html>
<head>
<title>The Natural Ear for Digital Sound Processing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数字声音处理的天然耳朵</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-natural-ear-for-digital-sound-processing-as-an-alternative-to-the-fourier-transform-79872b7a823d?source=collection_archive---------6-----------------------#2017-06-17">https://towardsdatascience.com/the-natural-ear-for-digital-sound-processing-as-an-alternative-to-the-fourier-transform-79872b7a823d?source=collection_archive---------6-----------------------#2017-06-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fd2e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">傅立叶变换的替代方案</h2></div><p id="ff6a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是自然耳朵的原始模型。我为什么想到它，以及它在数字声音处理(DSP)中如何优于快速傅立叶变换(FFT)——这就是本文的内容</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/00523625ac2fdaf5734a04c138cfe5e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:482/format:webp/1*hqmiQubMFN1eDH2OsZW6gg.jpeg"/></div></figure><p id="7efa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我参与的一些软件开发项目使用傅立叶变换进行波形分析。这些项目包括枪支目标和DTMF信号的声音音调识别。但在此之前，我渴望得到一张人类语言和音乐和谐的“照片”。最近，我启动了一个应用程序，它可以在我弹吉他的时候演奏一些乐器。问题是教电脑听我的节奏，并保持音乐节奏有序。为了做到这一点，我在平克·弗洛伊德的作品《放逐》的前几秒使用了傅立叶变换。然后，我将“图片”与我演奏的相同作品进行比较，结果很差，直到我选择了高达8192的FFT块大小来识别至少第六个八度音阶的音符。</p><p id="fd4e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这显示了傅立叶变换的第一个问题——要获得真正好的分析，需要增加块大小(在多个频率仓上),结果性能下降，特别是对于实时处理。</p><p id="cbba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">音乐傅里叶变换分析的第二个问题是，同样的乐器，根据音色的不同，会产生不同的泛音。这些通过FFT分析的泛音频率产生了与我们实际听到的内容无关的峰值。为了概括这个结果，我用12个半音概括了频率仓。画面更好，但现在第一个音符被识别为C，而实际上是B:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/21a9bbf80b389b78a4c51c1959b4d064.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/0*gmaWqdCJWkJU_r8r.png"/></div></figure><p id="6cdc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这迫使我去阅读更多关于声音、听觉和<a class="ae lk" href="https://en.wikipedia.org/wiki/Cochlea" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir">人耳</strong> </a>的本质。我想问题可能是傅里叶变换的第三个问题——它对信号相位很敏感。人耳不能识别单个谐波的相位，只能识别频率。</p><p id="86db" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我使用R语言创建了一个模型(您可以在文章末尾找到代码)，它为一组频率生成输入信号:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ll"><img src="../Images/4b4d39f6f8031a905e36c5d4df4971e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ypC15e8Tabb9NTES.png"/></div></div></figure><p id="2c2e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后用我十五年前组合的一些公式(同样的实验由于PC性能差而失败)创建了一个钟摆的模型。物体可以接收输入信号，如果信号中有相同的频率，物体就会振荡</p><p id="7eba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">频率:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/a8511f9792950783ffd7eb2935c9c75b.png" data-original-src="https://miro.medium.com/v2/resize:fit:168/format:webp/0*l7rYCF58CXXIpxq_.png"/></div></figure><p id="a899" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不依赖于摆锤自振频率的衰减系数:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/3b5bcf950a22c37f2749d2a152734c8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:272/format:webp/0*eNcXmvTrVa53WNWO.png"/></div></figure><p id="c3a2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">钟摆的位置:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/16c8a0f4e4f1389ec0b4b5c31a993ed4.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/format:webp/0*3Yl6mdeZlkDbeFnR.png"/></div></figure><p id="763e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">速度和能量:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/7d3bc3bbc727b7cd20d2839e903f7910.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/format:webp/0*RnAHemmeSlkynJLY.png"/></div></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/a24c47a7302b56dbd86885a41e1cfd6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:318/format:webp/0*xQQ7PjQ3-5srYwmU.png"/></div></figure><p id="aa21" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是钟摆对相同频率信号的反应:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lv"><img src="../Images/0b498404c358fe2d75356a9cd230c2f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uaUZ2zpL2DyJT7ue.png"/></div></div></figure><p id="7f99" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">绿色—输入信号<br/>蓝色—摆振荡<br/>红色—摆能量</p><p id="9e77" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于与摆锤频率略有不同的输入信号，振幅和能量明显小于之前的结果:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lw"><img src="../Images/59e287698817d4740320486808246bcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xX0KnwWyQ-WPX550.png"/></div></div></figure><p id="2215" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">九种不同信号的组合图—中央信号已被识别:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/ccb11b85d42201f0e77ed8af1d079d7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/0*O1y2DiOg9cXWnOja.png"/></div></figure><p id="7b96" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在那之后，我为不同的频率建造了一套钟摆来覆盖五个八度音阶和十二个音符。这导致了60个钟摆聆听“放逐”的第一个和弦的能量:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ly"><img src="../Images/b17229a6eff1fd28d333a629ce2404e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jZJwFQGtZqcyr-TL.png"/></div></div></figure><p id="bffa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结果，主音调被正确地检测到。我认为人耳忽略输入信号相位信息的能力对于音乐识别至关重要。我用这个模型创建了一个名为耳蜗的C++库，用来实时聆听、检测和同步音乐。这将在下一篇文章中描述。</p><h1 id="17f5" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">r代码</h1><pre class="lc ld le lf gt mr ms mt mu aw mv bi"><span id="cf77" class="mw ma iq ms b gy mx my l mz na">library(plyr);<br/>library(tuneR);</span><span id="a54c" class="mw ma iq ms b gy nb my l mz na"><br/>#<em class="nc">define a class that imitate a pendulum and has two methods - init and tick</em></span><span id="7792" class="mw ma iq ms b gy nb my l mz na">pendulum &lt;- setRefClass(<br/>   "pendulum",<br/>   fields = list( v = "numeric",<br/>                  x = "numeric",<br/>                  K = "numeric",<br/>                  T = "numeric",<br/>                  Phi = "numeric",<br/>                  E = "numeric",<br/>                  lastS = "numeric"),<br/>   methods = list(<br/>     #<em class="nc">define the initial state and calculate coefficients</em><br/>     init = function(w = "numeric")<br/>    {<br/>     #<em class="nc">period</em><br/>     T &lt;&lt;- 44100 / w;<br/>     #<em class="nc">coefficient of elasticity</em><br/>     K &lt;&lt;- (2 * pi / T) * (2 * pi / T);<br/>     #<em class="nc">fading coefficient</em><br/>     Phi &lt;&lt;- 2 * atan(T) / pi;<br/>     #<em class="nc">initial state</em><br/>     v &lt;&lt;- 0;<br/>     x &lt;&lt;- 0;<br/>     lastS &lt;&lt;- 0;<br/>    },<br/>    #<em class="nc">pass the position of the stimulating lever</em><br/>    tick = function(s)<br/>    {<br/>     lastX &lt;- x;<br/>     #<em class="nc">position</em><br/>     x &lt;&lt;- x + (v + s - lastS - K * x) * Phi;<br/>     #velocity<br/>     v &lt;&lt;- x - lastX;<br/>     #<em class="nc">energy</em><br/>     E &lt;&lt;- (v * v) / 2 + (K * x * x) / 2;<br/>     lastS &lt;&lt;- s;<br/>     return(c(x, E));<br/>    }<br/>   )<br/>  )<br/>  #<em class="nc">create one pendulum and init with 700 as frequency of auto-oscillation</em><br/>  p &lt;- pendulum();<br/>  p$init(700);<br/>  #<em class="nc">init a vector of waveforms with frequencies from 500 to 900</em><br/>  m &lt;- aaply(seq(500, 900, 50), 1, function(x) sine(x, 1500)@left);<br/>  # <em class="nc">clear end of the waveform</em><br/>  m[, 1001:1500] &lt;- 0;<br/>  #<em class="nc">apply the pendulum tick to the vector of waveforms</em><br/>  m &lt;- t(m);<br/>  r &lt;- aaply(m, c(1, 2), p$tick, .progress = "time");<br/>  #<em class="nc">index of the waveform to plot</em><br/>  i &lt;- 5;<br/>  #<em class="nc">show results</em><br/>  plot(m[, i] * 100, type = "l", col = "dark green");<br/>  lines(r[ , i, 1], type = "l", col = "blue");<br/>  lines(r[ , i, 2], type = "l", col = "red");</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/7c94d2f6060bd9e465262bc67a8cd570.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*cpaijWXlr-rhV4tNdmvIFw.jpeg"/></div></figure><p id="4dbf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">沿着这个链接可以找到R码:<a class="ae lk" href="http://bosyi.com/craft/natural-ear-digital-sound-processing-fourier-transformation/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> R码</strong> </a></p><h2 id="5858" class="mw ma iq bd mb ne nf dn mf ng nh dp mj ko ni nj ml ks nk nl mn kw nm nn mp no bi translated">附言（同postscript）；警官（police sergeant）</h2><p id="82e9" class="pw-post-body-paragraph kf kg iq kh b ki np jr kk kl nq ju kn ko nr kq kr ks ns ku kv kw nt ky kz la ij bi translated">对于个人问题，请在<a class="ae lk" href="https://www.linkedin.com/in/andybosyi/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>或<a class="ae lk" href="https://www.facebook.com/profile.php?id=100013517439841" rel="noopener ugc nofollow" target="_blank">脸书</a>上联系我，有时我会在那里发布关于人工智能的简短新闻和想法。<br/>如果有AI方面的需求，或者需要组建数据科学咨询团队，请联系我</p></div></div>    
</body>
</html>