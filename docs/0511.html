<html>
<head>
<title>How to develop, deploy and scale a Data Science algorithm in one HOUR!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在一小时内开发、部署和扩展一个数据科学算法！</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-develop-deploy-and-scale-a-data-science-algorithm-in-one-hour-6c43f2b78f1d?source=collection_archive---------3-----------------------#2017-05-12">https://towardsdatascience.com/how-to-develop-deploy-and-scale-a-data-science-algorithm-in-one-hour-6c43f2b78f1d?source=collection_archive---------3-----------------------#2017-05-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div class="gh gi io"><img src="../Images/a8d4887aebe1098e43c034a042e20043.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*5VPhGEf7wJ-qG88JI2zg4A.jpeg"/></div></figure><div class=""/><p id="2381" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这样你就有了一张数据表。您希望使用所有其他列中的值来预测一列中的值。您需要训练、测试、部署和生产(即，使其在API背后可用)一种算法，该算法将根据输入特征准确预测输出特征。我们开始吧。</p><p id="5540" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在我们开始之前，你需要一个<a class="ae ks" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> AWS </a>账户。不要问问题，直接报名，现收现付，很便宜。其次，您还需要访问Linux终端。我用的是<a class="ae ks" href="https://c9.io" rel="noopener ugc nofollow" target="_blank">云9 </a>，它太棒了，而且有一个免费选项。最后，用你的AWS证书在你的Linux终端上安装并设置<a class="ae ks" href="https://serverless.com/" rel="noopener ugc nofollow" target="_blank">无服务器框架</a>，这是开源的好日子。</p><p id="cb46" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">第一步:去<a class="ae ks" href="https://aws.amazon.com/s3/" rel="noopener ugc nofollow" target="_blank"> S3 </a>上传你的CSV格式的数据。</p><p id="1128" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">第二步:在AWS上进入<a class="ae ks" href="https://aws.amazon.com/machine-learning/" rel="noopener ugc nofollow" target="_blank">亚马逊机器学习</a>，点击‘新建...’然后是“数据源和ML模型”。遵循要求的步骤(步骤不多，应该很简单，只需使用默认选项)。一旦完成，亚马逊机器学习将构建、训练和测试算法。</p><p id="9fba" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">第三步:每个人都知道好的模型需要好的数据，“垃圾进垃圾出”等等。现在请评估您的模型，如这里的<a class="ae ks" href="http://docs.aws.amazon.com/machine-learning/latest/dg/evaluating_models.html" rel="noopener ugc nofollow" target="_blank">所解释的</a>。</p><p id="031b" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">步骤4:现在让我们部署模型。按照这些步骤<a class="ae ks" href="http://docs.aws.amazon.com/machine-learning/latest/dg/requesting-real-time-predictions.html#creating-a-real-time-endpoint" rel="noopener ugc nofollow" target="_blank">为您的模型</a>创建一个实时端点(阅读文档并自己按照这些步骤来做确实是一个很好的实践)。</p><p id="04c6" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">第五步:接下来是有趣的部分。我们将使用<a class="ae ks" href="https://aws.amazon.com/lambda/" rel="noopener ugc nofollow" target="_blank"> AWS Lambda </a>和<a class="ae ks" href="https://aws.amazon.com/api-gateway/" rel="noopener ugc nofollow" target="_blank"> Amazon API Gateway </a>来处理对算法的请求。最棒的是，你甚至不会知道你正在使用它们！我将更详细地介绍这些步骤:</p><p id="8b7e" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">步骤5a:在您的Linux终端中，键入:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="7ff0" class="lc ld ix ky b gy le lf l lg lh">serverless create --template aws-nodejs --path my-first-algorithm</span></pre><p id="3c1c" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">步骤5b:在新创建的文件夹中，将其粘贴到“serverless.yml”文件中:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="1fe3" class="lc ld ix ky b gy le lf l lg lh">service: <!-- -->my-first-algorithm</span><span id="1ebd" class="lc ld ix ky b gy li lf l lg lh">provider:<br/>  name: aws<br/>  runtime: nodejs4.3</span><span id="1f73" class="lc ld ix ky b gy li lf l lg lh">iamRoleStatements:<br/>  - Effect: Allow<br/>    Action:<br/>      - machinelearning:Predict<br/>    Resource: "*"</span><span id="b959" class="lc ld ix ky b gy li lf l lg lh">functions:<br/>  model:<br/>    handler: handler.model<br/>    events:<br/>    - http:<br/>        path: model<br/>        method: post<br/>        cors: true</span></pre><p id="0082" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">步骤5b:将下面的代码粘贴到您的“handler.js”文件中，插入您在上面的步骤4中找到的正确的“MLModelId”和“PredictEndpoint”(我的示例只有一个输入特征，如果您的特定模型需要，请重命名并添加额外的特征):</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="8fab" class="lc ld ix ky b gy le lf l lg lh">// load aws sdk<br/>const AWS = require('aws-sdk');</span><span id="89c0" class="lc ld ix ky b gy li lf l lg lh">// load AWS MachineLearning<br/>var machinelearning = new AWS.MachineLearning({apiVersion: '2014-12-12'});</span><span id="1fe9" class="lc ld ix ky b gy li lf l lg lh">module.exports.model = (event, context, callback) =&gt; {</span><span id="2ea4" class="lc ld ix ky b gy li lf l lg lh">  var data = JSON.parse(event.body);<br/>  var inputFeature1Data = data.inputFeature1;</span><span id="9eab" class="lc ld ix ky b gy li lf l lg lh">  var params = {<br/>    MLModelId: <strong class="ky iy">INSERT-THIS-YOURSELF</strong>,<br/>    PredictEndpoint: <strong class="ky iy">INSERT-THIS-YOURSELF</strong>,<br/>    Record: {<br/>      inputFeature1: inputFeature1Data<br/>    }<br/>  };</span><span id="9e74" class="lc ld ix ky b gy li lf l lg lh">  machinelearning.predict(params, function(err, data) {<br/>    if (err) {<br/>        const response = {<br/>          headers: {'Access-Control-Allow-Origin': '*'},<br/>          statusCode: err.statusCode,<br/>          body: JSON.stringify(err)<br/>        };<br/>        callback(null, response);<br/>    } else {<br/>        const response = {<br/>          headers: {'Access-Control-Allow-Origin': '*'},<br/>          statusCode: 200,<br/>          body: JSON.stringify(data)<br/>        };<br/>        callback(null, response);<br/>    }<br/>  });</span><span id="9460" class="lc ld ix ky b gy li lf l lg lh">};</span></pre><p id="264a" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">步骤5c:确保您仍然在Linux终端中新创建的文件夹中，并键入<code class="fe lj lk ll ky b">serverless deploy</code>，等待服务部署，一旦您看到“端点”url，您就可以开始了。</p><p id="2864" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">您可以通过将下面的代码粘贴到您的Linux终端来测试该模型的工作情况(将“endpoint-url”替换为步骤5c中的url端点) :</p><p id="2917" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><code class="fe lj lk ll ky b">curl -X POST endpoint-url --data '{"inputFeature1":7}'</code></p><p id="4eb8" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在，您已经有了一个在生产中完全部署和可用的算法。它可以扩展到处理所有请求，并且完全由AWS管理，您不需要做任何维护，太棒了！这个工作流程很神奇，尤其是如果你想建立一个概念验证算法的话。添加API密钥或JSON web令牌验证将提供必要的安全性，只允许特定用户访问您的算法。</p><p id="690a" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我希望您对此感兴趣，我确实认为这是数据科学工作流程中的一个范式转变。</p><p id="aa16" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">附:这是我第一次在网上发帖，请评论但不要太苛刻:)</p></div></div>    
</body>
</html>