<html>
<head>
<title>Various ways to evaluate a machine learning model’s performance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">评估机器学习模型性能的各种方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/various-ways-to-evaluate-a-machine-learning-models-performance-230449055f15?source=collection_archive---------1-----------------------#2018-12-30">https://towardsdatascience.com/various-ways-to-evaluate-a-machine-learning-models-performance-230449055f15?source=collection_archive---------1-----------------------#2018-12-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="61ba" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">因为找准了还不够。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d2c21d3d2a3ce6aa236b46d7e07ad173.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*WI43epHjl6I6FzBVPzvXAQ.gif"/></div></div></figure><p id="adf6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这篇博客中，我们将讨论检查我们的机器学习或深度学习模型的性能的各种方法，以及为什么要使用其中一种来代替另一种。我们将讨论以下术语:</p><ol class=""><li id="8327" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">混淆矩阵</li><li id="9f1b" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">准确(性)</li><li id="31c6" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">精确</li><li id="7f8e" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">回忆</li><li id="96e4" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">特征</li><li id="dcb2" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">F1 分数</li><li id="8fe3" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">精确回忆或 PR 曲线</li><li id="6f95" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated"><strong class="kt ir"> ROC </strong> ( <strong class="kt ir"> R </strong>接收者<strong class="kt ir"> O </strong>操作者<strong class="kt ir"> C </strong>特征)曲线</li><li id="ca5a" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">PR 对 ROC 曲线。</li></ol></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="4e1a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了简单起见，我们将主要讨论二进制分类问题，比如说我们必须找到一张图片是猫还是狗。或者患者患有癌症(阳性)或被发现健康(阴性)。需要明确的一些常见术语有:</p><p id="fa46" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">真阳性(TP) </strong>:预测阳性和实际阳性。</p><p id="d12f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">假阳性(FP) </strong>:预测为阳性，实际为阴性。</p><p id="8524" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">真否定(TN) </strong>:预测否定，实际否定。</p><p id="267b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">假阴性(FN) </strong>:预测阴性，实际阳性。</p><p id="472b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以让我们开始吧！</p><h1 id="d2f8" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated"><strong class="ak">混淆矩阵</strong></h1><p id="19e1" class="pw-post-body-paragraph kr ks iq kt b ku na jr kw kx nb ju kz la nc lc ld le nd lg lh li ne lk ll lm ij bi translated">它只是上述参数的一个矩阵形式的表示。更好的可视化总是好的:)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/df39be122681c1703c1e458b115077f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*yYctsCAlkQHixEHYy0dHPw.png"/></div></figure><h1 id="99fe" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated"><strong class="ak">精度</strong></h1><p id="67b8" class="pw-post-body-paragraph kr ks iq kt b ku na jr kw kx nb ju kz la nc lc ld le nd lg lh li ne lk ll lm ij bi translated">判断一个模型最常用的指标，实际上并不是一个明确的性能指标。当阶级不平衡时，情况会变得更糟。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/1f25746244da2eb597f1ea1757654f36.png" data-original-src="https://miro.medium.com/v2/resize:fit:460/format:webp/1*PfGgbFFjLjGYkp_lHXFvgg.png"/></div></figure><p id="73ab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以癌症检测模型为例。实际上患癌症的几率非常低。假设 100 个病人中，90 个没有患癌症，剩下的 10 个实际上患了癌症。我们不想错过一个患有癌症但未被发现的患者(假阴性)。检测每个人是否患有癌症的准确率高达 90%。这个模型在这里什么也没做，只是给出了所有 100 个预测中没有癌症。</p><p id="d503" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们当然需要更好的选择。</p><h1 id="6bac" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated"><strong class="ak">精度</strong></h1><p id="8f59" class="pw-post-body-paragraph kr ks iq kt b ku na jr kw kx nb ju kz la nc lc ld le nd lg lh li ne lk ll lm ij bi translated">阳性实例占<strong class="kt ir"> <em class="nh">总预测阳性</em> </strong>实例的百分比。这里的分母是从整个给定数据集得到的正的模型预测。把它当成是找出'<em class="nh">模型说对了有多少是对的'。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/1269b0c2e34df1e9269bd2ad6f83e986.png" data-original-src="https://miro.medium.com/v2/resize:fit:210/format:webp/1*LWDZT9hRYc7BAzpeZUOZrg.png"/></div></figure><h1 id="b029" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated"><strong class="ak">召回/灵敏度/真阳性率</strong></h1><p id="ecd9" class="pw-post-body-paragraph kr ks iq kt b ku na jr kw kx nb ju kz la nc lc ld le nd lg lh li ne lk ll lm ij bi translated">阳性实例占<strong class="kt ir"> <em class="nh">总实际阳性</em> </strong>实例的百分比。因此，分母(<em class="nh"> TP + FN) </em>这里是数据集中存在的阳性实例的<em class="nh">实际</em>数量。把它当作找出'<em class="nh">当显示正确的时候，模型错过了多少额外的正确的。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/2300b32ded5fd5fc93aee4669905f6cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:222/format:webp/1*U_CKVn3iy9WN6ckfZ9_LeA.png"/></div></figure><h1 id="9091" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated"><strong class="ak">特异性</strong></h1><p id="8fa6" class="pw-post-body-paragraph kr ks iq kt b ku na jr kw kx nb ju kz la nc lc ld le nd lg lh li ne lk ll lm ij bi translated"><strong class="kt ir"> <em class="nh">中的负实例占总实际负</em> </strong>实例的百分比。因此，分母(<em class="nh"> TN + FP) </em>这里是数据集中存在的否定实例的实际<em class="nh">数量。它类似于回忆，但转移是在否定的情况下。<em class="nh">比如找出有多少健康的患者没有患癌症，并被告知他们没有患癌症</em>。这是一种衡量等级的方法。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/9b439b961c67190cc5445c22fed6e358.png" data-original-src="https://miro.medium.com/v2/resize:fit:226/format:webp/1*LbcyTuMKRer8sn44Hb-k2A.png"/></div></figure><h1 id="5103" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated"><strong class="ak"> F1 得分</strong></h1><p id="695f" class="pw-post-body-paragraph kr ks iq kt b ku na jr kw kx nb ju kz la nc lc ld le nd lg lh li ne lk ll lm ij bi translated">它<strong class="kt ir"> </strong>是精度和召回率的调和平均值。这需要两者的贡献，所以 F1 分数越高越好。请注意，由于分子中的乘积，如果一个值变低，最终的 F1 分数会显著下降。因此，如果正面预测实际上是正面的(精确度)，并且没有错过正面而预测它们是负面的(回忆)，那么模型在 F1 分数中表现良好。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/a33a0bf4c33d0846c7880a624731fe21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*rxeJQS0ALoR3pFNFjgTD6g.png"/></div></figure><p id="a9b1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一个缺点是，精确度和召回率同等重要，根据我们的应用，我们可能需要一个比另一个高，F1 分数可能不是它的精确度量。因此，加权 F1 分数或查看 PR 或 ROC 曲线会有所帮助。</p><h1 id="4ab7" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated"><strong class="ak"> PR 曲线</strong></h1><p id="bf8e" class="pw-post-body-paragraph kr ks iq kt b ku na jr kw kx nb ju kz la nc lc ld le nd lg lh li ne lk ll lm ij bi translated"><em class="nh">是各种阈值下的精度和召回率之间的曲线。</em>在下图中，我们有 6 个预测值，显示了它们在不同阈值下各自的精度-召回曲线。图的右上部分是我们获得高精度和召回率的理想空间。基于我们的应用，我们可以选择预测值和阈值。PR AUC 就是曲线下的面积。其数值越高越好。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/b168e20368a049f54d0ac04fc4137680.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/format:webp/1*FPT_ykB5W226a-GW3g8l5A.png"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk"><a class="ae nr" href="https://github.com/MenuPolis/MLT/wiki/PR-Curve" rel="noopener ugc nofollow" target="_blank">image link</a></figcaption></figure><h1 id="ddce" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated"><strong class="ak"> ROC 曲线</strong></h1><p id="ddfb" class="pw-post-body-paragraph kr ks iq kt b ku na jr kw kx nb ju kz la nc lc ld le nd lg lh li ne lk ll lm ij bi translated">ROC 代表接收机工作特性，该图是针对不同阈值的 TPR 和 FPR 绘制的。随着 TPR 增加，FPR 也增加。正如您在第一张图中看到的，我们有四个类别，我们希望阈值使我们更接近左上角。在给定的数据集上比较不同的预测值(这里是 3 个)也变得很容易，如图 2 所示，可以根据手边的应用选择阈值。ROC AUC 就是曲线下的面积，它的数值越高越好。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/803e83f95cccfc636f72815c832173db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*fBI1yO-Xu_wHKZvoPvvC7A.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/b7f86432f4a3552b1091667e6c055773.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FCSa6e-OM1zFQWF2P0qcJg.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/f8550ace255ce4e2b9ca50957e626c0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3eRQjKTr18QOuozyl3daMQ.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk"><a class="ae nr" href="https://en.wikipedia.org/wiki/Receiver_operating_characteristic" rel="noopener ugc nofollow" target="_blank">wiki link</a></figcaption></figure><h1 id="c121" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">PR 对 ROC 曲线</h1><p id="71e8" class="pw-post-body-paragraph kr ks iq kt b ku na jr kw kx nb ju kz la nc lc ld le nd lg lh li ne lk ll lm ij bi translated">这两个指标被广泛用于判断一个模型的性能。</p><p id="1ae3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="nh">用 PR 还是 ROC 哪个？</em> </strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/66dacae37d90565dc04c54251411faae.png" data-original-src="https://miro.medium.com/v2/resize:fit:556/format:webp/1*AoGHFTO3ujcJ5chQnJ-MJQ.png"/></div></figure><p id="d921" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">答案在于真正的否定。</p><p id="e458" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">由于精确召回方程中没有 TN，它们在不平衡类中很有用</strong>。在阶级不平衡的情况下，当消极的阶级占多数时。该度量标准没有太多地考虑占多数的否定类别的大量真实否定，从而对不平衡提供了更好的抵抗力。当阳性类别的检测非常重要时，这是很重要的。</p><p id="2cf3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我喜欢检测癌症患者，这有很高的不平衡，因为在所有被诊断的患者中很少有人患有癌症。我们当然不希望漏掉一个未被发现的癌症患者(回忆)，并确保被发现的人患有癌症(精确)。</p><p id="0dc2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">由于考虑到 TN 或 ROC 方程中的负类，当这两类对我们都重要时，这是有用的。像猫狗的探测。真实否定的重要性确保了两个类都被赋予了重要性，就像 CNN 模型在确定图像是猫还是狗时的输出一样。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="bce3" class="mi mj iq bd mk ml nw mn mo mp nx mr ms jw ny jx mu jz nz ka mw kc oa kd my mz bi translated">结论</h1><p id="39f5" class="pw-post-body-paragraph kr ks iq kt b ku na jr kw kx nb ju kz la nc lc ld le nd lg lh li ne lk ll lm ij bi translated">要使用的评估标准在很大程度上取决于手头的任务。很长一段时间，准确性是我使用的唯一衡量标准，这确实是一个模糊的选项。我希望这篇博客对你有用。那都是我这边的。随时建议改正和改进。</p></div></div>    
</body>
</html>