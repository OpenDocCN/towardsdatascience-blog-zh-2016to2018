<html>
<head>
<title>What’s happened in a world last month: world news analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">上个月世界发生了什么:世界新闻分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/whats-happened-in-a-world-last-month-world-news-analysis-b7e540d45d64?source=collection_archive---------11-----------------------#2018-11-01">https://towardsdatascience.com/whats-happened-in-a-world-last-month-world-news-analysis-b7e540d45d64?source=collection_archive---------11-----------------------#2018-11-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/></div><div class="ab cl jn jo hu jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="ij ik il im in"><blockquote class="ju jv jw"><p id="c2d2" class="jx jy jz ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第二部在这里！上个月世界发生了什么:世界新闻分析第二部分</p></blockquote><p id="b0e5" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">分析数据总是有趣的，即使你不像我之前的帖子那样创建数据——<a class="ae kw" href="https://medium.com/p/8d7a4c0790c7?source=your_stories_page---------------------------" rel="noopener">Youtube 频道分析:识别影响者和憎恨者</a>。但是，如果我们可以从完全不同的来源、地区、国家和大陆收集最受欢迎的新闻，会怎么样呢？如果我们每天都这样做，比如说一个月或一年，会怎么样？我们会看到什么？这是一个挑战！带着这个想法，我开始准备自己的数据集。我会继续更新那个页面，但即使是现在我们也可能会看到一些见解！主要目的是通过全球新闻更好地了解我们的世界。</p><p id="fd46" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">我于 2018 年 10 月 23 日开始网络搜集。每天我都会收到大约 3000 篇新文章，涉及全球范围内的各种话题。因此，在开始时，我们将创建一个地图来显示我们数据集中的全球新闻报道的大图。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="f39f" class="lj lk iq lf b gy ll lm l ln lo">data(worldgeojson, package = "highcharter")</span><span id="7ba8" class="lj lk iq lf b gy lp lm l ln lo">test %&gt;% <br/>  count(name) -&gt; countries</span><span id="ad6b" class="lj lk iq lf b gy lp lm l ln lo">highchart() %&gt;%<br/>  hc_add_series_map(worldgeojson, countries, value = "n", joinBy = c('name'))  %&gt;% <br/>  #hc_colors(c("darkorange", "darkgray")) %&gt;% <br/>  hc_colorAxis(stops = color_stops()) %&gt;% <br/>  hc_title(text = "Where the most news come from?") %&gt;% <br/>  hc_subtitle(text = "Count on every country")%&gt;%<br/>hc_legend(layout = "horizontal", align = "center",<br/>floating = TRUE, valueDecimals = 0,<br/>valueSuffix = "%") %&gt;%<br/>hc_mapNavigation(enabled = TRUE)</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lq"><img src="../Images/79027dacc2949fcada56b1a6bb1669f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BmH25WIvIick3hxxoyj-GA.png"/></div></div></figure><p id="a95a" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">我们试图与每一个大洲取得联系，我认为除了一些第三世界国家之外，这些数据都很有代表性。真正的瓶颈是处理多语言数据。尤其是用一种罕见的语言。文本分析工具有一些限制，这些工具从一些可视化中排除了一些(中文、俄文、土耳其文、挪威语)。这个问题应该进一步解决。现在，<strong class="ka ir">让我们看看新闻在各个国家的分布。</strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="face" class="lj lk iq lf b gy ll lm l ln lo">test %&gt;%<br/>  count(name) %&gt;%<br/>  arrange(desc(n)) %&gt;%<br/>  mutate(name = fct_reorder(name, n)) %&gt;%<br/>  ggplot(aes(name, n, fill = name)) +<br/>  geom_col() +<br/>  coord_flip() +<br/>  expand_limits(y = 0) +<br/>  theme(legend.position = "none")+<br/>  labs(title="Where the most news come from?", <br/>       subtitle = "Breakdown by Country", <br/>       x = "",<br/>       y = ""<br/>  )</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi ly"><img src="../Images/74811f78d74ba7ab2a8359efe33d6561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2QIveIYZWSGpjFaodDyY5A.png"/></div></div></figure><p id="8f5b" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">英国在我们的数据集中处于领先地位，紧随其后的是美国和意大利(这是一个惊喜)。接下来我们将尝试描述一些流行和重要的话题。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="d129" class="lj lk iq lf b gy ll lm l ln lo">test %&gt;%<br/>  filter(<br/>    str_detect(text, " war |warships|wars"))%&gt;%<br/>  filter(name!="Austria")%&gt;%<br/>  filter(name!="Germany")%&gt;%<br/>  ggplot(aes(Date, fill= name))+<br/>  geom_histogram()+<br/>  labs(title="News frequency with a 'war' word", <br/>       subtitle = "Breakdown by Country/Date", <br/>       x = "",<br/>       y = ""<br/>  )</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lz"><img src="../Images/b3500e044fc55eaf48d894dcf39c595d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Aulfh1sh1TkQcXMO3bDzsA.png"/></div></div></figure><p id="27b1" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">我们看到，有些日子风平浪静，有些日子却用一个“战”字创造了不同的故事。但是我们应该记住,“战争”有不同的含义。仔细看看它:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="7f22" class="lj lk iq lf b gy ll lm l ln lo">war &lt;- test %&gt;%<br/>  filter(<br/>    str_detect(text, " war |warships|wars")) %&gt;%<br/>  filter(name!="Austria") %&gt;%<br/>  filter(name!="Germany") %&gt;%<br/>  group_by(name) %&gt;%<br/>  View()</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi ma"><img src="../Images/2fb2f952d1d2cafc28177f38a18d44f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X6i7yY0JrEIDhjxQvXPMow.png"/></div></div></figure><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mb"><img src="../Images/f45d6fdf718407f8994fa8b32a94a84f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UpUgys6ZWPTTpsPKgykvXw.png"/></div></div></figure><p id="ab1f" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated"><strong class="ka ir">那么哪个国家谈论“战争”最多呢？</strong>按所有国家和语言细分:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="3df1" class="lj lk iq lf b gy ll lm l ln lo">war &lt;- test %&gt;%<br/>  filter(str_detect(text, " war |warships|wars|войн| guerra | la guerre |战争")) %&gt;%<br/>  filter(name != "Austria") %&gt;%<br/>  filter(name != "Germany") %&gt;%<br/>  group_by(name) %&gt;%<br/>  count(name)<br/>View()</span><span id="219e" class="lj lk iq lf b gy lp lm l ln lo">#'war' for a German language means different thing so we process it separately<br/>Austria &lt;- test %&gt;%<br/>  filter((name == "Austria"))<br/>Austria &lt;- Austria %&gt;%<br/>  filter(str_detect(text, " Krieg | Krieges")) %&gt;%<br/>  count(name)</span><span id="c39a" class="lj lk iq lf b gy lp lm l ln lo">Germany &lt;- test %&gt;%<br/>  filter((name == "Germany"))<br/>Germany &lt;- Germany %&gt;%<br/>  filter(str_detect(text, " Krieg | Krieges")) %&gt;%<br/>  count(name)</span><span id="87f0" class="lj lk iq lf b gy lp lm l ln lo">war_full &lt;- rbind.data.frame(war, Austria, Germany)<br/>war_full &lt;- as.data.frame(war_full)</span><span id="cc56" class="lj lk iq lf b gy lp lm l ln lo">#breakdown by country<br/>war_full %&gt;%<br/>  mutate(name = fct_reorder(name, n)) %&gt;%<br/>  ggplot(aes(name, n, fill = name)) +<br/>  geom_col() +<br/>  theme(legend.position = "none") +<br/>  labs(<br/>    title = "News frequency with a 'war' word",<br/>    subtitle = "Breakdown by Country",<br/>    x = "",<br/>    y = ""<br/>  )</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mc"><img src="../Images/86ccae49062eb5d214f2db63541c240a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6uip1cTEfzBR2yo0OkNxlg.png"/></div></div></figure><p id="5f72" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">哪个国家谈论<strong class="ka ir"/>“贸易战”最多？</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="4ece" class="lj lk iq lf b gy ll lm l ln lo">test %&gt;%<br/>  filter(<br/>    str_detect(<br/>      text,<br/>      " trade war | trade wars | торговая война | guerre commerciale | guerra comercial | Handelskrieg |贸易战"<br/>    )<br/>  ) %&gt;%<br/>  count(name) %&gt;%<br/>  arrange(desc(n)) %&gt;%<br/>  mutate(name = fct_reorder(name, n)) %&gt;%<br/>  ggplot(aes(name, n, fill = name)) +<br/>  geom_col() +<br/>  coord_flip() +<br/>  expand_limits(y = 0) +<br/>  theme(legend.position = "none") +<br/>  labs(<br/>    title = "News frequency with a 'trade war' word",<br/>    subtitle = "Breakdown by Country",<br/>    x = "",<br/>    y = ""<br/>  )</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi md"><img src="../Images/a77953d57e2abd77b88ff6441f01e7f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oUmHHWgAuONGyvudERKnkQ.png"/></div></div></figure><p id="1c41" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">但是我们有带<strong class="ka ir"/>字的“平安”新闻吗？在我们的世界找到和平是真的吗？</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="7c4b" class="lj lk iq lf b gy ll lm l ln lo">test %&gt;%<br/>  filter(str_detect(text, "peace | frieden | pace | paz |和平")) %&gt;%<br/>  count(name) %&gt;%<br/>  mutate(name = fct_reorder(name, n)) %&gt;%<br/>  ggplot(aes(name, n, fill = name)) +<br/>  geom_col() +<br/>  theme(legend.position = "none") +<br/>  labs(<br/>    title = "News frequency with a 'peace' word",<br/>    subtitle = "Breakdown by Country",<br/>    x = "",<br/>    y = ""<br/>  )</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi me"><img src="../Images/2638d33dcd773936f0f913d89f0f2749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S0EHE2HWDxc_l_uqft549A.png"/></div></div></figure><p id="7f35" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">而<strong class="ka ir">【假】【真】</strong>新闻呢？新闻机构使用这个词吗，或者它是一个时代错误？</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="674e" class="lj lk iq lf b gy ll lm l ln lo">fake &lt;- test %&gt;%<br/>  filter(str_detect(text, " fake | falso | faux | falschung|假")) %&gt;%<br/>  count(name)<br/>fake$id &lt;- "fake"</span><span id="247a" class="lj lk iq lf b gy lp lm l ln lo">true &lt;- test %&gt;%<br/>  filter(str_detect(text, " true | wahr | vrai | vero | cierto|真正")) %&gt;%<br/>  count(name)<br/>true$id &lt;- "true"</span><span id="0427" class="lj lk iq lf b gy lp lm l ln lo">faketrue &lt;- rbind(fake, true)</span><span id="5171" class="lj lk iq lf b gy lp lm l ln lo">faketrue %&gt;%<br/>  mutate(name = fct_reorder(name, n)) %&gt;%<br/>  ggplot() +<br/>  geom_bar(aes(name, n, fill = id), stat = "identity", position = "dodge") +<br/>  coord_flip() +<br/>  theme(<br/>    legend.position = "bottom",<br/>    legend.title = element_blank(),<br/>    axis.title = element_blank()<br/>  ) +<br/>  labs(<br/>    title = "Frequency of 'fake' and 'true' words in news",<br/>    subtitle = "Breakdown by Country",<br/>    x = "",<br/>    y = ""<br/>  )</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mf"><img src="../Images/0b1b18cd77bc5bcf68ba2a5af78ad7e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eiy4tVNqcEE3EV3WxXIkcw.png"/></div></div></figure><p id="8306" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">“假”新闻在爱尔兰和中国很受欢迎，而新西兰和加拿大、英国的新闻中“真”字出现频率最高。<strong class="ka ir">让我们看看哪个国家有最“震撼”的新闻:</strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="858d" class="lj lk iq lf b gy ll lm l ln lo">test %&gt;%<br/>  filter(str_detect(text, " shock | choque | choc | schock|休克|震动|浓密的")) %&gt;%<br/>  count(name) %&gt;%<br/>  mutate(name = fct_reorder(name, n)) %&gt;%<br/>  ggplot(aes(name, n, fill = name)) +<br/>  geom_col() +<br/>  theme(legend.position = "none", axis.title = element_blank()) +<br/>  labs(<br/>    title = "Which countries have the most 'shocking' news",<br/>    subtitle = "Breakdown by Country",<br/>    x = "",<br/>    y = ""<br/>  )</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mg"><img src="../Images/de8defa2fbf38afedd51a4ab05ca48c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LZ7y7DWACC9RKXnI_iNowA.png"/></div></div></figure><p id="acd1" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">仔细看看:</p><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mh"><img src="../Images/fb9bff2ba7ddab3d828aaf317580d386.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ji9uW9FJ--rq2f0dV1wQA.png"/></div></div></figure><p id="bef9" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">That’s a news that shocked our world. From presidential selections to Doctor Who fans. <strong class="ka ir">Which countries have the most “bad” and “good” words in their news?</strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="cc41" class="lj lk iq lf b gy ll lm l ln lo">bad &lt;- test %&gt;%<br/>  filter(str_detect(text, " bad |坏")) %&gt;%<br/>  count(name)<br/>bad$id &lt;- "bad"</span><span id="9d2c" class="lj lk iq lf b gy lp lm l ln lo">good &lt;- test %&gt;%<br/>  filter(str_detect(text, " good |好")) %&gt;%<br/>  filter(name != "Austria") %&gt;%<br/>  filter(name != "Germany") %&gt;%<br/>  count(name)<br/>good$id &lt;- "good"</span><span id="75e0" class="lj lk iq lf b gy lp lm l ln lo">badgood &lt;- rbind(bad, good)</span><span id="be54" class="lj lk iq lf b gy lp lm l ln lo">badgood %&gt;%<br/>  mutate(name = fct_reorder(name, n)) %&gt;%<br/>  ggplot() +<br/>  geom_bar(aes(name, n, fill = id), stat = "identity", position = "dodge") +<br/>  coord_flip() +<br/>  theme(<br/>    legend.position = "bottom",<br/>    legend.title = element_blank(),<br/>    axis.title = element_blank()<br/>  ) +<br/>  labs(<br/>    title = "Which countries have the most 'bad' and 'good' news?",<br/>    subtitle = "Breakdown by Country",<br/>    x = "",<br/>    y = ""<br/>  )</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mi"><img src="../Images/aff417ad825a81a4dd48e72d5732e1c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hy8sSxNewtgFJPott4bBLA.png"/></div></div></figure><p id="31ae" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">Well, as we clearly see “good” news are prevail. But is it really true? We will check it later with a sentiment analysis of the whole dataset.</p><p id="2938" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">Coming next, <strong class="ka ir">we’ll plot a chart with a “death” word frequency through different countries.</strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="399f" class="lj lk iq lf b gy ll lm l ln lo">test %&gt;%<br/>  filter(str_detect(text, " death | Tod | muerte | mort| смерть|死亡")) %&gt;%<br/>  count(name) %&gt;%<br/>  arrange(desc(n)) %&gt;%<br/>  mutate(name = fct_reorder(name, n)) %&gt;%<br/>  ggplot(aes(name, n, fill = name)) +<br/>  geom_col() +<br/>  coord_flip() +<br/>  expand_limits(y = 0) +<br/>  theme(legend.position = "none") +<br/>  labs(<br/>    title = "News frequency with a 'death' word",<br/>    subtitle = "Breakdown by Country",<br/>    x = "",<br/>    y = ""<br/>  )</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mj"><img src="../Images/ef0ee4104d500f3d40866f14f400df3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*diB0uCx0DdQlOjrqSJffiw.png"/></div></div></figure><p id="dd1b" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">Italy has the leading position with a biggest numbers. We should take a closer look on it applying topic modelling technique(LDA algorithm).</p><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mk"><img src="../Images/c348dd32a07af6688bede0a7525d7138.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oCFrrtDGPZh1Atxosw0crg.png"/></div></div></figure><p id="cc6b" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">Checking our topics with Google Translator we’d get some understanding about what’s going on.</p><p id="1f65" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">Hope that somebody still reading this:) so let’s take a look on a domestic news that always cover government personas at some point. <strong class="ka ir">I think that will be interesting to see some type of popularity between a couple of government leaders through a whole world.</strong> For example, we may choose:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="87a1" class="lj lk iq lf b gy ll lm l ln lo">Trump &lt;- test %&gt;%<br/>  filter(str_detect(text, "Trump|特朗普| Трамп ")) %&gt;%<br/>  count(name)<br/>Trump$id &lt;- "Trump"</span><span id="fa77" class="lj lk iq lf b gy lp lm l ln lo">Putin &lt;- test %&gt;%<br/>  filter(str_detect(text, "Putin |普京| Путин ")) %&gt;%<br/>  count(name)<br/>Putin$id &lt;- "Putin"</span><span id="5ce3" class="lj lk iq lf b gy lp lm l ln lo">Merkel &lt;- test %&gt;%<br/>  filter(str_detect(text, "Merkel |默克爾| Меркель ")) %&gt;%<br/>  count(name)<br/>Merkel$id &lt;- "Merkel"</span><span id="b276" class="lj lk iq lf b gy lp lm l ln lo">Jinping &lt;- test %&gt;%<br/>  filter(str_detect(text, " Xi Jinping |习近平| Си Цзиньпин")) %&gt;%<br/>  count(name)<br/>Jinping$id &lt;- "Xi Jinping"</span><span id="f725" class="lj lk iq lf b gy lp lm l ln lo">popularity &lt;- rbind(Trump, Putin, Merkel, Jinping)</span><span id="46b7" class="lj lk iq lf b gy lp lm l ln lo">pop &lt;- popularity %&gt;%<br/>  count(id) %&gt;%<br/>  arrange(desc(nn)) %&gt;%<br/>  View()</span><span id="c087" class="lj lk iq lf b gy lp lm l ln lo">popularity %&gt;%<br/>  mutate(name=fct_reorder(name,n))%&gt;%<br/>  ggplot() +<br/>  geom_bar(aes(name, n, fill = id), stat = "identity", position = "dodge") +<br/>  coord_flip() +<br/>  theme(<br/>    legend.position = "bottom",<br/>    legend.title = element_blank(),<br/>    axis.title = element_blank()<br/>  ) +<br/>  labs(<br/>    title = "Citations on selected national leaders in a news",<br/>    subtitle = "Breakdown by Country",<br/>    x = "",<br/>    y = ""<br/>  )</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi ml"><img src="../Images/421101cb40966c51e5b78656a762418e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jNaizhakD_hGg1YOtCmpTA.png"/></div></div></figure><figure class="la lb lc ld gt lr gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/6cc68e88bda3676547bbcdd4e3e39552.png" data-original-src="https://miro.medium.com/v2/resize:fit:320/format:webp/1*hgdMgpqZKHaYAhpG98Rjtw.png"/></div></figure><p id="589d" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">President Trump has a leading position covering 24 country at all, but this is obvious for anybody who check news sites quite often. Chancellor of Germany — Angela Merkel takes second place following by President of the People’s Republic of China Xi Jinping and president Putin. Surpsingly there are some countries that covers only US president and nobody else from our selection. China and the United States have biggest numbers covering their national leaders, while Germany and Russia have more coverage on a foreign presidents. <strong class="ka ir">Maybe country citations shows some difference?</strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="50ac" class="lj lk iq lf b gy ll lm l ln lo">US &lt;- test %&gt;%<br/>  filter(str_detect(text, " United States | US | USA | Stati Uniti | Etats-Unis| США | 美国")) %&gt;%<br/>  count(name)<br/>US$id &lt;- "United States"</span><span id="0266" class="lj lk iq lf b gy lp lm l ln lo">Germany &lt;- test %&gt;%<br/>  filter(str_detect(<br/>    text,<br/>    " Germany | Deutschland | Alemania | Germania | Allemagne | Германия |德国"<br/>  )) %&gt;%<br/>  count(name)<br/>Germany$id &lt;- "Germany"</span><span id="9108" class="lj lk iq lf b gy lp lm l ln lo">China &lt;- test %&gt;%<br/>  filter(str_detect(text, " China | Chine | Cina |Китай| 中国")) %&gt;%<br/>  count(name)<br/>China$id &lt;- "China"</span><span id="bca7" class="lj lk iq lf b gy lp lm l ln lo">Russia &lt;- test %&gt;%<br/>  filter(str_detect(text, " Russia | Russland| Rusia | Russie |Россия|俄罗斯")) %&gt;%<br/>  count(name)<br/>Russia$id &lt;- "Russia"</span><span id="7556" class="lj lk iq lf b gy lp lm l ln lo">popularity &lt;- rbind(US, Germany, China, Russia)</span><span id="c9b9" class="lj lk iq lf b gy lp lm l ln lo">pop &lt;- popularity %&gt;%<br/>  count(id) %&gt;%<br/>  arrange(desc(nn)) %&gt;%<br/>  View()</span><span id="1f81" class="lj lk iq lf b gy lp lm l ln lo">popularity %&gt;%<br/>  mutate(name=fct_reorder(name,n))%&gt;%<br/>  ggplot() +<br/>  geom_bar(aes(name, n, fill = id), stat = "identity", position = "dodge") +<br/>  coord_flip() +<br/>  theme(<br/>    legend.position = "bottom",<br/>    legend.title = element_blank(),<br/>    axis.title = element_blank()<br/>  ) +<br/>  labs(<br/>    title = "Citations on selected countries in a news",<br/>    subtitle = "Breakdown by Country",<br/>    x = "",<br/>    y = ""<br/>  )</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mn"><img src="../Images/47ce8f8d024bb72ac583fdafbd79bb62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VLPXypg1cqlDlkQ_uQvY7A.png"/></div></div></figure><figure class="la lb lc ld gt lr gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/38ea279a3b7c049900c779ca7b442e14.png" data-original-src="https://miro.medium.com/v2/resize:fit:338/format:webp/1*SPNVndOOBjmXGLJPphOftg.png"/></div></figure><p id="10ae" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">So this is how the balance of power looks like (in a global news coverage of course). The United States, China and Russia have something similar coverage level around the globe! China has the most coverage in Pakistan, Singapore (geographical role explain it well). According to our findings Italy has the lowest interest in United States and Russia have the most highest number of citations on the United States.</p><p id="41ed" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">What if we apply same approach to find some <strong class="ka ir">brand awarness</strong>? We’ll select Apple and Samsung as an example of core players on a market.</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="bb97" class="lj lk iq lf b gy ll lm l ln lo">Apple &lt;- test %&gt;%<br/>  filter(str_detect(text, " Apple ")) %&gt;%<br/>  count(name)<br/>Apple$id &lt;- "Apple"</span><span id="0c7b" class="lj lk iq lf b gy lp lm l ln lo">Samsung &lt;- test %&gt;%<br/>  filter(str_detect(text, " Samsung ")) %&gt;%<br/>  count(name)<br/>Samsung$id &lt;- "Samsung"</span><span id="685b" class="lj lk iq lf b gy lp lm l ln lo">popularity &lt;- rbind(Samsung, Apple)</span><span id="5564" class="lj lk iq lf b gy lp lm l ln lo">popularity %&gt;%<br/>  mutate(name=fct_reorder(name,n)) %&gt;%<br/>  ggplot() +<br/>  geom_bar(aes(name, n, fill = id), stat = "identity", position = "dodge") +<br/>  coord_flip() +<br/>  theme(<br/>    legend.position = "bottom",<br/>    legend.title = element_blank(),<br/>    axis.title = element_blank()<br/>  ) +<br/>  labs(<br/>    title = "Citations on selected brand in a news",<br/>    subtitle = "Breakdown by Country",<br/>    x = "",<br/>    y = ""<br/>  )</span><span id="7636" class="lj lk iq lf b gy lp lm l ln lo">pop &lt;- popularity %&gt;%<br/>  count(id) %&gt;%<br/>  arrange(desc(nn)) %&gt;%<br/>  View()</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/de246c394c9690355d2e1db6b8c87c96.png" data-original-src="https://miro.medium.com/v2/resize:fit:322/format:webp/1*kv6zt5JWLB9CaI_WVMgQ7A.png"/></div></figure><p id="2687" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">Both brands have the same coverage by country in our dataset. But what about chart?</p><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/cb751ba91208e723453cfda0a7abd9a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yxKx3J_N3Cwt-CZ8J5Mivg.png"/></div></div></figure><p id="e99b" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">Pakistan and Turkey have covered Samsung more than Apple, while other countries prefer to look on a Apple’s products more.</p><p id="b1a5" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">What if we would like to see the top 5 most common words that appears in news in a every country? I think that this plot will show some value.</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="b304" class="lj lk iq lf b gy ll lm l ln lo">#I already preprocess dataset and exclude languages that are not supported in tm package</span><span id="1c14" class="lj lk iq lf b gy lp lm l ln lo">top10full %&gt;%<br/>  group_by(name)%&gt;%<br/>  filter(name!="Russia")%&gt;%<br/>  filter(name!="Norway")%&gt;%<br/>  filter(name!="China")%&gt;%<br/>  filter(name!="Turkey")%&gt;%<br/>  ggplot(aes(word,freq, fill= name))+<br/>  geom_col() +<br/>  facet_wrap(~name, scales = 'free_x')+<br/>  theme(legend.position = "none")+<br/>  labs(title="The most top 5 words used in a every news article ", <br/>       subtitle = "breakdown by country", <br/>       x = "",<br/>       y= ""<br/>  )</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mr"><img src="../Images/e21e06eb0493e175e89efdcd07ddfbe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KNvAtgYuTgTME6GZuVrCTg.png"/></div></div></figure><p id="2ff4" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">From that plot, we could say that there is two types of countries. One of them covers their’s government activity the most due to a strong presence on a international or domestic area. The second type is more into different subjects of life or just their government didn’t provide such information to the public.</p><p id="eb43" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">I think that time to apply sentiment analysis on our dataset. First, we’ll look on a timeseries with a different methods :</p><blockquote class="ju jv jw"><p id="cdf9" class="jx jy jz ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">默认的“Syuzhet”词典是由内布拉斯加文学实验室在马修·l·乔克斯的指导下开发的</p><p id="e8e8" class="jx jy jz ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">“afinn”词典是由 Finn Arup Nielsen 作为 AFINN 单词数据库开发的。参见:参见<a class="ae kw" href="http://www2.imm.dtu.dk/pubdb/views/publication_details.php?id=6010" rel="noopener ugc nofollow" target="_blank">http://www2.imm.dtu.dk/pubdb/views/publication_details.php?id = 6010</a>AFINN 单词数据库受版权保护，并根据“开放数据库许可(ODbL)1.0 版”【http://www.opendatacommons.org/licenses/odbl/1.0/ T2】或类似的版权许可发布。</p><p id="b141" class="jx jy jz ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">“冰”词汇是由胡敏清和刘冰开发的意见词汇见:【http://www.cs.uic.edu/~liub/FBS/sentiment-analysis.html】</p><p id="4016" class="jx jy jz ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">“nrc”词典是由 Mohammad，Saif M .和 Turney，Peter D .开发的 NRC 情感词典。<br/>参见:<a class="ae kw" href="http://saifmohammad.com/WebPages/lexicons.html" rel="noopener ugc nofollow" target="_blank">http://saifmohammad.com/WebPages/lexicons.html</a></p></blockquote><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="ea03" class="lj lk iq lf b gy ll lm l ln lo">melted %&gt;%<br/>  group_by(variable) %&gt;%<br/>  ggplot(aes(<br/>    timestamp,<br/>    value,<br/>    color = variable,<br/>    label = variable,<br/>    size = value<br/>  )) +<br/>  geom_point() +<br/>  labs(title = "Scores by different sentiment lexicons",<br/>       x = "",<br/>       y = "") +<br/>  geom_smooth(aes(group = 1))</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi ms"><img src="../Images/3fbb480c45e0c7cf29631b9f43f3b26d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tdi9F4I9M1SmS8lzj152ig.png"/></div></div></figure><p id="99f7" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">结果每天都在变化，但中位数低于零，所以我们可以假设我们的全球新闻不是那么积极。但是让我们来看看情绪的分解。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="a6ce" class="lj lk iq lf b gy ll lm l ln lo">emo_sum %&gt;%<br/>  ggplot(aes(emotion,count, fill=emotion)) +<br/>  geom_col() +<br/>  theme(legend.position = "none",axis.title = element_blank()) +<br/>  labs(title="Recent sentiments on a global news dataset", <br/>       x = "",<br/>       y = ""<br/>  )</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/7d8accd69377777f81a535f8c39904ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*8LhkH2jw3gT_5XAazBm_CQ.png"/></div></figure><p id="76d8" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">我想做的下一件事是另一个主题建模。为此，我们将使用茱莉亚西尔格的精彩教程，她描述了每一步。我们将绘制模型诊断和结果:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="0324" class="lj lk iq lf b gy ll lm l ln lo">#plot result after preprocessing data and modelling (Assumption of 100 models max)</span><span id="32ac" class="lj lk iq lf b gy lp lm l ln lo">k_result %&gt;%<br/>  transmute(K,<br/>            `Lower bound` = lbound,<br/>            Residuals = map_dbl(residual, "dispersion"),<br/>            `Semantic coherence` = map_dbl(semantic_coherence, mean),<br/>            `Held-out likelihood` = map_dbl(eval_heldout, "expected.heldout")) %&gt;%<br/>  gather(Metric, Value, -K) %&gt;%<br/>  ggplot(aes(K, Value, color = Metric)) +<br/>  geom_line(size = 1.5, alpha = 0.7, show.legend = FALSE) +<br/>  facet_wrap(~Metric, scales = "free_y") +<br/>  labs(x = "K (number of topics)",<br/>       y = NULL,<br/>       title = "Model diagnostics by number of topics",<br/>       subtitle = "These diagnostics indicate that a good number of topics would be around 80")</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mu"><img src="../Images/c45bd40e9ce55c45b3204b886e209f55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7mUIXAhPcvW4brY6q1N6jg.png"/></div></div></figure><p id="7c1f" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">正如我们在上面看到的，保留的最大似然值和最小残差值大约是 80 个主题。结果是:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="59a3" class="lj lk iq lf b gy ll lm l ln lo">gamma_terms %&gt;%<br/>  top_n(20, gamma) %&gt;%<br/>  ggplot(aes(topic, gamma, label = terms, fill = topic)) +<br/>  geom_col(show.legend = FALSE) +<br/>  geom_text(hjust = 0, nudge_y = 0.0005, size = 3,<br/>            family = "IBMPlexSans") +<br/>  coord_flip() +<br/>  scale_y_continuous(expand = c(0,0),<br/>                     limits = c(0, 0.09),<br/>                     labels = percent_format()) +<br/>  theme_tufte(base_family = "IBMPlexSans", ticks = FALSE) +<br/>  theme(plot.title = element_text(size = 16,<br/>                                  family="IBMPlexSans-Bold"),<br/>        plot.subtitle = element_text(size = 13)) +<br/>  labs(x = NULL, y = expression(gamma),<br/>       title = "Top 20 topics by prevalence in the our dataset",<br/>       subtitle = "With the top words that contribute to each topic")</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mv"><img src="../Images/f284ddee40e46becd906839ee1326c25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dwVGq8jzlv163nZ5lmRvpw.png"/></div></div></figure><p id="5ad1" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">我想展示的最后一件事是单词云。就像结尾的一个大点:)一张图中的简单和复杂。这条新闻是关于什么的？</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="b5e1" class="lj lk iq lf b gy ll lm l ln lo">wordcloud(data, colors = viridis::viridis_pal(end = 0.8)(10), random.order = FALSE, random.color = TRUE, min.words=10,max.words=Inf,rot.per = 0.3)</span></pre><figure class="la lb lc ld gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mw"><img src="../Images/2f5e36f376b742541c40faf25bbdeff5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u5hkaww1FB9zmcmwJVnISw.png"/></div></div></figure></div><div class="ab cl jn jo hu jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="ij ik il im in"><p id="e52c" class="pw-post-body-paragraph jx jy iq ka b kb kc kd ke kf kg kh ki kx kk kl km ky ko kp kq kz ks kt ku kv ij bi translated">这种类型的数据集有很大的潜力去发现你想知道的任何事情。我们所做的只是分析的一小部分，我认为这是获得一些见解的真正有用的工具。随着不断更新，我们可以随时掌握各种主题及其存在的脉搏。我们可能会识别一些品牌意识、人类行为、外交事务和我们世界中每天发生的许多其他事情。</p></div></div>    
</body>
</html>