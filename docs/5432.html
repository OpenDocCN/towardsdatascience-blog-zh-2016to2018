<html>
<head>
<title>How to Construct an Efficient Portfolio Using The Modern Portfolio Theory in Python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 Python 中运用现代投资组合理论构建高效的投资组合？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-construct-an-efficient-portfolio-using-the-modern-portfolio-theory-in-python-5c5ba2b0cff4?source=collection_archive---------8-----------------------#2018-10-17">https://towardsdatascience.com/how-to-construct-an-efficient-portfolio-using-the-modern-portfolio-theory-in-python-5c5ba2b0cff4?source=collection_archive---------8-----------------------#2018-10-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0ed3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我的<a class="ae kl" href="https://medium.com/@saadahmed387/simple-portfolio-optimization-harry-markowitz-mean-variance-model-using-excel-part-1-efc3f19a347" rel="noopener">上一篇文章</a>中，我们讨论了使用 Harry Markowitz 均值-方差分析构建一个最优的股票投资组合。在这篇文章中，我们将通过为五只股票的组合生成随机投资组合来构建一个有效边界。</p><p id="dc1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那么什么是<em class="km">有效前沿</em>？</p><p id="9c04" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">简而言之，在给定风险水平下，提供最佳投资组合回报的权重组合(财富份额)。</p><p id="b5f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，请看下图，它描绘了使用随机权重生成的数千个随机投资组合回报和波动性。注意到黑色的痕迹了吗？回报较高的是曲线有效的一边，因为在同样的风险水平下，它能提供更多的回报。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/fa9e2df36e30118e728bf9843853923a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*un3SJJdQMHquk7gMK2PV0A.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">Random Portfolios</figcaption></figure><p id="0fc1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以现在我们知道什么是有效边界，因此我们将开始用 Python 来编码它。这篇博文使用的数据可以在<a class="ae kl" href="https://pern-my.sharepoint.com/:x:/g/personal/saad_2078433_talmeez_pk/EfFTVI0F66RMrHwY2IOcep8B4CFK86kcZuD3yVfk4vGgqw?e=sNxiuP" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><pre class="ko kp kq kr gt ld le lf lg aw lh bi"><span id="7209" class="li lj iq le b gy lk ll l lm ln">import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/># loading the returns data</span><span id="aaa7" class="li lj iq le b gy lo ll l lm ln">daily_returns = pd.read_csv("Returns.csv", index_col ="Date")<br/>mean_ret = daily_returns.mean().reshape(4,1)</span><span id="4d82" class="li lj iq le b gy lo ll l lm ln">#Generating a random matrix of 1000 rows and 4 Columns<br/>matrix = np.random.rand(1000,4)</span><span id="d640" class="li lj iq le b gy lo ll l lm ln">#Converting to a data frame<br/>matrix_df = pd.DataFrame(matrix, columns = daily_returns.columns)</span><span id="c359" class="li lj iq le b gy lo ll l lm ln">matrix_sum = matrix_df.sum(axis = 1)</span><span id="057f" class="li lj iq le b gy lo ll l lm ln">#Calculating portfolio weights<br/>weights  = matrix_df.divide(matrix_sum , axis ="rows")</span><span id="4fbf" class="li lj iq le b gy lo ll l lm ln">#transpose<br/>weights_t= np.transpose(weights)</span><span id="0167" class="li lj iq le b gy lo ll l lm ln">#Using the portfolio return formula<br/>portfolio_return = np.dot(weights, mean_ret)</span></pre><p id="c810" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了生成有效边界，我们需要随机投资组合，对于随机投资组合，我们需要随机权重分别乘以它们的平均回报率，以获得投资组合回报。上面的代码块做了需要做的事情。</p><p id="1028" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还需要有效边界的投资组合风险，它是从下面的代码中计算出来的。</p><pre class="ko kp kq kr gt ld le lf lg aw lh bi"><span id="15f3" class="li lj iq le b gy lk ll l lm ln">#Variance covariance<br/>cov_mat = daily_returns.cov()</span><span id="ca51" class="li lj iq le b gy lo ll l lm ln">portfolio_risk = []<br/>for one_port in range(weights.shape[0]):<br/>    <br/>    risk = np.sqrt(np.dot(weights.iloc[one_port,:],np.dot(cov_mat,weights_t.iloc[:,one_port])))<br/>    <br/>    portfolio_risk.append(risk)</span></pre><p id="360a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们已经做好了规划投资组合的一切准备。下面的代码绘制了一个简单的投资组合回报与投资组合风险的散点图。</p><pre class="ko kp kq kr gt ld le lf lg aw lh bi"><span id="b79a" class="li lj iq le b gy lk ll l lm ln">plt.figure(figsize = (10,8))<br/>plt.scatter(portfolio_risk, portfolio_return)</span><span id="0eb4" class="li lj iq le b gy lo ll l lm ln">plt.xlabel("Portfolio Risk - Standard Deviation")<br/>plt.ylabel("Portfolio Return")</span><span id="b0e2" class="li lj iq le b gy lo ll l lm ln">plt.show()</span></pre><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/18ee33a36736eb9d0e6c4fc4726c7b68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*gCKtZeMPDgCLXRu88mgApw.png"/></div></figure><p id="f372" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就这么简单。因为我不习惯用 Python 绘图，所以我决定也用 Tableau 绘图，以获得更好的交互式可视化效果。</p><pre class="ko kp kq kr gt ld le lf lg aw lh bi"><span id="2f76" class="li lj iq le b gy lk ll l lm ln">#converting to a csv file<br/>portfolio_risk = pd.DataFrame(portfolio_risk, columns = ["portfolio risk"])</span><span id="03d6" class="li lj iq le b gy lo ll l lm ln">portfolio_return = pd.DataFrame(portfolio_return, columns = ["portfolio return"])</span><span id="49ee" class="li lj iq le b gy lo ll l lm ln">random_portfolio = pd.concat([portfolio_return, portfolio_risk, weights], axis =1)</span><span id="b849" class="li lj iq le b gy lo ll l lm ln">random_portfolio.to_csv("Random_Portfolios.csv")</span></pre><div class="lq lr gp gr ls lt"><a href="https://public.tableau.com/views/EfficientFrontier/Sheet2?:embed=y&amp;:display_count=yes&amp;publish=yes" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd ir gy z fp ly fr fs lz fu fw ip bi translated">效率限界</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">效率限界</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">高效 Frontierpublic.tableau.com</p></div></div><div class="mc l"><div class="md l me mf mg mc mh kx lt"/></div></div></a></div><p id="1bcb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我将讲述我们如何在投资组合优化以及其他金融领域应用不同的机器学习，而不是仅仅进行价格预测，这在现实中几乎没有实际重要性。</p><p id="76be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">参考资料:</p><p id="abae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" rel="noopener" target="_blank" href="/efficient-frontier-portfolio-optimisation-in-python-e7844051e7f"><strong class="jp ir">https://towards data science . com/efficient-frontier-portfolio-optimization-in-python-e 7844051 e7f</strong></a></p><div class="lq lr gp gr ls lt"><a href="https://medium.com/python-data/efficient-frontier-portfolio-optimization-with-python-part-2-2-2fe23413ad94" rel="noopener follow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd ir gy z fp ly fr fs lz fu fw ip bi translated">用 Python 实现高效前沿和投资组合优化[第 2/2 部分]</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">在这个系列的第一部分，我们看了现代投资组合理论的基础，并产生了一个有效的…</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">medium.com</p></div></div><div class="mc l"><div class="mi l me mf mg mc mh kx lt"/></div></div></a></div><p id="29a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://medium.com/python-data/effient-frontier-in-python-34b0c3043314" rel="noopener">https://medium . com/python-data/efficent-frontier-in-python-34 b0c 3043314</a></p></div></div>    
</body>
</html>