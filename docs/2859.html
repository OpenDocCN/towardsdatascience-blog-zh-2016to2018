<html>
<head>
<title>Accuracy, Precision, Recall or F1?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">准确度、精密度、召回率还是 F1？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/accuracy-precision-recall-or-f1-331fb37c5cb9?source=collection_archive---------0-----------------------#2018-03-15">https://towardsdatascience.com/accuracy-precision-recall-or-f1-331fb37c5cb9?source=collection_archive---------0-----------------------#2018-03-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div class="gh gi io"><img src="../Images/fb064d8588332b3c8a6e551f7a17ff05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*UYb8WqF3VsAn_GRYRPIWGw.jpeg"/></div><figcaption class="iv iw gj gh gi ix iy bd b be z dk">Which metrics to choose?</figcaption></figure><div class=""/><p id="6d4c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我与寻求将数据科学实施到他们的流程中的组织交谈时，他们经常会问这样一个问题:“我如何获得最准确的模型？”。我进一步问道，“你试图用这个模型解决什么样的业务挑战？”我会得到困惑的表情，因为我提出的问题并没有真正回答他们的问题。然后，在我们开始探索准确性是否是我们应该从中选择“最佳”模型的最重要和最终的模型度量标准之前，我需要解释为什么我会问这个问题。</p><p id="8d8a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，我想在这篇博文中解释一下，准确性不一定是科学家们追求的唯一模型指标，也包括对其他指标的简单解释。</p><p id="5b76" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，让我们看看下面的混淆矩阵。模型的精确度是多少？</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div class="gh gi kw"><img src="../Images/0f46acefcc31bcfa797e186dc102c326.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*TS2hsRr528UHQG9nDJhIcA.jpeg"/></div></figure><p id="569d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">很容易，你会注意到这个模型的准确率非常非常高，达到 99.9%！！哇！你中了头奖和圣杯(*尖叫着在房间里跑来跑去，在空中挥舞拳头几次*)！</p><p id="a92a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是…(你知道这是迟早的事，对吗？)如果我提到这里的阳性实际上是一个生病的人，他携带着一种可以快速传播的病毒，会怎么样？还是这里的阳性代表诈骗案？或者这里的阳性代表恐怖分子，模型说它不是恐怖分子？你明白了。在我提出的这三种情况下，错误分类的实际阳性(或假阴性)的成本非常高。</p><p id="3a5d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好了，现在您意识到在选择最佳模型时，准确性并不是最重要的模型指标……接下来呢？</p><h1 id="8aa9" class="lb lc jb bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">精度和召回</strong></h1><p id="bc9c" class="pw-post-body-paragraph jy jz jb ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">让我介绍两个新的度量标准(如果你还没有听说过，如果你听说过，也许只是迁就我一下，继续读下去？:D)</p><p id="3978" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以如果你查看维基百科，你会发现计算<a class="ae me" href="https://en.wikipedia.org/wiki/Precision_and_recall#Definition_(classification_context)" rel="noopener ugc nofollow" target="_blank">精度和召回</a>的公式如下:</p><p id="5f1c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我放在这里做进一步解释。</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/72d02d66505743d4f92b9be10ec853eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*7J08ekAwupLBegeUI8muHA.png"/></div></figure><p id="b8a9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我把混淆矩阵和它的组成部分放在这里。</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mg"><img src="../Images/faaf9b6ef5cd610275e72775b25b2e8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OhEnS-T54Cz0YSTl_c3Dwg.jpeg"/></div></div></figure><p id="9273" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">精密</strong></p><p id="0b29" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">太好了！现在让我们先来看看精度。</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/3ec771ca541adc45bb10b5ec419771c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*HGd3_eAJ3-PlDQvn-xDRdg.png"/></div></figure><p id="519e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你注意到分母是什么？分母其实是预测的总正！所以公式变成了</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mg"><img src="../Images/01e69208f3b05f630f6bce353a3ba773.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PULzWEven_XAZjiMNizDCg.png"/></div></div><figcaption class="iv iw gj gh gi ix iy bd b be z dk">True Positive + False Positive = Total Predicted Positive</figcaption></figure><figure class="kx ky kz la gt is gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/d50c76e25794ea0bdfc8952e6ce6b401.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*C3ctNdO0mde9fa1PFsCVqA.png"/></div></figure><p id="0cea" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以立即看到，Precision 会讨论您的模型在那些预测的正值中有多精确，有多少是实际的正值。</p><p id="0ae7" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当假阳性的代价很高时，精度是确定的好的量度。例如，垃圾邮件检测。在垃圾邮件检测中，误报意味着非垃圾邮件(实际为阴性)被识别为垃圾邮件(预测的垃圾邮件)。如果垃圾邮件检测模型的精度不高，电子邮件用户可能会丢失重要的电子邮件。</p><p id="3660" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">召回</strong></p><p id="69f4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以让我们用同样的逻辑来回忆。回忆一下召回是如何计算的。</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/2322048b1490b62352170634842e18c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*dXkDleGhA-jjZmZ1BlYKXg.png"/></div></figure><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mg"><img src="../Images/d797bd51e5b249987b2918e3d166713d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BBhWQC-m0CLN4sVJ0h5fJQ.jpeg"/></div></div><figcaption class="iv iw gj gh gi ix iy bd b be z dk">True Positive + False Negative = Actual Positive</figcaption></figure><p id="b769" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就对了。因此，Recall 实际上计算了我们的模型通过将其标记为阳性(真阳性)而捕获的实际阳性数量。应用同样的理解，我们知道当存在与假阴性相关联的高成本时，召回将是我们用来选择我们的最佳模型的模型度量。</p><p id="28d4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如在欺诈检测或病人检测中。如果欺诈性交易(实际为正)被预测为非欺诈性交易(预测为负)，那么对银行来说，后果可能非常糟糕。</p><p id="e4ee" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">类似地，在病人检测中。如果一个生病的病人(实际为阳性)通过测试并被预测为没有生病(预测为阴性)。如果疾病是传染性的，与假阴性相关的成本将会非常高。</p><h1 id="7a75" class="lb lc jb bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">F1 分数</h1><p id="3a3e" class="pw-post-body-paragraph jy jz jb ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">现在，如果你阅读大量关于精度和召回率的其他文献，你就不能回避另一个指标，F1，它是精度和召回率的函数。看<a class="ae me" href="https://en.wikipedia.org/wiki/F1_score#Formulation" rel="noopener ugc nofollow" target="_blank">维基百科</a>，公式如下:</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/bdf47fbd9c0a51ce4300c5e4bf930c36.png" data-original-src="https://miro.medium.com/v2/resize:fit:564/format:webp/1*T6kVUKxG_Z4V5Fm1UXhEIw.png"/></div></figure><p id="d202" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当你想在精确度和召回率之间寻求平衡时，F1 分数是需要的。对…那么 F1 的分数和准确性有什么区别呢？我们之前已经看到，准确性在很大程度上取决于大量真阴性，在大多数商业环境中，我们并不太关注这些真阴性，而假阴性和假阳性通常会产生商业成本(有形和无形)，因此，如果我们需要在精确度和召回率之间寻求平衡，并且存在不均匀的类别分布(大量实际阴性)，F1 分数可能是更好的衡量标准。</p><p id="ce94" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望这个解释能帮助那些开始研究数据科学和研究分类问题的人，准确性并不总是选择最佳模型的标准。</p><p id="e859" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">注:</strong>考虑注册我的<a class="ae me" href="https://koopingshung.substack.com/p/coming-soon" rel="noopener ugc nofollow" target="_blank">时事通讯</a>或前往我的<a class="ae me" href="https://koopingshung.com/" rel="noopener ugc nofollow" target="_blank">网站</a>了解最新消息。</p><p id="189c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">祝所有读者有一个愉快的数据科学学习之旅。</p></div></div>    
</body>
</html>